(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("three"),require("vue")):"function"===typeof define&&define.amd?define(["THREE","Vue"],e):"object"===typeof exports?exports["VglDragonbones"]=e(require("three"),require("vue")):t["VglDragonbones"]=e(t[void 0],t[void 0])})("undefined"!==typeof self?self:this,(function(t,e){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="fb15")}({"00ee":function(t,e,r){var a=r("b622"),i=a("toStringTag"),n={};n[i]="z",t.exports="[object z]"===String(n)},"0366":function(t,e,r){var a=r("1c0b");t.exports=function(t,e,r){if(a(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,a){return t.call(e,r,a)};case 3:return function(r,a,i){return t.call(e,r,a,i)}}return function(){return t.apply(e,arguments)}}},"057f":function(t,e,r){var a=r("fc6a"),i=r("241c").f,n={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return i(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==n.call(t)?o(t):i(a(t))}},"06cf":function(t,e,r){var a=r("83ab"),i=r("d1e7"),n=r("5c6c"),s=r("fc6a"),o=r("c04e"),l=r("5135"),h=r("0cfb"),u=Object.getOwnPropertyDescriptor;e.f=a?u:function(t,e){if(t=s(t),e=o(e,!0),h)try{return u(t,e)}catch(r){}if(l(t,e))return n(!i.f.call(t,e),t[e])}},"0b25":function(t,e,r){var a=r("a691"),i=r("50c4");t.exports=function(t){if(void 0===t)return 0;var e=a(t),r=i(e);if(e!==r)throw RangeError("Wrong length or index");return r}},"0cfb":function(t,e,r){var a=r("83ab"),i=r("d039"),n=r("cc12");t.exports=!a&&!i((function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},"145e":function(t,e,r){"use strict";var a=r("7b0b"),i=r("23cb"),n=r("50c4"),s=Math.min;t.exports=[].copyWithin||function(t,e){var r=a(this),o=n(r.length),l=i(t,o),h=i(e,o),u=arguments.length>2?arguments[2]:void 0,f=s((void 0===u?o:i(u,o))-h,o-l),c=1;h<l&&l<h+f&&(c=-1,h+=f-1,l+=f-1);while(f-- >0)h in r?r[l]=r[h]:delete r[l],l+=c,h+=c;return r}},"170b":function(t,e,r){"use strict";var a=r("ebb5"),i=r("50c4"),n=r("23cb"),s=r("4840"),o=a.aTypedArray,l=a.exportTypedArrayMethod;l("subarray",(function(t,e){var r=o(this),a=r.length,l=n(t,a);return new(s(r,r.constructor))(r.buffer,r.byteOffset+l*r.BYTES_PER_ELEMENT,i((void 0===e?a:n(e,a))-l))}))},"182d":function(t,e,r){var a=r("f8cd");t.exports=function(t,e){var r=a(t);if(r%e)throw RangeError("Wrong offset");return r}},"19aa":function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t}},"1be4":function(t,e,r){var a=r("d066");t.exports=a("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,r){var a=r("b622"),i=a("iterator"),n=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){n=!0}};o[i]=function(){return this},Array.from(o,(function(){throw 2}))}catch(l){}t.exports=function(t,e){if(!e&&!n)return!1;var r=!1;try{var a={};a[i]=function(){return{next:function(){return{done:r=!0}}}},t(a)}catch(l){}return r}},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1dde":function(t,e,r){var a=r("d039"),i=r("b622"),n=r("2d00"),s=i("species");t.exports=function(t){return n>=51||!a((function(){var e=[],r=e.constructor={};return r[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"219c":function(t,e,r){"use strict";var a=r("ebb5"),i=a.aTypedArray,n=a.exportTypedArrayMethod,s=[].sort;n("sort",(function(t){return s.call(i(this),t)}))},"23cb":function(t,e,r){var a=r("a691"),i=Math.max,n=Math.min;t.exports=function(t,e){var r=a(t);return r<0?i(r+e,0):n(r,e)}},"23e7":function(t,e,r){var a=r("da84"),i=r("06cf").f,n=r("9112"),s=r("6eeb"),o=r("ce4e"),l=r("e893"),h=r("94ca");t.exports=function(t,e){var r,u,f,c,_,p,m=t.target,d=t.global,y=t.stat;if(u=d?a:y?a[m]||o(m,{}):(a[m]||{}).prototype,u)for(f in e){if(_=e[f],t.noTargetGet?(p=i(u,f),c=p&&p.value):c=u[f],r=h(d?f:m+(y?".":"#")+f,t.forced),!r&&void 0!==c){if(typeof _===typeof c)continue;l(_,c)}(t.sham||c&&c.sham)&&n(_,"sham",!0),s(u,f,_,t)}}},"241c":function(t,e,r){var a=r("ca84"),i=r("7839"),n=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,n)}},"25a1":function(t,e,r){"use strict";var a=r("ebb5"),i=r("d58f").right,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("reduceRight",(function(t){return i(n(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"25f0":function(t,e,r){"use strict";var a=r("6eeb"),i=r("825a"),n=r("d039"),s=r("ad6d"),o="toString",l=RegExp.prototype,h=l[o],u=n((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),f=h.name!=o;(u||f)&&a(RegExp.prototype,o,(function(){var t=i(this),e=String(t.source),r=t.flags,a=String(void 0===r&&t instanceof RegExp&&!("flags"in l)?s.call(t):r);return"/"+e+"/"+a}),{unsafe:!0})},2626:function(t,e,r){"use strict";var a=r("d066"),i=r("9bf2"),n=r("b622"),s=r("83ab"),o=n("species");t.exports=function(t){var e=a(t),r=i.f;s&&e&&!e[o]&&r(e,o,{configurable:!0,get:function(){return this}})}},2954:function(t,e,r){"use strict";var a=r("ebb5"),i=r("4840"),n=r("d039"),s=a.aTypedArray,o=a.aTypedArrayConstructor,l=a.exportTypedArrayMethod,h=[].slice,u=n((function(){new Int8Array(1).slice()}));l("slice",(function(t,e){var r=h.call(s(this),t,e),a=i(this,this.constructor),n=0,l=r.length,u=new(o(a))(l);while(l>n)u[n]=r[n++];return u}),u)},"2d00":function(t,e,r){var a,i,n=r("da84"),s=r("342f"),o=n.process,l=o&&o.versions,h=l&&l.v8;h?(a=h.split("."),i=a[0]+a[1]):s&&(a=s.match(/Edge\/(\d+)/),(!a||a[1]>=74)&&(a=s.match(/Chrome\/(\d+)/),a&&(i=a[1]))),t.exports=i&&+i},3280:function(t,e,r){"use strict";var a=r("ebb5"),i=r("e58c"),n=a.aTypedArray,s=a.exportTypedArrayMethod;s("lastIndexOf",(function(t){return i.apply(n(this),arguments)}))},"342f":function(t,e,r){var a=r("d066");t.exports=a("navigator","userAgent")||""},"35a1":function(t,e,r){var a=r("f5df"),i=r("3f8c"),n=r("b622"),s=n("iterator");t.exports=function(t){if(void 0!=t)return t[s]||t["@@iterator"]||i[a(t)]}},"37e8":function(t,e,r){var a=r("83ab"),i=r("9bf2"),n=r("825a"),s=r("df75");t.exports=a?Object.defineProperties:function(t,e){n(t);var r,a=s(e),o=a.length,l=0;while(o>l)i.f(t,r=a[l++],e[r]);return t}},"3a7b":function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").findIndex,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("findIndex",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},"3b69":function(t,e,r){"use strict";(function(t){r("99af"),r("c975"),r("e260"),r("d81d"),r("a434"),r("c19f"),r("b0c0"),r("d3b7"),r("25f0"),r("cfc3"),r("8b09"),r("5cc6"),r("84c3"),r("fb2c"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7");var a=r("53ca"),i=r("5fda"),n=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();(function(t){var e=function(){function e(e){this._clock=new t.WorldClock,this._events=[],this._objects=[],this._eventManager=null,this._eventManager=e}return e.prototype.advanceTime=function(e){if(this._objects.length>0){for(var r=0,a=this._objects;r<a.length;r++){var i=a[r];i.returnToPool()}this._objects.length=0}if(this._clock.advanceTime(e),this._events.length>0){for(var n=0;n<this._events.length;++n){var s=this._events[n],o=s.armature;null!==o._armatureData&&(o.eventDispatcher.dispatchDBEvent(s.type,s),s.type===t.EventObject.SOUND_EVENT&&this._eventManager.dispatchDBEvent(s.type,s)),this.bufferObject(s)}this._events.length=0}},e.prototype.bufferEvent=function(t){this._events.indexOf(t)<0&&this._events.push(t)},e.prototype.bufferObject=function(t){this._objects.indexOf(t)<0&&this._objects.push(t)},Object.defineProperty(e.prototype,"clock",{get:function(){return this._clock},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventManager",{get:function(){return this._eventManager},enumerable:!1,configurable:!0}),e.VERSION="5.7.000",e.yDown=!0,e.debug=!1,e.debugDraw=!1,e}();t.DragonBones=e})(s||(s={})),console.warn||(console.warn=function(){}),console.assert||(console.assert=function(){}),Date.now||(Date.now=function(){return(new Date).getTime()});var s;n=function(t,e){function r(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);r.prototype=e.prototype,t.prototype=new r};if("undefined"===typeof o&&"undefined"!==typeof window)var o=window;"object"===("undefined"===typeof exports?"undefined":Object(a["a"])(exports))&&"object"===Object(a["a"])(t)?t.exports=s:"function"===typeof define&&r("3c35")?define(["dragonBones"],(function(){return s})):"object"===("undefined"===typeof exports?"undefined":Object(a["a"])(exports))?exports=s:"undefined"!==typeof o&&(o.dragonBones=s),function(t){var e=function(){function t(){this.hashCode=t._hashCode++,this._isInPool=!1}return t._returnObject=function(e){var r=String(e.constructor),a=r in t._maxCountMap?t._maxCountMap[r]:t._defaultMaxCount,i=t._poolsMap[r]=t._poolsMap[r]||[];i.length<a&&(e._isInPool?console.warn("The object is already in the pool."):(e._isInPool=!0,i.push(e)))},t.toString=function(){throw new Error},t.setMaxCount=function(e,r){if((r<0||r!==r)&&(r=0),null!==e){var a=String(e),i=a in t._poolsMap?t._poolsMap[a]:null;null!==i&&i.length>r&&(i.length=r),t._maxCountMap[a]=r}else for(var a in t._defaultMaxCount=r,t._poolsMap){i=t._poolsMap[a];i.length>r&&(i.length=r),a in t._maxCountMap&&(t._maxCountMap[a]=r)}},t.clearPool=function(e){if(void 0===e&&(e=null),null!==e){var r=String(e),a=r in t._poolsMap?t._poolsMap[r]:null;null!==a&&a.length>0&&(a.length=0)}else for(var i in t._poolsMap){a=t._poolsMap[i];a.length=0}},t.borrowObject=function(e){var r=String(e),a=r in t._poolsMap?t._poolsMap[r]:null;if(null!==a&&a.length>0){var i=a.pop();return i._isInPool=!1,i}var n=new e;return n._onClear(),n},t.prototype.returnToPool=function(){this._onClear(),t._returnObject(this)},t._hashCode=0,t._defaultMaxCount=3e3,t._maxCountMap={},t._poolsMap={},t}();t.BaseObject=e}(s||(s={})),function(t){var e=function(){function t(t,e,r,a,i,n){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===a&&(a=1),void 0===i&&(i=0),void 0===n&&(n=0),this.a=t,this.b=e,this.c=r,this.d=a,this.tx=i,this.ty=n}return t.prototype.toString=function(){return"[object dragonBones.Matrix] a:"+this.a+" b:"+this.b+" c:"+this.c+" d:"+this.d+" tx:"+this.tx+" ty:"+this.ty},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.copyFromArray=function(t,e){return void 0===e&&(e=0),this.a=t[e],this.b=t[e+1],this.c=t[e+2],this.d=t[e+3],this.tx=t[e+4],this.ty=t[e+5],this},t.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this},t.prototype.concat=function(t){var e=this.a*t.a,r=0,a=0,i=this.d*t.d,n=this.tx*t.a+t.tx,s=this.ty*t.d+t.ty;return 0===this.b&&0===this.c||(e+=this.b*t.c,r+=this.b*t.d,a+=this.c*t.a,i+=this.c*t.b),0===t.b&&0===t.c||(r+=this.a*t.b,a+=this.d*t.c,n+=this.ty*t.c,s+=this.tx*t.b),this.a=e,this.b=r,this.c=a,this.d=i,this.tx=n,this.ty=s,this},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,a=this.d,i=this.tx,n=this.ty;if(0===e&&0===r)return this.b=this.c=0,0===t||0===a?this.a=this.b=this.tx=this.ty=0:(t=this.a=1/t,a=this.d=1/a,this.tx=-t*i,this.ty=-a*n),this;var s=t*a-e*r;if(0===s)return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this;s=1/s;var o=this.a=a*s;return e=this.b=-e*s,r=this.c=-r*s,a=this.d=t*s,this.tx=-(o*i+r*n),this.ty=-(e*i+a*n),this},t.prototype.transformPoint=function(t,e,r,a){void 0===a&&(a=!1),r.x=this.a*t+this.c*e,r.y=this.b*t+this.d*e,a||(r.x+=this.tx,r.y+=this.ty)},t.prototype.transformRectangle=function(t,e){void 0===e&&(e=!1);var r=this.a,a=this.b,i=this.c,n=this.d,s=e?0:this.tx,o=e?0:this.ty,l=t.x,h=t.y,u=l+t.width,f=h+t.height,c=r*l+i*h+s,_=a*l+n*h+o,p=r*u+i*h+s,m=a*u+n*h+o,d=r*u+i*f+s,y=a*u+n*f+o,g=r*l+i*f+s,v=a*l+n*f+o,b=0;c>p&&(b=c,c=p,p=b),d>g&&(b=d,d=g,g=b),t.x=Math.floor(c<d?c:d),t.width=Math.ceil((p>g?p:g)-t.x),_>m&&(b=_,_=m,m=b),y>v&&(b=y,y=v,v=b),t.y=Math.floor(_<y?_:y),t.height=Math.ceil((m>v?m:v)-t.y)},t}();t.Matrix=e}(s||(s={})),function(t){var e=function(){function t(t,e,r,a,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=1),void 0===n&&(n=1),this.x=t,this.y=e,this.skew=r,this.rotation=a,this.scaleX=i,this.scaleY=n}return t.normalizeRadian=function(t){return t=(t+Math.PI)%(2*Math.PI),t+=t>0?-Math.PI:Math.PI,t},t.prototype.toString=function(){return"[object dragonBones.Transform] x:"+this.x+" y:"+this.y+" skewX:"+180*this.skew/Math.PI+" skewY:"+180*this.rotation/Math.PI+" scaleX:"+this.scaleX+" scaleY:"+this.scaleY},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.skew=t.skew,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this},t.prototype.identity=function(){return this.x=this.y=0,this.skew=this.rotation=0,this.scaleX=this.scaleY=1,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.skew+=t.skew,this.rotation+=t.rotation,this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this},t.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this.skew-=t.skew,this.rotation-=t.rotation,this.scaleX/=t.scaleX,this.scaleY/=t.scaleY,this},t.prototype.fromMatrix=function(e){var r=this.scaleX,a=this.scaleY,i=t.PI_Q;this.x=e.tx,this.y=e.ty,this.rotation=Math.atan(e.b/e.a);var n=Math.atan(-e.c/e.d);return this.scaleX=this.rotation>-i&&this.rotation<i?e.a/Math.cos(this.rotation):e.b/Math.sin(this.rotation),this.scaleY=n>-i&&n<i?e.d/Math.cos(n):-e.c/Math.sin(n),r>=0&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.rotation=this.rotation-Math.PI),a>=0&&this.scaleY<0&&(this.scaleY=-this.scaleY,n-=Math.PI),this.skew=n-this.rotation,this},t.prototype.toMatrix=function(t){return 0===this.rotation?(t.a=1,t.b=0):(t.a=Math.cos(this.rotation),t.b=Math.sin(this.rotation)),0===this.skew?(t.c=-t.b,t.d=t.a):(t.c=-Math.sin(this.skew+this.rotation),t.d=Math.cos(this.skew+this.rotation)),1!==this.scaleX&&(t.a*=this.scaleX,t.b*=this.scaleX),1!==this.scaleY&&(t.c*=this.scaleY,t.d*=this.scaleY),t.tx=this.x,t.ty=this.y,this},t.PI=Math.PI,t.PI_D=2*Math.PI,t.PI_H=Math.PI/2,t.PI_Q=Math.PI/4,t.RAD_DEG=180/Math.PI,t.DEG_RAD=Math.PI/180,t}();t.Transform=e}(s||(s={})),function(t){var e=function(){function t(t,e,r,a,i,n,s,o){void 0===t&&(t=1),void 0===e&&(e=1),void 0===r&&(r=1),void 0===a&&(a=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),this.alphaMultiplier=t,this.redMultiplier=e,this.greenMultiplier=r,this.blueMultiplier=a,this.alphaOffset=i,this.redOffset=n,this.greenOffset=s,this.blueOffset=o}return t.prototype.copyFrom=function(t){this.alphaMultiplier=t.alphaMultiplier,this.redMultiplier=t.redMultiplier,this.greenMultiplier=t.greenMultiplier,this.blueMultiplier=t.blueMultiplier,this.alphaOffset=t.alphaOffset,this.redOffset=t.redOffset,this.greenOffset=t.greenOffset,this.blueOffset=t.blueOffset},t.prototype.identity=function(){this.alphaMultiplier=this.redMultiplier=this.greenMultiplier=this.blueMultiplier=1,this.alphaOffset=this.redOffset=this.greenOffset=this.blueOffset=0},t}();t.ColorTransform=e}(s||(s={})),function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t.prototype.clear=function(){this.x=this.y=0},t}();t.Point=e}(s||(s={})),function(t){var e=function(){function t(t,e,r,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===a&&(a=0),this.x=t,this.y=e,this.width=r,this.height=a}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},t.prototype.clear=function(){this.x=this.y=0,this.width=this.height=0},t}();t.Rectangle=e}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ints=[],e.floats=[],e.strings=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.UserData]"},e.prototype._onClear=function(){this.ints.length=0,this.floats.length=0,this.strings.length=0},e.prototype.addInt=function(t){this.ints.push(t)},e.prototype.addFloat=function(t){this.floats.push(t)},e.prototype.addString=function(t){this.strings.push(t)},e.prototype.getInt=function(t){return void 0===t&&(t=0),t>=0&&t<this.ints.length?this.ints[t]:0},e.prototype.getFloat=function(t){return void 0===t&&(t=0),t>=0&&t<this.floats.length?this.floats[t]:0},e.prototype.getString=function(t){return void 0===t&&(t=0),t>=0&&t<this.strings.length?this.strings[t]:""},e}(t.BaseObject);t.UserData=e;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=null,e}return n(e,t),e.toString=function(){return"[class dragonBones.ActionData]"},e.prototype._onClear=function(){null!==this.data&&this.data.returnToPool(),this.type=0,this.name="",this.bone=null,this.slot=null,this.data=null},e}(t.BaseObject);t.ActionData=r}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameIndices=[],e.cachedFrames=[],e.armatureNames=[],e.armatures={},e.userData=null,e}return n(e,t),e.toString=function(){return"[class dragonBones.DragonBonesData]"},e.prototype._onClear=function(){for(var t in this.armatures)this.armatures[t].returnToPool(),delete this.armatures[t];null!==this.userData&&this.userData.returnToPool(),this.autoSearch=!1,this.frameRate=0,this.version="",this.name="",this.stage=null,this.frameIndices.length=0,this.cachedFrames.length=0,this.armatureNames.length=0,this.binary=null,this.intArray=null,this.floatArray=null,this.frameIntArray=null,this.frameFloatArray=null,this.frameArray=null,this.timelineArray=null,this.colorArray=null,this.userData=null},e.prototype.addArmature=function(t){t.name in this.armatures?console.warn("Same armature: "+t.name):(t.parent=this,this.armatures[t.name]=t,this.armatureNames.push(t.name))},e.prototype.getArmature=function(t){return t in this.armatures?this.armatures[t]:null},e}(t.BaseObject);t.DragonBonesData=e}(s||(s={})),function(t){var e=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.aabb=new t.Rectangle,r.animationNames=[],r.sortedBones=[],r.sortedSlots=[],r.defaultActions=[],r.actions=[],r.bones={},r.slots={},r.constraints={},r.skins={},r.animations={},r.canvas=null,r.userData=null,r}return n(r,e),r.toString=function(){return"[class dragonBones.ArmatureData]"},r.prototype._onClear=function(){for(var t=0,e=this.defaultActions;t<e.length;t++){var r=e[t];r.returnToPool()}for(var a=0,i=this.actions;a<i.length;a++){r=i[a];r.returnToPool()}for(var n in this.bones)this.bones[n].returnToPool(),delete this.bones[n];for(var n in this.slots)this.slots[n].returnToPool(),delete this.slots[n];for(var n in this.constraints)this.constraints[n].returnToPool(),delete this.constraints[n];for(var n in this.skins)this.skins[n].returnToPool(),delete this.skins[n];for(var n in this.animations)this.animations[n].returnToPool(),delete this.animations[n];null!==this.canvas&&this.canvas.returnToPool(),null!==this.userData&&this.userData.returnToPool(),this.type=0,this.frameRate=0,this.cacheFrameRate=0,this.scale=1,this.name="",this.aabb.clear(),this.animationNames.length=0,this.sortedBones.length=0,this.sortedSlots.length=0,this.defaultActions.length=0,this.actions.length=0,this.defaultSkin=null,this.defaultAnimation=null,this.canvas=null,this.userData=null,this.parent=null},r.prototype.sortBones=function(){var t=this.sortedBones.length;if(!(t<=0)){var e=this.sortedBones.concat(),r=0,a=0;this.sortedBones.length=0;while(a<t){var i=e[r++];if(r>=t&&(r=0),!(this.sortedBones.indexOf(i)>=0)){var n=!1;for(var s in this.constraints){var o=this.constraints[s];if(o.root===i&&this.sortedBones.indexOf(o.target)<0){n=!0;break}}n||null!==i.parent&&this.sortedBones.indexOf(i.parent)<0||(this.sortedBones.push(i),a++)}}}},r.prototype.cacheFrames=function(t){if(!(this.cacheFrameRate>0))for(var e in this.cacheFrameRate=t,this.animations)this.animations[e].cacheFrames(this.cacheFrameRate)},r.prototype.setCacheFrame=function(t,e){var r=this.parent.cachedFrames,a=r.length;return r.length+=10,r[a]=t.a,r[a+1]=t.b,r[a+2]=t.c,r[a+3]=t.d,r[a+4]=t.tx,r[a+5]=t.ty,r[a+6]=e.rotation,r[a+7]=e.skew,r[a+8]=e.scaleX,r[a+9]=e.scaleY,a},r.prototype.getCacheFrame=function(t,e,r){var a=this.parent.cachedFrames;t.a=a[r],t.b=a[r+1],t.c=a[r+2],t.d=a[r+3],t.tx=a[r+4],t.ty=a[r+5],e.rotation=a[r+6],e.skew=a[r+7],e.scaleX=a[r+8],e.scaleY=a[r+9],e.x=t.tx,e.y=t.ty},r.prototype.addBone=function(t){t.name in this.bones?console.warn("Same bone: "+t.name):(this.bones[t.name]=t,this.sortedBones.push(t))},r.prototype.addSlot=function(t){t.name in this.slots?console.warn("Same slot: "+t.name):(this.slots[t.name]=t,this.sortedSlots.push(t))},r.prototype.addConstraint=function(t){t.name in this.constraints?console.warn("Same constraint: "+t.name):this.constraints[t.name]=t},r.prototype.addSkin=function(t){t.name in this.skins?console.warn("Same skin: "+t.name):(t.parent=this,this.skins[t.name]=t,null===this.defaultSkin&&(this.defaultSkin=t),"default"===t.name&&(this.defaultSkin=t))},r.prototype.addAnimation=function(t){t.name in this.animations?console.warn("Same animation: "+t.name):(t.parent=this,this.animations[t.name]=t,this.animationNames.push(t.name),null===this.defaultAnimation&&(this.defaultAnimation=t))},r.prototype.addAction=function(t,e){e?this.defaultActions.push(t):this.actions.push(t)},r.prototype.getBone=function(t){return t in this.bones?this.bones[t]:null},r.prototype.getSlot=function(t){return t in this.slots?this.slots[t]:null},r.prototype.getConstraint=function(t){return t in this.constraints?this.constraints[t]:null},r.prototype.getSkin=function(t){return t in this.skins?this.skins[t]:null},r.prototype.getMesh=function(t,e,r){var a=this.getSkin(t);return null===a?null:a.getDisplay(e,r)},r.prototype.getAnimation=function(t){return t in this.animations?this.animations[t]:null},r}(t.BaseObject);t.ArmatureData=e;var r=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.transform=new t.Transform,r.userData=null,r}return n(r,e),r.toString=function(){return"[class dragonBones.BoneData]"},r.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.inheritTranslation=!1,this.inheritRotation=!1,this.inheritScale=!1,this.inheritReflection=!1,this.type=0,this.length=0,this.alpha=1,this.name="",this.transform.identity(),this.userData=null,this.parent=null},r}(t.BaseObject);t.BoneData=r;var a=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.geometry=new t.GeometryData,r}return n(r,e),r.toString=function(){return"[class dragonBones.SurfaceData]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=1,this.segmentX=0,this.segmentY=0,this.geometry.clear()},r}(r);t.SurfaceData=a;var i=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=null,t.userData=null,t}return n(r,e),r.createColor=function(){return new t.ColorTransform},r.toString=function(){return"[class dragonBones.SlotData]"},r.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.blendMode=0,this.displayIndex=0,this.zOrder=0,this.zIndex=0,this.alpha=1,this.name="",this.color=null,this.userData=null,this.parent=null},r.DEFAULT_COLOR=new t.ColorTransform,r}(t.BaseObject);t.SlotData=i}(s||(s={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onClear=function(){this.order=0,this.name="",this.type=0,this.target=null,this.root=null,this.bone=null},e}(t.BaseObject);t.ConstraintData=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.IKConstraintData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.scaleEnabled=!1,this.bendPositive=!1,this.weight=1},e}(e);t.IKConstraintData=r;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bones=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.PathConstraintData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.pathSlot=null,this.pathDisplayData=null,this.bones.length=0,this.positionMode=0,this.spacingMode=1,this.rotateMode=1,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=0,this.translateMix=0},e.prototype.AddBone=function(t){this.bones.push(t)},e}(e);t.PathConstraintData=a}(s||(s={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.CanvasData]"},e.prototype._onClear=function(){this.hasBackground=!1,this.color=0,this.x=0,this.y=0,this.width=0,this.height=0},e}(t.BaseObject);t.CanvasData=e}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displays={},e}return n(e,t),e.toString=function(){return"[class dragonBones.SkinData]"},e.prototype._onClear=function(){for(var t in this.displays){for(var e=this.displays[t],r=0,a=e;r<a.length;r++){var i=a[r];null!==i&&i.returnToPool()}delete this.displays[t]}this.name="",this.parent=null},e.prototype.addDisplay=function(t,e){t in this.displays||(this.displays[t]=[]),null!==e&&(e.parent=this);var r=this.displays[t];r.push(e)},e.prototype.getDisplay=function(t,e){var r=this.getDisplays(t);if(null!==r)for(var a=0,i=r;a<i.length;a++){var n=i[a];if(null!==n&&n.name===e)return n}return null},e.prototype.getDisplays=function(t){return t in this.displays?this.displays[t]:null},e}(t.BaseObject);t.SkinData=e}(s||(s={})),function(t){var e=function(){function t(){this.weight=null}return t.prototype.clear=function(){this.isShared||null===this.weight||this.weight.returnToPool(),this.isShared=!1,this.inheritDeform=!1,this.offset=0,this.data=null,this.weight=null},t.prototype.shareFrom=function(t){this.isShared=!0,this.offset=t.offset,this.weight=t.weight},Object.defineProperty(t.prototype,"vertexCount",{get:function(){var t=this.data.intArray;return t[this.offset+0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"triangleCount",{get:function(){var t=this.data.intArray;return t[this.offset+1]},enumerable:!1,configurable:!0}),t}();t.GeometryData=e;var r=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.transform=new t.Transform,r}return n(r,e),r.prototype._onClear=function(){this.name="",this.path="",this.transform.identity(),this.parent=null},r}(t.BaseObject);t.DisplayData=r;var a=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.pivot=new t.Point,r}return n(r,e),r.toString=function(){return"[class dragonBones.ImageDisplayData]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=0,this.pivot.clear(),this.texture=null},r}(r);t.ImageDisplayData=a;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actions=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.ArmatureDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this);for(var e=0,r=this.actions;e<r.length;e++){var a=r[e];a.returnToPool()}this.type=1,this.inheritAnimation=!1,this.actions.length=0,this.armature=null},e.prototype.addAction=function(t){this.actions.push(t)},e}(r);t.ArmatureDisplayData=i;var s=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.geometry=new e,r}return n(r,t),r.toString=function(){return"[class dragonBones.MeshDisplayData]"},r.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=2,this.geometry.clear(),this.texture=null},r}(r);t.MeshDisplayData=s;var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boundingBox=null,e}return n(e,t),e.toString=function(){return"[class dragonBones.BoundingBoxDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),null!==this.boundingBox&&this.boundingBox.returnToPool(),this.type=3,this.boundingBox=null},e}(r);t.BoundingBoxDisplayData=o;var l=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.geometry=new e,r.curveLengths=[],r}return n(r,t),r.toString=function(){return"[class dragonBones.PathDisplayData]"},r.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=4,this.closed=!1,this.constantSpeed=!1,this.geometry.clear(),this.curveLengths.length=0},r}(r);t.PathDisplayData=l;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bones=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.WeightData]"},e.prototype._onClear=function(){this.count=0,this.offset=0,this.bones.length=0},e.prototype.addBone=function(t){this.bones.push(t)},e}(t.BaseObject);t.WeightData=h}(s||(s={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onClear=function(){this.color=0,this.width=0,this.height=0},e}(t.BaseObject);t.BoundingBoxData=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.RectangleBoundingBoxData]"},e._computeOutCode=function(t,e,r,a,i,n){var s=0;return t<r?s|=1:t>i&&(s|=2),e<a?s|=4:e>n&&(s|=8),s},e.rectangleIntersectsSegment=function(t,r,a,i,n,s,o,l,h,u,f){void 0===h&&(h=null),void 0===u&&(u=null),void 0===f&&(f=null);var c=t>n&&t<o&&r>s&&r<l,_=a>n&&a<o&&i>s&&i<l;if(c&&_)return-1;var p=0,m=e._computeOutCode(t,r,n,s,o,l),d=e._computeOutCode(a,i,n,s,o,l);while(1){if(0===(m|d)){p=2;break}if(0!==(m&d))break;var y=0,g=0,v=0,b=0!==m?m:d;0!==(4&b)?(y=t+(a-t)*(s-r)/(i-r),g=s,null!==f&&(v=.5*-Math.PI)):0!==(8&b)?(y=t+(a-t)*(l-r)/(i-r),g=l,null!==f&&(v=.5*Math.PI)):0!==(2&b)?(g=r+(i-r)*(o-t)/(a-t),y=o,null!==f&&(v=0)):0!==(1&b)&&(g=r+(i-r)*(n-t)/(a-t),y=n,null!==f&&(v=Math.PI)),b===m?(t=y,r=g,m=e._computeOutCode(t,r,n,s,o,l),null!==f&&(f.x=v)):(a=y,i=g,d=e._computeOutCode(a,i,n,s,o,l),null!==f&&(f.y=v))}return p&&(c?(p=2,null!==h&&(h.x=a,h.y=i),null!==u&&(u.x=a,u.y=a),null!==f&&(f.x=f.y+Math.PI)):_?(p=1,null!==h&&(h.x=t,h.y=r),null!==u&&(u.x=t,u.y=r),null!==f&&(f.y=f.x+Math.PI)):(p=3,null!==h&&(h.x=t,h.y=r),null!==u&&(u.x=a,u.y=i))),p},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=0},e.prototype.containsPoint=function(t,e){var r=.5*this.width;if(t>=-r&&t<=r){var a=.5*this.height;if(e>=-a&&e<=a)return!0}return!1},e.prototype.intersectsSegment=function(t,r,a,i,n,s,o){void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=null);var l=.5*this.width,h=.5*this.height,u=e.rectangleIntersectsSegment(t,r,a,i,-l,-h,l,h,n,s,o);return u},e}(e);t.RectangleBoundingBoxData=r;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.EllipseData]"},e.ellipseIntersectsSegment=function(t,e,r,a,i,n,s,o,l,h,u){void 0===l&&(l=null),void 0===h&&(h=null),void 0===u&&(u=null);var f=s/o,c=f*f;e*=f,a*=f;var _=r-t,p=a-e,m=Math.sqrt(_*_+p*p),d=_/m,y=p/m,g=(i-t)*d+(n-e)*y,v=g*g,b=t*t+e*e,D=s*s,T=D-b+v,A=0;if(T>=0){var O=Math.sqrt(T),S=g-O,P=g+O,x=S<0?-1:S<=m?0:1,E=P<0?-1:P<=m?0:1,w=x*E;if(w<0)return-1;0===w&&(-1===x?(A=2,r=t+P*d,a=(e+P*y)/f,null!==l&&(l.x=r,l.y=a),null!==h&&(h.x=r,h.y=a),null!==u&&(u.x=Math.atan2(a/D*c,r/D),u.y=u.x+Math.PI)):1===E?(A=1,t+=S*d,e=(e+S*y)/f,null!==l&&(l.x=t,l.y=e),null!==h&&(h.x=t,h.y=e),null!==u&&(u.x=Math.atan2(e/D*c,t/D),u.y=u.x+Math.PI)):(A=3,null!==l&&(l.x=t+S*d,l.y=(e+S*y)/f,null!==u&&(u.x=Math.atan2(l.y/D*c,l.x/D))),null!==h&&(h.x=t+P*d,h.y=(e+P*y)/f,null!==u&&(u.y=Math.atan2(h.y/D*c,h.x/D)))))}return A},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=1},e.prototype.containsPoint=function(t,e){var r=.5*this.width;if(t>=-r&&t<=r){var a=.5*this.height;if(e>=-a&&e<=a)return e*=r/a,Math.sqrt(t*t+e*e)<=r}return!1},e.prototype.intersectsSegment=function(t,r,a,i,n,s,o){void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=null);var l=e.ellipseIntersectsSegment(t,r,a,i,0,0,.5*this.width,.5*this.height,n,s,o);return l},e}(e);t.EllipseBoundingBoxData=a;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.vertices=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.PolygonBoundingBoxData]"},e.polygonIntersectsSegment=function(t,e,r,a,i,n,s,o){void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=null),t===r&&(t=r+1e-6),e===a&&(e=a+1e-6);for(var l=i.length,h=t-r,u=e-a,f=t*a-e*r,c=0,_=i[l-2],p=i[l-1],m=0,d=0,y=0,g=0,v=0,b=0,D=0;D<l;D+=2){var T=i[D],A=i[D+1];_===T&&(_=T+1e-4),p===A&&(p=A+1e-4);var O=_-T,S=p-A,P=_*A-p*T,x=h*S-u*O,E=(f*O-h*P)/x;if((E>=_&&E<=T||E>=T&&E<=_)&&(0===h||E>=t&&E<=r||E>=r&&E<=t)){var w=(f*S-u*P)/x;if((w>=p&&w<=A||w>=A&&w<=p)&&(0===u||w>=e&&w<=a||w>=a&&w<=e)){if(null===s){y=E,g=w,v=E,b=w,c++,null!==o&&(o.x=Math.atan2(A-p,T-_)-.5*Math.PI,o.y=o.x);break}var M=E-t;M<0&&(M=-M),0===c?(m=M,d=M,y=E,g=w,v=E,b=w,null!==o&&(o.x=Math.atan2(A-p,T-_)-.5*Math.PI,o.y=o.x)):(M<m&&(m=M,y=E,g=w,null!==o&&(o.x=Math.atan2(A-p,T-_)-.5*Math.PI)),M>d&&(d=M,v=E,b=w,null!==o&&(o.y=Math.atan2(A-p,T-_)-.5*Math.PI))),c++}}_=T,p=A}return 1===c?(null!==n&&(n.x=y,n.y=g),null!==s&&(s.x=y,s.y=g),null!==o&&(o.y=o.x+Math.PI)):c>1&&(c++,null!==n&&(n.x=y,n.y=g),null!==s&&(s.x=v,s.y=b)),c},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=2,this.x=0,this.y=0,this.vertices.length=0},e.prototype.containsPoint=function(t,e){var r=!1;if(t>=this.x&&t<=this.width&&e>=this.y&&e<=this.height)for(var a=0,i=this.vertices.length,n=i-2;a<i;a+=2){var s=this.vertices[n+1],o=this.vertices[a+1];if(o<e&&s>=e||s<e&&o>=e){var l=this.vertices[n],h=this.vertices[a];(e-o)*(l-h)/(s-o)+h<t&&(r=!r)}n=a}return r},e.prototype.intersectsSegment=function(t,a,i,n,s,o,l){void 0===s&&(s=null),void 0===o&&(o=null),void 0===l&&(l=null);var h=0;return 0!==r.rectangleIntersectsSegment(t,a,i,n,this.x,this.y,this.x+this.width,this.y+this.height,null,null,null)&&(h=e.polygonIntersectsSegment(t,a,i,n,this.vertices,s,o,l)),h},e}(e);t.PolygonBoundingBoxData=i}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cachedFrames=[],e.boneTimelines={},e.slotTimelines={},e.constraintTimelines={},e.animationTimelines={},e.boneCachedFrameIndices={},e.slotCachedFrameIndices={},e.actionTimeline=null,e.zOrderTimeline=null,e}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationData]"},e.prototype._onClear=function(){for(var t in this.boneTimelines){for(var e=0,r=this.boneTimelines[t];e<r.length;e++){var a=r[e];a.returnToPool()}delete this.boneTimelines[t]}for(var t in this.slotTimelines){for(var i=0,n=this.slotTimelines[t];i<n.length;i++){a=n[i];a.returnToPool()}delete this.slotTimelines[t]}for(var t in this.constraintTimelines){for(var s=0,o=this.constraintTimelines[t];s<o.length;s++){a=o[s];a.returnToPool()}delete this.constraintTimelines[t]}for(var t in this.animationTimelines){for(var l=0,h=this.animationTimelines[t];l<h.length;l++){a=h[l];a.returnToPool()}delete this.animationTimelines[t]}for(var t in this.boneCachedFrameIndices)delete this.boneCachedFrameIndices[t];for(var t in this.slotCachedFrameIndices)delete this.slotCachedFrameIndices[t];null!==this.actionTimeline&&this.actionTimeline.returnToPool(),null!==this.zOrderTimeline&&this.zOrderTimeline.returnToPool(),this.frameIntOffset=0,this.frameFloatOffset=0,this.frameOffset=0,this.blendType=0,this.frameCount=0,this.playTimes=0,this.duration=0,this.scale=1,this.fadeInTime=0,this.cacheFrameRate=0,this.name="",this.cachedFrames.length=0,this.actionTimeline=null,this.zOrderTimeline=null,this.parent=null},e.prototype.cacheFrames=function(t){if(!(this.cacheFrameRate>0)){this.cacheFrameRate=Math.max(Math.ceil(t*this.scale),1);var e=Math.ceil(this.cacheFrameRate*this.duration)+1;this.cachedFrames.length=e;for(var r=0,a=this.cacheFrames.length;r<a;++r)this.cachedFrames[r]=!1;for(var i=0,n=this.parent.sortedBones;i<n.length;i++){var s=n[i],o=new Array(e);for(r=0,a=o.length;r<a;++r)o[r]=-1;this.boneCachedFrameIndices[s.name]=o}for(var l=0,h=this.parent.sortedSlots;l<h.length;l++){var u=h[l];for(o=new Array(e),r=0,a=o.length;r<a;++r)o[r]=-1;this.slotCachedFrameIndices[u.name]=o}}},e.prototype.addBoneTimeline=function(t,e){var r=t in this.boneTimelines?this.boneTimelines[t]:this.boneTimelines[t]=[];r.indexOf(e)<0&&r.push(e)},e.prototype.addSlotTimeline=function(t,e){var r=t in this.slotTimelines?this.slotTimelines[t]:this.slotTimelines[t]=[];r.indexOf(e)<0&&r.push(e)},e.prototype.addConstraintTimeline=function(t,e){var r=t in this.constraintTimelines?this.constraintTimelines[t]:this.constraintTimelines[t]=[];r.indexOf(e)<0&&r.push(e)},e.prototype.addAnimationTimeline=function(t,e){var r=t in this.animationTimelines?this.animationTimelines[t]:this.animationTimelines[t]=[];r.indexOf(e)<0&&r.push(e)},e.prototype.getBoneTimelines=function(t){return t in this.boneTimelines?this.boneTimelines[t]:null},e.prototype.getSlotTimelines=function(t){return t in this.slotTimelines?this.slotTimelines[t]:null},e.prototype.getConstraintTimelines=function(t){return t in this.constraintTimelines?this.constraintTimelines[t]:null},e.prototype.getAnimationTimelines=function(t){return t in this.animationTimelines?this.animationTimelines[t]:null},e.prototype.getBoneCachedFrameIndices=function(t){return t in this.boneCachedFrameIndices?this.boneCachedFrameIndices[t]:null},e.prototype.getSlotCachedFrameIndices=function(t){return t in this.slotCachedFrameIndices?this.slotCachedFrameIndices[t]:null},e}(t.BaseObject);t.AnimationData=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.TimelineData]"},e.prototype._onClear=function(){this.type=10,this.offset=0,this.frameIndicesOffset=-1},e}(t.BaseObject);t.TimelineData=r;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationTimelineData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.x=0,this.y=0},e}(r);t.AnimationTimelineData=a}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boneMask=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationConfig]"},e.prototype._onClear=function(){this.pauseFadeOut=!0,this.fadeOutMode=4,this.fadeOutTweenType=1,this.fadeOutTime=-1,this.actionEnabled=!0,this.additive=!1,this.displayControl=!0,this.pauseFadeIn=!0,this.resetToPose=!0,this.fadeInTweenType=1,this.playTimes=-1,this.layer=0,this.position=0,this.duration=-1,this.timeScale=-100,this.weight=1,this.fadeInTime=-1,this.autoFadeOutTime=-1,this.name="",this.animation="",this.group="",this.boneMask.length=0},e.prototype.clear=function(){this._onClear()},e.prototype.copyFrom=function(t){this.pauseFadeOut=t.pauseFadeOut,this.fadeOutMode=t.fadeOutMode,this.autoFadeOutTime=t.autoFadeOutTime,this.fadeOutTweenType=t.fadeOutTweenType,this.actionEnabled=t.actionEnabled,this.additive=t.additive,this.displayControl=t.displayControl,this.pauseFadeIn=t.pauseFadeIn,this.resetToPose=t.resetToPose,this.playTimes=t.playTimes,this.layer=t.layer,this.position=t.position,this.duration=t.duration,this.timeScale=t.timeScale,this.fadeInTime=t.fadeInTime,this.fadeOutTime=t.fadeOutTime,this.fadeInTweenType=t.fadeInTweenType,this.weight=t.weight,this.name=t.name,this.animation=t.animation,this.group=t.group,this.boneMask.length=t.boneMask.length;for(var e=0,r=this.boneMask.length;e<r;++e)this.boneMask[e]=t.boneMask[e]},e}(t.BaseObject);t.AnimationConfig=e}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textures={},e}return n(e,t),e.prototype._onClear=function(){for(var t in this.textures)this.textures[t].returnToPool(),delete this.textures[t];this.autoSearch=!1,this.width=0,this.height=0,this.scale=1,this.name="",this.imagePath=""},e.prototype.copyFrom=function(t){for(var e in this.autoSearch=t.autoSearch,this.scale=t.scale,this.width=t.width,this.height=t.height,this.name=t.name,this.imagePath=t.imagePath,this.textures)this.textures[e].returnToPool(),delete this.textures[e];for(var e in t.textures){var r=this.createTexture();r.copyFrom(t.textures[e]),this.textures[e]=r}},e.prototype.addTexture=function(t){t.name in this.textures?console.warn("Same texture: "+t.name):(t.parent=this,this.textures[t.name]=t)},e.prototype.getTexture=function(t){return t in this.textures?this.textures[t]:null},e}(t.BaseObject);t.TextureAtlasData=e;var r=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.region=new t.Rectangle,r.frame=null,r}return n(r,e),r.createRectangle=function(){return new t.Rectangle},r.prototype._onClear=function(){this.rotated=!1,this.name="",this.region.clear(),this.parent=null,this.frame=null},r.prototype.copyFrom=function(t){this.rotated=t.rotated,this.name=t.name,this.region.copyFrom(t.region),this.parent=t.parent,null===this.frame&&null!==t.frame?this.frame=r.createRectangle():null!==this.frame&&null===t.frame&&(this.frame=null),null!==this.frame&&null!==t.frame&&this.frame.copyFrom(t.frame)},r}(t.BaseObject);t.TextureData=r}(s||(s={})),function(t){var e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._bones=[],t._slots=[],t._constraints=[],t._actions=[],t._animation=null,t._proxy=null,t._replaceTextureAtlasData=null,t._clock=null,t}return n(r,e),r.toString=function(){return"[class dragonBones.Armature]"},r._onSortSlots=function(t,e){return 1e3*t._zIndex+t._zOrder>1e3*e._zIndex+e._zOrder?1:-1},r.prototype._onClear=function(){null!==this._clock&&this._clock.remove(this);for(var t=0,e=this._bones;t<e.length;t++){var r=e[t];r.returnToPool()}for(var a=0,i=this._slots;a<i.length;a++){var n=i[a];n.returnToPool()}for(var s=0,o=this._constraints;s<o.length;s++){var l=o[s];l.returnToPool()}for(var h=0,u=this._actions;h<u.length;h++){var f=u[h];f.returnToPool()}null!==this._animation&&this._animation.returnToPool(),null!==this._proxy&&this._proxy.dbClear(),null!==this._replaceTextureAtlasData&&this._replaceTextureAtlasData.returnToPool(),this.inheritAnimation=!0,this.userData=null,this._lockUpdate=!1,this._slotsDirty=!0,this._zOrderDirty=!1,this._zIndexDirty=!1,this._alphaDirty=!0,this._flipX=!1,this._flipY=!1,this._cacheFrameIndex=-1,this._alpha=1,this._globalAlpha=1,this._bones.length=0,this._slots.length=0,this._constraints.length=0,this._actions.length=0,this._armatureData=null,this._animation=null,this._proxy=null,this._display=null,this._replaceTextureAtlasData=null,this._replacedTexture=null,this._dragonBones=null,this._clock=null,this._parent=null},r.prototype._sortZOrder=function(t,e){var r=this._armatureData.sortedSlots,a=null===t;if(this._zOrderDirty||!a){for(var i=0,n=r.length;i<n;++i){var s=a?i:t[e+i];if(!(s<0||s>=n)){var o=r[s],l=this.getSlot(o.name);null!==l&&l._setZOrder(i)}}this._slotsDirty=!0,this._zOrderDirty=!a}},r.prototype._addBone=function(t){this._bones.indexOf(t)<0&&this._bones.push(t)},r.prototype._addSlot=function(t){this._slots.indexOf(t)<0&&this._slots.push(t)},r.prototype._addConstraint=function(t){this._constraints.indexOf(t)<0&&this._constraints.push(t)},r.prototype._bufferAction=function(t,e){this._actions.indexOf(t)<0&&(e?this._actions.push(t):this._actions.unshift(t))},r.prototype.dispose=function(){null!==this._armatureData&&(this._lockUpdate=!0,this._dragonBones.bufferObject(this))},r.prototype.init=function(e,r,a,i){null===this._armatureData&&(this._armatureData=e,this._animation=t.BaseObject.borrowObject(t.Animation),this._proxy=r,this._display=a,this._dragonBones=i,this._proxy.dbInit(this),this._animation.init(this),this._animation.animations=this._armatureData.animations)},r.prototype.advanceTime=function(t){if(!this._lockUpdate)if(this._lockUpdate=!0,null!==this._armatureData)if(null!==this._armatureData.parent){var e=this._cacheFrameIndex;if(this._animation.advanceTime(t),this._slotsDirty||this._zIndexDirty){if(this._slots.sort(r._onSortSlots),this._zIndexDirty)for(var a=0,i=this._slots.length;a<i;++a)this._slots[a]._setZOrder(a);this._slotsDirty=!1,this._zIndexDirty=!1}if(this._alphaDirty){this._alphaDirty=!1,this._globalAlpha=this._alpha*(null!==this._parent?this._parent._globalAlpha:1);for(var n=0,s=this._bones;n<s.length;n++){var o=s[n];o._updateAlpha()}for(var l=0,h=this._slots;l<h.length;l++){var u=h[l];u._updateAlpha()}}if(this._cacheFrameIndex<0||this._cacheFrameIndex!==e){a=0,i=0;for(a=0,i=this._bones.length;a<i;++a)this._bones[a].update(this._cacheFrameIndex);for(a=0,i=this._slots.length;a<i;++a)this._slots[a].update(this._cacheFrameIndex)}if(this._actions.length>0){for(var f=0,c=this._actions;f<c.length;f++){var _=c[f],p=_.actionData;if(null!==p&&0===p.type)if(null!==_.slot){var m=_.slot.childArmature;null!==m&&m.animation.fadeIn(p.name)}else if(null!==_.bone)for(var d=0,y=this.getSlots();d<y.length;d++){u=y[d];if(u.parent===_.bone){m=u.childArmature;null!==m&&m.animation.fadeIn(p.name)}}else this._animation.fadeIn(p.name);_.returnToPool()}this._actions.length=0}this._lockUpdate=!1,this._proxy.dbUpdate()}else console.warn("The armature data has been disposed.\nPlease make sure dispose armature before call factory.clear().");else console.warn("The armature has been disposed.")},r.prototype.invalidUpdate=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),null!==t&&t.length>0){var r=this.getBone(t);if(null!==r&&(r.invalidUpdate(),e))for(var a=0,i=this._slots;a<i.length;a++){var n=i[a];n.parent===r&&n.invalidUpdate()}}else{for(var s=0,o=this._bones;s<o.length;s++){r=o[s];r.invalidUpdate()}if(e)for(var l=0,h=this._slots;l<h.length;l++){n=h[l];n.invalidUpdate()}}},r.prototype.containsPoint=function(t,e){for(var r=0,a=this._slots;r<a.length;r++){var i=a[r];if(i.containsPoint(t,e))return i}return null},r.prototype.intersectsSegment=function(t,e,r,a,i,n,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=null);for(var o=t===r,l=0,h=0,u=0,f=0,c=0,_=0,p=0,m=0,d=null,y=null,g=0,v=this._slots;g<v.length;g++){var b=v[g],D=b.intersectsSegment(t,e,r,a,i,n,s);if(D>0){if(null===i&&null===n){d=b;break}if(null!==i){var T=o?i.y-e:i.x-t;T<0&&(T=-T),(null===d||T<l)&&(l=T,u=i.x,f=i.y,d=b,s&&(p=s.x))}if(null!==n){T=n.x-t;T<0&&(T=-T),(null===y||T>h)&&(h=T,c=n.x,_=n.y,y=b,null!==s&&(m=s.y))}}}return null!==d&&null!==i&&(i.x=u,i.y=f,null!==s&&(s.x=p)),null!==y&&null!==n&&(n.x=c,n.y=_,null!==s&&(s.y=m)),d},r.prototype.getBone=function(t){for(var e=0,r=this._bones;e<r.length;e++){var a=r[e];if(a.name===t)return a}return null},r.prototype.getBoneByDisplay=function(t){var e=this.getSlotByDisplay(t);return null!==e?e.parent:null},r.prototype.getSlot=function(t){for(var e=0,r=this._slots;e<r.length;e++){var a=r[e];if(a.name===t)return a}return null},r.prototype.getSlotByDisplay=function(t){if(null!==t)for(var e=0,r=this._slots;e<r.length;e++){var a=r[e];if(a.display===t)return a}return null},r.prototype.getBones=function(){return this._bones},r.prototype.getSlots=function(){return this._slots},Object.defineProperty(r.prototype,"flipX",{get:function(){return this._flipX},set:function(t){this._flipX!==t&&(this._flipX=t,this.invalidUpdate())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"flipY",{get:function(){return this._flipY},set:function(t){this._flipY!==t&&(this._flipY=t,this.invalidUpdate())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cacheFrameRate",{get:function(){return this._armatureData.cacheFrameRate},set:function(t){if(this._armatureData.cacheFrameRate!==t){this._armatureData.cacheFrames(t);for(var e=0,r=this._slots;e<r.length;e++){var a=r[e],i=a.childArmature;null!==i&&(i.cacheFrameRate=t)}}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._armatureData.name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animation",{get:function(){return this._animation},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"proxy",{get:function(){return this._proxy},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"eventDispatcher",{get:function(){return this._proxy},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"display",{get:function(){return this._display},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"replacedTexture",{get:function(){return this._replacedTexture},set:function(t){if(this._replacedTexture!==t){null!==this._replaceTextureAtlasData&&(this._replaceTextureAtlasData.returnToPool(),this._replaceTextureAtlasData=null),this._replacedTexture=t;for(var e=0,r=this._slots;e<r.length;e++){var a=r[e];a.invalidUpdate(),a.update(-1)}}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clock",{get:function(){return this._clock},set:function(t){if(this._clock!==t){null!==this._clock&&this._clock.remove(this),this._clock=t,this._clock&&this._clock.add(this);for(var e=0,r=this._slots;e<r.length;e++){var a=r[e],i=a.childArmature;null!==i&&(i.clock=this._clock)}}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),r.prototype.getDisplay=function(){return this._display},r}(t.BaseObject);t.Armature=e}(s||(s={})),function(t){var e=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.globalTransformMatrix=new t.Matrix,r.global=new t.Transform,r.offset=new t.Transform,r}return n(r,e),r.prototype._onClear=function(){this.globalTransformMatrix.identity(),this.global.identity(),this.offset.identity(),this.origin=null,this.userData=null,this._globalDirty=!1,this._alpha=1,this._globalAlpha=1,this._armature=null},r.prototype.updateGlobalTransform=function(){this._globalDirty&&(this._globalDirty=!1,this.global.fromMatrix(this.globalTransformMatrix))},Object.defineProperty(r.prototype,"armature",{get:function(){return this._armature},enumerable:!1,configurable:!0}),r._helpMatrix=new t.Matrix,r._helpTransform=new t.Transform,r._helpPoint=new t.Point,r}(t.BaseObject);t.TransformObject=e}(s||(s={})),function(t){var e=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.animationPose=new t.Transform,r}return n(r,e),r.toString=function(){return"[class dragonBones.Bone]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),this.offsetMode=1,this.animationPose.identity(),this._transformDirty=!1,this._childrenTransformDirty=!1,this._localDirty=!0,this._hasConstraint=!1,this._visible=!0,this._cachedFrameIndex=-1,this._boneData=null,this._parent=null,this._cachedFrameIndices=null},r.prototype._updateGlobalTransformMatrix=function(e){var r=this._boneData,a=this.global,i=this.globalTransformMatrix,n=this.origin,s=this.offset,o=this.animationPose,l=this._parent,h=this._armature.flipX,u=this._armature.flipY===t.DragonBones.yDown,f=null!==l,c=0;if(1===this.offsetMode?null!==n?(a.x=n.x+s.x+o.x,a.scaleX=n.scaleX*s.scaleX*o.scaleX,a.scaleY=n.scaleY*s.scaleY*o.scaleY,t.DragonBones.yDown?(a.y=n.y+s.y+o.y,a.skew=n.skew+s.skew+o.skew,a.rotation=n.rotation+s.rotation+o.rotation):(a.y=n.y-s.y+o.y,a.skew=n.skew-s.skew+o.skew,a.rotation=n.rotation-s.rotation+o.rotation)):(a.copyFrom(s),t.DragonBones.yDown||(a.y=-a.y,a.skew=-a.skew,a.rotation=-a.rotation),a.add(o)):0===this.offsetMode?null!==n?a.copyFrom(n).add(o):a.copyFrom(o):(f=!1,a.copyFrom(s),t.DragonBones.yDown||(a.y=-a.y,a.skew=-a.skew,a.rotation=-a.rotation)),f){var _=1===l._boneData.type,p=_?l._bone:null,m=_?l._getGlobalTransformMatrix(a.x,a.y):l.globalTransformMatrix;if(!r.inheritScale||_&&null===p){if(r.inheritTranslation){var d=a.x,y=a.y;a.x=m.a*d+m.c*y+m.tx,a.y=m.b*d+m.d*y+m.ty}else h&&(a.x=-a.x),u&&(a.y=-a.y);r.inheritRotation?(l.updateGlobalTransform(),c=l.global.scaleX<0?a.rotation+l.global.rotation+Math.PI:a.rotation+l.global.rotation,m.a*m.d-m.b*m.c<0&&(c-=2*a.rotation,(h!==u||r.inheritReflection)&&(a.skew+=Math.PI),t.DragonBones.yDown||(a.skew=-a.skew)),a.rotation=c):(h||u)&&(h&&u?c=a.rotation+Math.PI:(c=h?Math.PI-a.rotation:-a.rotation,a.skew+=Math.PI),a.rotation=c),a.toMatrix(i)}else _?(r.inheritRotation&&(a.rotation+=l.global.rotation),p.updateGlobalTransform(),a.scaleX*=p.global.scaleX,a.scaleY*=p.global.scaleY,m.transformPoint(a.x,a.y,a),a.toMatrix(i),r.inheritTranslation?(a.x=i.tx,a.y=i.ty):(i.tx=a.x,i.ty=a.y)):(r.inheritRotation||(l.updateGlobalTransform(),c=h&&u?a.rotation-(l.global.rotation+Math.PI):h?a.rotation+l.global.rotation+Math.PI:u?a.rotation+l.global.rotation:a.rotation-l.global.rotation,a.rotation=c),a.toMatrix(i),i.concat(m),r.inheritTranslation?(a.x=i.tx,a.y=i.ty):(i.tx=a.x,i.ty=a.y),e?a.fromMatrix(i):this._globalDirty=!0)}else(h||u)&&(h&&(a.x=-a.x),u&&(a.y=-a.y),h&&u?c=a.rotation+Math.PI:(c=h?Math.PI-a.rotation:-a.rotation,a.skew+=Math.PI),a.rotation=c),a.toMatrix(i)},r.prototype._updateAlpha=function(){null!==this._parent?this._globalAlpha=this._alpha*this._parent._globalAlpha:this._globalAlpha=this._alpha*this._armature._globalAlpha},r.prototype.init=function(t,e){null===this._boneData&&(this._boneData=t,this._armature=e,this._alpha=this._boneData.alpha,null!==this._boneData.parent&&(this._parent=this._armature.getBone(this._boneData.parent.name)),this._armature._addBone(this),this.origin=this._boneData.transform)},r.prototype.update=function(t){if(t>=0&&null!==this._cachedFrameIndices){var e=this._cachedFrameIndices[t];if(e>=0&&this._cachedFrameIndex===e)this._transformDirty=!1;else if(e>=0)this._transformDirty=!0,this._cachedFrameIndex=e;else{if(this._hasConstraint)for(var r=0,a=this._armature._constraints;r<a.length;r++){var i=a[r];i._root===this&&i.update()}this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var n=0,s=this._armature._constraints;n<s.length;n++){i=s[n];i._root===this&&i.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty)if(this._transformDirty=!1,this._childrenTransformDirty=!0,this._cachedFrameIndex<0){var o=t>=0;this._localDirty&&this._updateGlobalTransformMatrix(o),o&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},r.prototype.updateByConstraint=function(){this._localDirty&&(this._localDirty=!1,(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&this._updateGlobalTransformMatrix(!0),this._transformDirty=!0)},r.prototype.invalidUpdate=function(){this._transformDirty=!0},r.prototype.contains=function(t){if(t===this)return!1;var e=t;while(e!==this&&null!==e)e=e.parent;return e===this},Object.defineProperty(r.prototype,"boneData",{get:function(){return this._boneData},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"visible",{get:function(){return this._visible},set:function(t){if(this._visible!==t){this._visible=t;for(var e=0,r=this._armature.getSlots();e<r.length;e++){var a=r[e];a.parent===this&&a._updateVisible()}}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._boneData.name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),r}(t.TransformObject);t.Bone=e}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._vertices=[],e._deformVertices=[],e._hullCache=[],e._matrixCahce=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.Surface]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._dX=0,this._dY=0,this._k=0,this._kX=0,this._kY=0,this._vertices.length=0,this._deformVertices.length=0,this._matrixCahce.length=0,this._hullCache.length=0,this._bone=null},e.prototype._getAffineTransform=function(t,e,r,a,i,n,s,o,l,h,u,f,c){var _=s-i,p=o-n,m=l-i,d=h-n;u.rotation=Math.atan2(p,_),u.skew=Math.atan2(d,m)-.5*Math.PI-u.rotation,c&&(u.rotation+=Math.PI),u.scaleX=Math.sqrt(_*_+p*p)/r,u.scaleY=Math.sqrt(m*m+d*d)/a,u.toMatrix(f),u.x=f.tx=i-(f.a*t+f.c*e),u.y=f.ty=n-(f.b*t+f.d*e)},e.prototype._updateVertices=function(){var t=this._armature.armatureData.parent,e=this._boneData.geometry,r=t.intArray,a=t.floatArray,i=r[e.offset+0],n=r[e.offset+2],s=this._vertices,o=this._deformVertices;if(null!==this._parent)if(1===this._parent._boneData.type)for(var l=0,h=i;l<h;++l){var u=2*l,f=a[n+u]+o[u],c=a[n+u+1]+o[u+1],_=this._parent._getGlobalTransformMatrix(f,c);s[u]=_.a*f+_.c*c+_.tx,s[u+1]=_.b*f+_.d*c+_.ty}else{var p=this._parent.globalTransformMatrix;for(l=0,h=i;l<h;++l){u=2*l,f=a[n+u]+o[u],c=a[n+u+1]+o[u+1];s[u]=p.a*f+p.c*c+p.tx,s[u+1]=p.b*f+p.d*c+p.ty}}else for(l=0,h=i;l<h;++l){u=2*l;s[u]=a[n+u]+o[u],s[u+1]=a[n+u+1]+o[u+1]}},e.prototype._updateGlobalTransformMatrix=function(t){var e=2*this._boneData.segmentX,r=this._vertices.length-2,a=200,i=this._vertices[0],n=this._vertices[1],s=this._vertices[e],o=this._vertices[e+1],l=this._vertices[r],h=this._vertices[r+1],u=this._vertices[r-e],f=this._vertices[r-e+1],c=i+.5*(l-i),_=n+.5*(h-n),p=s+.5*(u-s),m=o+.5*(f-o),d=c+.5*(p-c),y=_+.5*(m-_),g=s+.5*(l-s),v=o+.5*(h-o),b=u+.5*(l-u),D=f+.5*(h-f);this._getAffineTransform(0,0,a,a,d,y,g,v,b,D,this.global,this.globalTransformMatrix,!1),this._globalDirty=!1},e.prototype._getGlobalTransformMatrix=function(t,r){var a=200,i=1e3;if(t<-i||i<t||r<-i||i<r)return this.globalTransformMatrix;var n=!1,s=this._boneData,o=s.segmentX,l=s.segmentY,h=2*s.segmentX,u=this._dX,f=this._dY,c=Math.floor((t+a)/u),_=Math.floor((r+a)/f),p=0,m=c*u-a,d=_*f-a,y=this._matrixCahce,g=e._helpMatrix;if(t<-a){if(r<-a||r>=a)return this.globalTransformMatrix;if(n=r>this._kX*(t+a)+d,p=7*(2*(o*l+o+l+l+_)+(n?1:0)),y[p]>0)g.copyFromArray(y,p+1);else{var v=_*(h+2),b=this._hullCache[4],D=this._hullCache[5],T=this._hullCache[2]-(l-_)*b,A=this._hullCache[3]-(l-_)*D,O=this._vertices;n?this._getAffineTransform(-a,d+f,i-a,f,O[v+h+2],O[v+h+3],T+b,A+D,O[v],O[v+1],e._helpTransform,g,!0):this._getAffineTransform(-i,d,i-a,f,T,A,O[v],O[v+1],T+b,A+D,e._helpTransform,g,!1),y[p]=1,y[p+1]=g.a,y[p+2]=g.b,y[p+3]=g.c,y[p+4]=g.d,y[p+5]=g.tx,y[p+6]=g.ty}}else if(t>=a){if(r<-a||r>=a)return this.globalTransformMatrix;if(n=r>this._kX*(t-i)+d,p=7*(2*(o*l+o+_)+(n?1:0)),y[p]>0)g.copyFromArray(y,p+1);else{v=(_+1)*(h+2)-2,b=this._hullCache[4],D=this._hullCache[5],T=this._hullCache[0]+_*b,A=this._hullCache[1]+_*D,O=this._vertices;n?this._getAffineTransform(i,d+f,i-a,f,T+b,A+D,O[v+h+2],O[v+h+3],T,A,e._helpTransform,g,!0):this._getAffineTransform(a,d,i-a,f,O[v],O[v+1],T,A,O[v+h+2],O[v+h+3],e._helpTransform,g,!1),y[p]=1,y[p+1]=g.a,y[p+2]=g.b,y[p+3]=g.c,y[p+4]=g.d,y[p+5]=g.tx,y[p+6]=g.ty}}else if(r<-a){if(t<-a||t>=a)return this.globalTransformMatrix;if(n=r>this._kY*(t-m-u)-i,p=7*(2*(o*l+c)+(n?1:0)),y[p]>0)g.copyFromArray(y,p+1);else{v=2*c,b=this._hullCache[10],D=this._hullCache[11],T=this._hullCache[8]+c*b,A=this._hullCache[9]+c*D,O=this._vertices;n?this._getAffineTransform(m+u,-a,u,i-a,O[v+2],O[v+3],O[v],O[v+1],T+b,A+D,e._helpTransform,g,!0):this._getAffineTransform(m,-i,u,i-a,T,A,T+b,A+D,O[v],O[v+1],e._helpTransform,g,!1),y[p]=1,y[p+1]=g.a,y[p+2]=g.b,y[p+3]=g.c,y[p+4]=g.d,y[p+5]=g.tx,y[p+6]=g.ty}}else if(r>=a){if(t<-a||t>=a)return this.globalTransformMatrix;if(n=r>this._kY*(t-m-u)+a,p=7*(2*(o*l+o+l+c)+(n?1:0)),y[p]>0)g.copyFromArray(y,p+1);else{v=l*(h+2)+2*c,b=this._hullCache[10],D=this._hullCache[11],T=this._hullCache[6]-(o-c)*b,A=this._hullCache[7]-(o-c)*D,O=this._vertices;n?this._getAffineTransform(m+u,i,u,i-a,T+b,A+D,T,A,O[v+2],O[v+3],e._helpTransform,g,!0):this._getAffineTransform(m,a,u,i-a,O[v],O[v+1],O[v+2],O[v+3],T,A,e._helpTransform,g,!1),y[p]=1,y[p+1]=g.a,y[p+2]=g.b,y[p+3]=g.c,y[p+4]=g.d,y[p+5]=g.tx,y[p+6]=g.ty}}else if(n=r>this._k*(t-m-u)+d,p=7*(2*(o*_+c)+(n?1:0)),y[p]>0)g.copyFromArray(y,p+1);else{v=2*c+_*(h+2),O=this._vertices;n?this._getAffineTransform(m+u,d+f,u,f,O[v+h+4],O[v+h+5],O[v+h+2],O[v+h+3],O[v+2],O[v+3],e._helpTransform,g,!0):this._getAffineTransform(m,d,u,f,O[v],O[v+1],O[v+2],O[v+3],O[v+h+2],O[v+h+3],e._helpTransform,g,!1),y[p]=1,y[p+1]=g.a,y[p+2]=g.b,y[p+3]=g.c,y[p+4]=g.d,y[p+5]=g.tx,y[p+6]=g.ty}return g},e.prototype.init=function(e,r){if(null===this._boneData){t.prototype.init.call(this,e,r);var a=e.segmentX,i=e.segmentY,n=this._armature.armatureData.parent.intArray[e.geometry.offset+0],s=1e3,o=200;this._dX=2*o/a,this._dY=2*o/i,this._k=-this._dY/this._dX,this._kX=-this._dY/(s-o),this._kY=-(s-o)/this._dX,this._vertices.length=2*n,this._deformVertices.length=2*n,this._matrixCahce.length=2*(a*i+2*a+2*i)*7,this._hullCache.length=10;for(var l=0;l<2*n;++l)this._deformVertices[l]=0;null!==this._parent&&(0===this._parent.boneData.type?this._bone=this._parent:this._bone=this._parent._bone)}},e.prototype.update=function(t){if(t>=0&&null!==this._cachedFrameIndices){var r=this._cachedFrameIndices[t];if(r>=0&&this._cachedFrameIndex===r)this._transformDirty=!1;else if(r>=0)this._transformDirty=!0,this._cachedFrameIndex=r;else{if(this._hasConstraint)for(var a=0,i=this._armature._constraints;a<i.length;a++){var n=i[a];n._root===this&&n.update()}this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var s=0,o=this._armature._constraints;s<o.length;s++){n=o[s];n._root===this&&n.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty){this._transformDirty=!1,this._childrenTransformDirty=!0;for(var l=0,h=this._matrixCahce.length;l<h;l+=7)this._matrixCahce[l]=-1;if(this._updateVertices(),this._cachedFrameIndex<0){var u=t>=0;this._localDirty&&this._updateGlobalTransformMatrix(u),u&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);var f=1e3,c=200,_=2*this.global.x,p=2*this.global.y,m=e._helpPoint;this.globalTransformMatrix.transformPoint(f,-c,m),this._hullCache[0]=m.x,this._hullCache[1]=m.y,this._hullCache[2]=_-m.x,this._hullCache[3]=p-m.y,this.globalTransformMatrix.transformPoint(0,this._dY,m,!0),this._hullCache[4]=m.x,this._hullCache[5]=m.y,this.globalTransformMatrix.transformPoint(c,f,m),this._hullCache[6]=m.x,this._hullCache[7]=m.y,this._hullCache[8]=_-m.x,this._hullCache[9]=p-m.y,this.globalTransformMatrix.transformPoint(this._dX,0,m,!0),this._hullCache[10]=m.x,this._hullCache[11]=m.y}else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},e}(t.Bone);t.Surface=e}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.deformVertices=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.DisplayFrame]"},e.prototype._onClear=function(){this.rawDisplayData=null,this.displayData=null,this.textureData=null,this.display=null,this.deformVertices.length=0},e.prototype.updateDeformVertices=function(){if(null!==this.rawDisplayData&&0===this.deformVertices.length){var t;if(2===this.rawDisplayData.type)t=this.rawDisplayData.geometry;else{if(4!==this.rawDisplayData.type)return;t=this.rawDisplayData.geometry}var e=0;e=null!==t.weight?2*t.weight.count:2*t.data.intArray[t.offset+0],this.deformVertices.length=e;for(var r=0,a=this.deformVertices.length;r<a;++r)this.deformVertices[r]=0}},e.prototype.getGeometryData=function(){if(null!==this.displayData){if(2===this.displayData.type)return this.displayData.geometry;if(4===this.displayData.type)return this.displayData.geometry}if(null!==this.rawDisplayData){if(2===this.rawDisplayData.type)return this.rawDisplayData.geometry;if(4===this.rawDisplayData.type)return this.rawDisplayData.geometry}return null},e.prototype.getBoundingBox=function(){return null!==this.displayData&&3===this.displayData.type?this.displayData.boundingBox:null!==this.rawDisplayData&&3===this.rawDisplayData.type?this.rawDisplayData.boundingBox:null},e.prototype.getTextureData=function(){if(null!==this.displayData){if(0===this.displayData.type)return this.displayData.texture;if(2===this.displayData.type)return this.displayData.texture}if(null!==this.textureData)return this.textureData;if(null!==this.rawDisplayData){if(0===this.rawDisplayData.type)return this.rawDisplayData.texture;if(2===this.rawDisplayData.type)return this.rawDisplayData.texture}return null},e}(t.BaseObject);t.DisplayFrame=e;var r=function(r){function a(){var e=null!==r&&r.apply(this,arguments)||this;return e._localMatrix=new t.Matrix,e._colorTransform=new t.ColorTransform,e._displayFrames=[],e._geometryBones=[],e._rawDisplay=null,e._meshDisplay=null,e._display=null,e}return n(a,r),a.prototype._onClear=function(){r.prototype._onClear.call(this);for(var e=[],a=0,i=this._displayFrames;a<i.length;a++){var n=i[a],s=n.display;s!==this._rawDisplay&&s!==this._meshDisplay&&e.indexOf(s)<0&&e.push(s),n.returnToPool()}for(var o=0,l=e;o<l.length;o++){var h=l[o];h instanceof t.Armature?h.dispose():this._disposeDisplay(h,!0)}null!==this._meshDisplay&&this._meshDisplay!==this._rawDisplay&&this._disposeDisplay(this._meshDisplay,!1),null!==this._rawDisplay&&this._disposeDisplay(this._rawDisplay,!1),this.displayController=null,this._displayDataDirty=!1,this._displayDirty=!1,this._geometryDirty=!1,this._textureDirty=!1,this._visibleDirty=!1,this._blendModeDirty=!1,this._zOrderDirty=!1,this._colorDirty=!1,this._verticesDirty=!1,this._transformDirty=!1,this._visible=!0,this._blendMode=0,this._displayIndex=-1,this._animationDisplayIndex=-1,this._zOrder=0,this._zIndex=0,this._cachedFrameIndex=-1,this._pivotX=0,this._pivotY=0,this._localMatrix.identity(),this._colorTransform.identity(),this._displayFrames.length=0,this._geometryBones.length=0,this._slotData=null,this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._rawDisplay=null,this._meshDisplay=null,this._display=null,this._childArmature=null,this._parent=null,this._cachedFrameIndices=null},a.prototype._hasDisplay=function(t){for(var e=0,r=this._displayFrames;e<r.length;e++){var a=r[e];if(a.display===t)return!0}return!1},a.prototype._isBonesUpdate=function(){for(var t=0,e=this._geometryBones;t<e.length;t++){var r=e[t];if(null!==r&&r._childrenTransformDirty)return!0}return!1},a.prototype._updateAlpha=function(){var t=this._alpha*this._parent._globalAlpha;this._globalAlpha!==t&&(this._globalAlpha=t,this._colorDirty=!0)},a.prototype._updateDisplayData=function(){var e=this._displayFrame,r=this._geometryData,i=this._textureData,n=null,s=null;if(this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._displayIndex>=0&&this._displayIndex<this._displayFrames.length&&(this._displayFrame=this._displayFrames[this._displayIndex],n=this._displayFrame.rawDisplayData,s=this._displayFrame.displayData,this._geometryData=this._displayFrame.getGeometryData(),this._boundingBoxData=this._displayFrame.getBoundingBox(),this._textureData=this._displayFrame.getTextureData()),this._displayFrame!==e||this._geometryData!==r||this._textureData!==i){if(null===this._geometryData&&null!==this._textureData){var o=null!==s&&0===s.type?s:n,l=this._textureData.parent.scale*this._armature._armatureData.scale,h=this._textureData.frame;this._pivotX=o.pivot.x,this._pivotY=o.pivot.y;var u=null!==h?h:this._textureData.region,f=u.width,c=u.height;this._textureData.rotated&&null===h&&(f=u.height,c=u.width),this._pivotX*=f*l,this._pivotY*=c*l,null!==h&&(this._pivotX+=h.x*l,this._pivotY+=h.y*l),null!==n&&o!==n&&(n.transform.toMatrix(a._helpMatrix),a._helpMatrix.invert(),a._helpMatrix.transformPoint(0,0,a._helpPoint),this._pivotX-=a._helpPoint.x,this._pivotY-=a._helpPoint.y,o.transform.toMatrix(a._helpMatrix),a._helpMatrix.invert(),a._helpMatrix.transformPoint(0,0,a._helpPoint),this._pivotX+=a._helpPoint.x,this._pivotY+=a._helpPoint.y),t.DragonBones.yDown||(this._pivotY=(this._textureData.rotated?this._textureData.region.width:this._textureData.region.height)*l-this._pivotY)}else this._pivotX=0,this._pivotY=0;if(this.origin=null!==n?n.transform:null!==s?s.transform:null,null!==this.origin?this.global.copyFrom(this.origin).add(this.offset).toMatrix(this._localMatrix):this.global.copyFrom(this.offset).toMatrix(this._localMatrix),this._geometryData!==r)if(this._geometryDirty=!0,this._verticesDirty=!0,null!==this._geometryData){if(this._geometryBones.length=0,null!==this._geometryData.weight)for(var _=0,p=this._geometryData.weight.bones.length;_<p;++_){var m=this._armature.getBone(this._geometryData.weight.bones[_].name);this._geometryBones.push(m)}}else this._geometryBones.length=0,this._geometryData=null;this._textureDirty=this._textureData!==i,this._transformDirty=!0}},a.prototype._updateDisplay=function(){var e=null!==this._display?this._display:this._rawDisplay,r=this._childArmature;null!==this._displayFrame?(this._display=this._displayFrame.display,null!==this._display&&this._display instanceof t.Armature?(this._childArmature=this._display,this._display=this._childArmature.display):this._childArmature=null):(this._display=null,this._childArmature=null);var a=null!==this._display?this._display:this._rawDisplay;if(a!==e&&(this._textureDirty=!0,this._visibleDirty=!0,this._blendModeDirty=!0,this._colorDirty=!0,this._transformDirty=!0,this._onUpdateDisplay(),this._replaceDisplay(e)),this._childArmature!==r&&(null!==r&&(r._parent=null,r.clock=null,r.inheritAnimation&&r.animation.reset()),null!==this._childArmature&&(this._childArmature._parent=this,this._childArmature.clock=this._armature.clock,this._childArmature.inheritAnimation))){if(0===this._childArmature.cacheFrameRate){var i=this._armature.cacheFrameRate;0!==i&&(this._childArmature.cacheFrameRate=i)}if(null!==this._displayFrame){var n=null,s=null!==this._displayFrame.displayData?this._displayFrame.displayData:this._displayFrame.rawDisplayData;if(null!==s&&1===s.type&&(n=s.actions),null!==n&&n.length>0)for(var o=0,l=n;o<l.length;o++){var h=l[o],u=t.BaseObject.borrowObject(t.EventObject);t.EventObject.actionDataToInstance(h,u,this._armature),u.slot=this,this._armature._bufferAction(u,!1)}else this._childArmature.animation.play()}}},a.prototype._updateGlobalTransformMatrix=function(t){var e=0===this._parent._boneData.type?this._parent.globalTransformMatrix:this._parent._getGlobalTransformMatrix(this.global.x,this.global.y);this.globalTransformMatrix.copyFrom(this._localMatrix),this.globalTransformMatrix.concat(e),t?this.global.fromMatrix(this.globalTransformMatrix):this._globalDirty=!0},a.prototype._setDisplayIndex=function(t,e){if(void 0===e&&(e=!1),e){if(this._animationDisplayIndex===t)return;this._animationDisplayIndex=t}this._displayIndex!==t&&(this._displayIndex=t<this._displayFrames.length?t:this._displayFrames.length-1,this._displayDataDirty=!0,this._displayDirty=this._displayIndex<0||this._display!==this._displayFrames[this._displayIndex].display)},a.prototype._setZOrder=function(t){return this._zOrder,this._zOrder=t,this._zOrderDirty=!0,this._zOrderDirty},a.prototype._setColor=function(t){return this._colorTransform.copyFrom(t),this._colorDirty=!0},a.prototype.init=function(t,e,r,a){if(null===this._slotData){this._slotData=t,this._colorDirty=!0,this._blendModeDirty=!0,this._blendMode=this._slotData.blendMode,this._zOrder=this._slotData.zOrder,this._zIndex=this._slotData.zIndex,this._alpha=this._slotData.alpha,this._colorTransform.copyFrom(this._slotData.color),this._rawDisplay=r,this._meshDisplay=a,this._armature=e;var i=this._armature.getBone(this._slotData.parent.name);null!==i&&(this._parent=i),this._armature._addSlot(this),this._initDisplay(this._rawDisplay,!1),this._rawDisplay!==this._meshDisplay&&this._initDisplay(this._meshDisplay,!1),this._onUpdateDisplay(),this._addDisplay()}},a.prototype.update=function(t){if(this._displayDataDirty&&(this._updateDisplayData(),this._displayDataDirty=!1),this._displayDirty&&(this._updateDisplay(),this._displayDirty=!1),(this._geometryDirty||this._textureDirty)&&(null!==this._display&&this._display!==this._rawDisplay&&this._display!==this._meshDisplay||this._updateFrame(),this._geometryDirty=!1,this._textureDirty=!1),null!==this._display){if(this._visibleDirty&&(this._updateVisible(),this._visibleDirty=!1),this._blendModeDirty&&(this._updateBlendMode(),this._blendModeDirty=!1),this._colorDirty&&(this._updateColor(),this._colorDirty=!1),this._zOrderDirty&&(this._updateZOrder(),this._zOrderDirty=!1),null!==this._geometryData&&this._display===this._meshDisplay){var e=null!==this._geometryData.weight,r=0!==this._parent._boneData.type;if((this._verticesDirty||e&&this._isBonesUpdate()||r&&this._parent._childrenTransformDirty)&&(this._verticesDirty=!1,this._updateMesh()),e||r)return}if(t>=0&&null!==this._cachedFrameIndices){var a=this._cachedFrameIndices[t];a>=0&&this._cachedFrameIndex===a?this._transformDirty=!1:a>=0?(this._transformDirty=!0,this._cachedFrameIndex=a):this._transformDirty||this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}else(this._transformDirty||this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1);if(this._transformDirty){if(this._cachedFrameIndex<0){var i=t>=0;this._updateGlobalTransformMatrix(i),i&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);this._updateTransform(),this._transformDirty=!1}}},a.prototype.invalidUpdate=function(){this._displayDataDirty=!0,this._displayDirty=!0,this._transformDirty=!0},a.prototype.updateTransformAndMatrix=function(){this._transformDirty&&(this._updateGlobalTransformMatrix(!1),this._transformDirty=!1)},a.prototype.replaceRawDisplayData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var r=this._displayFrames[e];if(r.rawDisplayData!==t){if(r.deformVertices.length=0,r.rawDisplayData=t,null===r.rawDisplayData){var a=this._armature._armatureData.defaultSkin;if(null!==a){var i=a.getDisplays(this._slotData.name);null!==i&&e<i.length&&(r.rawDisplayData=i[e])}}e===this._displayIndex&&(this._displayDataDirty=!0)}},a.prototype.replaceDisplayData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var r=this._displayFrames[e];r.displayData!==t&&r.rawDisplayData!==t&&(r.displayData=t,e===this._displayIndex&&(this._displayDataDirty=!0))},a.prototype.replaceTextureData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var r=this._displayFrames[e];r.textureData!==t&&(r.textureData=t,e===this._displayIndex&&(this._displayDataDirty=!0))},a.prototype.replaceDisplay=function(e,r){if(void 0===r&&(r=-1),r<0)r=this._displayIndex<0?0:this._displayIndex;else if(r>=this._displayFrames.length)return;var a=this._displayFrames[r];if(a.display!==e){var i=a.display;a.display=e,null===i||i===this._rawDisplay||i===this._meshDisplay||this._hasDisplay(i)||i instanceof t.Armature||this._disposeDisplay(i,!0),null===e||e===this._rawDisplay||e===this._meshDisplay||this._hasDisplay(i)||e instanceof t.Armature||this._initDisplay(e,!0),r===this._displayIndex&&(this._displayDirty=!0)}},a.prototype.containsPoint=function(t,e){return null!==this._boundingBoxData&&(this.updateTransformAndMatrix(),a._helpMatrix.copyFrom(this.globalTransformMatrix),a._helpMatrix.invert(),a._helpMatrix.transformPoint(t,e,a._helpPoint),this._boundingBoxData.containsPoint(a._helpPoint.x,a._helpPoint.y))},a.prototype.intersectsSegment=function(t,e,r,i,n,s,o){if(void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=null),null===this._boundingBoxData)return 0;this.updateTransformAndMatrix(),a._helpMatrix.copyFrom(this.globalTransformMatrix),a._helpMatrix.invert(),a._helpMatrix.transformPoint(t,e,a._helpPoint),t=a._helpPoint.x,e=a._helpPoint.y,a._helpMatrix.transformPoint(r,i,a._helpPoint),r=a._helpPoint.x,i=a._helpPoint.y;var l=this._boundingBoxData.intersectsSegment(t,e,r,i,n,s,o);return l>0&&(1===l||2===l?null!==n?(this.globalTransformMatrix.transformPoint(n.x,n.y,n),null!==s&&(s.x=n.x,s.y=n.y)):null!==s&&this.globalTransformMatrix.transformPoint(s.x,s.y,s):(null!==n&&this.globalTransformMatrix.transformPoint(n.x,n.y,n),null!==s&&this.globalTransformMatrix.transformPoint(s.x,s.y,s)),null!==o&&(this.globalTransformMatrix.transformPoint(Math.cos(o.x),Math.sin(o.x),a._helpPoint,!0),o.x=Math.atan2(a._helpPoint.y,a._helpPoint.x),this.globalTransformMatrix.transformPoint(Math.cos(o.y),Math.sin(o.y),a._helpPoint,!0),o.y=Math.atan2(a._helpPoint.y,a._helpPoint.x))),l},a.prototype.getDisplayFrameAt=function(t){return this._displayFrames[t]},Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this._updateVisible())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"displayFrameCount",{get:function(){return this._displayFrames.length},set:function(r){var a=this._displayFrames.length;if(a<r){this._displayFrames.length=r;for(var i=a;i<r;++i)this._displayFrames[i]=t.BaseObject.borrowObject(e)}else if(a>r){for(i=a-1;i<r;--i)this.replaceDisplay(null,i),this._displayFrames[i].returnToPool();this._displayFrames.length=r}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"displayIndex",{get:function(){return this._displayIndex},set:function(t){this._setDisplayIndex(t),this.update(-1)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this._slotData.name},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"displayList",{get:function(){for(var t=new Array,e=0,r=this._displayFrames;e<r.length;e++){var a=r[e];t.push(a.display)}return t},set:function(t){this.displayFrameCount=t.length;for(var e=0,r=0,a=t;r<a.length;r++){var i=a[r];this.replaceDisplay(i,e++)}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"slotData",{get:function(){return this._slotData},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"boundingBoxData",{get:function(){return this._boundingBoxData},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rawDisplay",{get:function(){return this._rawDisplay},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"meshDisplay",{get:function(){return this._meshDisplay},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"display",{get:function(){return this._display},set:function(t){this._display!==t&&(0===this._displayFrames.length&&(this.displayFrameCount=1,this._displayIndex=0),this.replaceDisplay(t,this._displayIndex))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"childArmature",{get:function(){return this._childArmature},set:function(t){this._childArmature!==t&&(this.display=t)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),a.prototype.getDisplay=function(){return this._display},a.prototype.setDisplay=function(t){this.display=t},a}(t.TransformObject);t.Slot=r}(s||(s={})),function(t){var e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype._onClear=function(){this._armature=null,this._target=null,this._root=null,this._bone=null},Object.defineProperty(r.prototype,"name",{get:function(){return this._constraintData.name},enumerable:!1,configurable:!0}),r._helpMatrix=new t.Matrix,r._helpTransform=new t.Transform,r._helpPoint=new t.Point,r}(t.BaseObject);t.Constraint=e;var r=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.toString=function(){return"[class dragonBones.IKConstraint]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),this._bendPositive=!1,this._weight=1,this._constraintData=null},r.prototype._computeA=function(){var e=this._target.global,r=this._root.global,a=this._root.globalTransformMatrix,i=Math.atan2(e.y-r.y,e.x-r.x);r.scaleX<0&&(i+=Math.PI),r.rotation+=t.Transform.normalizeRadian(i-r.rotation)*this._weight,r.toMatrix(a)},r.prototype._computeB=function(){var e=this._bone._boneData.length,r=this._root,a=this._target.global,i=r.global,n=this._bone.global,s=this._bone.globalTransformMatrix,o=s.a*e,l=s.b*e,h=o*o+l*l,u=Math.sqrt(h),f=n.x-i.x,c=n.y-i.y,_=f*f+c*c,p=Math.sqrt(_),m=n.rotation,d=i.rotation,y=Math.atan2(c,f);f=a.x-i.x,c=a.y-i.y;var g=f*f+c*c,v=Math.sqrt(g),b=0;if(u+p<=v||v+u<=p||v+p<=u)b=Math.atan2(a.y-i.y,a.x-i.x),u+p<=v||p<u&&(b+=Math.PI);else{var D=(_-h+g)/(2*g),T=Math.sqrt(_-D*D*g)/v,A=i.x+f*D,O=i.y+c*D,S=-c*T,P=f*T,x=!1,E=r.parent;if(null!==E){var w=E.globalTransformMatrix;x=w.a*w.d-w.b*w.c<0}x!==this._bendPositive?(n.x=A-S,n.y=O-P):(n.x=A+S,n.y=O+P),b=Math.atan2(n.y-i.y,n.x-i.x)}var M=t.Transform.normalizeRadian(b-y);i.rotation=d+M*this._weight,i.toMatrix(r.globalTransformMatrix);var B=y+M*this._weight;n.x=i.x+Math.cos(B)*p,n.y=i.y+Math.sin(B)*p;var I=Math.atan2(a.y-n.y,a.x-n.x);n.scaleX<0&&(I+=Math.PI),n.rotation=i.rotation+m-d+t.Transform.normalizeRadian(I-M-m)*this._weight,n.toMatrix(s)},r.prototype.init=function(t,e){if(null===this._constraintData){this._constraintData=t,this._armature=e,this._target=this._armature.getBone(this._constraintData.target.name),this._root=this._armature.getBone(this._constraintData.root.name),this._bone=null!==this._constraintData.bone?this._armature.getBone(this._constraintData.bone.name):null;var r=this._constraintData;this._bendPositive=r.bendPositive,this._weight=r.weight,this._root._hasConstraint=!0}},r.prototype.update=function(){this._root.updateByConstraint(),null!==this._bone?(this._bone.updateByConstraint(),this._computeB()):this._computeA()},r.prototype.invalidUpdate=function(){this._root.invalidUpdate(),null!==this._bone&&this._bone.invalidUpdate()},r}(e);t.IKConstraint=r;var a=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._bones=[],t._spaces=[],t._positions=[],t._curves=[],t._boneLengths=[],t._pathGlobalVertices=[],t._segments=[10],t}return n(r,e),r.toString=function(){return"[class dragonBones.PathConstraint]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),this.dirty=!1,this.pathOffset=0,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=1,this.translateMix=1,this._pathSlot=null,this._bones.length=0,this._spaces.length=0,this._positions.length=0,this._curves.length=0,this._boneLengths.length=0,this._pathGlobalVertices.length=0},r.prototype._updatePathVertices=function(t){var e=this._armature,r=e.armatureData.parent,a=e.armatureData.scale,i=r.intArray,n=r.floatArray,s=t.offset,o=i[s+0],l=i[s+2];this._pathGlobalVertices.length=2*o;var h=t.weight;if(null!==h)for(var u=this._pathSlot._geometryBones,f=h.bones.length,c=h.offset,_=i[c+1],p=_,m=c+2+f,d=(x=0,0);x<o;x++){for(var y=i[m++],g=0,v=0,b=0,D=y;b<D;b++){var T=i[m++],A=u[T];if(null!==A){A.updateByConstraint();P=A.globalTransformMatrix;var O=n[p++];w=n[p++]*a,M=n[p++]*a;g+=(P.a*w+P.c*M+P.tx)*O,v+=(P.b*w+P.d*M+P.ty)*O}}this._pathGlobalVertices[d++]=g,this._pathGlobalVertices[d++]=v}else{var S=this._pathSlot.parent;S.updateByConstraint();for(var P=S.globalTransformMatrix,x=0,E=l;x<o;x+=2){var w=n[E++]*a,M=n[E++]*a,B=P.a*w+P.c*M+P.tx,I=P.b*w+P.d*M+P.ty;this._pathGlobalVertices[x]=B,this._pathGlobalVertices[x+1]=I}}},r.prototype._computeVertices=function(t,e,r,a){for(var i=r,n=t;i<e;i+=2)a[i]=this._pathGlobalVertices[n++],a[i+1]=this._pathGlobalVertices[n++]},r.prototype._computeBezierCurve=function(t,e,r,a,i){var n=this._armature,s=n.armatureData.parent.intArray,o=s[t.geometry.offset+0],l=this._positions,h=this._spaces,u=t.closed,f=Array(),c=2*o,_=c/6,p=-1,m=this.position;l.length=3*e+2;var d=0;if(t.constantSpeed){u?(c+=2,f.length=o,this._computeVertices(2,c-4,0,f),this._computeVertices(0,2,c-4,f),f[c-2]=f[0],f[c-1]=f[1]):(_--,c-=4,f.length=c,this._computeVertices(2,c,0,f));var y=new Array(_);d=0;for(var g,v,b,D,T,A,O,S,P=f[0],x=f[1],E=0,w=0,M=0,B=0,I=0,F=0,C=(X=0,2);X<_;X++,C+=6)E=f[C],w=f[C+1],M=f[C+2],B=f[C+3],I=f[C+4],F=f[C+5],g=.1875*(P-2*E+M),v=.1875*(x-2*w+B),b=.09375*(3*(E-M)-P+I),D=.09375*(3*(w-B)-x+F),T=2*g+b,A=2*v+D,O=.75*(E-P)+g+.16666667*b,S=.75*(w-x)+v+.16666667*D,d+=Math.sqrt(O*O+S*S),O+=T,S+=A,T+=b,A+=D,d+=Math.sqrt(O*O+S*S),O+=T,S+=A,d+=Math.sqrt(O*O+S*S),O+=T+b,S+=A+D,d+=Math.sqrt(O*O+S*S),y[X]=d,P=I,x=F;if(a&&(m*=d),i)for(X=0;X<e;X++)h[X]*=d;for(var R=this._segments,N=0,j=(X=0,W=0,z=0,0);X<e;X++,W+=3){H=h[X];m+=H;var k=m;if(u)k%=d,k<0&&(k+=d),z=0;else{if(k<0)continue;if(k>d)continue}for(;;z++){var L=y[z];if(!(k>L)){if(0===z)k/=L;else{var V=y[z-1];k=(k-V)/(L-V)}break}}if(z!==p){p=z;var Y=6*z;for(P=f[Y],x=f[Y+1],E=f[Y+2],w=f[Y+3],M=f[Y+4],B=f[Y+5],I=f[Y+6],F=f[Y+7],g=.03*(P-2*E+M),v=.03*(x-2*w+B),b=.006*(3*(E-M)-P+I),D=.006*(3*(w-B)-x+F),T=2*g+b,A=2*v+D,O=.3*(E-P)+g+.16666667*b,S=.3*(w-x)+v+.16666667*D,N=Math.sqrt(O*O+S*S),R[0]=N,Y=1;Y<8;Y++)O+=T,S+=A,T+=b,A+=D,N+=Math.sqrt(O*O+S*S),R[Y]=N;O+=T,S+=A,N+=Math.sqrt(O*O+S*S),R[8]=N,O+=T+b,S+=A+D,N+=Math.sqrt(O*O+S*S),R[9]=N,j=0}for(k*=N;;j++){var U=R[j];if(!(k>U)){if(0===j)k/=U;else{V=R[j-1];k=j+(k-V)/(U-V)}break}}this.addCurvePosition(.1*k,P,x,E,w,M,B,I,F,l,W,r)}}else{var G=t.curveLengths;if(_-=u?1:2,d=G[_],a&&(m*=d),i)for(var X=0;X<e;X++)h[X]*=d;f.length=8;for(var X=0,W=0,z=0;X<e;X++,W+=3){var H=h[X];if(m+=H,u)m%=d,m<0&&(m+=d),z=0;else{if(m<0)continue;if(m>d)continue}for(var K=0;;z++){var q=G[z];if(!(m>q)){if(0===z)K=m/q;else{var Z=G[z-1];K=(m-Z)/(q-Z)}break}}z!==p&&(p=z,u&&z===_?(this._computeVertices(c-4,4,0,f),this._computeVertices(0,4,4,f)):this._computeVertices(6*z+2,8,0,f)),this.addCurvePosition(K,f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],l,W,r)}}},r.prototype.addCurvePosition=function(t,e,r,a,i,n,s,o,l,h,u,f){if(0===t)return h[u]=e,h[u+1]=r,void(h[u+2]=0);if(1===t)return h[u]=o,h[u+1]=l,void(h[u+2]=0);var c=1-t,_=c*c,p=t*t,m=_*c,d=_*t*3,y=c*p*3,g=t*p,v=m*e+d*a+y*n+g*o,b=m*r+d*i+y*s+g*l;h[u]=v,h[u+1]=b,h[u+2]=f?Math.atan2(b-(m*r+d*i+y*s),v-(m*e+d*a+y*n)):0},r.prototype.init=function(t,e){this._constraintData=t,this._armature=e;var r=t;this.pathOffset=r.pathDisplayData.geometry.offset,this.position=r.position,this.spacing=r.spacing,this.rotateOffset=r.rotateOffset,this.rotateMix=r.rotateMix,this.translateMix=r.translateMix,this._root=this._armature.getBone(r.root.name),this._target=this._armature.getBone(r.target.name),this._pathSlot=this._armature.getSlot(r.pathSlot.name);for(var a=0,i=r.bones.length;a<i;a++){var n=this._armature.getBone(r.bones[a].name);null!==n&&this._bones.push(n)}2===r.rotateMode&&(this._boneLengths.length=this._bones.length),this._root._hasConstraint=!0},r.prototype.update=function(){var e=this._pathSlot;if(null!==e._geometryData&&e._geometryData.offset===this.pathOffset){var r=this._constraintData,a=!1;if(this._root._childrenTransformDirty?(this._updatePathVertices(e._geometryData),a=!0):(e._verticesDirty||e._isBonesUpdate())&&(this._updatePathVertices(e._geometryData),e._verticesDirty=!1,a=!0),a||this.dirty){var i=r.positionMode,n=r.spacingMode,s=r.rotateMode,o=this._bones,l=0===n,h=2===s,u=0===s,f=o.length,c=u?f:f+1,_=this.spacing,p=this._spaces;if(p.length=c,h||l){p[0]=0;for(var m=0,d=c-1;m<d;m++){var y=o[m];y.updateByConstraint();var g=y._boneData.length,v=y.globalTransformMatrix,b=g*v.a,D=g*v.b,T=Math.sqrt(b*b+D*D);h&&(this._boneLengths[m]=T),p[m+1]=(g+_)*T/g}}else for(m=0;m<c;m++)p[m]=_;this._computeBezierCurve(e._displayFrame.rawDisplayData,c,u,1===i,2===n);var A,O=this._positions,S=this.rotateOffset,P=O[0],x=O[1];if(0===S)A=1===s;else{A=!1;y=e.parent;if(null!==y){v=y.globalTransformMatrix;S*=v.a*v.d-v.b*v.c>0?t.Transform.DEG_RAD:-t.Transform.DEG_RAD}}for(var E=this.rotateMix,w=this.translateMix,M=(m=0,3);m<f;m++,M+=3){y=o[m];y.updateByConstraint();v=y.globalTransformMatrix;v.tx+=(P-v.tx)*w,v.ty+=(x-v.ty)*w;b=O[M],D=O[M+1];var B=b-P,I=D-x;if(h){var F=this._boneLengths[m],C=(Math.sqrt(B*B+I*I)/F-1)*E+1;v.a*=C,v.b*=C}if(P=b,x=D,E>0){var R=v.a,N=v.b,j=v.c,k=v.d,L=void 0,V=void 0,Y=void 0;if(L=u?O[M-1]:Math.atan2(I,B),L-=Math.atan2(N,R),A){V=Math.cos(L),Y=Math.sin(L);var U=y._boneData.length;P+=(U*(V*R-Y*N)-B)*E,x+=(U*(Y*R+V*N)-I)*E}else L+=S;L>t.Transform.PI?L-=t.Transform.PI_D:L<-t.Transform.PI&&(L+=t.Transform.PI_D),L*=E,V=Math.cos(L),Y=Math.sin(L),v.a=V*R-Y*N,v.b=Y*R+V*N,v.c=V*j-Y*k,v.d=Y*j+V*k}y.global.fromMatrix(v)}this.dirty=!1}}},r.prototype.invalidUpdate=function(){},r}(e);t.PathConstraint=a}(s||(s={})),function(t){var e=function(){function t(t){void 0===t&&(t=0),this.time=0,this.timeScale=1,this._systemTime=0,this._animatebles=[],this._clock=null,this.time=t,this._systemTime=.001*(new Date).getTime()}return t.prototype.advanceTime=function(t){t!==t&&(t=0);var e=.001*Date.now();if(t<0&&(t=e-this._systemTime),this._systemTime=e,1!==this.timeScale&&(t*=this.timeScale),0!==t){t<0?this.time-=t:this.time+=t;for(var r=0,a=0,i=this._animatebles.length;r<i;++r){var n=this._animatebles[r];null!==n?(a>0&&(this._animatebles[r-a]=n,this._animatebles[r]=null),n.advanceTime(t)):a++}if(a>0){for(i=this._animatebles.length;r<i;++r){var s=this._animatebles[r];null!==s?this._animatebles[r-a]=s:a++}this._animatebles.length-=a}}},t.prototype.contains=function(t){if(t===this)return!1;var e=t;while(e!==this&&null!==e)e=e.clock;return e===this},t.prototype.add=function(t){this._animatebles.indexOf(t)<0&&(this._animatebles.push(t),t.clock=this)},t.prototype.remove=function(t){var e=this._animatebles.indexOf(t);e>=0&&(this._animatebles[e]=null,t.clock=null)},t.prototype.clear=function(){for(var t=0,e=this._animatebles;t<e.length;t++){var r=e[t];null!==r&&(r.clock=null)}},Object.defineProperty(t.prototype,"clock",{get:function(){return this._clock},set:function(t){this._clock!==t&&(null!==this._clock&&this._clock.remove(this),this._clock=t,null!==this._clock&&this._clock.add(this))},enumerable:!1,configurable:!0}),t}();t.WorldClock=e}(s||(s={})),function(t){var e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._animationNames=[],t._animationStates=[],t._animations={},t._blendStates={},t._animationConfig=null,t}return n(r,e),r.toString=function(){return"[class dragonBones.Animation]"},r.prototype._onClear=function(){for(var t=0,e=this._animationStates;t<e.length;t++){var r=e[t];r.returnToPool()}for(var a in this._animations)delete this._animations[a];for(var a in this._blendStates){var i=this._blendStates[a];for(var n in i)i[n].returnToPool();delete this._blendStates[a]}null!==this._animationConfig&&this._animationConfig.returnToPool(),this.timeScale=1,this._animationDirty=!1,this._inheritTimeScale=1,this._animationNames.length=0,this._animationStates.length=0,this._armature=null,this._animationConfig=null,this._lastAnimationState=null},r.prototype._fadeOut=function(t){switch(t.fadeOutMode){case 1:for(var e=0,r=this._animationStates;e<r.length;e++){var a=r[e];null===a._parent&&(a.layer===t.layer&&a.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 2:for(var i=0,n=this._animationStates;i<n.length;i++){a=n[i];null===a._parent&&(a.group===t.group&&a.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 3:for(var s=0,o=this._animationStates;s<o.length;s++){a=o[s];null===a._parent&&(a.layer===t.layer&&a.group===t.group&&a.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 4:for(var l=0,h=this._animationStates;l<h.length;l++){a=h[l];null===a._parent&&a.fadeOut(t.fadeOutTime,t.pauseFadeOut)}break;case 5:default:break}},r.prototype.init=function(e){null===this._armature&&(this._armature=e,this._animationConfig=t.BaseObject.borrowObject(t.AnimationConfig))},r.prototype.advanceTime=function(t){for(var e in t<0&&(t=-t),this._armature.inheritAnimation&&null!==this._armature._parent?this._inheritTimeScale=this._armature._parent._armature.animation._inheritTimeScale*this.timeScale:this._inheritTimeScale=this.timeScale,1!==this._inheritTimeScale&&(t*=this._inheritTimeScale),this._blendStates){var r=this._blendStates[e];for(var a in r)r[a].reset()}var i=this._animationStates.length;if(1===i){var n=this._animationStates[0];if(n._fadeState>0&&n._subFadeState>0)this._armature._dragonBones.bufferObject(n),this._animationStates.length=0,this._lastAnimationState=null;else{var s=n.animationData,o=s.cacheFrameRate;if(this._animationDirty&&o>0){this._animationDirty=!1;for(var l=0,h=this._armature.getBones();l<h.length;l++){var u=h[l];u._cachedFrameIndices=s.getBoneCachedFrameIndices(u.name)}for(var f=0,c=this._armature.getSlots();f<c.length;f++){var _=c[f];if(_.displayFrameCount>0){var p=_.getDisplayFrameAt(0).rawDisplayData;if(null!==p&&p.parent===this._armature.armatureData.defaultSkin){_._cachedFrameIndices=s.getSlotCachedFrameIndices(_.name);continue}}_._cachedFrameIndices=null}}n.advanceTime(t,o)}}else if(i>1){for(var m=0,d=0;m<i;++m){n=this._animationStates[m];n._fadeState>0&&n._subFadeState>0?(d++,this._armature._dragonBones.bufferObject(n),this._animationDirty=!0,this._lastAnimationState===n&&(this._lastAnimationState=null)):(d>0&&(this._animationStates[m-d]=n),n.advanceTime(t,0)),m===i-1&&d>0&&(this._animationStates.length-=d,null===this._lastAnimationState&&this._animationStates.length>0&&(this._lastAnimationState=this._animationStates[this._animationStates.length-1]))}this._armature._cacheFrameIndex=-1}else this._armature._cacheFrameIndex=-1},r.prototype.reset=function(){for(var t=0,e=this._animationStates;t<e.length;t++){var r=e[t];r.returnToPool()}this._animationDirty=!1,this._animationConfig.clear(),this._animationStates.length=0,this._lastAnimationState=null},r.prototype.stop=function(t){if(void 0===t&&(t=null),null!==t){var e=this.getState(t);null!==e&&e.stop()}else for(var r=0,a=this._animationStates;r<a.length;r++){e=a[r];e.stop()}},r.prototype.playConfig=function(e){var r=e.animation;if(!(r in this._animations))return console.warn("Non-existent animation.\n","DragonBones name: "+this._armature.armatureData.parent.name,"Armature name: "+this._armature.name,"Animation name: "+r),null;var a=this._animations[r];if(5===e.fadeOutMode)for(var i=0,n=this._animationStates;i<n.length;i++){var s=n[i];if(s._fadeState<1&&s.layer===e.layer&&s.animationData===a)return s}0===this._animationStates.length?e.fadeInTime=0:e.fadeInTime<0&&(e.fadeInTime=a.fadeInTime),e.fadeOutTime<0&&(e.fadeOutTime=e.fadeInTime),e.timeScale<=-100&&(e.timeScale=1/a.scale),a.frameCount>0?(e.position<0?(e.position%=a.duration,e.position=a.duration-e.position):e.position===a.duration?e.position-=1e-6:e.position>a.duration&&(e.position%=a.duration),e.duration>0&&e.position+e.duration>a.duration&&(e.duration=a.duration-e.position),e.playTimes<0&&(e.playTimes=a.playTimes)):(e.playTimes=1,e.position=0,e.duration>0&&(e.duration=0)),0===e.duration&&(e.duration=-1),this._fadeOut(e);var o=t.BaseObject.borrowObject(t.AnimationState);if(o.init(this._armature,a,e),this._animationDirty=!0,this._armature._cacheFrameIndex=-1,this._animationStates.length>0){for(var l=!1,h=0,u=this._animationStates.length;h<u;++h){if(o.layer>this._animationStates[h].layer){l=!0,this._animationStates.splice(h,0,o);break}if(h!==u-1&&o.layer>this._animationStates[h+1].layer){l=!0,this._animationStates.splice(h+1,0,o);break}}l||this._animationStates.push(o)}else this._animationStates.push(o);for(var f=0,c=this._armature.getSlots();f<c.length;f++){var _=c[f],p=_.childArmature;null!==p&&p.inheritAnimation&&p.animation.hasAnimation(r)&&null===p.animation.getState(r)&&p.animation.fadeIn(r)}for(var m in a.animationTimelines){var d=this.fadeIn(m,0,1,o.layer,"",5);if(null!==d){var y=a.animationTimelines[m];d.actionEnabled=!1,d.resetToPose=!1,d.stop(),o.addState(d,y);var g=this._animationStates.indexOf(o),v=this._animationStates.indexOf(d);v<g&&(this._animationStates.splice(g,1),this._animationStates.splice(v,0,o))}}return this._lastAnimationState=o,o},r.prototype.play=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=e,this._animationConfig.fadeInTime=0,this._animationConfig.animation=null!==t?t:"",null!==t&&t.length>0)this.playConfig(this._animationConfig);else if(null===this._lastAnimationState){var r=this._armature.armatureData.defaultAnimation;null!==r&&(this._animationConfig.animation=r.name,this.playConfig(this._animationConfig))}else this._lastAnimationState.isPlaying||this._lastAnimationState.isCompleted?(this._animationConfig.animation=this._lastAnimationState.name,this.playConfig(this._animationConfig)):this._lastAnimationState.play();return this._lastAnimationState},r.prototype.fadeIn=function(t,e,r,a,i,n){return void 0===e&&(e=-1),void 0===r&&(r=-1),void 0===a&&(a=0),void 0===i&&(i=null),void 0===n&&(n=3),this._animationConfig.clear(),this._animationConfig.fadeOutMode=n,this._animationConfig.playTimes=r,this._animationConfig.layer=a,this._animationConfig.fadeInTime=e,this._animationConfig.animation=t,this._animationConfig.group=null!==i?i:"",this.playConfig(this._animationConfig)},r.prototype.gotoAndPlayByTime=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=r,this._animationConfig.position=e,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t,this.playConfig(this._animationConfig)},r.prototype.gotoAndPlayByFrame=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=r,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t;var a=t in this._animations?this._animations[t]:null;return null!==a&&(this._animationConfig.position=a.frameCount>0?a.duration*e/a.frameCount:0),this.playConfig(this._animationConfig)},r.prototype.gotoAndPlayByProgress=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=r,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t;var a=t in this._animations?this._animations[t]:null;return null!==a&&(this._animationConfig.position=a.duration*(e>0?e:0)),this.playConfig(this._animationConfig)},r.prototype.gotoAndStopByTime=function(t,e){void 0===e&&(e=0);var r=this.gotoAndPlayByTime(t,e,1);return null!==r&&r.stop(),r},r.prototype.gotoAndStopByFrame=function(t,e){void 0===e&&(e=0);var r=this.gotoAndPlayByFrame(t,e,1);return null!==r&&r.stop(),r},r.prototype.gotoAndStopByProgress=function(t,e){void 0===e&&(e=0);var r=this.gotoAndPlayByProgress(t,e,1);return null!==r&&r.stop(),r},r.prototype.getBlendState=function(e,r,a){e in this._blendStates||(this._blendStates[e]={});var i=this._blendStates[e];if(!(r in i)){var n=i[r]=t.BaseObject.borrowObject(t.BlendState);n.target=a}return i[r]},r.prototype.getState=function(t,e){void 0===e&&(e=-1);var r=this._animationStates.length;while(r--){var a=this._animationStates[r];if(a.name===t&&(e<0||a.layer===e))return a}return null},r.prototype.hasAnimation=function(t){return t in this._animations},r.prototype.getStates=function(){return this._animationStates},Object.defineProperty(r.prototype,"isPlaying",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++){var r=e[t];if(r.isPlaying)return!0}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isCompleted",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++){var r=e[t];if(!r.isCompleted)return!1}return this._animationStates.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastAnimationName",{get:function(){return null!==this._lastAnimationState?this._lastAnimationState.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animations",{get:function(){return this._animations},set:function(t){if(this._animations!==t){for(var e in this._animationNames.length=0,this._animations)delete this._animations[e];for(var e in t)this._animationNames.push(e),this._animations[e]=t[e]}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animationConfig",{get:function(){return this._animationConfig.clear(),this._animationConfig},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!1,configurable:!0}),r}(t.BaseObject);t.Animation=e}(s||(s={})),function(t){var e=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._boneMask=[],t._boneTimelines=[],t._boneBlendTimelines=[],t._slotTimelines=[],t._slotBlendTimelines=[],t._constraintTimelines=[],t._animationTimelines=[],t._poseTimelines=[],t._actionTimeline=null,t._zOrderTimeline=null,t}return n(a,e),a.toString=function(){return"[class dragonBones.AnimationState]"},a.prototype._onClear=function(){for(var t=0,e=this._boneTimelines;t<e.length;t++){var r=e[t];r.returnToPool()}for(var a=0,i=this._boneBlendTimelines;a<i.length;a++){r=i[a];r.returnToPool()}for(var n=0,s=this._slotTimelines;n<s.length;n++){r=s[n];r.returnToPool()}for(var o=0,l=this._slotBlendTimelines;o<l.length;o++){r=l[o];r.returnToPool()}for(var h=0,u=this._constraintTimelines;h<u.length;h++){r=u[h];r.returnToPool()}for(var f=0,c=this._animationTimelines;f<c.length;f++){r=c[f];var _=r.target;_._parent===this&&(_._fadeState=1,_._subFadeState=1,_._parent=null),r.returnToPool()}null!==this._actionTimeline&&this._actionTimeline.returnToPool(),null!==this._zOrderTimeline&&this._zOrderTimeline.returnToPool(),this.actionEnabled=!1,this.additive=!1,this.displayControl=!1,this.resetToPose=!1,this.blendType=0,this.playTimes=1,this.layer=0,this.timeScale=1,this._weight=1,this.parameterX=0,this.parameterY=0,this.positionX=0,this.positionY=0,this.autoFadeOutTime=0,this.fadeTotalTime=0,this.name="",this.group="",this._timelineDirty=2,this._playheadState=0,this._fadeState=-1,this._subFadeState=-1,this._position=0,this._duration=0,this._fadeTime=0,this._time=0,this._fadeProgress=0,this._weightResult=0,this._boneMask.length=0,this._boneTimelines.length=0,this._boneBlendTimelines.length=0,this._slotTimelines.length=0,this._slotBlendTimelines.length=0,this._constraintTimelines.length=0,this._animationTimelines.length=0,this._poseTimelines.length=0,this._animationData=null,this._armature=null,this._actionTimeline=null,this._zOrderTimeline=null,this._activeChildA=null,this._activeChildB=null,this._parent=null},a.prototype._updateTimelines=function(){for(var e=0,r=this._armature._constraints;e<r.length;e++){var a=r[e],i=this._animationData.getConstraintTimelines(a.name);if(null!==i)for(var n=0,s=i;n<s.length;n++){var o=s[n];switch(o.type){case 30:var l=t.BaseObject.borrowObject(t.IKConstraintTimelineState);l.target=a,l.init(this._armature,this,o),this._constraintTimelines.push(l);break;default:break}}else if(this.resetToPose){l=t.BaseObject.borrowObject(t.IKConstraintTimelineState);l.target=a,l.init(this._armature,this,null),this._constraintTimelines.push(l),this._poseTimelines.push(l)}}},a.prototype._updateBoneAndSlotTimelines=function(){for(var e={},a=0,i=this._boneTimelines;a<i.length;a++){var n=i[a],s=n.target.target.name;s in e||(e[s]=[]),e[s].push(n)}for(var o=0,l=this._boneBlendTimelines;o<l.length;o++){n=l[o],s=n.target.target.name;s in e||(e[s]=[]),e[s].push(n)}for(var h=0,u=this._armature.getBones();h<u.length;h++){var f=u[h];s=f.name;if(this.containsBoneMask(s))if(s in e)delete e[s];else{var c=this._animationData.getBoneTimelines(s),_=this._armature.animation.getBlendState(r.BONE_TRANSFORM,f.name,f);if(null!==c)for(var p=0,m=c;p<m.length;p++){var d=m[p];switch(d.type){case 10:n=t.BaseObject.borrowObject(t.BoneAllTimelineState);n.target=_,n.init(this._armature,this,d),this._boneTimelines.push(n);break;case 11:n=t.BaseObject.borrowObject(t.BoneTranslateTimelineState);n.target=_,n.init(this._armature,this,d),this._boneTimelines.push(n);break;case 12:n=t.BaseObject.borrowObject(t.BoneRotateTimelineState);n.target=_,n.init(this._armature,this,d),this._boneTimelines.push(n);break;case 13:n=t.BaseObject.borrowObject(t.BoneScaleTimelineState);n.target=_,n.init(this._armature,this,d),this._boneTimelines.push(n);break;case 60:n=t.BaseObject.borrowObject(t.AlphaTimelineState);n.target=this._armature.animation.getBlendState(r.BONE_ALPHA,f.name,f),n.init(this._armature,this,d),this._boneBlendTimelines.push(n);break;case 50:n=t.BaseObject.borrowObject(t.SurfaceTimelineState);n.target=this._armature.animation.getBlendState(r.SURFACE,f.name,f),n.init(this._armature,this,d),this._boneBlendTimelines.push(n);break;default:break}}else if(this.resetToPose)if(0===f._boneData.type){n=t.BaseObject.borrowObject(t.BoneAllTimelineState);n.target=_,n.init(this._armature,this,null),this._boneTimelines.push(n),this._poseTimelines.push(n)}else{n=t.BaseObject.borrowObject(t.SurfaceTimelineState);n.target=this._armature.animation.getBlendState(r.SURFACE,f.name,f),n.init(this._armature,this,null),this._boneBlendTimelines.push(n),this._poseTimelines.push(n)}}}for(var y in e)for(var g=0,v=e[y];g<v.length;g++){n=v[g];var b=this._boneTimelines.indexOf(n);b>=0&&(this._boneTimelines.splice(b,1),n.returnToPool()),b=this._boneBlendTimelines.indexOf(n),b>=0&&(this._boneBlendTimelines.splice(b,1),n.returnToPool())}for(var D={},T=[],A=0,O=this._slotTimelines;A<O.length;A++){n=O[A],s=n.target.name;s in D||(D[s]=[]),D[s].push(n)}for(var S=0,P=this._slotBlendTimelines;S<P.length;S++){n=P[S],s=n.target.target.name;s in D||(D[s]=[]),D[s].push(n)}for(var x=0,E=this._armature.getSlots();x<E.length;x++){var w=E[x],M=w.parent.name;if(this.containsBoneMask(M)){s=w.name;if(s in D)delete D[s];else{var B=!1,I=!1;T.length=0;c=this._animationData.getSlotTimelines(s);if(null!==c)for(var F=0,C=c;F<C.length;F++){d=C[F];switch(d.type){case 20:n=t.BaseObject.borrowObject(t.SlotDisplayTimelineState);n.target=w,n.init(this._armature,this,d),this._slotTimelines.push(n),B=!0;break;case 23:n=t.BaseObject.borrowObject(t.SlotZIndexTimelineState);n.target=this._armature.animation.getBlendState(r.SLOT_Z_INDEX,w.name,w),n.init(this._armature,this,d),this._slotBlendTimelines.push(n);break;case 21:n=t.BaseObject.borrowObject(t.SlotColorTimelineState);n.target=w,n.init(this._armature,this,d),this._slotTimelines.push(n),I=!0;break;case 22:var R=this._animationData.parent.parent,N=R.timelineArray,j=this._animationData.frameIntOffset+N[d.offset+3],k=R.frameIntArray,L=k[j+0];L<0&&(L+=65536);for(var V=0,Y=w.displayFrameCount;V<Y;++V){var U=w.getDisplayFrameAt(V),G=U.getGeometryData();if(null!==G&&G.offset===L){n=t.BaseObject.borrowObject(t.DeformTimelineState);n.target=this._armature.animation.getBlendState(r.SLOT_DEFORM,U.rawDisplayData.name,w),n.displayFrame=U,n.init(this._armature,this,d),this._slotBlendTimelines.push(n),U.updateDeformVertices(),T.push(L);break}}break;case 24:n=t.BaseObject.borrowObject(t.AlphaTimelineState);n.target=this._armature.animation.getBlendState(r.SLOT_ALPHA,w.name,w),n.init(this._armature,this,d),this._slotBlendTimelines.push(n);break;default:break}}if(this.resetToPose){if(!B){n=t.BaseObject.borrowObject(t.SlotDisplayTimelineState);n.target=w,n.init(this._armature,this,null),this._slotTimelines.push(n),this._poseTimelines.push(n)}if(!I){n=t.BaseObject.borrowObject(t.SlotColorTimelineState);n.target=w,n.init(this._armature,this,null),this._slotTimelines.push(n),this._poseTimelines.push(n)}for(V=0,Y=w.displayFrameCount;V<Y;++V){U=w.getDisplayFrameAt(V);if(0!==U.deformVertices.length){G=U.getGeometryData();if(null!==G&&T.indexOf(G.offset)<0){n=t.BaseObject.borrowObject(t.DeformTimelineState);n.displayFrame=U,n.target=this._armature.animation.getBlendState(r.SLOT_DEFORM,w.name,w),n.init(this._armature,this,null),this._slotBlendTimelines.push(n),this._poseTimelines.push(n)}}}}}}}for(var y in D)for(var X=0,W=D[y];X<W.length;X++){n=W[X],b=this._slotTimelines.indexOf(n);b>=0&&(this._slotTimelines.splice(b,1),n.returnToPool()),b=this._slotBlendTimelines.indexOf(n),b>=0&&(this._slotBlendTimelines.splice(b,1),n.returnToPool())}},a.prototype._advanceFadeTime=function(e){var r=this._fadeState>0;if(this._subFadeState<0){this._subFadeState=0;var a=null===this._parent&&this.actionEnabled;if(a){var i=r?t.EventObject.FADE_OUT:t.EventObject.FADE_IN;if(this._armature.eventDispatcher.hasDBEventListener(i)){var n=t.BaseObject.borrowObject(t.EventObject);n.type=i,n.armature=this._armature,n.animationState=this,this._armature._dragonBones.bufferEvent(n)}}}if(e<0&&(e=-e),this._fadeTime+=e,this._fadeTime>=this.fadeTotalTime?(this._subFadeState=1,this._fadeProgress=r?0:1):this._fadeTime>0?this._fadeProgress=r?1-this._fadeTime/this.fadeTotalTime:this._fadeTime/this.fadeTotalTime:this._fadeProgress=r?1:0,this._subFadeState>0){r||(this._playheadState|=1,this._fadeState=0);a=null===this._parent&&this.actionEnabled;if(a){i=r?t.EventObject.FADE_OUT_COMPLETE:t.EventObject.FADE_IN_COMPLETE;if(this._armature.eventDispatcher.hasDBEventListener(i)){n=t.BaseObject.borrowObject(t.EventObject);n.type=i,n.armature=this._armature,n.animationState=this,this._armature._dragonBones.bufferEvent(n)}}}},a.prototype.init=function(e,r,a){if(null===this._armature){if(this._armature=e,this._animationData=r,this.resetToPose=a.resetToPose,this.additive=a.additive,this.displayControl=a.displayControl,this.actionEnabled=a.actionEnabled,this.blendType=r.blendType,this.layer=a.layer,this.playTimes=a.playTimes,this.timeScale=a.timeScale,this.fadeTotalTime=a.fadeInTime,this.autoFadeOutTime=a.autoFadeOutTime,this.name=a.name.length>0?a.name:a.animation,this.group=a.group,this._weight=a.weight,a.pauseFadeIn?this._playheadState=2:this._playheadState=3,a.duration<0?(this._position=0,this._duration=this._animationData.duration,0!==a.position?this.timeScale>=0?this._time=a.position:this._time=a.position-this._duration:this._time=0):(this._position=a.position,this._duration=a.duration,this._time=0),this.timeScale<0&&0===this._time&&(this._time=-1e-6),this.fadeTotalTime<=0&&(this._fadeProgress=.999999),a.boneMask.length>0){this._boneMask.length=a.boneMask.length;for(var i=0,n=this._boneMask.length;i<n;++i)this._boneMask[i]=a.boneMask[i]}this._actionTimeline=t.BaseObject.borrowObject(t.ActionTimelineState),this._actionTimeline.init(this._armature,this,this._animationData.actionTimeline),this._actionTimeline.currentTime=this._time,this._actionTimeline.currentTime<0&&(this._actionTimeline.currentTime=this._duration-this._actionTimeline.currentTime),null!==this._animationData.zOrderTimeline&&(this._zOrderTimeline=t.BaseObject.borrowObject(t.ZOrderTimelineState),this._zOrderTimeline.init(this._armature,this,this._animationData.zOrderTimeline))}},a.prototype.advanceTime=function(t,e){0===this._fadeState&&0===this._subFadeState||this._advanceFadeTime(t),3===this._playheadState&&(1!==this.timeScale&&(t*=this.timeScale),this._time+=t),0!==this._timelineDirty&&(2===this._timelineDirty&&this._updateTimelines(),this._timelineDirty=0,this._updateBoneAndSlotTimelines());var r=0!==this._fadeState||0===this._subFadeState,a=0===this._fadeState&&e>0,i=!0,n=!0,s=this._time;if(this._weightResult=this._weight*this._fadeProgress,null!==this._parent&&(this._weightResult*=this._parent._weightResult),this._actionTimeline.playState<=0&&this._actionTimeline.update(s),0!==this._weight){if(a){var o=2*e;this._actionTimeline.currentTime=Math.floor(this._actionTimeline.currentTime*o)/o}if(null!==this._zOrderTimeline&&this._zOrderTimeline.playState<=0&&this._zOrderTimeline.update(s),a){var l=Math.floor(this._actionTimeline.currentTime*e);this._armature._cacheFrameIndex===l?(i=!1,n=!1):(this._armature._cacheFrameIndex=l,this._animationData.cachedFrames[l]?n=!1:this._animationData.cachedFrames[l]=!0)}if(i){var h=!1,u=null;if(n)for(var f=0,c=this._boneTimelines.length;f<c;++f){var _=this._boneTimelines[f];if(_.playState<=0&&_.update(s),_.target!==u){var p=_.target;if(h=p.update(this),u=p,1===p.dirty){var m=p.target.animationPose;m.x=0,m.y=0,m.rotation=0,m.skew=0,m.scaleX=1,m.scaleY=1}}h&&_.blend(r)}for(f=0,c=this._boneBlendTimelines.length;f<c;++f){_=this._boneBlendTimelines[f];_.playState<=0&&_.update(s),_.target.update(this)&&_.blend(r)}if(this.displayControl)for(f=0,c=this._slotTimelines.length;f<c;++f){_=this._slotTimelines[f];if(_.playState<=0){var d=_.target,y=d.displayController;null!==y&&y!==this.name&&y!==this.group||_.update(s)}}for(f=0,c=this._slotBlendTimelines.length;f<c;++f){_=this._slotBlendTimelines[f];if(_.playState<=0){p=_.target;_.update(s),p.update(this)&&_.blend(r)}}for(f=0,c=this._constraintTimelines.length;f<c;++f){_=this._constraintTimelines[f];_.playState<=0&&_.update(s)}if(this._animationTimelines.length>0){var g=100,v=100,b=null,D=null;for(f=0,c=this._animationTimelines.length;f<c;++f){_=this._animationTimelines[f];if(_.playState<=0&&_.update(s),1===this.blendType){var T=_.target,A=this.parameterX-T.positionX;A>=0?A<g&&(g=A,b=T):-A<v&&(v=-A,D=T)}}null!==b&&(this._activeChildA!==b&&(null!==this._activeChildA&&(this._activeChildA.weight=0),this._activeChildA=b,this._activeChildA.activeTimeline()),this._activeChildB!==D&&(null!==this._activeChildB&&(this._activeChildB.weight=0),this._activeChildB=D),b.weight=v/(g+v),D&&(D.weight=1-b.weight))}}if(0===this._fadeState){if(this._subFadeState>0&&(this._subFadeState=0,this._poseTimelines.length>0)){for(var O=0,S=this._poseTimelines;O<S.length;O++){_=S[O];var P=this._boneTimelines.indexOf(_);P>=0?(this._boneTimelines.splice(P,1),_.returnToPool()):(P=this._boneBlendTimelines.indexOf(_),P>=0?(this._boneBlendTimelines.splice(P,1),_.returnToPool()):(P=this._slotTimelines.indexOf(_),P>=0?(this._slotTimelines.splice(P,1),_.returnToPool()):(P=this._slotBlendTimelines.indexOf(_),P>=0?(this._slotBlendTimelines.splice(P,1),_.returnToPool()):(P=this._constraintTimelines.indexOf(_),P>=0&&(this._constraintTimelines.splice(P,1),_.returnToPool())))))}this._poseTimelines.length=0}this._actionTimeline.playState>0&&this.autoFadeOutTime>=0&&this.fadeOut(this.autoFadeOutTime)}}},a.prototype.play=function(){this._playheadState=3},a.prototype.stop=function(){this._playheadState&=1},a.prototype.fadeOut=function(t,e){if(void 0===e&&(e=!0),t<0&&(t=0),e&&(this._playheadState&=2),this._fadeState>0){if(t>this.fadeTotalTime-this._fadeTime)return}else{this._fadeState=1,this._subFadeState=-1,(t<=0||this._fadeProgress<=0)&&(this._fadeProgress=1e-6);for(var r=0,a=this._boneTimelines;r<a.length;r++){var i=a[r];i.fadeOut()}for(var n=0,s=this._boneBlendTimelines;n<s.length;n++){i=s[n];i.fadeOut()}for(var o=0,l=this._slotTimelines;o<l.length;o++){i=l[o];i.fadeOut()}for(var h=0,u=this._slotBlendTimelines;h<u.length;h++){i=u[h];i.fadeOut()}for(var f=0,c=this._constraintTimelines;f<c.length;f++){i=c[f];i.fadeOut()}for(var _=0,p=this._animationTimelines;_<p.length;_++){i=p[_];i.fadeOut();var m=i.target;m.fadeOut(999999,!0)}}this.displayControl=!1,this.fadeTotalTime=this._fadeProgress>1e-6?t/this._fadeProgress:0,this._fadeTime=this.fadeTotalTime*(1-this._fadeProgress)},a.prototype.containsBoneMask=function(t){return 0===this._boneMask.length||this._boneMask.indexOf(t)>=0},a.prototype.addBoneMask=function(t,e){void 0===e&&(e=!0);var r=this._armature.getBone(t);if(null!==r){if(this._boneMask.indexOf(t)<0&&this._boneMask.push(t),e)for(var a=0,i=this._armature.getBones();a<i.length;a++){var n=i[a];this._boneMask.indexOf(n.name)<0&&r.contains(n)&&this._boneMask.push(n.name)}this._timelineDirty=1}},a.prototype.removeBoneMask=function(t,e){void 0===e&&(e=!0);var r=this._boneMask.indexOf(t);if(r>=0&&this._boneMask.splice(r,1),e){var a=this._armature.getBone(t);if(null!==a){var i=this._armature.getBones();if(this._boneMask.length>0)for(var n=0,s=i;n<s.length;n++){var o=s[n],l=this._boneMask.indexOf(o.name);l>=0&&a.contains(o)&&this._boneMask.splice(l,1)}else for(var h=0,u=i;h<u.length;h++){o=u[h];o!==a&&(a.contains(o)||this._boneMask.push(o.name))}}}this._timelineDirty=1},a.prototype.removeAllBoneMask=function(){this._boneMask.length=0,this._timelineDirty=1},a.prototype.addState=function(e,r){if(void 0===r&&(r=null),null!==r)for(var a=0,i=r;a<i.length;a++){var n=i[a];switch(n.type){case 40:var s=t.BaseObject.borrowObject(t.AnimationProgressTimelineState);if(s.target=e,s.init(this._armature,this,n),this._animationTimelines.push(s),0!==this.blendType){var o=n;e.positionX=o.x,e.positionY=o.y,e.weight=0}e._parent=this,this.resetToPose=!1;break;case 41:s=t.BaseObject.borrowObject(t.AnimationWeightTimelineState);s.target=e,s.init(this._armature,this,n),this._animationTimelines.push(s);break;case 42:s=t.BaseObject.borrowObject(t.AnimationParametersTimelineState);s.target=e,s.init(this._armature,this,n),this._animationTimelines.push(s);break;default:break}}null===e._parent&&(e._parent=this)},a.prototype.activeTimeline=function(){for(var t=0,e=this._slotTimelines;t<e.length;t++){var r=e[t];r.dirty=!0,r.currentTime=-1}},Object.defineProperty(a.prototype,"isFadeIn",{get:function(){return this._fadeState<0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isFadeOut",{get:function(){return this._fadeState>0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isFadeComplete",{get:function(){return 0===this._fadeState},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isPlaying",{get:function(){return 0!==(2&this._playheadState)&&this._actionTimeline.playState<=0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isCompleted",{get:function(){return this._actionTimeline.playState>0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentPlayTimes",{get:function(){return this._actionTimeline.currentPlayTimes},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"totalTime",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentTime",{get:function(){return this._actionTimeline.currentTime},set:function(t){var e=this._actionTimeline.currentPlayTimes-(this._actionTimeline.playState>0?1:0);if((t<0||this._duration<t)&&(t=t%this._duration+e*this._duration,t<0&&(t+=this._duration)),this.playTimes>0&&e===this.playTimes-1&&t===this._duration&&null===this._parent&&(t=this._duration-1e-6),this._time!==t){this._time=t,this._actionTimeline.setCurrentTime(this._time),null!==this._zOrderTimeline&&(this._zOrderTimeline.playState=-1);for(var r=0,a=this._boneTimelines;r<a.length;r++){var i=a[r];i.playState=-1}for(var n=0,s=this._slotTimelines;n<s.length;n++){i=s[n];i.playState=-1}}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"weight",{get:function(){return this._weight},set:function(t){if(this._weight!==t){this._weight=t;for(var e=0,r=this._boneTimelines;e<r.length;e++){var a=r[e];a.dirty=!0}for(var i=0,n=this._boneBlendTimelines;i<n.length;i++){a=n[i];a.dirty=!0}for(var s=0,o=this._slotBlendTimelines;s<o.length;s++){a=o[s];a.dirty=!0}}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"animationData",{get:function(){return this._animationData},enumerable:!1,configurable:!0}),a}(t.BaseObject);t.AnimationState=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.BlendState]"},e.prototype._onClear=function(){this.reset(),this.target=null},e.prototype.update=function(t){var e=t.layer,r=t._weightResult;if(this.dirty>0){if(this.leftWeight>0){if(this.layer!==e){if(this.layerWeight>=this.leftWeight)return this.dirty++,this.layer=e,this.leftWeight=0,this.blendWeight=0,!1;this.layer=e,this.leftWeight-=this.layerWeight,this.layerWeight=0}return r*=this.leftWeight,this.dirty++,this.blendWeight=r,this.layerWeight+=this.blendWeight,!0}return!1}return this.dirty++,this.layer=e,this.leftWeight=1,this.blendWeight=r,this.layerWeight=r,!0},e.prototype.reset=function(){this.dirty=0,this.layer=0,this.leftWeight=0,this.layerWeight=0,this.blendWeight=0},e.BONE_TRANSFORM="boneTransform",e.BONE_ALPHA="boneAlpha",e.SURFACE="surface",e.SLOT_DEFORM="slotDeform",e.SLOT_ALPHA="slotAlpha",e.SLOT_Z_INDEX="slotZIndex",e}(t.BaseObject);t.BlendState=r}(s||(s={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onClear=function(){this.dirty=!1,this.playState=-1,this.currentPlayTimes=0,this.currentTime=-1,this.target=null,this._isTween=!1,this._valueOffset=0,this._frameValueOffset=0,this._frameOffset=0,this._frameRate=0,this._frameCount=0,this._frameIndex=-1,this._frameRateR=0,this._position=0,this._duration=0,this._timeScale=1,this._timeOffset=0,this._animationData=null,this._timelineData=null,this._armature=null,this._animationState=null,this._actionTimeline=null,this._frameArray=null,this._valueArray=null,this._timelineArray=null,this._frameIndices=null},e.prototype._setCurrentTime=function(t){var e=this.playState,r=this.currentPlayTimes,a=this.currentTime;if(null!==this._actionTimeline&&this._frameCount<=1)this.playState=this._actionTimeline.playState>=0?1:-1,this.currentPlayTimes=1,this.currentTime=this._actionTimeline.currentTime;else if(null===this._actionTimeline||1!==this._timeScale||0!==this._timeOffset){var i=this._animationState.playTimes,n=i*this._duration;t*=this._timeScale,0!==this._timeOffset&&(t+=this._timeOffset*this._animationData.duration),i>0&&(t>=n||t<=-n)?(this.playState<=0&&3===this._animationState._playheadState&&(this.playState=1),this.currentPlayTimes=i,this.currentTime=t<0?0:1===this.playState?this._duration+1e-6:this._duration):(0!==this.playState&&3===this._animationState._playheadState&&(this.playState=0),t<0?(t=-t,this.currentPlayTimes=Math.floor(t/this._duration),this.currentTime=this._duration-t%this._duration):(this.currentPlayTimes=Math.floor(t/this._duration),this.currentTime=t%this._duration)),this.currentTime+=this._position}else this.playState=this._actionTimeline.playState,this.currentPlayTimes=this._actionTimeline.currentPlayTimes,this.currentTime=this._actionTimeline.currentTime;return(this.currentPlayTimes!==r||this.currentTime!==a)&&((e<0&&this.playState!==e||this.playState<=0&&this.currentPlayTimes!==r)&&(this._frameIndex=-1),!0)},e.prototype.init=function(t,e,r){if(this._armature=t,this._animationState=e,this._timelineData=r,this._actionTimeline=this._animationState._actionTimeline,this===this._actionTimeline&&(this._actionTimeline=null),this._animationData=this._animationState.animationData,this._frameRate=this._animationData.parent.frameRate,this._frameRateR=1/this._frameRate,this._position=this._animationState._position,this._duration=this._animationState._duration,null!==this._timelineData){var a=this._animationData.parent.parent;this._frameArray=a.frameArray,this._timelineArray=a.timelineArray,this._frameIndices=a.frameIndices,this._frameCount=this._timelineArray[this._timelineData.offset+2],this._frameValueOffset=this._timelineArray[this._timelineData.offset+4],this._timeScale=100/this._timelineArray[this._timelineData.offset+0],this._timeOffset=.01*this._timelineArray[this._timelineData.offset+1]}},e.prototype.fadeOut=function(){this.dirty=!1},e.prototype.update=function(t){if(this._setCurrentTime(t)){if(this._frameCount>1){var e=Math.floor(this.currentTime*this._frameRate),r=this._frameIndices[this._timelineData.frameIndicesOffset+e];this._frameIndex!==r&&(this._frameIndex=r,this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex],this._onArriveAtFrame())}else this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData&&(this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5]),this._onArriveAtFrame());(this._isTween||this.dirty)&&this._onUpdateFrame()}},e.prototype.blend=function(t){},e}(t.BaseObject);t.TimelineState=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e._getEasingValue=function(t,e,r){var a=e;switch(t){case 3:a=Math.pow(e,2);break;case 4:a=1-Math.pow(1-e,2);break;case 5:a=.5*(1-Math.cos(e*Math.PI));break}return(a-e)*r+e},e._getEasingCurveValue=function(t,e,r,a){if(t<=0)return 0;if(t>=1)return 1;var i=r>0,n=r+1,s=Math.floor(t*n),o=0,l=0;return i?(o=0===s?0:e[a+s-1],l=s===n-1?1e4:e[a+s]):(o=e[a+s-1],l=e[a+s]),1e-4*(o+(l-o)*(t*n-s))},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._tweenType=0,this._curveCount=0,this._framePosition=0,this._frameDurationR=0,this._tweenEasing=0,this._tweenProgress=0,this._valueScale=1},e.prototype._onArriveAtFrame=function(){if(this._frameCount>1&&(this._frameIndex!==this._frameCount-1||0===this._animationState.playTimes||this._animationState.currentPlayTimes<this._animationState.playTimes-1))if(this._tweenType=this._frameArray[this._frameOffset+1],this._isTween=0!==this._tweenType,this._isTween?2===this._tweenType?this._curveCount=this._frameArray[this._frameOffset+2]:0!==this._tweenType&&1!==this._tweenType&&(this._tweenEasing=.01*this._frameArray[this._frameOffset+2]):this.dirty=!0,this._framePosition=this._frameArray[this._frameOffset]*this._frameRateR,this._frameIndex===this._frameCount-1)this._frameDurationR=1/(this._animationData.duration-this._framePosition);else{var t=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex+1],e=this._frameArray[t]*this._frameRateR-this._framePosition;this._frameDurationR=e>0?1/e:0}else this.dirty=!0,this._isTween=!1},e.prototype._onUpdateFrame=function(){this._isTween&&(this.dirty=!0,this._tweenProgress=(this.currentTime-this._framePosition)*this._frameDurationR,2===this._tweenType?this._tweenProgress=e._getEasingCurveValue(this._tweenProgress,this._frameArray,this._curveCount,this._frameOffset+3):1!==this._tweenType&&(this._tweenProgress=e._getEasingValue(this._tweenType,this._tweenProgress,this._tweenEasing)))},e}(e);t.TweenTimelineState=r;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._current=0,this._difference=0,this._result=0},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._valueScale,r=this._valueArray,a=this._valueOffset+this._frameValueOffset+this._frameIndex;if(this._isTween){var i=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:a+1;1===e?(this._current=r[a],this._difference=r[i]-this._current):(this._current=r[a]*e,this._difference=r[i]*e-this._current)}else this._result=r[a]*e}else this._result=0},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._result=this._current+this._difference*this._tweenProgress)},e}(r);t.SingleValueTimelineState=a;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._currentA=0,this._currentB=0,this._differenceA=0,this._differenceB=0,this._resultA=0,this._resultB=0},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._valueScale,r=this._valueArray,a=this._valueOffset+this._frameValueOffset+2*this._frameIndex;if(this._isTween){var i=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:a+2;1===e?(this._currentA=r[a],this._currentB=r[a+1],this._differenceA=r[i]-this._currentA,this._differenceB=r[i+1]-this._currentB):(this._currentA=r[a]*e,this._currentB=r[a+1]*e,this._differenceA=r[i]*e-this._currentA,this._differenceB=r[i+1]*e-this._currentB)}else this._resultA=r[a]*e,this._resultB=r[a+1]*e}else this._resultA=0,this._resultB=0},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._resultA=this._currentA+this._differenceA*this._tweenProgress,this._resultB=this._currentB+this._differenceB*this._tweenProgress)},e}(r);t.DoubleValueTimelineState=i;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rd=[],e}return n(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._valueCount=0,this._rd.length=0},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);var e=this._valueCount,r=this._rd;if(null!==this._timelineData){var a=this._valueScale,i=this._valueArray,n=this._valueOffset+this._frameValueOffset+this._frameIndex*e;if(this._isTween){var s=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:n+e;if(1===a)for(var o=0;o<e;++o)r[e+o]=i[s+o]-i[n+o];else for(o=0;o<e;++o)r[e+o]=(i[s+o]-i[n+o])*a}else if(1===a)for(o=0;o<e;++o)r[o]=i[n+o];else for(o=0;o<e;++o)r[o]=i[n+o]*a}else for(o=0;o<e;++o)r[o]=0},e.prototype._onUpdateFrame=function(){if(t.prototype._onUpdateFrame.call(this),this._isTween){var e=this._valueCount,r=this._valueScale,a=this._tweenProgress,i=this._valueArray,n=this._rd,s=this._valueOffset+this._frameValueOffset+this._frameIndex*e;if(1===r)for(var o=0;o<e;++o)n[o]=i[s+o]+n[e+o]*a;else for(o=0;o<e;++o)n[o]=i[s+o]*r+n[e+o]*a}},e}(r);t.MutilpleValueTimelineState=s}(s||(s={})),function(t){var e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.toString=function(){return"[class dragonBones.ActionTimelineState]"},r.prototype._onCrossFrame=function(e){var r=this._armature.eventDispatcher;if(this._animationState.actionEnabled)for(var a=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+e],i=this._frameArray[a+1],n=this._animationData.parent.actions,s=0;s<i;++s){var o=this._frameArray[a+2+s],l=n[o];if(0===l.type){var h=t.BaseObject.borrowObject(t.EventObject);h.time=this._frameArray[a]/this._frameRate,h.animationState=this._animationState,t.EventObject.actionDataToInstance(l,h,this._armature),this._armature._bufferAction(h,!0)}else{var u=10===l.type?t.EventObject.FRAME_EVENT:t.EventObject.SOUND_EVENT;if(11===l.type||r.hasDBEventListener(u)){h=t.BaseObject.borrowObject(t.EventObject);h.time=this._frameArray[a]/this._frameRate,h.animationState=this._animationState,t.EventObject.actionDataToInstance(l,h,this._armature),this._armature._dragonBones.bufferEvent(h)}}}},r.prototype._onArriveAtFrame=function(){},r.prototype._onUpdateFrame=function(){},r.prototype.update=function(e){var r=this.playState,a=this.currentPlayTimes,i=this.currentTime;if(this._setCurrentTime(e)){var n=null===this._animationState._parent&&this._animationState.actionEnabled,s=this._armature.eventDispatcher;if(r<0){if(this.playState===r)return;if(this._animationState.displayControl&&this._animationState.resetToPose&&this._armature._sortZOrder(null,0),n&&s.hasDBEventListener(t.EventObject.START)){var o=t.BaseObject.borrowObject(t.EventObject);o.type=t.EventObject.START,o.armature=this._armature,o.animationState=this._animationState,this._armature._dragonBones.bufferEvent(o)}}var l=this._animationState.timeScale<0,h=null,u=null;if(n&&this.currentPlayTimes!==a&&(s.hasDBEventListener(t.EventObject.LOOP_COMPLETE)&&(h=t.BaseObject.borrowObject(t.EventObject),h.type=t.EventObject.LOOP_COMPLETE,h.armature=this._armature,h.animationState=this._animationState),this.playState>0&&s.hasDBEventListener(t.EventObject.COMPLETE)&&(u=t.BaseObject.borrowObject(t.EventObject),u.type=t.EventObject.COMPLETE,u.armature=this._armature,u.animationState=this._animationState)),this._frameCount>1){var f=this._timelineData,c=Math.floor(this.currentTime*this._frameRate),_=this._frameIndices[f.frameIndicesOffset+c];if(this._frameIndex!==_){var p=this._frameIndex;if(this._frameIndex=_,null!==this._timelineArray)if(this._frameOffset=this._animationData.frameOffset+this._timelineArray[f.offset+5+this._frameIndex],l){if(p<0){var m=Math.floor(i*this._frameRate);p=this._frameIndices[f.frameIndicesOffset+m],this.currentPlayTimes===a&&p===_&&(p=-1)}while(p>=0){var d=this._animationData.frameOffset+this._timelineArray[f.offset+5+p],y=this._frameArray[d]/this._frameRate;if(this._position<=y&&y<=this._position+this._duration&&this._onCrossFrame(p),null!==h&&0===p&&(this._armature._dragonBones.bufferEvent(h),h=null),p>0?p--:p=this._frameCount-1,p===_)break}}else{if(p<0){m=Math.floor(i*this._frameRate);p=this._frameIndices[f.frameIndicesOffset+m];d=this._animationData.frameOffset+this._timelineArray[f.offset+5+p],y=this._frameArray[d]/this._frameRate;this.currentPlayTimes===a&&(i<=y?p>0?p--:p=this._frameCount-1:p===_&&(p=-1))}while(p>=0){p<this._frameCount-1?p++:p=0;d=this._animationData.frameOffset+this._timelineArray[f.offset+5+p],y=this._frameArray[d]/this._frameRate;if(this._position<=y&&y<=this._position+this._duration&&this._onCrossFrame(p),null!==h&&0===p&&(this._armature._dragonBones.bufferEvent(h),h=null),p===_)break}}}}else if(this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData)){this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5];y=this._frameArray[this._frameOffset]/this._frameRate;this.currentPlayTimes===a?i<=y&&this._onCrossFrame(this._frameIndex):this._position<=y&&(l||null===h||(this._armature._dragonBones.bufferEvent(h),h=null),this._onCrossFrame(this._frameIndex))}null!==h&&this._armature._dragonBones.bufferEvent(h),null!==u&&this._armature._dragonBones.bufferEvent(u)}},r.prototype.setCurrentTime=function(t){this._setCurrentTime(t),this._frameIndex=-1},r}(t.TimelineState);t.ActionTimelineState=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.ZOrderTimelineState]"},e.prototype._onArriveAtFrame=function(){if(this.playState>=0){var t=this._frameArray[this._frameOffset+1];t>0?this._armature._sortZOrder(this._frameArray,this._frameOffset+2):this._armature._sortZOrder(null,0)}},e.prototype._onUpdateFrame=function(){},e}(t.TimelineState);t.ZOrderTimelineState=r;var a=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.toString=function(){return"[class dragonBones.BoneAllTimelineState]"},r.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._rd[2]=t.Transform.normalizeRadian(this._rd[2]),this._rd[3]=t.Transform.normalizeRadian(this._rd[3])),null===this._timelineData&&(this._rd[4]=1,this._rd[5]=1)},r.prototype.init=function(t,r,a){e.prototype.init.call(this,t,r,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=6,this._valueArray=this._animationData.parent.parent.frameFloatArray},r.prototype.fadeOut=function(){this.dirty=!1,this._rd[2]=t.Transform.normalizeRadian(this._rd[2]),this._rd[3]=t.Transform.normalizeRadian(this._rd[3])},r.prototype.blend=function(t){var e=this._armature.armatureData.scale,r=this._rd,a=this.target,i=a.target,n=a.blendWeight,s=i.animationPose;a.dirty>1?(s.x+=r[0]*n*e,s.y+=r[1]*n*e,s.rotation+=r[2]*n,s.skew+=r[3]*n,s.scaleX+=(r[4]-1)*n,s.scaleY+=(r[5]-1)*n):(s.x=r[0]*n*e,s.y=r[1]*n*e,s.rotation=r[2]*n,s.skew=r[3]*n,s.scaleX=(r[4]-1)*n+1,s.scaleY=(r[5]-1)*n+1),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},r}(t.MutilpleValueTimelineState);t.BoneAllTimelineState=a;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.BoneTranslateTimelineState]"},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight,i=r.animationPose;e.dirty>1?(i.x+=this._resultA*a,i.y+=this._resultB*a):1!==a?(i.x=this._resultA*a,i.y=this._resultB*a):(i.x=this._resultA,i.y=this._resultB),(t||this.dirty)&&(this.dirty=!1,r._transformDirty=!0)},e}(t.DoubleValueTimelineState);t.BoneTranslateTimelineState=i;var s=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.toString=function(){return"[class dragonBones.BoneRotateTimelineState]"},r.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._differenceA=t.Transform.normalizeRadian(this._differenceA),this._differenceB=t.Transform.normalizeRadian(this._differenceB))},r.prototype.init=function(t,r,a){e.prototype.init.call(this,t,r,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},r.prototype.fadeOut=function(){this.dirty=!1,this._resultA=t.Transform.normalizeRadian(this._resultA),this._resultB=t.Transform.normalizeRadian(this._resultB)},r.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight,i=r.animationPose;e.dirty>1?(i.rotation+=this._resultA*a,i.skew+=this._resultB*a):1!==a?(i.rotation=this._resultA*a,i.skew=this._resultB*a):(i.rotation=this._resultA,i.skew=this._resultB),(t||this.dirty)&&(this.dirty=!1,r._transformDirty=!0)},r}(t.DoubleValueTimelineState);t.BoneRotateTimelineState=s;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.BoneScaleTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._resultA=1,this._resultB=1)},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight,i=r.animationPose;e.dirty>1?(i.scaleX+=(this._resultA-1)*a,i.scaleY+=(this._resultB-1)*a):1!==a?(i.scaleX=(this._resultA-1)*a+1,i.scaleY=(this._resultB-1)*a+1):(i.scaleX=this._resultA,i.scaleY=this._resultB),(t||this.dirty)&&(this.dirty=!1,r._transformDirty=!0)},e}(t.DoubleValueTimelineState);t.BoneScaleTimelineState=o;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.SurfaceTimelineState]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},e.prototype.init=function(e,r,a){if(t.prototype.init.call(this,e,r,a),null!==this._timelineData){var i=this._animationData.parent.parent,n=i.frameIntArray,s=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3];this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=n[s+2],this._deformCount=n[s+1],this._deformOffset=n[s+3],this._sameValueOffset=n[s+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=i.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.target.target._deformVertices.length},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight,i=r._deformVertices,n=this._valueArray;if(null!==n)for(var s=this._valueCount,o=this._deformOffset,l=this._sameValueOffset,h=this._rd,u=0;u<this._deformCount;++u){var f=0;f=u<o?n[l+u]:u<o+s?h[u-o]:n[l+u-s],e.dirty>1?i[u]+=f*a:i[u]=f*a}else if(1===e.dirty)for(u=0;u<this._deformCount;++u)i[u]=0;(t||this.dirty)&&(this.dirty=!1,r._transformDirty=!0)},e}(t.MutilpleValueTimelineState);t.SurfaceTimelineState=l;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.AlphaTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._result=1)},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight;e.dirty>1?(r._alpha+=this._result*a,r._alpha>1&&(r._alpha=1)):r._alpha=this._result*a,(t||this.dirty)&&(this.dirty=!1,this._armature._alphaDirty=!0)},e}(t.SingleValueTimelineState);t.AlphaTimelineState=h;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.SlotDisplayTimelineState]"},e.prototype._onArriveAtFrame=function(){if(this.playState>=0){var t=this.target,e=null!==this._timelineData?this._frameArray[this._frameOffset+1]:t._slotData.displayIndex;t.displayIndex!==e&&t._setDisplayIndex(e,!0)}},e.prototype._onUpdateFrame=function(){},e}(t.TimelineState);t.SlotDisplayTimelineState=u;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._current=[0,0,0,0,0,0,0,0],e._difference=[0,0,0,0,0,0,0,0],e._result=[0,0,0,0,0,0,0,0],e}return n(e,t),e.toString=function(){return"[class dragonBones.SlotColorTimelineState]"},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._animationData.parent.parent,r=e.colorArray,a=e.frameIntArray,i=this._animationData.frameIntOffset+this._frameValueOffset+this._frameIndex,n=a[i];n<0&&(n+=65536),this._isTween?(this._current[0]=r[n++],this._current[1]=r[n++],this._current[2]=r[n++],this._current[3]=r[n++],this._current[4]=r[n++],this._current[5]=r[n++],this._current[6]=r[n++],this._current[7]=r[n++],n=this._frameIndex===this._frameCount-1?a[this._animationData.frameIntOffset+this._frameValueOffset]:a[i+1],n<0&&(n+=65536),this._difference[0]=r[n++]-this._current[0],this._difference[1]=r[n++]-this._current[1],this._difference[2]=r[n++]-this._current[2],this._difference[3]=r[n++]-this._current[3],this._difference[4]=r[n++]-this._current[4],this._difference[5]=r[n++]-this._current[5],this._difference[6]=r[n++]-this._current[6],this._difference[7]=r[n++]-this._current[7]):(this._result[0]=.01*r[n++],this._result[1]=.01*r[n++],this._result[2]=.01*r[n++],this._result[3]=.01*r[n++],this._result[4]=r[n++],this._result[5]=r[n++],this._result[6]=r[n++],this._result[7]=r[n++])}else{var s=this.target,o=s.slotData.color;this._result[0]=o.alphaMultiplier,this._result[1]=o.redMultiplier,this._result[2]=o.greenMultiplier,this._result[3]=o.blueMultiplier,this._result[4]=o.alphaOffset,this._result[5]=o.redOffset,this._result[6]=o.greenOffset,this._result[7]=o.blueOffset}},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._result[0]=.01*(this._current[0]+this._difference[0]*this._tweenProgress),this._result[1]=.01*(this._current[1]+this._difference[1]*this._tweenProgress),this._result[2]=.01*(this._current[2]+this._difference[2]*this._tweenProgress),this._result[3]=.01*(this._current[3]+this._difference[3]*this._tweenProgress),this._result[4]=this._current[4]+this._difference[4]*this._tweenProgress,this._result[5]=this._current[5]+this._difference[5]*this._tweenProgress,this._result[6]=this._current[6]+this._difference[6]*this._tweenProgress,this._result[7]=this._current[7]+this._difference[7]*this._tweenProgress)},e.prototype.fadeOut=function(){this._isTween=!1},e.prototype.update=function(e){if(t.prototype.update.call(this,e),this._isTween||this.dirty){var r=this.target,a=r._colorTransform;if(0!==this._animationState._fadeState||0!==this._animationState._subFadeState){if(a.alphaMultiplier!==this._result[0]||a.redMultiplier!==this._result[1]||a.greenMultiplier!==this._result[2]||a.blueMultiplier!==this._result[3]||a.alphaOffset!==this._result[4]||a.redOffset!==this._result[5]||a.greenOffset!==this._result[6]||a.blueOffset!==this._result[7]){var i=Math.pow(this._animationState._fadeProgress,4);a.alphaMultiplier+=(this._result[0]-a.alphaMultiplier)*i,a.redMultiplier+=(this._result[1]-a.redMultiplier)*i,a.greenMultiplier+=(this._result[2]-a.greenMultiplier)*i,a.blueMultiplier+=(this._result[3]-a.blueMultiplier)*i,a.alphaOffset+=(this._result[4]-a.alphaOffset)*i,a.redOffset+=(this._result[5]-a.redOffset)*i,a.greenOffset+=(this._result[6]-a.greenOffset)*i,a.blueOffset+=(this._result[7]-a.blueOffset)*i,r._colorDirty=!0}}else this.dirty&&(this.dirty=!1,a.alphaMultiplier===this._result[0]&&a.redMultiplier===this._result[1]&&a.greenMultiplier===this._result[2]&&a.blueMultiplier===this._result[3]&&a.alphaOffset===this._result[4]&&a.redOffset===this._result[5]&&a.greenOffset===this._result[6]&&a.blueOffset===this._result[7]||(a.alphaMultiplier=this._result[0],a.redMultiplier=this._result[1],a.greenMultiplier=this._result[2],a.blueMultiplier=this._result[3],a.alphaOffset=this._result[4],a.redOffset=this._result[5],a.greenOffset=this._result[6],a.blueOffset=this._result[7],r._colorDirty=!0))}},e}(t.TweenTimelineState);t.SlotColorTimelineState=f;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.SlotZIndexTimelineState]"},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null===this._timelineData){var e=this.target,r=e.target;this._result=r.slotData.zIndex}},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueArray=this._animationData.parent.parent.frameIntArray},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight;e.dirty>1?r._zIndex+=this._result*a:r._zIndex=this._result*a,(t||this.dirty)&&(this.dirty=!1,this._armature._zIndexDirty=!0)},e}(t.SingleValueTimelineState);t.SlotZIndexTimelineState=c;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.DeformTimelineState]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.displayFrame=null,this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},e.prototype.init=function(e,r,a){if(t.prototype.init.call(this,e,r,a),null!==this._timelineData){var i=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3],n=this._animationData.parent.parent,s=n.frameIntArray;this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=s[i+2],this._deformCount=s[i+1],this._deformOffset=s[i+3],this._sameValueOffset=s[i+4],this._sameValueOffset<0&&(this._sameValueOffset+=65536),this._sameValueOffset+=this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=n.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.displayFrame.deformVertices.length},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight,i=this.displayFrame.deformVertices,n=this._valueArray;if(null!==n)for(var s=this._valueCount,o=this._deformOffset,l=this._sameValueOffset,h=this._rd,u=0;u<this._deformCount;++u){var f=0;f=u<o?n[l+u]:u<o+s?h[u-o]:n[l+u-s],e.dirty>1?i[u]+=f*a:i[u]=f*a}else if(1===e.dirty)for(u=0;u<this._deformCount;++u)i[u]=0;(t||this.dirty)&&(this.dirty=!1,r._geometryData===this.displayFrame.getGeometryData()&&(r._verticesDirty=!0))},e}(t.MutilpleValueTimelineState);t.DeformTimelineState=_;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.IKConstraintTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;if(null!==this._timelineData)e._bendPositive=this._currentA>0,e._weight=this._currentB;else{var r=e._constraintData;e._bendPositive=r.bendPositive,e._weight=r.weight}e.invalidUpdate(),this.dirty=!1},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.DoubleValueTimelineState);t.IKConstraintTimelineState=p;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationProgressTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.currentTime=this._result*e.totalTime),this.dirty=!1},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.SingleValueTimelineState);t.AnimationProgressTimelineState=m;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationWeightTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.weight=this._result),this.dirty=!1},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.SingleValueTimelineState);t.AnimationWeightTimelineState=d;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationParametersTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.parameterX=this._resultA,e.parameterY=this._resultB),this.dirty=!1},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.DoubleValueTimelineState);t.AnimationParametersTimelineState=y}(s||(s={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.actionDataToInstance=function(t,r,a){0===t.type?r.type=e.FRAME_EVENT:r.type=10===t.type?e.FRAME_EVENT:e.SOUND_EVENT,r.name=t.name,r.armature=a,r.actionData=t,r.data=t.data,null!==t.bone&&(r.bone=a.getBone(t.bone.name)),null!==t.slot&&(r.slot=a.getSlot(t.slot.name))},e.toString=function(){return"[class dragonBones.EventObject]"},e.prototype._onClear=function(){this.time=0,this.type="",this.name="",this.armature=null,this.bone=null,this.slot=null,this.animationState=null,this.actionData=null,this.data=null},e.START="start",e.LOOP_COMPLETE="loopComplete",e.COMPLETE="complete",e.FADE_IN="fadeIn",e.FADE_IN_COMPLETE="fadeInComplete",e.FADE_OUT="fadeOut",e.FADE_OUT_COMPLETE="fadeOutComplete",e.FRAME_EVENT="frameEvent",e.SOUND_EVENT="soundEvent",e}(t.BaseObject);t.EventObject=e}(s||(s={})),function(t){var e=function(){function t(){}return t._getArmatureType=function(t){switch(t.toLowerCase()){case"stage":return 2;case"armature":return 0;case"movieclip":return 1;default:return 0}},t._getBoneType=function(t){switch(t.toLowerCase()){case"bone":return 0;case"surface":return 1;default:return 0}},t._getPositionMode=function(t){switch(t.toLocaleLowerCase()){case"percent":return 1;case"fixed":return 0;default:return 1}},t._getSpacingMode=function(t){switch(t.toLocaleLowerCase()){case"length":return 0;case"percent":return 2;case"fixed":return 1;default:return 0}},t._getRotateMode=function(t){switch(t.toLocaleLowerCase()){case"tangent":return 0;case"chain":return 1;case"chainscale":return 2;default:return 0}},t._getDisplayType=function(t){switch(t.toLowerCase()){case"image":return 0;case"mesh":return 2;case"armature":return 1;case"boundingbox":return 3;case"path":return 4;default:return 0}},t._getBoundingBoxType=function(t){switch(t.toLowerCase()){case"rectangle":return 0;case"ellipse":return 1;case"polygon":return 2;default:return 0}},t._getBlendMode=function(t){switch(t.toLowerCase()){case"normal":return 0;case"add":return 1;case"alpha":return 2;case"darken":return 3;case"difference":return 4;case"erase":return 5;case"hardlight":return 6;case"invert":return 7;case"layer":return 8;case"lighten":return 9;case"multiply":return 10;case"overlay":return 11;case"screen":return 12;case"subtract":return 13;default:return 0}},t._getAnimationBlendType=function(t){switch(t.toLowerCase()){case"none":return 0;case"1d":return 1;default:return 0}},t._getActionType=function(t){switch(t.toLowerCase()){case"play":return 0;case"frame":return 10;case"sound":return 11;default:return 0}},t.DATA_VERSION_2_3="2.3",t.DATA_VERSION_3_0="3.0",t.DATA_VERSION_4_0="4.0",t.DATA_VERSION_4_5="4.5",t.DATA_VERSION_5_0="5.0",t.DATA_VERSION_5_5="5.5",t.DATA_VERSION_5_6="5.6",t.DATA_VERSION=t.DATA_VERSION_5_6,t.DATA_VERSIONS=[t.DATA_VERSION_4_0,t.DATA_VERSION_4_5,t.DATA_VERSION_5_0,t.DATA_VERSION_5_5,t.DATA_VERSION_5_6],t.TEXTURE_ATLAS="textureAtlas",t.SUB_TEXTURE="SubTexture",t.FORMAT="format",t.IMAGE_PATH="imagePath",t.WIDTH="width",t.HEIGHT="height",t.ROTATED="rotated",t.FRAME_X="frameX",t.FRAME_Y="frameY",t.FRAME_WIDTH="frameWidth",t.FRAME_HEIGHT="frameHeight",t.DRADON_BONES="dragonBones",t.USER_DATA="userData",t.ARMATURE="armature",t.CANVAS="canvas",t.BONE="bone",t.SURFACE="surface",t.SLOT="slot",t.CONSTRAINT="constraint",t.SKIN="skin",t.DISPLAY="display",t.FRAME="frame",t.IK="ik",t.PATH_CONSTRAINT="path",t.ANIMATION="animation",t.TIMELINE="timeline",t.FFD="ffd",t.TRANSLATE_FRAME="translateFrame",t.ROTATE_FRAME="rotateFrame",t.SCALE_FRAME="scaleFrame",t.DISPLAY_FRAME="displayFrame",t.COLOR_FRAME="colorFrame",t.DEFAULT_ACTIONS="defaultActions",t.ACTIONS="actions",t.EVENTS="events",t.INTS="ints",t.FLOATS="floats",t.STRINGS="strings",t.TRANSFORM="transform",t.PIVOT="pivot",t.AABB="aabb",t.COLOR="color",t.VERSION="version",t.COMPATIBLE_VERSION="compatibleVersion",t.FRAME_RATE="frameRate",t.TYPE="type",t.SUB_TYPE="subType",t.NAME="name",t.PARENT="parent",t.TARGET="target",t.STAGE="stage",t.SHARE="share",t.PATH="path",t.LENGTH="length",t.DISPLAY_INDEX="displayIndex",t.Z_ORDER="zOrder",t.Z_INDEX="zIndex",t.BLEND_MODE="blendMode",t.INHERIT_TRANSLATION="inheritTranslation",t.INHERIT_ROTATION="inheritRotation",t.INHERIT_SCALE="inheritScale",t.INHERIT_REFLECTION="inheritReflection",t.INHERIT_ANIMATION="inheritAnimation",t.INHERIT_DEFORM="inheritDeform",t.SEGMENT_X="segmentX",t.SEGMENT_Y="segmentY",t.BEND_POSITIVE="bendPositive",t.CHAIN="chain",t.WEIGHT="weight",t.BLEND_TYPE="blendType",t.FADE_IN_TIME="fadeInTime",t.PLAY_TIMES="playTimes",t.SCALE="scale",t.OFFSET="offset",t.POSITION="position",t.DURATION="duration",t.TWEEN_EASING="tweenEasing",t.TWEEN_ROTATE="tweenRotate",t.TWEEN_SCALE="tweenScale",t.CLOCK_WISE="clockwise",t.CURVE="curve",t.SOUND="sound",t.EVENT="event",t.ACTION="action",t.X="x",t.Y="y",t.SKEW_X="skX",t.SKEW_Y="skY",t.SCALE_X="scX",t.SCALE_Y="scY",t.VALUE="value",t.ROTATE="rotate",t.SKEW="skew",t.ALPHA="alpha",t.ALPHA_OFFSET="aO",t.RED_OFFSET="rO",t.GREEN_OFFSET="gO",t.BLUE_OFFSET="bO",t.ALPHA_MULTIPLIER="aM",t.RED_MULTIPLIER="rM",t.GREEN_MULTIPLIER="gM",t.BLUE_MULTIPLIER="bM",t.UVS="uvs",t.VERTICES="vertices",t.TRIANGLES="triangles",t.WEIGHTS="weights",t.SLOT_POSE="slotPose",t.BONE_POSE="bonePose",t.BONES="bones",t.POSITION_MODE="positionMode",t.SPACING_MODE="spacingMode",t.ROTATE_MODE="rotateMode",t.SPACING="spacing",t.ROTATE_OFFSET="rotateOffset",t.ROTATE_MIX="rotateMix",t.TRANSLATE_MIX="translateMix",t.TARGET_DISPLAY="targetDisplay",t.CLOSED="closed",t.CONSTANT_SPEED="constantSpeed",t.VERTEX_COUNT="vertexCount",t.LENGTHS="lengths",t.GOTO_AND_PLAY="gotoAndPlay",t.DEFAULT_NAME="default",t}();t.DataParser=e}(s||(s={})),function(t){var e=function(e){function i(){var r=null!==e&&e.apply(this,arguments)||this;return r._rawTextureAtlasIndex=0,r._rawBones=[],r._data=null,r._armature=null,r._bone=null,r._geometry=null,r._slot=null,r._skin=null,r._mesh=null,r._animation=null,r._timeline=null,r._rawTextureAtlases=null,r._frameValueType=0,r._defaultColorOffset=-1,r._prevClockwise=0,r._prevRotation=0,r._frameDefaultValue=0,r._frameValueScale=1,r._helpMatrixA=new t.Matrix,r._helpMatrixB=new t.Matrix,r._helpTransform=new t.Transform,r._helpColorTransform=new t.ColorTransform,r._helpPoint=new t.Point,r._helpArray=[],r._intArray=[],r._floatArray=[],r._frameIntArray=[],r._frameFloatArray=[],r._frameArray=[],r._timelineArray=[],r._colorArray=[],r._cacheRawMeshes=[],r._cacheMeshes=[],r._actionFrames=[],r._weightSlotPose={},r._weightBonePoses={},r._cacheBones={},r._slotChildActions={},r}return n(i,e),i._getBoolean=function(t,e,r){if(e in t){var i=t[e],n=Object(a["a"])(i);if("boolean"===n)return i;if("string"!==n)return!!i;switch(i){case"0":case"NaN":case"":case"false":case"null":case"undefined":return!1;default:return!0}}return r},i._getNumber=function(t,e,r){if(e in t){var a=t[e];return null===a||"NaN"===a?r:+a||0}return r},i._getString=function(t,e,r){if(e in t){var i=t[e],n=Object(a["a"])(i);return"string"===n?i:String(i)}return r},i.prototype._getCurvePoint=function(t,e,r,a,i,n,s,o,l,h){var u=1-l,f=u*u,c=l*l,_=u*f,p=3*l*f,m=3*u*c,d=l*c;h.x=_*t+p*r+m*i+d*s,h.y=_*e+p*a+m*n+d*o},i.prototype._samplingEasingCurve=function(t,e){var r=t.length;if(r%3===1){for(var a=-2,i=0,n=e.length;i<n;++i){var s=(i+1)/(n+1);while((a+6<r?t[a+6]:1)<s)a+=6;var o=a>=0&&a+6<r,l=o?t[a]:0,h=o?t[a+1]:0,u=t[a+2],f=t[a+3],c=t[a+4],_=t[a+5],p=o?t[a+6]:1,m=o?t[a+7]:1,d=0,y=1;while(y-d>1e-4){var g=.5*(y+d);this._getCurvePoint(l,h,u,f,c,_,p,m,g,this._helpPoint),s-this._helpPoint.x>0?d=g:y=g}e[i]=this._helpPoint.y}return!0}for(a=0,i=0,n=e.length;i<n;++i){s=(i+1)/(n+1);while(t[a+6]<s)a+=6;l=t[a],h=t[a+1],u=t[a+2],f=t[a+3],c=t[a+4],_=t[a+5],p=t[a+6],m=t[a+7],d=0,y=1;while(y-d>1e-4){g=.5*(y+d);this._getCurvePoint(l,h,u,f,c,_,p,m,g,this._helpPoint),s-this._helpPoint.x>0?d=g:y=g}e[i]=this._helpPoint.y}return!1},i.prototype._parseActionDataInFrame=function(e,r,a,i){t.DataParser.EVENT in e&&this._mergeActionFrame(e[t.DataParser.EVENT],r,10,a,i),t.DataParser.SOUND in e&&this._mergeActionFrame(e[t.DataParser.SOUND],r,11,a,i),t.DataParser.ACTION in e&&this._mergeActionFrame(e[t.DataParser.ACTION],r,0,a,i),t.DataParser.EVENTS in e&&this._mergeActionFrame(e[t.DataParser.EVENTS],r,10,a,i),t.DataParser.ACTIONS in e&&this._mergeActionFrame(e[t.DataParser.ACTIONS],r,0,a,i)},i.prototype._mergeActionFrame=function(t,e,a,i,n){for(var s=this._armature.actions.length,o=this._parseActionData(t,a,i,n),l=0,h=null,u=0,f=o;u<f.length;u++){var c=f[u];this._armature.addAction(c,!1)}0===this._actionFrames.length&&(h=new r,h.frameStart=0,this._actionFrames.push(h),h=null);for(var _=0,p=this._actionFrames;_<p.length;_++){var m=p[_];if(m.frameStart===e){h=m;break}if(m.frameStart>e)break;l++}null===h&&(h=new r,h.frameStart=e,this._actionFrames.splice(l,0,h));for(var d=0;d<o.length;++d)h.actions.push(s+d)},i.prototype._parseArmature=function(e,r){var a=t.BaseObject.borrowObject(t.ArmatureData);if(a.name=i._getString(e,t.DataParser.NAME,""),a.frameRate=i._getNumber(e,t.DataParser.FRAME_RATE,this._data.frameRate),a.scale=r,t.DataParser.TYPE in e&&"string"===typeof e[t.DataParser.TYPE]?a.type=t.DataParser._getArmatureType(e[t.DataParser.TYPE]):a.type=i._getNumber(e,t.DataParser.TYPE,0),0===a.frameRate&&(a.frameRate=24),this._armature=a,t.DataParser.CANVAS in e){var n=e[t.DataParser.CANVAS],s=t.BaseObject.borrowObject(t.CanvasData);t.DataParser.COLOR in n?s.hasBackground=!0:s.hasBackground=!1,s.color=i._getNumber(n,t.DataParser.COLOR,0),s.x=i._getNumber(n,t.DataParser.X,0)*a.scale,s.y=i._getNumber(n,t.DataParser.Y,0)*a.scale,s.width=i._getNumber(n,t.DataParser.WIDTH,0)*a.scale,s.height=i._getNumber(n,t.DataParser.HEIGHT,0)*a.scale,a.canvas=s}if(t.DataParser.AABB in e){var o=e[t.DataParser.AABB];a.aabb.x=i._getNumber(o,t.DataParser.X,0)*a.scale,a.aabb.y=i._getNumber(o,t.DataParser.Y,0)*a.scale,a.aabb.width=i._getNumber(o,t.DataParser.WIDTH,0)*a.scale,a.aabb.height=i._getNumber(o,t.DataParser.HEIGHT,0)*a.scale}if(t.DataParser.BONE in e)for(var l=e[t.DataParser.BONE],h=0,u=l;h<u.length;h++){var f=u[h],c=i._getString(f,t.DataParser.PARENT,""),_=this._parseBone(f);if(c.length>0){var p=a.getBone(c);null!==p?_.parent=p:(c in this._cacheBones||(this._cacheBones[c]=[]),this._cacheBones[c].push(_))}if(_.name in this._cacheBones){for(var m=0,d=this._cacheBones[_.name];m<d.length;m++){var y=d[m];y.parent=_}delete this._cacheBones[_.name]}a.addBone(_),this._rawBones.push(_)}if(t.DataParser.IK in e)for(var g=e[t.DataParser.IK],v=0,b=g;v<b.length;v++){var D=b[v],T=this._parseIKConstraint(D);T&&a.addConstraint(T)}if(a.sortBones(),t.DataParser.SLOT in e)for(var A=0,O=e[t.DataParser.SLOT],S=0,P=O;S<P.length;S++){var x=P[S];a.addSlot(this._parseSlot(x,A++))}if(t.DataParser.SKIN in e)for(var E=e[t.DataParser.SKIN],w=0,M=E;w<M.length;w++){var B=M[w];a.addSkin(this._parseSkin(B))}if(t.DataParser.PATH_CONSTRAINT in e)for(var I=e[t.DataParser.PATH_CONSTRAINT],F=0,C=I;F<C.length;F++){var R=C[F];T=this._parsePathConstraint(R);T&&a.addConstraint(T)}for(var N=0,j=this._cacheRawMeshes.length;N<j;++N){var k=this._cacheRawMeshes[N],L=i._getString(k,t.DataParser.SHARE,"");if(0!==L.length){var V=i._getString(k,t.DataParser.SKIN,t.DataParser.DEFAULT_NAME);0===V.length&&(V=t.DataParser.DEFAULT_NAME);var Y=a.getMesh(V,"",L);if(null!==Y){var U=this._cacheMeshes[N];U.geometry.shareFrom(Y.geometry)}}}if(t.DataParser.ANIMATION in e)for(var G=e[t.DataParser.ANIMATION],X=0,W=G;X<W.length;X++){var z=W[X],H=this._parseAnimation(z);a.addAnimation(H)}if(t.DataParser.DEFAULT_ACTIONS in e)for(var K=this._parseActionData(e[t.DataParser.DEFAULT_ACTIONS],0,null,null),q=0,Z=K;q<Z.length;q++){var Q=Z[q];if(a.addAction(Q,!0),0===Q.type){H=a.getAnimation(Q.name);null!==H&&(a.defaultAnimation=H)}}if(t.DataParser.ACTIONS in e){K=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null);for(var $=0,J=K;$<J.length;$++){Q=J[$];a.addAction(Q,!1)}}for(var tt in this._rawBones.length=0,this._cacheRawMeshes.length=0,this._cacheMeshes.length=0,this._armature=null,this._weightSlotPose)delete this._weightSlotPose[tt];for(var tt in this._weightBonePoses)delete this._weightBonePoses[tt];for(var tt in this._cacheBones)delete this._cacheBones[tt];for(var tt in this._slotChildActions)delete this._slotChildActions[tt];return a},i.prototype._parseBone=function(e){var r=0;if(r=t.DataParser.TYPE in e&&"string"===typeof e[t.DataParser.TYPE]?t.DataParser._getBoneType(e[t.DataParser.TYPE]):i._getNumber(e,t.DataParser.TYPE,0),0===r){var a=this._armature.scale,n=t.BaseObject.borrowObject(t.BoneData);return n.inheritTranslation=i._getBoolean(e,t.DataParser.INHERIT_TRANSLATION,!0),n.inheritRotation=i._getBoolean(e,t.DataParser.INHERIT_ROTATION,!0),n.inheritScale=i._getBoolean(e,t.DataParser.INHERIT_SCALE,!0),n.inheritReflection=i._getBoolean(e,t.DataParser.INHERIT_REFLECTION,!0),n.length=i._getNumber(e,t.DataParser.LENGTH,0)*a,n.alpha=i._getNumber(e,t.DataParser.ALPHA,1),n.name=i._getString(e,t.DataParser.NAME,""),t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],n.transform,a),n}var s=t.BaseObject.borrowObject(t.SurfaceData);return s.alpha=i._getNumber(e,t.DataParser.ALPHA,1),s.name=i._getString(e,t.DataParser.NAME,""),s.segmentX=i._getNumber(e,t.DataParser.SEGMENT_X,0),s.segmentY=i._getNumber(e,t.DataParser.SEGMENT_Y,0),this._parseGeometry(e,s.geometry),s},i.prototype._parseIKConstraint=function(e){var r=this._armature.getBone(i._getString(e,t.DataParser.BONE,""));if(null===r)return null;var a=this._armature.getBone(i._getString(e,t.DataParser.TARGET,""));if(null===a)return null;var n=i._getNumber(e,t.DataParser.CHAIN,0),s=t.BaseObject.borrowObject(t.IKConstraintData);return s.scaleEnabled=i._getBoolean(e,t.DataParser.SCALE,!1),s.bendPositive=i._getBoolean(e,t.DataParser.BEND_POSITIVE,!0),s.weight=i._getNumber(e,t.DataParser.WEIGHT,1),s.name=i._getString(e,t.DataParser.NAME,""),s.type=0,s.target=a,n>0&&null!==r.parent?(s.root=r.parent,s.bone=r):(s.root=r,s.bone=null),s},i.prototype._parsePathConstraint=function(e){var r=this._armature.getSlot(i._getString(e,t.DataParser.TARGET,""));if(null===r)return null;var a=this._armature.defaultSkin;if(null===a)return null;var n=a.getDisplay(r.name,i._getString(e,t.DataParser.TARGET_DISPLAY,r.name));if(null===n||!(n instanceof t.PathDisplayData))return null;var s=e[t.DataParser.BONES];if(null===s||0===s.length)return null;var o=t.BaseObject.borrowObject(t.PathConstraintData);o.name=i._getString(e,t.DataParser.NAME,""),o.type=1,o.pathSlot=r,o.pathDisplayData=n,o.target=r.parent,o.positionMode=t.DataParser._getPositionMode(i._getString(e,t.DataParser.POSITION_MODE,"")),o.spacingMode=t.DataParser._getSpacingMode(i._getString(e,t.DataParser.SPACING_MODE,"")),o.rotateMode=t.DataParser._getRotateMode(i._getString(e,t.DataParser.ROTATE_MODE,"")),o.position=i._getNumber(e,t.DataParser.POSITION,0),o.spacing=i._getNumber(e,t.DataParser.SPACING,0),o.rotateOffset=i._getNumber(e,t.DataParser.ROTATE_OFFSET,0),o.rotateMix=i._getNumber(e,t.DataParser.ROTATE_MIX,1),o.translateMix=i._getNumber(e,t.DataParser.TRANSLATE_MIX,1);for(var l=0,h=s;l<h.length;l++){var u=h[l],f=this._armature.getBone(u);null!==f&&(o.AddBone(f),null===o.root&&(o.root=f))}return o},i.prototype._parseSlot=function(e,r){var a=t.BaseObject.borrowObject(t.SlotData);return a.displayIndex=i._getNumber(e,t.DataParser.DISPLAY_INDEX,0),a.zOrder=r,a.zIndex=i._getNumber(e,t.DataParser.Z_INDEX,0),a.alpha=i._getNumber(e,t.DataParser.ALPHA,1),a.name=i._getString(e,t.DataParser.NAME,""),a.parent=this._armature.getBone(i._getString(e,t.DataParser.PARENT,"")),t.DataParser.BLEND_MODE in e&&"string"===typeof e[t.DataParser.BLEND_MODE]?a.blendMode=t.DataParser._getBlendMode(e[t.DataParser.BLEND_MODE]):a.blendMode=i._getNumber(e,t.DataParser.BLEND_MODE,0),t.DataParser.COLOR in e?(a.color=t.SlotData.createColor(),this._parseColorTransform(e[t.DataParser.COLOR],a.color)):a.color=t.SlotData.DEFAULT_COLOR,t.DataParser.ACTIONS in e&&(this._slotChildActions[a.name]=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null)),a},i.prototype._parseSkin=function(e){var r=t.BaseObject.borrowObject(t.SkinData);if(r.name=i._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===r.name.length&&(r.name=t.DataParser.DEFAULT_NAME),t.DataParser.SLOT in e){var a=e[t.DataParser.SLOT];this._skin=r;for(var n=0,s=a;n<s.length;n++){var o=s[n],l=i._getString(o,t.DataParser.NAME,""),h=this._armature.getSlot(l);if(null!==h){if(this._slot=h,t.DataParser.DISPLAY in o)for(var u=o[t.DataParser.DISPLAY],f=0,c=u;f<c.length;f++){var _=c[f];_?r.addDisplay(l,this._parseDisplay(_)):r.addDisplay(l,null)}this._slot=null}}this._skin=null}return r},i.prototype._parseDisplay=function(e){var r=i._getString(e,t.DataParser.NAME,""),a=i._getString(e,t.DataParser.PATH,""),n=0,s=null;switch(n=t.DataParser.TYPE in e&&"string"===typeof e[t.DataParser.TYPE]?t.DataParser._getDisplayType(e[t.DataParser.TYPE]):i._getNumber(e,t.DataParser.TYPE,n),n){case 0:var o=s=t.BaseObject.borrowObject(t.ImageDisplayData);o.name=r,o.path=a.length>0?a:r,this._parsePivot(e,o);break;case 1:var l=s=t.BaseObject.borrowObject(t.ArmatureDisplayData);if(l.name=r,l.path=a.length>0?a:r,l.inheritAnimation=!0,t.DataParser.ACTIONS in e)for(var h=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null),u=0,f=h;u<f.length;u++){var c=f[u];l.addAction(c)}else if(this._slot.name in this._slotChildActions){var _=this._skin.getDisplays(this._slot.name);if(null===_?0===this._slot.displayIndex:this._slot.displayIndex===_.length){for(var p=0,m=this._slotChildActions[this._slot.name];p<m.length;p++){c=m[p];l.addAction(c)}delete this._slotChildActions[this._slot.name]}}break;case 2:var d=s=t.BaseObject.borrowObject(t.MeshDisplayData);d.geometry.inheritDeform=i._getBoolean(e,t.DataParser.INHERIT_DEFORM,!0),d.name=r,d.path=a.length>0?a:r,t.DataParser.SHARE in e?(d.geometry.data=this._data,this._cacheRawMeshes.push(e),this._cacheMeshes.push(d)):this._parseMesh(e,d);break;case 3:var y=this._parseBoundingBox(e);if(null!==y){var g=s=t.BaseObject.borrowObject(t.BoundingBoxDisplayData);g.name=r,g.path=a.length>0?a:r,g.boundingBox=y}break;case 4:var v=e[t.DataParser.LENGTHS],b=s=t.BaseObject.borrowObject(t.PathDisplayData);b.closed=i._getBoolean(e,t.DataParser.CLOSED,!1),b.constantSpeed=i._getBoolean(e,t.DataParser.CONSTANT_SPEED,!1),b.name=r,b.path=a.length>0?a:r,b.curveLengths.length=v.length;for(var D=0,T=v.length;D<T;++D)b.curveLengths[D]=v[D];this._parsePath(e,b);break}return null!==s&&t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],s.transform,this._armature.scale),s},i.prototype._parsePath=function(t,e){this._parseGeometry(t,e.geometry)},i.prototype._parsePivot=function(e,r){if(t.DataParser.PIVOT in e){var a=e[t.DataParser.PIVOT];r.pivot.x=i._getNumber(a,t.DataParser.X,0),r.pivot.y=i._getNumber(a,t.DataParser.Y,0)}else r.pivot.x=.5,r.pivot.y=.5},i.prototype._parseMesh=function(e,r){if(this._parseGeometry(e,r.geometry),t.DataParser.WEIGHTS in e){var a=e[t.DataParser.SLOT_POSE],i=e[t.DataParser.BONE_POSE],n=this._skin.name+"_"+this._slot.name+"_"+r.name;this._weightSlotPose[n]=a,this._weightBonePoses[n]=i}},i.prototype._parseBoundingBox=function(e){var r=null,a=0;switch(a=t.DataParser.SUB_TYPE in e&&"string"===typeof e[t.DataParser.SUB_TYPE]?t.DataParser._getBoundingBoxType(e[t.DataParser.SUB_TYPE]):i._getNumber(e,t.DataParser.SUB_TYPE,a),a){case 0:r=t.BaseObject.borrowObject(t.RectangleBoundingBoxData);break;case 1:r=t.BaseObject.borrowObject(t.EllipseBoundingBoxData);break;case 2:r=this._parsePolygonBoundingBox(e);break}return null!==r&&(r.color=i._getNumber(e,t.DataParser.COLOR,0),0!==r.type&&1!==r.type||(r.width=i._getNumber(e,t.DataParser.WIDTH,0),r.height=i._getNumber(e,t.DataParser.HEIGHT,0))),r},i.prototype._parsePolygonBoundingBox=function(e){var r=t.BaseObject.borrowObject(t.PolygonBoundingBoxData);if(t.DataParser.VERTICES in e){var a=this._armature.scale,i=e[t.DataParser.VERTICES],n=r.vertices;n.length=i.length;for(var s=0,o=i.length;s<o;s+=2){var l=i[s]*a,h=i[s+1]*a;n[s]=l,n[s+1]=h,0===s?(r.x=l,r.y=h,r.width=l,r.height=h):(l<r.x?r.x=l:l>r.width&&(r.width=l),h<r.y?r.y=h:h>r.height&&(r.height=h))}r.width-=r.x,r.height-=r.y}else console.warn("Data error.\n Please reexport DragonBones Data to fixed the bug.");return r},i.prototype._parseAnimation=function(e){var r=t.BaseObject.borrowObject(t.AnimationData);if(r.blendType=t.DataParser._getAnimationBlendType(i._getString(e,t.DataParser.BLEND_TYPE,"")),r.frameCount=i._getNumber(e,t.DataParser.DURATION,0),r.playTimes=i._getNumber(e,t.DataParser.PLAY_TIMES,1),r.duration=r.frameCount/this._armature.frameRate,r.fadeInTime=i._getNumber(e,t.DataParser.FADE_IN_TIME,0),r.scale=i._getNumber(e,t.DataParser.SCALE,1),r.name=i._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===r.name.length&&(r.name=t.DataParser.DEFAULT_NAME),r.frameIntOffset=this._frameIntArray.length,r.frameFloatOffset=this._frameFloatArray.length,r.frameOffset=this._frameArray.length,this._animation=r,t.DataParser.FRAME in e){var a=e[t.DataParser.FRAME],n=a.length;if(n>0)for(var s=0,o=0;s<n;++s){var l=a[s];this._parseActionDataInFrame(l,o,null,null),o+=i._getNumber(l,t.DataParser.DURATION,1)}}if(t.DataParser.Z_ORDER in e&&(this._animation.zOrderTimeline=this._parseTimeline(e[t.DataParser.Z_ORDER],null,t.DataParser.FRAME,1,0,0,this._parseZOrderFrame)),t.DataParser.BONE in e)for(var h=e[t.DataParser.BONE],u=0,f=h;u<f.length;u++){var c=f[u];this._parseBoneTimeline(c)}if(t.DataParser.SLOT in e){h=e[t.DataParser.SLOT];for(var _=0,p=h;_<p.length;_++){c=p[_];this._parseSlotTimeline(c)}}if(t.DataParser.FFD in e){h=e[t.DataParser.FFD];for(var m=0,d=h;m<d.length;m++){c=d[m];var y=i._getString(c,t.DataParser.SKIN,t.DataParser.DEFAULT_NAME),g=i._getString(c,t.DataParser.SLOT,""),v=i._getString(c,t.DataParser.NAME,"");if(0===y.length&&(y=t.DataParser.DEFAULT_NAME),this._slot=this._armature.getSlot(g),this._mesh=this._armature.getMesh(y,g,v),null!==this._slot&&null!==this._mesh){var b=this._parseTimeline(c,null,t.DataParser.FRAME,22,2,0,this._parseSlotDeformFrame);null!==b&&this._animation.addSlotTimeline(g,b),this._slot=null,this._mesh=null}}}if(t.DataParser.IK in e){h=e[t.DataParser.IK];for(var D=0,T=h;D<T.length;D++){c=T[D];var A=i._getString(c,t.DataParser.NAME,""),O=this._armature.getConstraint(A);if(null!==O){b=this._parseTimeline(c,null,t.DataParser.FRAME,30,1,2,this._parseIKConstraintFrame);null!==b&&this._animation.addConstraintTimeline(A,b)}}}if(this._actionFrames.length>0&&(this._animation.actionTimeline=this._parseTimeline(null,this._actionFrames,"",0,0,0,this._parseActionFrame),this._actionFrames.length=0),t.DataParser.TIMELINE in e){h=e[t.DataParser.TIMELINE];for(var S=0,P=h;S<P.length;S++){c=P[S];var x=i._getNumber(c,t.DataParser.TYPE,0),E=i._getString(c,t.DataParser.NAME,"");b=null;switch(x){case 0:break;case 20:case 23:case 60:case 24:case 40:case 41:if(20===x?(this._frameValueType=0,this._frameValueScale=1):(this._frameValueType=1,this._frameValueScale=23===x?1:40===x||41===x?1e4:100),this._frameDefaultValue=60===x||24===x||41===x?1:0,40===x&&0!==r.blendType){b=t.BaseObject.borrowObject(t.AnimationTimelineData);var w=b;w.x=i._getNumber(c,t.DataParser.X,0),w.y=i._getNumber(c,t.DataParser.Y,0)}b=this._parseTimeline(c,null,t.DataParser.FRAME,x,this._frameValueType,1,this._parseSingleValueFrame,b);break;case 11:case 12:case 13:case 30:case 42:30===x||42===x?(this._frameValueType=1,this._frameValueScale=42===x?1e4:100):(this._frameValueScale=12===x?t.Transform.DEG_RAD:1,this._frameValueType=2),this._frameDefaultValue=13===x||30===x?1:0,b=this._parseTimeline(c,null,t.DataParser.FRAME,x,this._frameValueType,2,this._parseDoubleValueFrame);break;case 1:break;case 50:var M=this._armature.getBone(E);if(null===M)continue;this._geometry=M.geometry,b=this._parseTimeline(c,null,t.DataParser.FRAME,x,2,0,this._parseDeformFrame),this._geometry=null;break;case 22:for(var y in this._geometry=null,this._armature.skins){var B=this._armature.skins[y];for(var I in B.displays)for(var F=B.displays[I],C=0,R=F;C<R.length;C++){var N=R[C];if(null!==N&&N.name===E){this._geometry=N.geometry;break}}}if(null===this._geometry)continue;b=this._parseTimeline(c,null,t.DataParser.FRAME,x,2,0,this._parseDeformFrame),this._geometry=null;break;case 21:b=this._parseTimeline(c,null,t.DataParser.FRAME,x,1,1,this._parseSlotColorFrame);break}if(null!==b)switch(x){case 0:break;case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(E,b);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(E,b);break;case 30:this._animation.addConstraintTimeline(E,b);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(E,b);break}}}return this._animation=null,r},i.prototype._parseTimeline=function(e,a,n,s,o,l,h,u){if(void 0===u&&(u=null),null!==e&&n.length>0&&n in e&&(a=e[n]),null===a)return null;var f=a.length;if(0===f)return null;var c=this._frameIntArray.length,_=this._frameFloatArray.length,p=this._timelineArray.length;switch(null===u&&(u=t.BaseObject.borrowObject(t.TimelineData)),u.type=s,u.offset=p,this._frameValueType=o,this._timeline=u,this._timelineArray.length+=5+f,null!==e?(this._timelineArray[p+0]=Math.round(100*i._getNumber(e,t.DataParser.SCALE,1)),this._timelineArray[p+1]=Math.round(100*i._getNumber(e,t.DataParser.OFFSET,0))):(this._timelineArray[p+0]=100,this._timelineArray[p+1]=0),this._timelineArray[p+2]=f,this._timelineArray[p+3]=l,this._frameValueType){case 0:this._timelineArray[p+4]=0;break;case 1:this._timelineArray[p+4]=c-this._animation.frameIntOffset;break;case 2:this._timelineArray[p+4]=_-this._animation.frameFloatOffset;break}if(1===f)u.frameIndicesOffset=-1,this._timelineArray[p+5+0]=h.call(this,a[0],0,0)-this._animation.frameOffset;else{var m=this._animation.frameCount+1,d=this._data.frameIndices,y=d.length;d.length+=m,u.frameIndicesOffset=y;for(var g=0,v=0,b=0,D=0;g<m;++g){if(b+D<=g&&v<f){var T=a[v];b=g,D=v===f-1?this._animation.frameCount-b:T instanceof r?this._actionFrames[v+1].frameStart-b:i._getNumber(T,t.DataParser.DURATION,1),this._timelineArray[p+5+v]=h.call(this,T,b,D)-this._animation.frameOffset,v++}d[y+g]=v-1}}return this._timeline=null,u},i.prototype._parseBoneTimeline=function(e){var r=this._armature.getBone(i._getString(e,t.DataParser.NAME,""));if(null!==r){if(this._bone=r,this._slot=this._armature.getSlot(this._bone.name),t.DataParser.TRANSLATE_FRAME in e){this._frameDefaultValue=0,this._frameValueScale=1;var a=this._parseTimeline(e,null,t.DataParser.TRANSLATE_FRAME,11,2,2,this._parseDoubleValueFrame);null!==a&&this._animation.addBoneTimeline(r.name,a)}if(t.DataParser.ROTATE_FRAME in e){this._frameDefaultValue=0,this._frameValueScale=1;a=this._parseTimeline(e,null,t.DataParser.ROTATE_FRAME,12,2,2,this._parseBoneRotateFrame);null!==a&&this._animation.addBoneTimeline(r.name,a)}if(t.DataParser.SCALE_FRAME in e){this._frameDefaultValue=1,this._frameValueScale=1;a=this._parseTimeline(e,null,t.DataParser.SCALE_FRAME,13,2,2,this._parseBoneScaleFrame);null!==a&&this._animation.addBoneTimeline(r.name,a)}if(t.DataParser.FRAME in e){a=this._parseTimeline(e,null,t.DataParser.FRAME,10,2,6,this._parseBoneAllFrame);null!==a&&this._animation.addBoneTimeline(r.name,a)}this._bone=null,this._slot=null}},i.prototype._parseSlotTimeline=function(e){var r=this._armature.getSlot(i._getString(e,t.DataParser.NAME,""));if(null!==r){var a=null,n=null;this._slot=r,a=t.DataParser.DISPLAY_FRAME in e?this._parseTimeline(e,null,t.DataParser.DISPLAY_FRAME,20,0,0,this._parseSlotDisplayFrame):this._parseTimeline(e,null,t.DataParser.FRAME,20,0,0,this._parseSlotDisplayFrame),n=t.DataParser.COLOR_FRAME in e?this._parseTimeline(e,null,t.DataParser.COLOR_FRAME,21,1,1,this._parseSlotColorFrame):this._parseTimeline(e,null,t.DataParser.FRAME,21,1,1,this._parseSlotColorFrame),null!==a&&this._animation.addSlotTimeline(r.name,a),null!==n&&this._animation.addSlotTimeline(r.name,n),this._slot=null}},i.prototype._parseFrame=function(t,e,r){var a=this._frameArray.length;return this._frameArray.length+=1,this._frameArray[a+0]=e,a},i.prototype._parseTweenFrame=function(e,r,a){var n=this._parseFrame(e,r,a);if(a>0)if(t.DataParser.CURVE in e){var s=a+1;this._helpArray.length=s;var o=this._samplingEasingCurve(e[t.DataParser.CURVE],this._helpArray);this._frameArray.length+=2+this._helpArray.length,this._frameArray[n+1]=2,this._frameArray[n+2]=o?s:-s;for(var l=0;l<s;++l)this._frameArray[n+3+l]=Math.round(1e4*this._helpArray[l])}else{var h=-2,u=h;t.DataParser.TWEEN_EASING in e&&(u=i._getNumber(e,t.DataParser.TWEEN_EASING,h)),u===h?(this._frameArray.length+=1,this._frameArray[n+1]=0):0===u?(this._frameArray.length+=1,this._frameArray[n+1]=1):u<0?(this._frameArray.length+=2,this._frameArray[n+1]=3,this._frameArray[n+2]=Math.round(100*-u)):u<=1?(this._frameArray.length+=2,this._frameArray[n+1]=4,this._frameArray[n+2]=Math.round(100*u)):(this._frameArray.length+=2,this._frameArray[n+1]=5,this._frameArray[n+2]=Math.round(100*u-100))}else this._frameArray.length+=1,this._frameArray[n+1]=0;return n},i.prototype._parseSingleValueFrame=function(e,r,a){var n=0;switch(this._frameValueType){case 0:n=this._parseFrame(e,r,a),this._frameArray.length+=1,this._frameArray[n+1]=i._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue);break;case 1:n=this._parseTweenFrame(e,r,a);var s=this._frameIntArray.length;this._frameIntArray.length+=1,this._frameIntArray[s]=Math.round(i._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale);break;case 2:n=this._parseTweenFrame(e,r,a);s=this._frameFloatArray.length;this._frameFloatArray.length+=1,this._frameFloatArray[s]=i._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale;break}return n},i.prototype._parseDoubleValueFrame=function(e,r,a){var n=0;switch(this._frameValueType){case 0:n=this._parseFrame(e,r,a),this._frameArray.length+=2,this._frameArray[n+1]=i._getNumber(e,t.DataParser.X,this._frameDefaultValue),this._frameArray[n+2]=i._getNumber(e,t.DataParser.Y,this._frameDefaultValue);break;case 1:n=this._parseTweenFrame(e,r,a);var s=this._frameIntArray.length;this._frameIntArray.length+=2,this._frameIntArray[s]=Math.round(i._getNumber(e,t.DataParser.X,this._frameDefaultValue)*this._frameValueScale),this._frameIntArray[s+1]=Math.round(i._getNumber(e,t.DataParser.Y,this._frameDefaultValue)*this._frameValueScale);break;case 2:n=this._parseTweenFrame(e,r,a);s=this._frameFloatArray.length;this._frameFloatArray.length+=2,this._frameFloatArray[s]=i._getNumber(e,t.DataParser.X,this._frameDefaultValue)*this._frameValueScale,this._frameFloatArray[s+1]=i._getNumber(e,t.DataParser.Y,this._frameDefaultValue)*this._frameValueScale;break}return n},i.prototype._parseActionFrame=function(t,e,r){var a=this._frameArray.length,i=t.actions.length;this._frameArray.length+=2+i,this._frameArray[a+0]=e,this._frameArray[a+0+1]=i;for(var n=0;n<i;++n)this._frameArray[a+0+2+n]=t.actions[n];return a},i.prototype._parseZOrderFrame=function(e,r,a){var i=this._parseFrame(e,r,a);if(t.DataParser.Z_ORDER in e){var n=e[t.DataParser.Z_ORDER];if(n.length>0){for(var s=this._armature.sortedSlots.length,o=new Array(s-n.length/2),l=new Array(s),h=0;h<o.length;++h)o[h]=0;for(var u=0;u<s;++u)l[u]=-1;for(var f=0,c=0,_=0,p=n.length;_<p;_+=2){var m=n[_],d=n[_+1];while(f!==m)o[c++]=f++;var y=f+d;l[y]=f++}while(f<s)o[c++]=f++;this._frameArray.length+=1+s,this._frameArray[i+1]=s;var g=s;while(g--)-1===l[g]?this._frameArray[i+2+g]=o[--c]||0:this._frameArray[i+2+g]=l[g]||0;return i}}return this._frameArray.length+=1,this._frameArray[i+1]=0,i},i.prototype._parseBoneAllFrame=function(e,r,a){this._helpTransform.identity(),t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],this._helpTransform,1);var n=this._helpTransform.rotation;0!==r&&(0===this._prevClockwise?n=this._prevRotation+t.Transform.normalizeRadian(n-this._prevRotation):((this._prevClockwise>0?n>=this._prevRotation:n<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),n=this._prevRotation+n-this._prevRotation+t.Transform.PI_D*this._prevClockwise)),this._prevClockwise=i._getNumber(e,t.DataParser.TWEEN_ROTATE,0),this._prevRotation=n;var s=this._parseTweenFrame(e,r,a),o=this._frameFloatArray.length;return this._frameFloatArray.length+=6,this._frameFloatArray[o++]=this._helpTransform.x,this._frameFloatArray[o++]=this._helpTransform.y,this._frameFloatArray[o++]=n,this._frameFloatArray[o++]=this._helpTransform.skew,this._frameFloatArray[o++]=this._helpTransform.scaleX,this._frameFloatArray[o++]=this._helpTransform.scaleY,this._parseActionDataInFrame(e,r,this._bone,this._slot),s},i.prototype._parseBoneTranslateFrame=function(e,r,a){var n=this._parseTweenFrame(e,r,a),s=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[s++]=i._getNumber(e,t.DataParser.X,0),this._frameFloatArray[s++]=i._getNumber(e,t.DataParser.Y,0),n},i.prototype._parseBoneRotateFrame=function(e,r,a){var n=i._getNumber(e,t.DataParser.ROTATE,0)*t.Transform.DEG_RAD;0!==r&&(0===this._prevClockwise?n=this._prevRotation+t.Transform.normalizeRadian(n-this._prevRotation):((this._prevClockwise>0?n>=this._prevRotation:n<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),n=this._prevRotation+n-this._prevRotation+t.Transform.PI_D*this._prevClockwise)),this._prevClockwise=i._getNumber(e,t.DataParser.CLOCK_WISE,0),this._prevRotation=n;var s=this._parseTweenFrame(e,r,a),o=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[o++]=n,this._frameFloatArray[o++]=i._getNumber(e,t.DataParser.SKEW,0)*t.Transform.DEG_RAD,s},i.prototype._parseBoneScaleFrame=function(e,r,a){var n=this._parseTweenFrame(e,r,a),s=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[s++]=i._getNumber(e,t.DataParser.X,1),this._frameFloatArray[s++]=i._getNumber(e,t.DataParser.Y,1),n},i.prototype._parseSlotDisplayFrame=function(e,r,a){var n=this._parseFrame(e,r,a);return this._frameArray.length+=1,t.DataParser.VALUE in e?this._frameArray[n+1]=i._getNumber(e,t.DataParser.VALUE,0):this._frameArray[n+1]=i._getNumber(e,t.DataParser.DISPLAY_INDEX,0),this._parseActionDataInFrame(e,r,this._slot.parent,this._slot),n},i.prototype._parseSlotColorFrame=function(e,r,a){var i=this._parseTweenFrame(e,r,a),n=-1;if(t.DataParser.VALUE in e||t.DataParser.COLOR in e){var s=t.DataParser.VALUE in e?e[t.DataParser.VALUE]:e[t.DataParser.COLOR];for(var o in s){this._parseColorTransform(s,this._helpColorTransform),n=this._colorArray.length,this._colorArray.length+=8,this._colorArray[n++]=Math.round(100*this._helpColorTransform.alphaMultiplier),this._colorArray[n++]=Math.round(100*this._helpColorTransform.redMultiplier),this._colorArray[n++]=Math.round(100*this._helpColorTransform.greenMultiplier),this._colorArray[n++]=Math.round(100*this._helpColorTransform.blueMultiplier),this._colorArray[n++]=Math.round(this._helpColorTransform.alphaOffset),this._colorArray[n++]=Math.round(this._helpColorTransform.redOffset),this._colorArray[n++]=Math.round(this._helpColorTransform.greenOffset),this._colorArray[n++]=Math.round(this._helpColorTransform.blueOffset),n-=8;break}}n<0&&(this._defaultColorOffset<0&&(this._defaultColorOffset=n=this._colorArray.length,this._colorArray.length+=8,this._colorArray[n++]=100,this._colorArray[n++]=100,this._colorArray[n++]=100,this._colorArray[n++]=100,this._colorArray[n++]=0,this._colorArray[n++]=0,this._colorArray[n++]=0,this._colorArray[n++]=0),n=this._defaultColorOffset);var l=this._frameIntArray.length;return this._frameIntArray.length+=1,this._frameIntArray[l]=n,i},i.prototype._parseSlotDeformFrame=function(e,r,a){var n=this._frameFloatArray.length,s=this._parseTweenFrame(e,r,a),o=t.DataParser.VERTICES in e?e[t.DataParser.VERTICES]:null,l=i._getNumber(e,t.DataParser.OFFSET,0),h=this._intArray[this._mesh.geometry.offset+0],u=this._mesh.parent.name+"_"+this._slot.name+"_"+this._mesh.name,f=this._mesh.geometry.weight,c=0,_=0,p=0,m=0;if(null!==f){var d=this._weightSlotPose[u];this._helpMatrixA.copyFromArray(d,0),this._frameFloatArray.length+=2*f.count,p=f.offset+2+f.bones.length}else this._frameFloatArray.length+=2*h;for(var y=0;y<2*h;y+=2)if(null===o?(c=0,_=0):(c=y<l||y-l>=o.length?0:o[y-l],_=y+1<l||y+1-l>=o.length?0:o[y+1-l]),null!==f){var g=this._weightBonePoses[u],v=this._intArray[p++];this._helpMatrixA.transformPoint(c,_,this._helpPoint,!0),c=this._helpPoint.x,_=this._helpPoint.y;for(var b=0;b<v;++b){var D=this._intArray[p++];this._helpMatrixB.copyFromArray(g,7*D+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(c,_,this._helpPoint,!0),this._frameFloatArray[n+m++]=this._helpPoint.x,this._frameFloatArray[n+m++]=this._helpPoint.y}}else this._frameFloatArray[n+y]=c,this._frameFloatArray[n+y+1]=_;if(0===r){var T=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[T+0]=this._mesh.geometry.offset,this._frameIntArray[T+1]=this._frameFloatArray.length-n,this._frameIntArray[T+2]=this._frameFloatArray.length-n,this._frameIntArray[T+3]=0,this._frameIntArray[T+4]=n-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=T-this._animation.frameIntOffset}return s},i.prototype._parseIKConstraintFrame=function(e,r,a){var n=this._parseTweenFrame(e,r,a),s=this._frameIntArray.length;return this._frameIntArray.length+=2,this._frameIntArray[s++]=i._getBoolean(e,t.DataParser.BEND_POSITIVE,!0)?1:0,this._frameIntArray[s++]=Math.round(100*i._getNumber(e,t.DataParser.WEIGHT,1)),n},i.prototype._parseActionData=function(e,r,a,n){var s=new Array;if("string"===typeof e){var o=t.BaseObject.borrowObject(t.ActionData);o.type=r,o.name=e,o.bone=a,o.slot=n,s.push(o)}else if(e instanceof Array)for(var l=0,h=e;l<h.length;l++){var u=h[l];o=t.BaseObject.borrowObject(t.ActionData);if(t.DataParser.GOTO_AND_PLAY in u?(o.type=0,o.name=i._getString(u,t.DataParser.GOTO_AND_PLAY,"")):(t.DataParser.TYPE in u&&"string"===typeof u[t.DataParser.TYPE]?o.type=t.DataParser._getActionType(u[t.DataParser.TYPE]):o.type=i._getNumber(u,t.DataParser.TYPE,r),o.name=i._getString(u,t.DataParser.NAME,"")),t.DataParser.BONE in u){var f=i._getString(u,t.DataParser.BONE,"");o.bone=this._armature.getBone(f)}else o.bone=a;if(t.DataParser.SLOT in u){var c=i._getString(u,t.DataParser.SLOT,"");o.slot=this._armature.getSlot(c)}else o.slot=n;var _=null;if(t.DataParser.INTS in u){null===_&&(_=t.BaseObject.borrowObject(t.UserData));for(var p=u[t.DataParser.INTS],m=0,d=p;m<d.length;m++){var y=d[m];_.addInt(y)}}if(t.DataParser.FLOATS in u){null===_&&(_=t.BaseObject.borrowObject(t.UserData));for(var g=u[t.DataParser.FLOATS],v=0,b=g;v<b.length;v++){y=b[v];_.addFloat(y)}}if(t.DataParser.STRINGS in u){null===_&&(_=t.BaseObject.borrowObject(t.UserData));for(var D=u[t.DataParser.STRINGS],T=0,A=D;T<A.length;T++){y=A[T];_.addString(y)}}o.data=_,s.push(o)}return s},i.prototype._parseDeformFrame=function(e,r,a){var n=this._frameFloatArray.length,s=this._parseTweenFrame(e,r,a),o=t.DataParser.VERTICES in e?e[t.DataParser.VERTICES]:t.DataParser.VALUE in e?e[t.DataParser.VALUE]:null,l=i._getNumber(e,t.DataParser.OFFSET,0),h=this._intArray[this._geometry.offset+0],u=this._geometry.weight,f=0,c=0;if(null!==u);else{this._frameFloatArray.length+=2*h;for(var _=0;_<2*h;_+=2)null!==o?(f=_<l||_-l>=o.length?0:o[_-l],c=_+1<l||_+1-l>=o.length?0:o[_+1-l]):(f=0,c=0),this._frameFloatArray[n+_]=f,this._frameFloatArray[n+_+1]=c}if(0===r){var p=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[p+0]=this._geometry.offset,this._frameIntArray[p+1]=this._frameFloatArray.length-n,this._frameIntArray[p+2]=this._frameFloatArray.length-n,this._frameIntArray[p+3]=0,this._frameIntArray[p+4]=n-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=p-this._animation.frameIntOffset}return s},i.prototype._parseTransform=function(e,r,a){r.x=i._getNumber(e,t.DataParser.X,0)*a,r.y=i._getNumber(e,t.DataParser.Y,0)*a,t.DataParser.ROTATE in e||t.DataParser.SKEW in e?(r.rotation=t.Transform.normalizeRadian(i._getNumber(e,t.DataParser.ROTATE,0)*t.Transform.DEG_RAD),r.skew=t.Transform.normalizeRadian(i._getNumber(e,t.DataParser.SKEW,0)*t.Transform.DEG_RAD)):(t.DataParser.SKEW_X in e||t.DataParser.SKEW_Y in e)&&(r.rotation=t.Transform.normalizeRadian(i._getNumber(e,t.DataParser.SKEW_Y,0)*t.Transform.DEG_RAD),r.skew=t.Transform.normalizeRadian(i._getNumber(e,t.DataParser.SKEW_X,0)*t.Transform.DEG_RAD)-r.rotation),r.scaleX=i._getNumber(e,t.DataParser.SCALE_X,1),r.scaleY=i._getNumber(e,t.DataParser.SCALE_Y,1)},i.prototype._parseColorTransform=function(e,r){r.alphaMultiplier=.01*i._getNumber(e,t.DataParser.ALPHA_MULTIPLIER,100),r.redMultiplier=.01*i._getNumber(e,t.DataParser.RED_MULTIPLIER,100),r.greenMultiplier=.01*i._getNumber(e,t.DataParser.GREEN_MULTIPLIER,100),r.blueMultiplier=.01*i._getNumber(e,t.DataParser.BLUE_MULTIPLIER,100),r.alphaOffset=i._getNumber(e,t.DataParser.ALPHA_OFFSET,0),r.redOffset=i._getNumber(e,t.DataParser.RED_OFFSET,0),r.greenOffset=i._getNumber(e,t.DataParser.GREEN_OFFSET,0),r.blueOffset=i._getNumber(e,t.DataParser.BLUE_OFFSET,0)},i.prototype._parseGeometry=function(e,r){var a=e[t.DataParser.VERTICES],i=Math.floor(a.length/2),n=0,s=this._intArray.length,o=this._floatArray.length;r.offset=s,r.data=this._data,this._intArray.length+=4,this._intArray[s+0]=i,this._intArray[s+2]=o,this._intArray[s+3]=-1,this._floatArray.length+=2*i;for(var l=0,h=2*i;l<h;++l)this._floatArray[o+l]=a[l];if(t.DataParser.TRIANGLES in e){var u=e[t.DataParser.TRIANGLES];n=Math.floor(u.length/3),this._intArray.length+=3*n;for(l=0,h=3*n;l<h;++l)this._intArray[s+4+l]=u[l]}if(this._intArray[s+1]=n,t.DataParser.UVS in e){var f=e[t.DataParser.UVS],c=o+2*i;this._floatArray.length+=2*i;for(l=0,h=2*i;l<h;++l)this._floatArray[c+l]=f[l]}if(t.DataParser.WEIGHTS in e){var _=e[t.DataParser.WEIGHTS],p=Math.floor(_.length-i)/2,m=this._intArray.length,d=this._floatArray.length,y=0,g=this._armature.sortedBones,v=t.BaseObject.borrowObject(t.WeightData);if(v.count=p,v.offset=m,this._intArray.length+=2+y+i+p,this._intArray[m+1]=d,t.DataParser.BONE_POSE in e){var b=e[t.DataParser.SLOT_POSE],D=e[t.DataParser.BONE_POSE],T=new Array;y=Math.floor(D.length/7),T.length=y;for(l=0;l<y;++l){var A=D[7*l],O=this._rawBones[A];v.addBone(O),T[l]=A,this._intArray[m+2+l]=g.indexOf(O)}this._floatArray.length+=3*p,this._helpMatrixA.copyFromArray(b,0);l=0;for(var S=0,P=m+2+y,x=d;l<i;++l){var E=2*l,w=this._intArray[P++]=_[S++],M=this._floatArray[o+E],B=this._floatArray[o+E+1];this._helpMatrixA.transformPoint(M,B,this._helpPoint),M=this._helpPoint.x,B=this._helpPoint.y;for(var I=0;I<w;++I){A=_[S++];var F=T.indexOf(A);this._helpMatrixB.copyFromArray(D,7*F+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(M,B,this._helpPoint),this._intArray[P++]=F,this._floatArray[x++]=_[S++],this._floatArray[x++]=this._helpPoint.x,this._floatArray[x++]=this._helpPoint.y}}}else{var C=e[t.DataParser.BONES];y=C.length;for(l=0;l<y;l++){A=C[l],O=this._rawBones[A];v.addBone(O),this._intArray[m+2+l]=g.indexOf(O)}this._floatArray.length+=3*p;l=0,S=0,x=0,P=m+2+y;for(var R=d;l<p;l++){w=_[S++];this._intArray[P++]=w;for(I=0;I<w;I++){F=_[S++];var N=_[S++];M=a[x++],B=a[x++];this._intArray[P++]=C.indexOf(F),this._floatArray[R++]=N,this._floatArray[R++]=M,this._floatArray[R++]=B}}}r.weight=v}},i.prototype._parseArray=function(t){this._intArray.length=0,this._floatArray.length=0,this._frameIntArray.length=0,this._frameFloatArray.length=0,this._frameArray.length=0,this._timelineArray.length=0,this._colorArray.length=0},i.prototype._modifyArray=function(){this._intArray.length%Int16Array.BYTES_PER_ELEMENT!==0&&this._intArray.push(0),this._frameIntArray.length%Int16Array.BYTES_PER_ELEMENT!==0&&this._frameIntArray.push(0),this._frameArray.length%Int16Array.BYTES_PER_ELEMENT!==0&&this._frameArray.push(0),this._timelineArray.length%Uint16Array.BYTES_PER_ELEMENT!==0&&this._timelineArray.push(0),this._timelineArray.length%Int16Array.BYTES_PER_ELEMENT!==0&&this._colorArray.push(0);for(var t=this._intArray.length*Int16Array.BYTES_PER_ELEMENT,e=this._floatArray.length*Float32Array.BYTES_PER_ELEMENT,r=this._frameIntArray.length*Int16Array.BYTES_PER_ELEMENT,a=this._frameFloatArray.length*Float32Array.BYTES_PER_ELEMENT,i=this._frameArray.length*Int16Array.BYTES_PER_ELEMENT,n=this._timelineArray.length*Uint16Array.BYTES_PER_ELEMENT,s=this._colorArray.length*Int16Array.BYTES_PER_ELEMENT,o=t+e+r+a+i+n+s,l=new ArrayBuffer(o),h=new Int16Array(l,0,this._intArray.length),u=new Float32Array(l,t,this._floatArray.length),f=new Int16Array(l,t+e,this._frameIntArray.length),c=new Float32Array(l,t+e+r,this._frameFloatArray.length),_=new Int16Array(l,t+e+r+a,this._frameArray.length),p=new Uint16Array(l,t+e+r+a+i,this._timelineArray.length),m=new Int16Array(l,t+e+r+a+i+n,this._colorArray.length),d=0,y=this._intArray.length;d<y;++d)h[d]=this._intArray[d];for(d=0,y=this._floatArray.length;d<y;++d)u[d]=this._floatArray[d];for(d=0,y=this._frameIntArray.length;d<y;++d)f[d]=this._frameIntArray[d];for(d=0,y=this._frameFloatArray.length;d<y;++d)c[d]=this._frameFloatArray[d];for(d=0,y=this._frameArray.length;d<y;++d)_[d]=this._frameArray[d];for(d=0,y=this._timelineArray.length;d<y;++d)p[d]=this._timelineArray[d];for(d=0,y=this._colorArray.length;d<y;++d)m[d]=this._colorArray[d];this._data.binary=l,this._data.intArray=h,this._data.floatArray=u,this._data.frameIntArray=f,this._data.frameFloatArray=c,this._data.frameArray=_,this._data.timelineArray=p,this._data.colorArray=m,this._defaultColorOffset=-1},i.prototype.parseDragonBonesData=function(e,r){void 0===r&&(r=1),console.assert(null!==e&&void 0!==e,"Data error.");var a=i._getString(e,t.DataParser.VERSION,""),n=i._getString(e,t.DataParser.COMPATIBLE_VERSION,"");if(t.DataParser.DATA_VERSIONS.indexOf(a)>=0||t.DataParser.DATA_VERSIONS.indexOf(n)>=0){var s=t.BaseObject.borrowObject(t.DragonBonesData);if(s.version=a,s.name=i._getString(e,t.DataParser.NAME,""),s.frameRate=i._getNumber(e,t.DataParser.FRAME_RATE,24),0===s.frameRate&&(s.frameRate=24),t.DataParser.ARMATURE in e){this._data=s,this._parseArray(e);for(var o=e[t.DataParser.ARMATURE],l=0,h=o;l<h.length;l++){var u=h[l];s.addArmature(this._parseArmature(u,r))}this._data.binary||this._modifyArray(),t.DataParser.STAGE in e?s.stage=s.getArmature(i._getString(e,t.DataParser.STAGE,"")):s.armatureNames.length>0&&(s.stage=s.getArmature(s.armatureNames[0])),this._data=null}return t.DataParser.TEXTURE_ATLAS in e&&(this._rawTextureAtlases=e[t.DataParser.TEXTURE_ATLAS]),s}return console.assert(!1,"Nonsupport data version: "+a+"\nPlease convert DragonBones data to support version.\nRead more: https://github.com/DragonBones/Tools/"),null},i.prototype.parseTextureAtlasData=function(e,r,a){if(void 0===a&&(a=1),console.assert(void 0!==e),null===e){if(null===this._rawTextureAtlases||0===this._rawTextureAtlases.length)return!1;var n=this._rawTextureAtlases[this._rawTextureAtlasIndex++];return this.parseTextureAtlasData(n,r,a),this._rawTextureAtlasIndex>=this._rawTextureAtlases.length&&(this._rawTextureAtlasIndex=0,this._rawTextureAtlases=null),!0}if(r.width=i._getNumber(e,t.DataParser.WIDTH,0),r.height=i._getNumber(e,t.DataParser.HEIGHT,0),r.scale=1===a?1/i._getNumber(e,t.DataParser.SCALE,1):a,r.name=i._getString(e,t.DataParser.NAME,""),r.imagePath=i._getString(e,t.DataParser.IMAGE_PATH,""),t.DataParser.SUB_TEXTURE in e)for(var s=e[t.DataParser.SUB_TEXTURE],o=0,l=s.length;o<l;++o){var h=s[o],u=i._getNumber(h,t.DataParser.FRAME_WIDTH,-1),f=i._getNumber(h,t.DataParser.FRAME_HEIGHT,-1),c=r.createTexture();c.rotated=i._getBoolean(h,t.DataParser.ROTATED,!1),c.name=i._getString(h,t.DataParser.NAME,""),c.region.x=i._getNumber(h,t.DataParser.X,0),c.region.y=i._getNumber(h,t.DataParser.Y,0),c.region.width=i._getNumber(h,t.DataParser.WIDTH,0),c.region.height=i._getNumber(h,t.DataParser.HEIGHT,0),u>0&&f>0&&(c.frame=t.TextureData.createRectangle(),c.frame.x=i._getNumber(h,t.DataParser.FRAME_X,0),c.frame.y=i._getNumber(h,t.DataParser.FRAME_Y,0),c.frame.width=u,c.frame.height=f),r.addTexture(c)}return!0},i.getInstance=function(){return null===i._objectDataParserInstance&&(i._objectDataParserInstance=new i),i._objectDataParserInstance},i._objectDataParserInstance=null,i}(t.DataParser);t.ObjectDataParser=e;var r=function(){function t(){this.frameStart=0,this.actions=[]}return t}();t.ActionFrame=r}(s||(s={})),function(t){var e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype._inRange=function(t,e,r){return e<=t&&t<=r},r.prototype._decodeUTF8=function(t){var e,r=-1,a=-1,i=65533,n=0,s="",o=0,l=0,h=0,u=0;while(t.length>n){var f=t[n++];if(f===r)e=0!==l?i:a;else if(0===l)this._inRange(f,0,127)?e=f:(this._inRange(f,194,223)?(l=1,u=128,o=f-192):this._inRange(f,224,239)?(l=2,u=2048,o=f-224):this._inRange(f,240,244)&&(l=3,u=65536,o=f-240),o*=Math.pow(64,l),e=null);else if(this._inRange(f,128,191))if(h+=1,o+=(f-128)*Math.pow(64,l-h),h!==l)e=null;else{var c=o,_=u;o=0,l=0,h=0,u=0,e=this._inRange(c,_,1114111)&&!this._inRange(c,55296,57343)?c:f}else o=0,l=0,h=0,u=0,n--,e=f;null!==e&&e!==a&&(e<=65535?e>0&&(s+=String.fromCharCode(e)):(e-=65536,s+=String.fromCharCode(55296+(e>>10&1023)),s+=String.fromCharCode(56320+(1023&e))))}return s},r.prototype._parseBinaryTimeline=function(e,r,a){void 0===a&&(a=null);var i=null!==a?a:t.BaseObject.borrowObject(t.TimelineData);i.type=e,i.offset=r,this._timeline=i;var n=this._timelineArrayBuffer[i.offset+2];if(1===n)i.frameIndicesOffset=-1;else{var s=0,o=this._animation.frameCount+1,l=this._data.frameIndices;s=l.length,l.length+=o,i.frameIndicesOffset=s;for(var h=0,u=0,f=0,c=0;h<o;++h)f+c<=h&&u<n&&(f=this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[i.offset+5+u]],c=u===n-1?this._animation.frameCount-f:this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[i.offset+5+u+1]]-f,u++),l[s+h]=u-1}return this._timeline=null,i},r.prototype._parseAnimation=function(e){var r=t.BaseObject.borrowObject(t.AnimationData);r.blendType=t.DataParser._getAnimationBlendType(t.ObjectDataParser._getString(e,t.DataParser.BLEND_TYPE,"")),r.frameCount=t.ObjectDataParser._getNumber(e,t.DataParser.DURATION,0),r.playTimes=t.ObjectDataParser._getNumber(e,t.DataParser.PLAY_TIMES,1),r.duration=r.frameCount/this._armature.frameRate,r.fadeInTime=t.ObjectDataParser._getNumber(e,t.DataParser.FADE_IN_TIME,0),r.scale=t.ObjectDataParser._getNumber(e,t.DataParser.SCALE,1),r.name=t.ObjectDataParser._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===r.name.length&&(r.name=t.DataParser.DEFAULT_NAME);var a=e[t.DataParser.OFFSET];if(r.frameIntOffset=a[0],r.frameFloatOffset=a[1],r.frameOffset=a[2],this._animation=r,t.DataParser.ACTION in e&&(r.actionTimeline=this._parseBinaryTimeline(0,e[t.DataParser.ACTION])),t.DataParser.Z_ORDER in e&&(r.zOrderTimeline=this._parseBinaryTimeline(1,e[t.DataParser.Z_ORDER])),t.DataParser.BONE in e){var i=e[t.DataParser.BONE];for(var n in i){var s=i[n],o=this._armature.getBone(n);if(null!==o)for(var l=0,h=s.length;l<h;l+=2){var u=s[l],f=s[l+1],c=this._parseBinaryTimeline(u,f);this._animation.addBoneTimeline(o.name,c)}}}if(t.DataParser.SLOT in e){i=e[t.DataParser.SLOT];for(var n in i){s=i[n];var _=this._armature.getSlot(n);if(null!==_)for(l=0,h=s.length;l<h;l+=2){u=s[l],f=s[l+1],c=this._parseBinaryTimeline(u,f);this._animation.addSlotTimeline(_.name,c)}}}if(t.DataParser.CONSTRAINT in e){i=e[t.DataParser.CONSTRAINT];for(var n in i){s=i[n];var p=this._armature.getConstraint(n);if(null!==p)for(l=0,h=s.length;l<h;l+=2){u=s[l],f=s[l+1],c=this._parseBinaryTimeline(u,f);this._animation.addConstraintTimeline(p.name,c)}}}if(t.DataParser.TIMELINE in e){s=e[t.DataParser.TIMELINE];for(var m=0,d=s;m<d.length;m++){var y=d[m];f=t.ObjectDataParser._getNumber(y,t.DataParser.OFFSET,0);if(f>=0){u=t.ObjectDataParser._getNumber(y,t.DataParser.TYPE,0);var g=t.ObjectDataParser._getString(y,t.DataParser.NAME,"");c=null;if(40===u&&0!==r.blendType){c=t.BaseObject.borrowObject(t.AnimationTimelineData);var v=c;v.x=t.ObjectDataParser._getNumber(y,t.DataParser.X,0),v.y=t.ObjectDataParser._getNumber(y,t.DataParser.Y,0)}switch(c=this._parseBinaryTimeline(u,f,c),u){case 0:break;case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(g,c);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(g,c);break;case 30:this._animation.addConstraintTimeline(g,c);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(g,c);break}}}}return this._animation=null,r},r.prototype._parseGeometry=function(e,r){r.offset=e[t.DataParser.OFFSET],r.data=this._data;var a=this._intArrayBuffer[r.offset+3];if(a<-1&&(a+=65536),a>=0){var i=t.BaseObject.borrowObject(t.WeightData),n=this._intArrayBuffer[r.offset+0],s=this._intArrayBuffer[a+0];i.offset=a;for(var o=0;o<s;++o){var l=this._intArrayBuffer[a+2+o];i.addBone(this._rawBones[l])}for(var h=a+2+s,u=0,f=(o=0,n);o<f;++o){var c=this._intArrayBuffer[h++];u+=c,h+=c}i.count=u,r.weight=i}},r.prototype._parseArray=function(e){var r=e[t.DataParser.OFFSET],a=r[1],i=r[3],n=r[5],s=r[7],o=r[9],l=r[11],h=r.length>12?r[13]:0,u=new Int16Array(this._binary,this._binaryOffset+r[0],a/Int16Array.BYTES_PER_ELEMENT),f=new Float32Array(this._binary,this._binaryOffset+r[2],i/Float32Array.BYTES_PER_ELEMENT),c=new Int16Array(this._binary,this._binaryOffset+r[4],n/Int16Array.BYTES_PER_ELEMENT),_=new Float32Array(this._binary,this._binaryOffset+r[6],s/Float32Array.BYTES_PER_ELEMENT),p=new Int16Array(this._binary,this._binaryOffset+r[8],o/Int16Array.BYTES_PER_ELEMENT),m=new Uint16Array(this._binary,this._binaryOffset+r[10],l/Uint16Array.BYTES_PER_ELEMENT),d=h>0?new Int16Array(this._binary,this._binaryOffset+r[12],h/Uint16Array.BYTES_PER_ELEMENT):u;this._data.binary=this._binary,this._data.intArray=this._intArrayBuffer=u,this._data.floatArray=f,this._data.frameIntArray=c,this._data.frameFloatArray=_,this._data.frameArray=this._frameArrayBuffer=p,this._data.timelineArray=this._timelineArrayBuffer=m,this._data.colorArray=d},r.prototype.parseDragonBonesData=function(t,r){void 0===r&&(r=1),console.assert(null!==t&&void 0!==t&&t instanceof ArrayBuffer,"Data error.");var a=new Uint8Array(t,0,8);if(a[0]!=="D".charCodeAt(0)||a[1]!=="B".charCodeAt(0)||a[2]!=="D".charCodeAt(0)||a[3]!=="T".charCodeAt(0))return console.assert(!1,"Nonsupport data."),null;var i=new Uint32Array(t,8,1)[0],n=new Uint8Array(t,12,i),s=this._decodeUTF8(n),o=JSON.parse(s);return this._binaryOffset=12+i,this._binary=t,e.prototype.parseDragonBonesData.call(this,o,r)},r.getInstance=function(){return null===r._binaryDataParserInstance&&(r._binaryDataParserInstance=new r),r._binaryDataParserInstance},r._binaryDataParserInstance=null,r}(t.ObjectDataParser);t.BinaryDataParser=e}(s||(s={})),function(t){var e=function(){function e(r){void 0===r&&(r=null),this.autoSearch=!1,this._dragonBonesDataMap={},this._textureAtlasDataMap={},this._dragonBones=null,this._dataParser=null,null===e._objectParser&&(e._objectParser=new t.ObjectDataParser),null===e._binaryParser&&(e._binaryParser=new t.BinaryDataParser),this._dataParser=null!==r?r:e._objectParser}return e.prototype._isSupportMesh=function(){return!0},e.prototype._getTextureData=function(t,e){if(t in this._textureAtlasDataMap)for(var r=0,a=this._textureAtlasDataMap[t];r<a.length;r++){var i=a[r],n=i.getTexture(e);if(null!==n)return n}if(this.autoSearch)for(var s in this._textureAtlasDataMap)for(var o=0,l=this._textureAtlasDataMap[s];o<l.length;o++){i=l[o];if(i.autoSearch){n=i.getTexture(e);if(null!==n)return n}}return null},e.prototype._fillBuildArmaturePackage=function(t,e,r,a,i){var n=null,s=null;if(e.length>0&&e in this._dragonBonesDataMap&&(n=this._dragonBonesDataMap[e],s=n.getArmature(r)),null===s&&(0===e.length||this.autoSearch))for(var o in this._dragonBonesDataMap)if(n=this._dragonBonesDataMap[o],(0===e.length||n.autoSearch)&&(s=n.getArmature(r),null!==s)){e=o;break}if(null!==s){if(t.dataName=e,t.textureAtlasName=i,t.data=n,t.armature=s,t.skin=null,a.length>0&&(t.skin=s.getSkin(a),null===t.skin&&this.autoSearch))for(var o in this._dragonBonesDataMap){var l=this._dragonBonesDataMap[o],h=l.getArmature(a);if(null!==h){t.skin=h.defaultSkin;break}}return null===t.skin&&(t.skin=s.defaultSkin),!0}return!1},e.prototype._buildBones=function(e,r){for(var a=0,i=e.armature.sortedBones;a<i.length;a++){var n=i[a],s=t.BaseObject.borrowObject(0===n.type?t.Bone:t.Surface);s.init(n,r)}},e.prototype._buildSlots=function(t,e){var r=t.skin,a=t.armature.defaultSkin;if(null!==r&&null!==a){var i={};for(var n in a.displays){var s=a.getDisplays(n);i[n]=s}if(r!==a)for(var n in r.displays){s=r.getDisplays(n);i[n]=s}for(var o=0,l=t.armature.sortedSlots;o<l.length;o++){var h=l[o],u=h.name in i?i[h.name]:null,f=this._buildSlot(t,h,e);if(null!==u){f.displayFrameCount=u.length;for(var c=0,_=f.displayFrameCount;c<_;++c){var p=u[c];if(f.replaceRawDisplayData(p,c),null!==p){if(t.textureAtlasName.length>0){var m=this._getTextureData(t.textureAtlasName,p.path);f.replaceTextureData(m,c)}var d=this._getSlotDisplay(t,p,f);f.replaceDisplay(d,c)}else f.replaceDisplay(null)}}f._setDisplayIndex(h.displayIndex,!0)}}},e.prototype._buildConstraints=function(e,r){var a=e.armature.constraints;for(var i in a){var n=a[i];switch(n.type){case 0:var s=t.BaseObject.borrowObject(t.IKConstraint);s.init(n,r),r._addConstraint(s);break;case 1:var o=t.BaseObject.borrowObject(t.PathConstraint);o.init(n,r),r._addConstraint(o);break;default:var l=t.BaseObject.borrowObject(t.IKConstraint);l.init(n,r),r._addConstraint(l);break}}},e.prototype._buildChildArmature=function(t,e,r){return this.buildArmature(r.path,null!==t?t.dataName:"","",null!==t?t.textureAtlasName:"")},e.prototype._getSlotDisplay=function(e,r,a){var i=null!==e?e.dataName:r.parent.parent.parent.name,n=null;switch(r.type){case 0:var s=r;null===s.texture&&(s.texture=this._getTextureData(i,r.path)),n=a.rawDisplay;break;case 2:var o=r;null===o.texture&&(o.texture=this._getTextureData(i,o.path)),n=this._isSupportMesh()?a.meshDisplay:a.rawDisplay;break;case 1:var l=r,h=this._buildChildArmature(e,a,l);if(null!==h){if(h.inheritAnimation=l.inheritAnimation,!h.inheritAnimation){var u=l.actions.length>0?l.actions:h.armatureData.defaultActions;if(u.length>0)for(var f=0,c=u;f<c.length;f++){var _=c[f],p=t.BaseObject.borrowObject(t.EventObject);t.EventObject.actionDataToInstance(_,p,a.armature),p.slot=a,a.armature._bufferAction(p,!1)}else h.animation.play()}l.armature=h.armatureData}n=h;break;case 3:break;default:break}return n},e.prototype.parseDragonBonesData=function(t,r,a){void 0===r&&(r=null),void 0===a&&(a=1);var i=t instanceof ArrayBuffer?e._binaryParser:this._dataParser,n=i.parseDragonBonesData(t,a);while(1){var s=this._buildTextureAtlasData(null,null);if(!i.parseTextureAtlasData(null,s,a)){s.returnToPool();break}this.addTextureAtlasData(s,r)}return null!==n&&this.addDragonBonesData(n,r),n},e.prototype.parseTextureAtlasData=function(t,e,r,a){void 0===r&&(r=null),void 0===a&&(a=1);var i=this._buildTextureAtlasData(null,null);return this._dataParser.parseTextureAtlasData(t,i,a),this._buildTextureAtlasData(i,e||null),this.addTextureAtlasData(i,r),i},e.prototype.updateTextureAtlases=function(t,e){var r=this.getTextureAtlasData(e);if(null!==r)for(var a=0,i=r.length;a<i;++a)a<t.length&&this._buildTextureAtlasData(r[a],t[a])},e.prototype.getDragonBonesData=function(t){return t in this._dragonBonesDataMap?this._dragonBonesDataMap[t]:null},e.prototype.addDragonBonesData=function(t,e){if(void 0===e&&(e=null),e=null!==e?e:t.name,e in this._dragonBonesDataMap){if(this._dragonBonesDataMap[e]===t)return;console.warn("Can not add same name data: "+e)}else this._dragonBonesDataMap[e]=t},e.prototype.removeDragonBonesData=function(t,e){void 0===e&&(e=!0),t in this._dragonBonesDataMap&&(e&&this._dragonBones.bufferObject(this._dragonBonesDataMap[t]),delete this._dragonBonesDataMap[t])},e.prototype.getTextureAtlasData=function(t){return t in this._textureAtlasDataMap?this._textureAtlasDataMap[t]:null},e.prototype.addTextureAtlasData=function(t,e){void 0===e&&(e=null),e=null!==e?e:t.name;var r=e in this._textureAtlasDataMap?this._textureAtlasDataMap[e]:this._textureAtlasDataMap[e]=[];r.indexOf(t)<0&&r.push(t)},e.prototype.removeTextureAtlasData=function(t,e){if(void 0===e&&(e=!0),t in this._textureAtlasDataMap){var r=this._textureAtlasDataMap[t];if(e)for(var a=0,i=r;a<i.length;a++){var n=i[a];this._dragonBones.bufferObject(n)}delete this._textureAtlasDataMap[t]}},e.prototype.getArmatureData=function(t,e){void 0===e&&(e="");var a=new r;return this._fillBuildArmaturePackage(a,e,t,"","")?a.armature:null},e.prototype.clear=function(t){for(var e in void 0===t&&(t=!0),this._dragonBonesDataMap)t&&this._dragonBones.bufferObject(this._dragonBonesDataMap[e]),delete this._dragonBonesDataMap[e];for(var e in this._textureAtlasDataMap){if(t)for(var r=this._textureAtlasDataMap[e],a=0,i=r;a<i.length;a++){var n=i[a];this._dragonBones.bufferObject(n)}delete this._textureAtlasDataMap[e]}},e.prototype.buildArmature=function(t,e,a,i){void 0===e&&(e=""),void 0===a&&(a=""),void 0===i&&(i="");var n=new r;if(!this._fillBuildArmaturePackage(n,e||"",t,a||"",i||""))return console.warn("No armature data: "+t+", "+(null!==e?e:"")),null;var s=this._buildArmature(n);return this._buildBones(n,s),this._buildSlots(n,s),this._buildConstraints(n,s),s.invalidUpdate(null,!0),s.advanceTime(0),s},e.prototype.replaceDisplay=function(t,e,r){if(void 0===r&&(r=-1),r<0&&(r=t.displayIndex),r<0&&(r=0),t.replaceDisplayData(e,r),null!==e){var a=this._getSlotDisplay(null,e,t);if(0===e.type){var i=t.getDisplayFrameAt(r).rawDisplayData;null!==i&&2===i.type&&(a=t.meshDisplay)}t.replaceDisplay(a,r)}else t.replaceDisplay(null,r)},e.prototype.replaceSlotDisplay=function(t,e,r,a,i,n){void 0===n&&(n=-1);var s=this.getArmatureData(e,t||"");if(null===s||null===s.defaultSkin)return!1;var o=s.defaultSkin.getDisplay(r,a);return this.replaceDisplay(i,o,n),!0},e.prototype.replaceSlotDisplayList=function(t,e,r,a){var i=this.getArmatureData(e,t||"");if(!i||!i.defaultSkin)return!1;var n=i.defaultSkin.getDisplays(r);if(!n)return!1;a.displayFrameCount=n.length;for(var s=0,o=a.displayFrameCount;s<o;++s){var l=n[s];this.replaceDisplay(a,l,s)}return!0},e.prototype.replaceSkin=function(t,e,r,a){void 0===r&&(r=!1),void 0===a&&(a=null);for(var i=!1,n=e.parent.defaultSkin,s=0,o=t.getSlots();s<o.length;s++){var l=o[s];if(!(null!==a&&a.indexOf(l.name)>=0)){var h=e.getDisplays(l.name);if(null!==h||(null!==n&&e!==n&&(h=n.getDisplays(l.name)),null!==h)){l.displayFrameCount=h.length;for(var u=0,f=l.displayFrameCount;u<f;++u){var c=h[u];l.replaceRawDisplayData(c,u),null!==c?l.replaceDisplay(this._getSlotDisplay(null,c,l),u):l.replaceDisplay(null,u)}i=!0}else r&&(l.displayFrameCount=0)}}return i},e.prototype.replaceAnimation=function(e,r,a){void 0===a&&(a=!0);var i=r.defaultSkin;if(null===i)return!1;if(a)e.animation.animations=r.animations;else{var n=e.animation.animations,s={};for(var o in n)s[o]=n[o];for(var o in r.animations)s[o]=r.animations[o];e.animation.animations=s}for(var l=0,h=e.getSlots();l<h.length;l++)for(var u=h[l],f=0,c=0,_=u.displayList;c<_.length;c++){var p=_[c];if(p instanceof t.Armature){var m=i.getDisplays(u.name);if(null!==m&&f<m.length){var d=m[f];if(null!==d&&1===d.type){var y=this.getArmatureData(d.path,d.parent.parent.parent.name);y&&this.replaceAnimation(p,y,a)}}}f++}return!0},e.prototype.getAllDragonBonesData=function(){return this._dragonBonesDataMap},e.prototype.getAllTextureAtlasData=function(){return this._textureAtlasDataMap},Object.defineProperty(e.prototype,"clock",{get:function(){return this._dragonBones.clock},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragonBones",{get:function(){return this._dragonBones},enumerable:!1,configurable:!0}),e._objectParser=null,e._binaryParser=null,e}();t.BaseFactory=e;var r=function(){function t(){this.dataName="",this.textureAtlasName="",this.skin=null}return t}();t.BuildArmaturePackage=r}(s||(s={})),function(t){var e=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.material=null,t._renderTexture=null,t}return n(a,e),a.toString=function(){return"[class dragonBones.ThreeTextureAtlasData]"},a.prototype._onClear=function(){e.prototype._onClear.call(this),null!==this.material&&this.material.dispose(),this._renderTexture,this.material=null,this._renderTexture=null},a.prototype.createTexture=function(){return t.BaseObject.borrowObject(r)},Object.defineProperty(a.prototype,"renderTexture",{get:function(){return this._renderTexture},set:function(t){this._renderTexture!==t&&(this._renderTexture=t)},enumerable:!1,configurable:!0}),a}(t.TextureAtlasData);t.ThreeTextureAtlasData=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.ThreeTextureData]"},e}(t.TextureData);t.ThreeTextureData=r}(s||(s={})),function(t){var e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.debugDraw=!1,t._debugDraw=!1,t._armature=null,t._debugDrawer=null,t}return n(r,e),r.prototype.dbInit=function(t){this._armature=t},r.prototype.dbClear=function(){this._debugDrawer,this._armature=null,this._debugDrawer=null},r.prototype.dbUpdate=function(){var e=t.DragonBones.debugDraw||this.debugDraw;(e||this._debugDraw)&&(this._debugDraw=e,this._debugDraw?(null===this._debugDrawer&&(this._debugDrawer=new i["Group"]),this.add(this._debugDrawer)):null!==this._debugDrawer&&this._debugDrawer.parent===this&&this.remove(this._debugDrawer))},r.prototype.dispose=function(t){void 0===t&&(t=!0),null!==this._armature&&(this._armature.dispose(),this._armature=null)},r.prototype.dispatchDBEvent=function(t,e){this.dispatchEvent(e)},r.prototype.hasDBEventListener=function(t){var e=this._listeners;return void 0!==e&&t in e},r.prototype.addDBEventListener=function(t,e,r){e.bind(r),this.addEventListener(t,e)},r.prototype.removeDBEventListener=function(t,e,r){this.removeEventListener(t,e)},Object.defineProperty(r.prototype,"armature",{get:function(){return this._armature},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animation",{get:function(){return this._armature.animation},enumerable:!1,configurable:!0}),r.prototype.hasEvent=function(t){return this.hasDBEventListener(t)},r.prototype.addEvent=function(t,e,r){this.addDBEventListener(t,e,r)},r.prototype.removeEvent=function(t,e,r){this.removeDBEventListener(t,e,r)},r}(i["Group"]);t.ThreeArmatureDisplay=e}(s||(s={})),function(t){var e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._material=null,t}return n(r,e),r.toString=function(){return"[class dragonBones.ThreeSlot]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),null!==this._material&&this._material.dispose(),this._renderDisplay=null,this._material=null},r.prototype._clearGeometry=function(e){for(var r=e.vertices,a=e.faces,i=e.faceVertexUvs[0],n=0,s=r;n<s.length;n++){var o=s[n];t.ThreeFactory.release(o,t.ThreeFactory.POOL_TYPE_VECTOR3)}for(var l=0,h=a;l<h.length;l++){var u=h[l];t.ThreeFactory.release(u,t.ThreeFactory.POOL_TYPE_FACE3)}for(var f=0,c=i;f<c.length;f++)for(var _=c[f],p=0,m=_;p<m.length;p++){var d=m[p];t.ThreeFactory.release(d,t.ThreeFactory.POOL_TYPE_VECTOR2)}r.length=0,a.length=0,i.length=0},r.prototype._initDisplay=function(t,e){},r.prototype._disposeDisplay=function(t,e){e||t.geometry.dispose()},r.prototype._onUpdateDisplay=function(){this._renderDisplay=this._display?this._display:this._rawDisplay,this._renderDisplay.matrixAutoUpdate=!1},r.prototype._addDisplay=function(){var t=this._armature.display;t.add(this._renderDisplay)},r.prototype._replaceDisplay=function(t){var e=this._armature.display,r=t;e.add(this._renderDisplay),e.remove(r)},r.prototype._removeDisplay=function(){this._renderDisplay.parent.remove(this._renderDisplay)},r.prototype._updateZOrder=function(){this._renderDisplay.position.setZ(this._zOrder)},r.prototype._updateVisible=function(){this._renderDisplay.visible=this._parent.visible&&this._visible},r.prototype._updateBlendMode=function(){if(this._renderDisplay===this._rawDisplay){var t=this._textureData;if(null===t)return;var e=t.parent;if(null===e.renderTexture)return;var r=this._renderDisplay;0!==this._blendMode?(null===this._material&&(this._material=new i["MeshBasicMaterial"],this._material.copy(e.material)),this._material.blending=i["AdditiveBlending"],r.material=this._material):r.material=e.material}},r.prototype._updateColor=function(){if(this._renderDisplay===this._rawDisplay){var t=this._textureData;if(null===t)return;var e=t.parent;if(null===e.renderTexture)return;var r=this._colorTransform.alphaMultiplier*this._globalAlpha,a=this._renderDisplay;1!==r||1!==this._colorTransform.redMultiplier||1!==this._colorTransform.greenMultiplier||1!==this._colorTransform.blueMultiplier?(null===this._material&&(this._material=new i["MeshBasicMaterial"],this._material.copy(e.material)),this._material.opacity=r,this._material.color.setRGB(this._colorTransform.redMultiplier,this._colorTransform.greenMultiplier,this._colorTransform.blueMultiplier),a.material=this._material):a.material=e.material}},r.prototype._updateFrame=function(){var e=this._textureData,a=this._renderDisplay;if(null!==e){var i=e.parent,n=i.renderTexture;if(null!==n){var s=i.width>0?i.width:n.image.width,o=i.height>0?i.height:n.image.height,l=e.region.x,h=e.region.y,u=e.region.width,f=e.region.height,c=a.geometry,_=c.vertices,p=c.faces,m=c.faceVertexUvs[0];if(this._clearGeometry(c),null!==this._geometryData){var d=this._geometryData.data,y=d.intArray,g=d.floatArray,v=y[this._geometryData.offset+0],b=y[this._geometryData.offset+1],D=y[this._geometryData.offset+2];D<0&&(D+=65536);for(var T=D+2*v,A=this._geometryData.offset+4,O=this._armature._armatureData.scale,S=new Array,P=0,x=v;P<x;++P){var E=2*P,w=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_VECTOR3),M=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_VECTOR2);_.push(w),S.push(M),M.set(g[T+E],g[T+E+1]),w.set(g[D+E]*O,g[D+E+1]*O,0),e.rotated?M.set((l+(1-M.y)*u)/s,(h+M.x*f)/o):M.set((l+M.x*u)/s,1-(h+M.y*f)/o)}for(P=0;P<b;++P){var B=3*P,I=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_FACE3),F=[];p.push(I),m.push(F),I.a=y[A+B],I.b=y[A+B+1],I.c=y[A+B+2],F[0]=S[I.a],F[1]=S[I.b],F[2]=S[I.c]}}else{O=i.scale*this._armature._armatureData.scale;var C=r.RAW_UVS,R=r.RAW_INDICES;for(S=new Array,P=0;P<4;++P){var N=2*P;w=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_VECTOR3),M=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_VECTOR2);_.push(w),S.push(M),M.set(C[N],C[N+1]),w.set(M.x*u*O-this._pivotX,M.y*f*O-this._pivotY,0),e.rotated?M.set((l+(1-M.y)*u)/s,(h+M.x*f)/o):M.set((l+M.x*u)/s,1-(h+M.y*f)/o)}for(P=0;P<2;++P){B=3*P,I=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_FACE3),F=[];p.push(I),m.push(F),I.a=R[B],I.b=R[B+1],I.c=R[B+2],F[0]=S[I.a],F[1]=S[I.b],F[2]=S[I.c]}}return null!==this._material&&this._material.copy(i.material),a.material=i.material,void(this._visibleDirty=!0)}}a.visible=!1,a.position.set(0,0,a.position.z)},r.prototype._updateMesh=function(){var t=this._armature._armatureData.scale,e=this._displayFrame.deformVertices,r=this._geometryBones,a=this._geometryData,i=a.weight,n=e.length>0&&a.inheritDeform,s=this._renderDisplay,o=s.geometry,l=o.vertices;if(null!==i){var h=a.data,u=h.intArray,f=h.floatArray,c=u[a.offset+0],_=u[i.offset+1];_<0&&(_+=65536);for(var p=0,m=i.offset+2+r.length,d=_,y=0;p<c;++p){for(var g=u[m++],v=0,b=0,D=0;D<g;++D){var T=u[m++],A=r[T];if(null!==A){var O=A.globalTransformMatrix,S=f[d++],P=f[d++]*t,x=f[d++]*t;n&&(P+=e[y++],x+=e[y++]),v+=(O.a*P+O.c*x+O.tx)*S,b+=(O.b*P+O.d*x+O.ty)*S}}var E=l[p];E.set(v,b,0)}}else if(n){o.verticesNeedUpdate=!0;var w=0!==this._parent._boneData.type,M=(h=a.data,u=h.intArray,f=h.floatArray,c=u[a.offset+0],u[a.offset+2]);M<0&&(M+=65536);p=0;for(var B=2*c;p<B;p+=2){var I=f[M+p]*t+e[p],F=f[M+p+1]*t+e[p+1];E=l[p/2];if(w){O=this._parent._getGlobalTransformMatrix(I,F);E.set(O.a*I+O.c*F+O.tx,O.b*I+O.d*F+O.ty,0)}else E.set(I,F,0)}}},r.prototype._updateTransform=function(){var t=this.globalTransformMatrix,e=this._renderDisplay.matrix.elements;e[0]=t.a,e[1]=t.b,e[4]=t.c,e[5]=t.d,e[12]=t.tx,e[13]=t.ty,this._renderDisplay.matrixWorldNeedsUpdate=!0},r.prototype._identityTransform=function(){this._renderDisplay.matrix.identity()},r.RAW_UVS=[0,0,1,0,0,1,1,1],r.RAW_INDICES=[0,1,2,3,2,1],r}(t.Slot);t.ThreeSlot=e}(s||(s={})),function(t){var e=function(e){function r(t){void 0===t&&(t=null);var a=e.call(this,t)||this;return null===r._dragonBonesInstance&&(r._dragonBonesInstance=r._createDragonBones()),a._dragonBones=r._dragonBonesInstance,a}return n(r,e),r._createDragonBones=function(){var e=new t.ThreeArmatureDisplay,r=new t.DragonBones(e);return r},r.create=function(t){var e;if(e=t in r._pools?r._pools[t]:r._pools[t]=[],e.length>0)return e.pop();switch(t){case r.POOL_TYPE_VECTOR2:return new i["Vector2"];case r.POOL_TYPE_VECTOR3:return new i["Vector3"];case r.POOL_TYPE_FACE3:return new i["Face3"](0,1,2)}throw new Error},r.release=function(t,e){var a;a=e in r._pools?r._pools[e]:r._pools[e]=[],a.indexOf(t)<0&&a.push(t)},Object.defineProperty(r,"factory",{get:function(){return null===r._factory&&(r._factory=new r),r._factory},enumerable:!1,configurable:!0}),r.prototype._buildTextureAtlasData=function(e,r){if(e){e.renderTexture=r;var a=new i["MeshBasicMaterial"];a.side=i["DoubleSide"],a.transparent=!0,null!==r&&(a.map=r),e.material=a}else e=t.BaseObject.borrowObject(t.ThreeTextureAtlasData);return e},r.prototype._buildArmature=function(e){var r=t.BaseObject.borrowObject(t.Armature),a=new t.ThreeArmatureDisplay;return r.init(e.armature,a,a,this._dragonBones),r},r.prototype._buildSlot=function(e,a,n){var s=t.BaseObject.borrowObject(t.ThreeSlot),o=new i["Geometry"],l=new i["Mesh"](o,r._emptyMaterial);return s.init(a,n,l,l),s},r.prototype.buildArmatureDisplay=function(t,e,r,a){void 0===e&&(e=""),void 0===r&&(r=""),void 0===a&&(a="");var i=this.buildArmature(t,e||"",r||"",a||"");return null!==i?(this._dragonBones.clock.add(i),i.display):null},r.prototype.getTextureDisplay=function(t,e){void 0===e&&(e=null);var r=this._getTextureData(null!==e?e:"",t);if(null!==r){var a=r.parent;if(null!==a.renderTexture){var n=new i["SpriteMaterial"]({map:a.renderTexture}),s=new i["Sprite"](n);return s}}return null},Object.defineProperty(r.prototype,"soundEventManager",{get:function(){return this._dragonBones.eventManager},enumerable:!1,configurable:!0}),r.POOL_TYPE_VECTOR2="POOL_TYPE_VECTOR2",r.POOL_TYPE_VECTOR3="POOL_TYPE_VECTOR3",r.POOL_TYPE_FACE3="POOL_TYPE_FACE3",r._emptyMaterial=new i["MeshBasicMaterial"],r._pools={},r._dragonBonesInstance=null,r._factory=null,r}(t.BaseFactory);t.ThreeFactory=e}(s||(s={})),e["a"]=s}).call(this,r("dd40")(t))},"3bbe":function(t,e,r){var a=r("861d");t.exports=function(t){if(!a(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3c35":function(t,e){(function(e){t.exports=e}).call(this,{})},"3c5d":function(t,e,r){"use strict";var a=r("ebb5"),i=r("50c4"),n=r("182d"),s=r("7b0b"),o=r("d039"),l=a.aTypedArray,h=a.exportTypedArrayMethod,u=o((function(){new Int8Array(1).set({})}));h("set",(function(t){l(this);var e=n(arguments.length>1?arguments[1]:void 0,1),r=this.length,a=s(t),o=i(a.length),h=0;if(o+e>r)throw RangeError("Wrong length");while(h<o)this[e+h]=a[h++]}),u)},"3ca3":function(t,e,r){"use strict";var a=r("6547").charAt,i=r("69f3"),n=r("7dd0"),s="String Iterator",o=i.set,l=i.getterFor(s);n(String,"String",(function(t){o(this,{type:s,string:String(t),index:0})}),(function(){var t,e=l(this),r=e.string,i=e.index;return i>=r.length?{value:void 0,done:!0}:(t=a(r,i),e.index+=t.length,{value:t,done:!1})}))},"3f8c":function(t,e){t.exports={}},"3fcc":function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").map,n=r("4840"),s=a.aTypedArray,o=a.aTypedArrayConstructor,l=a.exportTypedArrayMethod;l("map",(function(t){return i(s(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(o(n(t,t.constructor)))(e)}))}))},"428f":function(t,e,r){var a=r("da84");t.exports=a},"44ad":function(t,e,r){var a=r("d039"),i=r("c6b6"),n="".split;t.exports=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?n.call(t,""):Object(t)}:Object},"44d2":function(t,e,r){var a=r("b622"),i=r("7c73"),n=r("9bf2"),s=a("unscopables"),o=Array.prototype;void 0==o[s]&&n.f(o,s,{configurable:!0,value:i(null)}),t.exports=function(t){o[s][t]=!0}},4840:function(t,e,r){var a=r("825a"),i=r("1c0b"),n=r("b622"),s=n("species");t.exports=function(t,e){var r,n=a(t).constructor;return void 0===n||void 0==(r=a(n)[s])?e:i(r)}},4930:function(t,e,r){var a=r("d039");t.exports=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())}))},"4d64":function(t,e,r){var a=r("fc6a"),i=r("50c4"),n=r("23cb"),s=function(t){return function(e,r,s){var o,l=a(e),h=i(l.length),u=n(s,h);if(t&&r!=r){while(h>u)if(o=l[u++],o!=o)return!0}else for(;h>u;u++)if((t||u in l)&&l[u]===r)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},"50c4":function(t,e,r){var a=r("a691"),i=Math.min;t.exports=function(t){return t>0?i(a(t),9007199254740991):0}},5135:function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},"53ca":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("a4d3"),r("e01a"),r("d28b"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}},5692:function(t,e,r){var a=r("c430"),i=r("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.3",mode:a?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,r){var a=r("d066"),i=r("241c"),n=r("7418"),s=r("825a");t.exports=a("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=n.f;return r?e.concat(r(t)):e}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5cc6":function(t,e,r){var a=r("74e8");a("Uint8",(function(t){return function(e,r,a){return t(this,e,r,a)}}))},"5f96":function(t,e,r){"use strict";var a=r("ebb5"),i=a.aTypedArray,n=a.exportTypedArrayMethod,s=[].join;n("join",(function(t){return s.apply(i(this),arguments)}))},"5fda":function(e,r){e.exports=t},"60bd":function(t,e,r){"use strict";var a=r("da84"),i=r("ebb5"),n=r("e260"),s=r("b622"),o=s("iterator"),l=a.Uint8Array,h=n.values,u=n.keys,f=n.entries,c=i.aTypedArray,_=i.exportTypedArrayMethod,p=l&&l.prototype[o],m=!!p&&("values"==p.name||void 0==p.name),d=function(){return h.call(c(this))};_("entries",(function(){return f.call(c(this))})),_("keys",(function(){return u.call(c(this))})),_("values",d,!m),_(o,d,!m)},"621a":function(t,e,r){"use strict";var a=r("da84"),i=r("83ab"),n=r("a981"),s=r("9112"),o=r("e2cc"),l=r("d039"),h=r("19aa"),u=r("a691"),f=r("50c4"),c=r("0b25"),_=r("77a7"),p=r("e163"),m=r("d2bb"),d=r("241c").f,y=r("9bf2").f,g=r("81d5"),v=r("d44e"),b=r("69f3"),D=b.get,T=b.set,A="ArrayBuffer",O="DataView",S="prototype",P="Wrong length",x="Wrong index",E=a[A],w=E,M=a[O],B=M&&M[S],I=Object.prototype,F=a.RangeError,C=_.pack,R=_.unpack,N=function(t){return[255&t]},j=function(t){return[255&t,t>>8&255]},k=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},L=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},V=function(t){return C(t,23,4)},Y=function(t){return C(t,52,8)},U=function(t,e){y(t[S],e,{get:function(){return D(this)[e]}})},G=function(t,e,r,a){var i=c(r),n=D(t);if(i+e>n.byteLength)throw F(x);var s=D(n.buffer).bytes,o=i+n.byteOffset,l=s.slice(o,o+e);return a?l:l.reverse()},X=function(t,e,r,a,i,n){var s=c(r),o=D(t);if(s+e>o.byteLength)throw F(x);for(var l=D(o.buffer).bytes,h=s+o.byteOffset,u=a(+i),f=0;f<e;f++)l[h+f]=u[n?f:e-f-1]};if(n){if(!l((function(){E(1)}))||!l((function(){new E(-1)}))||l((function(){return new E,new E(1.5),new E(NaN),E.name!=A}))){w=function(t){return h(this,w),new E(c(t))};for(var W,z=w[S]=E[S],H=d(E),K=0;H.length>K;)(W=H[K++])in w||s(w,W,E[W]);z.constructor=w}m&&p(B)!==I&&m(B,I);var q=new M(new w(2)),Z=B.setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||o(B,{setInt8:function(t,e){Z.call(this,t,e<<24>>24)},setUint8:function(t,e){Z.call(this,t,e<<24>>24)}},{unsafe:!0})}else w=function(t){h(this,w,A);var e=c(t);T(this,{bytes:g.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},M=function(t,e,r){h(this,M,O),h(t,w,O);var a=D(t).byteLength,n=u(e);if(n<0||n>a)throw F("Wrong offset");if(r=void 0===r?a-n:f(r),n+r>a)throw F(P);T(this,{buffer:t,byteLength:r,byteOffset:n}),i||(this.buffer=t,this.byteLength=r,this.byteOffset=n)},i&&(U(w,"byteLength"),U(M,"buffer"),U(M,"byteLength"),U(M,"byteOffset")),o(M[S],{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return L(G(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return L(G(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return R(G(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return R(G(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){X(this,1,t,N,e)},setUint8:function(t,e){X(this,1,t,N,e)},setInt16:function(t,e){X(this,2,t,j,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){X(this,2,t,j,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){X(this,4,t,k,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){X(this,4,t,k,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){X(this,4,t,V,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){X(this,8,t,Y,e,arguments.length>2?arguments[2]:void 0)}});v(w,A),v(M,O),t.exports={ArrayBuffer:w,DataView:M}},"649e":function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").some,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("some",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},6547:function(t,e,r){var a=r("a691"),i=r("1d80"),n=function(t){return function(e,r){var n,s,o=String(i(e)),l=a(r),h=o.length;return l<0||l>=h?t?"":void 0:(n=o.charCodeAt(l),n<55296||n>56319||l+1===h||(s=o.charCodeAt(l+1))<56320||s>57343?t?o.charAt(l):n:t?o.slice(l,l+2):s-56320+(n-55296<<10)+65536)}};t.exports={codeAt:n(!1),charAt:n(!0)}},"65f0":function(t,e,r){var a=r("861d"),i=r("e8b5"),n=r("b622"),s=n("species");t.exports=function(t,e){var r;return i(t)&&(r=t.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?a(r)&&(r=r[s],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},"69f3":function(t,e,r){var a,i,n,s=r("7f9a"),o=r("da84"),l=r("861d"),h=r("9112"),u=r("5135"),f=r("c6cd"),c=r("f772"),_=r("d012"),p=o.WeakMap,m=function(t){return n(t)?i(t):a(t,{})},d=function(t){return function(e){var r;if(!l(e)||(r=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}};if(s){var y=f.state||(f.state=new p),g=y.get,v=y.has,b=y.set;a=function(t,e){return e.facade=t,b.call(y,t,e),e},i=function(t){return g.call(y,t)||{}},n=function(t){return v.call(y,t)}}else{var D=c("state");_[D]=!0,a=function(t,e){return e.facade=t,h(t,D,e),e},i=function(t){return u(t,D)?t[D]:{}},n=function(t){return u(t,D)}}t.exports={set:a,get:i,has:n,enforce:m,getterFor:d}},"6eeb":function(t,e,r){var a=r("da84"),i=r("9112"),n=r("5135"),s=r("ce4e"),o=r("8925"),l=r("69f3"),h=l.get,u=l.enforce,f=String(String).split("String");(t.exports=function(t,e,r,o){var l,h=!!o&&!!o.unsafe,c=!!o&&!!o.enumerable,_=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||n(r,"name")||i(r,"name",e),l=u(r),l.source||(l.source=f.join("string"==typeof e?e:""))),t!==a?(h?!_&&t[e]&&(c=!0):delete t[e],c?t[e]=r:i(t,e,r)):c?t[e]=r:s(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&h(this).source||o(this)}))},7156:function(t,e,r){var a=r("861d"),i=r("d2bb");t.exports=function(t,e,r){var n,s;return i&&"function"==typeof(n=e.constructor)&&n!==r&&a(s=n.prototype)&&s!==r.prototype&&i(t,s),t}},"72f7":function(t,e,r){"use strict";var a=r("ebb5").exportTypedArrayMethod,i=r("d039"),n=r("da84"),s=n.Uint8Array,o=s&&s.prototype||{},l=[].toString,h=[].join;i((function(){l.call({})}))&&(l=function(){return h.call(this)});var u=o.toString!=l;a("toString",l,u)},"735e":function(t,e,r){"use strict";var a=r("ebb5"),i=r("81d5"),n=a.aTypedArray,s=a.exportTypedArrayMethod;s("fill",(function(t){return i.apply(n(this),arguments)}))},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"746f":function(t,e,r){var a=r("428f"),i=r("5135"),n=r("e538"),s=r("9bf2").f;t.exports=function(t){var e=a.Symbol||(a.Symbol={});i(e,t)||s(e,t,{value:n.f(t)})}},"74e8":function(t,e,r){"use strict";var a=r("23e7"),i=r("da84"),n=r("83ab"),s=r("8aa7"),o=r("ebb5"),l=r("621a"),h=r("19aa"),u=r("5c6c"),f=r("9112"),c=r("50c4"),_=r("0b25"),p=r("182d"),m=r("c04e"),d=r("5135"),y=r("f5df"),g=r("861d"),v=r("7c73"),b=r("d2bb"),D=r("241c").f,T=r("a078"),A=r("b727").forEach,O=r("2626"),S=r("9bf2"),P=r("06cf"),x=r("69f3"),E=r("7156"),w=x.get,M=x.set,B=S.f,I=P.f,F=Math.round,C=i.RangeError,R=l.ArrayBuffer,N=l.DataView,j=o.NATIVE_ARRAY_BUFFER_VIEWS,k=o.TYPED_ARRAY_TAG,L=o.TypedArray,V=o.TypedArrayPrototype,Y=o.aTypedArrayConstructor,U=o.isTypedArray,G="BYTES_PER_ELEMENT",X="Wrong length",W=function(t,e){var r=0,a=e.length,i=new(Y(t))(a);while(a>r)i[r]=e[r++];return i},z=function(t,e){B(t,e,{get:function(){return w(this)[e]}})},H=function(t){var e;return t instanceof R||"ArrayBuffer"==(e=y(t))||"SharedArrayBuffer"==e},K=function(t,e){return U(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},q=function(t,e){return K(t,e=m(e,!0))?u(2,t[e]):I(t,e)},Z=function(t,e,r){return!(K(t,e=m(e,!0))&&g(r)&&d(r,"value"))||d(r,"get")||d(r,"set")||r.configurable||d(r,"writable")&&!r.writable||d(r,"enumerable")&&!r.enumerable?B(t,e,r):(t[e]=r.value,t)};n?(j||(P.f=q,S.f=Z,z(V,"buffer"),z(V,"byteOffset"),z(V,"byteLength"),z(V,"length")),a({target:"Object",stat:!0,forced:!j},{getOwnPropertyDescriptor:q,defineProperty:Z}),t.exports=function(t,e,r){var n=t.match(/\d+$/)[0]/8,o=t+(r?"Clamped":"")+"Array",l="get"+t,u="set"+t,m=i[o],d=m,y=d&&d.prototype,S={},P=function(t,e){var r=w(t);return r.view[l](e*n+r.byteOffset,!0)},x=function(t,e,a){var i=w(t);r&&(a=(a=F(a))<0?0:a>255?255:255&a),i.view[u](e*n+i.byteOffset,a,!0)},I=function(t,e){B(t,e,{get:function(){return P(this,e)},set:function(t){return x(this,e,t)},enumerable:!0})};j?s&&(d=e((function(t,e,r,a){return h(t,d,o),E(function(){return g(e)?H(e)?void 0!==a?new m(e,p(r,n),a):void 0!==r?new m(e,p(r,n)):new m(e):U(e)?W(d,e):T.call(d,e):new m(_(e))}(),t,d)})),b&&b(d,L),A(D(m),(function(t){t in d||f(d,t,m[t])})),d.prototype=y):(d=e((function(t,e,r,a){h(t,d,o);var i,s,l,u=0,f=0;if(g(e)){if(!H(e))return U(e)?W(d,e):T.call(d,e);i=e,f=p(r,n);var m=e.byteLength;if(void 0===a){if(m%n)throw C(X);if(s=m-f,s<0)throw C(X)}else if(s=c(a)*n,s+f>m)throw C(X);l=s/n}else l=_(e),s=l*n,i=new R(s);M(t,{buffer:i,byteOffset:f,byteLength:s,length:l,view:new N(i)});while(u<l)I(t,u++)})),b&&b(d,L),y=d.prototype=v(V)),y.constructor!==d&&f(y,"constructor",d),k&&f(y,k,o),S[o]=d,a({global:!0,forced:d!=m,sham:!j},S),G in d||f(d,G,n),G in y||f(y,G,n),O(o)}):t.exports=function(){}},"77a7":function(t,e){var r=1/0,a=Math.abs,i=Math.pow,n=Math.floor,s=Math.log,o=Math.LN2,l=function(t,e,l){var h,u,f,c=new Array(l),_=8*l-e-1,p=(1<<_)-1,m=p>>1,d=23===e?i(2,-24)-i(2,-77):0,y=t<0||0===t&&1/t<0?1:0,g=0;for(t=a(t),t!=t||t===r?(u=t!=t?1:0,h=p):(h=n(s(t)/o),t*(f=i(2,-h))<1&&(h--,f*=2),t+=h+m>=1?d/f:d*i(2,1-m),t*f>=2&&(h++,f/=2),h+m>=p?(u=0,h=p):h+m>=1?(u=(t*f-1)*i(2,e),h+=m):(u=t*i(2,m-1)*i(2,e),h=0));e>=8;c[g++]=255&u,u/=256,e-=8);for(h=h<<e|u,_+=e;_>0;c[g++]=255&h,h/=256,_-=8);return c[--g]|=128*y,c},h=function(t,e){var a,n=t.length,s=8*n-e-1,o=(1<<s)-1,l=o>>1,h=s-7,u=n-1,f=t[u--],c=127&f;for(f>>=7;h>0;c=256*c+t[u],u--,h-=8);for(a=c&(1<<-h)-1,c>>=-h,h+=e;h>0;a=256*a+t[u],u--,h-=8);if(0===c)c=1-l;else{if(c===o)return a?NaN:f?-r:r;a+=i(2,e),c-=l}return(f?-1:1)*a*i(2,c-e)};t.exports={pack:l,unpack:h}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(t,e,r){var a=r("1d80");t.exports=function(t){return Object(a(t))}},"7c73":function(t,e,r){var a,i=r("825a"),n=r("37e8"),s=r("7839"),o=r("d012"),l=r("1be4"),h=r("cc12"),u=r("f772"),f=">",c="<",_="prototype",p="script",m=u("IE_PROTO"),d=function(){},y=function(t){return c+p+f+t+c+"/"+p+f},g=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){var t,e=h("iframe"),r="java"+p+":";return e.style.display="none",l.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},b=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch(e){}b=a?g(a):v();var t=s.length;while(t--)delete b[_][s[t]];return b()};o[m]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(d[_]=i(t),r=new d,d[_]=null,r[m]=t):r=b(),void 0===e?r:n(r,e)}},"7dd0":function(t,e,r){"use strict";var a=r("23e7"),i=r("9ed3"),n=r("e163"),s=r("d2bb"),o=r("d44e"),l=r("9112"),h=r("6eeb"),u=r("b622"),f=r("c430"),c=r("3f8c"),_=r("ae93"),p=_.IteratorPrototype,m=_.BUGGY_SAFARI_ITERATORS,d=u("iterator"),y="keys",g="values",v="entries",b=function(){return this};t.exports=function(t,e,r,u,_,D,T){i(r,e,u);var A,O,S,P=function(t){if(t===_&&B)return B;if(!m&&t in w)return w[t];switch(t){case y:return function(){return new r(this,t)};case g:return function(){return new r(this,t)};case v:return function(){return new r(this,t)}}return function(){return new r(this)}},x=e+" Iterator",E=!1,w=t.prototype,M=w[d]||w["@@iterator"]||_&&w[_],B=!m&&M||P(_),I="Array"==e&&w.entries||M;if(I&&(A=n(I.call(new t)),p!==Object.prototype&&A.next&&(f||n(A)===p||(s?s(A,p):"function"!=typeof A[d]&&l(A,d,b)),o(A,x,!0,!0),f&&(c[x]=b))),_==g&&M&&M.name!==g&&(E=!0,B=function(){return M.call(this)}),f&&!T||w[d]===B||l(w,d,B),c[e]=B,_)if(O={values:P(g),keys:D?B:P(y),entries:P(v)},T)for(S in O)(m||E||!(S in w))&&h(w,S,O[S]);else a({target:e,proto:!0,forced:m||E},O);return O}},"7f9a":function(t,e,r){var a=r("da84"),i=r("8925"),n=a.WeakMap;t.exports="function"===typeof n&&/native code/.test(i(n))},"81d5":function(t,e,r){"use strict";var a=r("7b0b"),i=r("23cb"),n=r("50c4");t.exports=function(t){var e=a(this),r=n(e.length),s=arguments.length,o=i(s>1?arguments[1]:void 0,r),l=s>2?arguments[2]:void 0,h=void 0===l?r:i(l,r);while(h>o)e[o++]=t;return e}},"825a":function(t,e,r){var a=r("861d");t.exports=function(t){if(!a(t))throw TypeError(String(t)+" is not an object");return t}},"82f8":function(t,e,r){"use strict";var a=r("ebb5"),i=r("4d64").includes,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("includes",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},"83ab":function(t,e,r){var a=r("d039");t.exports=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(t,e,r){"use strict";var a=r("c04e"),i=r("9bf2"),n=r("5c6c");t.exports=function(t,e,r){var s=a(e);s in t?i.f(t,s,n(0,r)):t[s]=r}},"84c3":function(t,e,r){var a=r("74e8");a("Uint16",(function(t){return function(e,r,a){return t(this,e,r,a)}}))},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8875:function(t,e,r){var a,i,n;(function(r,s){i=[],a=s,n="function"===typeof a?a.apply(e,i):a,void 0===n||(t.exports=n)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(_){var r,a,i,n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,s=/@([^@]*):(\d+):(\d+)\s*$/gi,o=n.exec(_.stack)||s.exec(_.stack),l=o&&o[1]||!1,h=o&&o[2]||!1,u=document.location.href.replace(document.location.hash,""),f=document.getElementsByTagName("script");l===u&&(r=document.documentElement.outerHTML,a=new RegExp("(?:[^\\n]+?\\n){0,"+(h-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=r.replace(a,"$1").trim());for(var c=0;c<f.length;c++){if("interactive"===f[c].readyState)return f[c];if(f[c].src===l)return f[c];if(l===u&&f[c].innerHTML&&f[c].innerHTML.trim()===i)return f[c]}return null}}return t}))},8925:function(t,e,r){var a=r("c6cd"),i=Function.toString;"function"!=typeof a.inspectSource&&(a.inspectSource=function(t){return i.call(t)}),t.exports=a.inspectSource},"8aa7":function(t,e,r){var a=r("da84"),i=r("d039"),n=r("1c7e"),s=r("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,o=a.ArrayBuffer,l=a.Int8Array;t.exports=!s||!i((function(){l(1)}))||!i((function(){new l(-1)}))||!n((function(t){new l,new l(null),new l(1.5),new l(t)}),!0)||i((function(){return 1!==new l(new o(2),1,void 0).length}))},"8b09":function(t,e,r){var a=r("74e8");a("Int16",(function(t){return function(e,r,a){return t(this,e,r,a)}}))},"8bbf":function(t,r){t.exports=e},"90e3":function(t,e){var r=0,a=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+a).toString(36)}},9112:function(t,e,r){var a=r("83ab"),i=r("9bf2"),n=r("5c6c");t.exports=a?function(t,e,r){return i.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},"94ca":function(t,e,r){var a=r("d039"),i=/#|\.prototype\./,n=function(t,e){var r=o[s(t)];return r==h||r!=l&&("function"==typeof e?a(e):!!e)},s=n.normalize=function(t){return String(t).replace(i,".").toLowerCase()},o=n.data={},l=n.NATIVE="N",h=n.POLYFILL="P";t.exports=n},"99af":function(t,e,r){"use strict";var a=r("23e7"),i=r("d039"),n=r("e8b5"),s=r("861d"),o=r("7b0b"),l=r("50c4"),h=r("8418"),u=r("65f0"),f=r("1dde"),c=r("b622"),_=r("2d00"),p=c("isConcatSpreadable"),m=9007199254740991,d="Maximum allowed index exceeded",y=_>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=f("concat"),v=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:n(t)},b=!y||!g;a({target:"Array",proto:!0,forced:b},{concat:function(t){var e,r,a,i,n,s=o(this),f=u(s,0),c=0;for(e=-1,a=arguments.length;e<a;e++)if(n=-1===e?s:arguments[e],v(n)){if(i=l(n.length),c+i>m)throw TypeError(d);for(r=0;r<i;r++,c++)r in n&&h(f,c,n[r])}else{if(c>=m)throw TypeError(d);h(f,c++,n)}return f.length=c,f}})},"9a8c":function(t,e,r){"use strict";var a=r("ebb5"),i=r("145e"),n=a.aTypedArray,s=a.exportTypedArrayMethod;s("copyWithin",(function(t,e){return i.call(n(this),t,e,arguments.length>2?arguments[2]:void 0)}))},"9bf2":function(t,e,r){var a=r("83ab"),i=r("0cfb"),n=r("825a"),s=r("c04e"),o=Object.defineProperty;e.f=a?o:function(t,e,r){if(n(t),e=s(e,!0),n(r),i)try{return o(t,e,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},"9ed3":function(t,e,r){"use strict";var a=r("ae93").IteratorPrototype,i=r("7c73"),n=r("5c6c"),s=r("d44e"),o=r("3f8c"),l=function(){return this};t.exports=function(t,e,r){var h=e+" Iterator";return t.prototype=i(a,{next:n(1,r)}),s(t,h,!1,!0),o[h]=l,t}},a078:function(t,e,r){var a=r("7b0b"),i=r("50c4"),n=r("35a1"),s=r("e95a"),o=r("0366"),l=r("ebb5").aTypedArrayConstructor;t.exports=function(t){var e,r,h,u,f,c,_=a(t),p=arguments.length,m=p>1?arguments[1]:void 0,d=void 0!==m,y=n(_);if(void 0!=y&&!s(y)){f=y.call(_),c=f.next,_=[];while(!(u=c.call(f)).done)_.push(u.value)}for(d&&p>2&&(m=o(m,arguments[2],2)),r=i(_.length),h=new(l(this))(r),e=0;r>e;e++)h[e]=d?m(_[e],e):_[e];return h}},a434:function(t,e,r){"use strict";var a=r("23e7"),i=r("23cb"),n=r("a691"),s=r("50c4"),o=r("7b0b"),l=r("65f0"),h=r("8418"),u=r("1dde"),f=r("ae40"),c=u("splice"),_=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,m=Math.min,d=9007199254740991,y="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!c||!_},{splice:function(t,e){var r,a,u,f,c,_,g=o(this),v=s(g.length),b=i(t,v),D=arguments.length;if(0===D?r=a=0:1===D?(r=0,a=v-b):(r=D-2,a=m(p(n(e),0),v-b)),v+r-a>d)throw TypeError(y);for(u=l(g,a),f=0;f<a;f++)c=b+f,c in g&&h(u,f,g[c]);if(u.length=a,r<a){for(f=b;f<v-a;f++)c=f+a,_=f+r,c in g?g[_]=g[c]:delete g[_];for(f=v;f>v-a+r;f--)delete g[f-1]}else if(r>a)for(f=v-a;f>b;f--)c=f+a-1,_=f+r-1,c in g?g[_]=g[c]:delete g[_];for(f=0;f<r;f++)g[f+b]=arguments[f+2];return g.length=v-a+r,u}})},a4d3:function(t,e,r){"use strict";var a=r("23e7"),i=r("da84"),n=r("d066"),s=r("c430"),o=r("83ab"),l=r("4930"),h=r("fdbf"),u=r("d039"),f=r("5135"),c=r("e8b5"),_=r("861d"),p=r("825a"),m=r("7b0b"),d=r("fc6a"),y=r("c04e"),g=r("5c6c"),v=r("7c73"),b=r("df75"),D=r("241c"),T=r("057f"),A=r("7418"),O=r("06cf"),S=r("9bf2"),P=r("d1e7"),x=r("9112"),E=r("6eeb"),w=r("5692"),M=r("f772"),B=r("d012"),I=r("90e3"),F=r("b622"),C=r("e538"),R=r("746f"),N=r("d44e"),j=r("69f3"),k=r("b727").forEach,L=M("hidden"),V="Symbol",Y="prototype",U=F("toPrimitive"),G=j.set,X=j.getterFor(V),W=Object[Y],z=i.Symbol,H=n("JSON","stringify"),K=O.f,q=S.f,Z=T.f,Q=P.f,$=w("symbols"),J=w("op-symbols"),tt=w("string-to-symbol-registry"),et=w("symbol-to-string-registry"),rt=w("wks"),at=i.QObject,it=!at||!at[Y]||!at[Y].findChild,nt=o&&u((function(){return 7!=v(q({},"a",{get:function(){return q(this,"a",{value:7}).a}})).a}))?function(t,e,r){var a=K(W,e);a&&delete W[e],q(t,e,r),a&&t!==W&&q(W,e,a)}:q,st=function(t,e){var r=$[t]=v(z[Y]);return G(r,{type:V,tag:t,description:e}),o||(r.description=e),r},ot=h?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof z},lt=function(t,e,r){t===W&&lt(J,e,r),p(t);var a=y(e,!0);return p(r),f($,a)?(r.enumerable?(f(t,L)&&t[L][a]&&(t[L][a]=!1),r=v(r,{enumerable:g(0,!1)})):(f(t,L)||q(t,L,g(1,{})),t[L][a]=!0),nt(t,a,r)):q(t,a,r)},ht=function(t,e){p(t);var r=d(e),a=b(r).concat(pt(r));return k(a,(function(e){o&&!ft.call(r,e)||lt(t,e,r[e])})),t},ut=function(t,e){return void 0===e?v(t):ht(v(t),e)},ft=function(t){var e=y(t,!0),r=Q.call(this,e);return!(this===W&&f($,e)&&!f(J,e))&&(!(r||!f(this,e)||!f($,e)||f(this,L)&&this[L][e])||r)},ct=function(t,e){var r=d(t),a=y(e,!0);if(r!==W||!f($,a)||f(J,a)){var i=K(r,a);return!i||!f($,a)||f(r,L)&&r[L][a]||(i.enumerable=!0),i}},_t=function(t){var e=Z(d(t)),r=[];return k(e,(function(t){f($,t)||f(B,t)||r.push(t)})),r},pt=function(t){var e=t===W,r=Z(e?J:d(t)),a=[];return k(r,(function(t){!f($,t)||e&&!f(W,t)||a.push($[t])})),a};if(l||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=I(t),r=function(t){this===W&&r.call(J,t),f(this,L)&&f(this[L],e)&&(this[L][e]=!1),nt(this,e,g(1,t))};return o&&it&&nt(W,e,{configurable:!0,set:r}),st(e,t)},E(z[Y],"toString",(function(){return X(this).tag})),E(z,"withoutSetter",(function(t){return st(I(t),t)})),P.f=ft,S.f=lt,O.f=ct,D.f=T.f=_t,A.f=pt,C.f=function(t){return st(F(t),t)},o&&(q(z[Y],"description",{configurable:!0,get:function(){return X(this).description}}),s||E(W,"propertyIsEnumerable",ft,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:z}),k(b(rt),(function(t){R(t)})),a({target:V,stat:!0,forced:!l},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var r=z(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),a({target:"Object",stat:!0,forced:!l,sham:!o},{create:ut,defineProperty:lt,defineProperties:ht,getOwnPropertyDescriptor:ct}),a({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:_t,getOwnPropertySymbols:pt}),a({target:"Object",stat:!0,forced:u((function(){A.f(1)}))},{getOwnPropertySymbols:function(t){return A.f(m(t))}}),H){var mt=!l||u((function(){var t=z();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}));a({target:"JSON",stat:!0,forced:mt},{stringify:function(t,e,r){var a,i=[t],n=1;while(arguments.length>n)i.push(arguments[n++]);if(a=e,(_(e)||void 0!==t)&&!ot(t))return c(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!ot(e))return e}),i[1]=e,H.apply(null,i)}})}z[Y][U]||x(z[Y],U,z[Y].valueOf),N(z,V),B[L]=!0},a640:function(t,e,r){"use strict";var a=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&a((function(){r.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var r=Math.ceil,a=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?a:r)(t)}},a975:function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").every,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("every",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},a981:function(t,e){t.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},ad6d:function(t,e,r){"use strict";var a=r("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae40:function(t,e,r){var a=r("83ab"),i=r("d039"),n=r("5135"),s=Object.defineProperty,o={},l=function(t){throw t};t.exports=function(t,e){if(n(o,t))return o[t];e||(e={});var r=[][t],h=!!n(e,"ACCESSORS")&&e.ACCESSORS,u=n(e,0)?e[0]:l,f=n(e,1)?e[1]:void 0;return o[t]=!!r&&!i((function(){if(h&&!a)return!0;var t={length:-1};h?s(t,1,{enumerable:!0,get:l}):t[1]=1,r.call(t,u,f)}))}},ae93:function(t,e,r){"use strict";var a,i,n,s=r("d039"),o=r("e163"),l=r("9112"),h=r("5135"),u=r("b622"),f=r("c430"),c=u("iterator"),_=!1,p=function(){return this};[].keys&&(n=[].keys(),"next"in n?(i=o(o(n)),i!==Object.prototype&&(a=i)):_=!0);var m=void 0==a||s((function(){var t={};return a[c].call(t)!==t}));m&&(a={}),f&&!m||h(a,c)||l(a,c,p),t.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:_}},b041:function(t,e,r){"use strict";var a=r("00ee"),i=r("f5df");t.exports=a?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(t,e,r){var a=r("83ab"),i=r("9bf2").f,n=Function.prototype,s=n.toString,o=/^\s*function ([^ (]*)/,l="name";a&&!(l in n)&&i(n,l,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},b39a:function(t,e,r){"use strict";var a=r("da84"),i=r("ebb5"),n=r("d039"),s=a.Int8Array,o=i.aTypedArray,l=i.exportTypedArrayMethod,h=[].toLocaleString,u=[].slice,f=!!s&&n((function(){h.call(new s(1))})),c=n((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!n((function(){s.prototype.toLocaleString.call([1,2])}));l("toLocaleString",(function(){return h.apply(f?u.call(o(this)):o(this),arguments)}),c)},b622:function(t,e,r){var a=r("da84"),i=r("5692"),n=r("5135"),s=r("90e3"),o=r("4930"),l=r("fdbf"),h=i("wks"),u=a.Symbol,f=l?u:u&&u.withoutSetter||s;t.exports=function(t){return n(h,t)||(o&&n(u,t)?h[t]=u[t]:h[t]=f("Symbol."+t)),h[t]}},b727:function(t,e,r){var a=r("0366"),i=r("44ad"),n=r("7b0b"),s=r("50c4"),o=r("65f0"),l=[].push,h=function(t){var e=1==t,r=2==t,h=3==t,u=4==t,f=6==t,c=7==t,_=5==t||f;return function(p,m,d,y){for(var g,v,b=n(p),D=i(b),T=a(m,d,3),A=s(D.length),O=0,S=y||o,P=e?S(p,A):r||c?S(p,0):void 0;A>O;O++)if((_||O in D)&&(g=D[O],v=T(g,O,b),t))if(e)P[O]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:l.call(P,g)}else switch(t){case 4:return!1;case 7:l.call(P,g)}return f?-1:h||u?u:P}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterOut:h(7)}},c04e:function(t,e,r){var a=r("861d");t.exports=function(t,e){if(!a(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!a(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!a(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!a(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},c19f:function(t,e,r){"use strict";var a=r("23e7"),i=r("da84"),n=r("621a"),s=r("2626"),o="ArrayBuffer",l=n[o],h=i[o];a({global:!0,forced:h!==l},{ArrayBuffer:l}),s(o)},c1ac:function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").filter,n=r("4840"),s=a.aTypedArray,o=a.aTypedArrayConstructor,l=a.exportTypedArrayMethod;l("filter",(function(t){var e=i(s(this),t,arguments.length>1?arguments[1]:void 0),r=n(this,this.constructor),a=0,l=e.length,h=new(o(r))(l);while(l>a)h[a]=e[a++];return h}))},c430:function(t,e){t.exports=!1},c6b6:function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},c6cd:function(t,e,r){var a=r("da84"),i=r("ce4e"),n="__core-js_shared__",s=a[n]||i(n,{});t.exports=s},c8ba:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(a){"object"===typeof window&&(r=window)}t.exports=r},c975:function(t,e,r){"use strict";var a=r("23e7"),i=r("4d64").indexOf,n=r("a640"),s=r("ae40"),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0,h=n("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:l||!h||!u},{indexOf:function(t){return l?o.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},ca84:function(t,e,r){var a=r("5135"),i=r("fc6a"),n=r("4d64").indexOf,s=r("d012");t.exports=function(t,e){var r,o=i(t),l=0,h=[];for(r in o)!a(s,r)&&a(o,r)&&h.push(r);while(e.length>l)a(o,r=e[l++])&&(~n(h,r)||h.push(r));return h}},ca91:function(t,e,r){"use strict";var a=r("ebb5"),i=r("d58f").left,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("reduce",(function(t){return i(n(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},cc12:function(t,e,r){var a=r("da84"),i=r("861d"),n=a.document,s=i(n)&&i(n.createElement);t.exports=function(t){return s?n.createElement(t):{}}},cd26:function(t,e,r){"use strict";var a=r("ebb5"),i=a.aTypedArray,n=a.exportTypedArrayMethod,s=Math.floor;n("reverse",(function(){var t,e=this,r=i(e).length,a=s(r/2),n=0;while(n<a)t=e[n],e[n++]=e[--r],e[r]=t;return e}))},ce4e:function(t,e,r){var a=r("da84"),i=r("9112");t.exports=function(t,e){try{i(a,t,e)}catch(r){a[t]=e}return e}},cfc3:function(t,e,r){var a=r("74e8");a("Float32",(function(t){return function(e,r,a){return t(this,e,r,a)}}))},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,r){var a=r("428f"),i=r("da84"),n=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?n(a[t])||n(i[t]):a[t]&&a[t][e]||i[t]&&i[t][e]}},d139:function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").find,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("find",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},d1e7:function(t,e,r){"use strict";var a={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!a.call({1:2},1);e.f=n?function(t){var e=i(this,t);return!!e&&e.enumerable}:a},d28b:function(t,e,r){var a=r("746f");a("iterator")},d2bb:function(t,e,r){var a=r("825a"),i=r("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(r,[]),e=r instanceof Array}catch(n){}return function(r,n){return a(r),i(n),e?t.call(r,n):r.__proto__=n,r}}():void 0)},d3b7:function(t,e,r){var a=r("00ee"),i=r("6eeb"),n=r("b041");a||i(Object.prototype,"toString",n,{unsafe:!0})},d44e:function(t,e,r){var a=r("9bf2").f,i=r("5135"),n=r("b622"),s=n("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,s)&&a(t,s,{configurable:!0,value:e})}},d58f:function(t,e,r){var a=r("1c0b"),i=r("7b0b"),n=r("44ad"),s=r("50c4"),o=function(t){return function(e,r,o,l){a(r);var h=i(e),u=n(h),f=s(h.length),c=t?f-1:0,_=t?-1:1;if(o<2)while(1){if(c in u){l=u[c],c+=_;break}if(c+=_,t?c<0:f<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:f>c;c+=_)c in u&&(l=r(l,u[c],c,h));return l}};t.exports={left:o(!1),right:o(!0)}},d5d6:function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").forEach,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("forEach",(function(t){i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},d81d:function(t,e,r){"use strict";var a=r("23e7"),i=r("b727").map,n=r("1dde"),s=r("ae40"),o=n("map"),l=s("map");a({target:"Array",proto:!0,forced:!o||!l},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},da84:function(t,e,r){(function(e){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,r("c8ba"))},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},ddb0:function(t,e,r){var a=r("da84"),i=r("fdbc"),n=r("e260"),s=r("9112"),o=r("b622"),l=o("iterator"),h=o("toStringTag"),u=n.values;for(var f in i){var c=a[f],_=c&&c.prototype;if(_){if(_[l]!==u)try{s(_,l,u)}catch(m){_[l]=u}if(_[h]||s(_,h,f),i[f])for(var p in n)if(_[p]!==n[p])try{s(_,p,n[p])}catch(m){_[p]=n[p]}}}},df75:function(t,e,r){var a=r("ca84"),i=r("7839");t.exports=Object.keys||function(t){return a(t,i)}},e01a:function(t,e,r){"use strict";var a=r("23e7"),i=r("83ab"),n=r("da84"),s=r("5135"),o=r("861d"),l=r("9bf2").f,h=r("e893"),u=n.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var f={},c=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof c?new u(t):void 0===t?u():u(t);return""===t&&(f[e]=!0),e};h(c,u);var _=c.prototype=u.prototype;_.constructor=c;var p=_.toString,m="Symbol(test)"==String(u("test")),d=/^Symbol\((.*)\)[^)]+$/;l(_,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=p.call(t);if(s(f,t))return"";var r=m?e.slice(7,-1):e.replace(d,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:c})}},e163:function(t,e,r){var a=r("5135"),i=r("7b0b"),n=r("f772"),s=r("e177"),o=n("IE_PROTO"),l=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=i(t),a(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},e177:function(t,e,r){var a=r("d039");t.exports=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,r){"use strict";var a=r("fc6a"),i=r("44d2"),n=r("3f8c"),s=r("69f3"),o=r("7dd0"),l="Array Iterator",h=s.set,u=s.getterFor(l);t.exports=o(Array,"Array",(function(t,e){h(this,{type:l,target:a(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,r=t.kind,a=t.index++;return!e||a>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:a,done:!1}:"values"==r?{value:e[a],done:!1}:{value:[a,e[a]],done:!1}}),"values"),n.Arguments=n.Array,i("keys"),i("values"),i("entries")},e2cc:function(t,e,r){var a=r("6eeb");t.exports=function(t,e,r){for(var i in e)a(t,i,e[i],r);return t}},e538:function(t,e,r){var a=r("b622");e.f=a},e58c:function(t,e,r){"use strict";var a=r("fc6a"),i=r("a691"),n=r("50c4"),s=r("a640"),o=r("ae40"),l=Math.min,h=[].lastIndexOf,u=!!h&&1/[1].lastIndexOf(1,-0)<0,f=s("lastIndexOf"),c=o("indexOf",{ACCESSORS:!0,1:0}),_=u||!f||!c;t.exports=_?function(t){if(u)return h.apply(this,arguments)||0;var e=a(this),r=n(e.length),s=r-1;for(arguments.length>1&&(s=l(s,i(arguments[1]))),s<0&&(s=r+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:h},e893:function(t,e,r){var a=r("5135"),i=r("56ef"),n=r("06cf"),s=r("9bf2");t.exports=function(t,e){for(var r=i(e),o=s.f,l=n.f,h=0;h<r.length;h++){var u=r[h];a(t,u)||o(t,u,l(e,u))}}},e8b5:function(t,e,r){var a=r("c6b6");t.exports=Array.isArray||function(t){return"Array"==a(t)}},e91f:function(t,e,r){"use strict";var a=r("ebb5"),i=r("4d64").indexOf,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("indexOf",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},e95a:function(t,e,r){var a=r("b622"),i=r("3f8c"),n=a("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[n]===t)}},ebb5:function(t,e,r){"use strict";var a,i=r("a981"),n=r("83ab"),s=r("da84"),o=r("861d"),l=r("5135"),h=r("f5df"),u=r("9112"),f=r("6eeb"),c=r("9bf2").f,_=r("e163"),p=r("d2bb"),m=r("b622"),d=r("90e3"),y=s.Int8Array,g=y&&y.prototype,v=s.Uint8ClampedArray,b=v&&v.prototype,D=y&&_(y),T=g&&_(g),A=Object.prototype,O=A.isPrototypeOf,S=m("toStringTag"),P=d("TYPED_ARRAY_TAG"),x=i&&!!p&&"Opera"!==h(s.opera),E=!1,w={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},B=function(t){if(!o(t))return!1;var e=h(t);return"DataView"===e||l(w,e)||l(M,e)},I=function(t){if(!o(t))return!1;var e=h(t);return l(w,e)||l(M,e)},F=function(t){if(I(t))return t;throw TypeError("Target is not a typed array")},C=function(t){if(p){if(O.call(D,t))return t}else for(var e in w)if(l(w,a)){var r=s[e];if(r&&(t===r||O.call(r,t)))return t}throw TypeError("Target is not a typed array constructor")},R=function(t,e,r){if(n){if(r)for(var a in w){var i=s[a];i&&l(i.prototype,t)&&delete i.prototype[t]}T[t]&&!r||f(T,t,r?e:x&&g[t]||e)}},N=function(t,e,r){var a,i;if(n){if(p){if(r)for(a in w)i=s[a],i&&l(i,t)&&delete i[t];if(D[t]&&!r)return;try{return f(D,t,r?e:x&&y[t]||e)}catch(o){}}for(a in w)i=s[a],!i||i[t]&&!r||f(i,t,e)}};for(a in w)s[a]||(x=!1);if((!x||"function"!=typeof D||D===Function.prototype)&&(D=function(){throw TypeError("Incorrect invocation")},x))for(a in w)s[a]&&p(s[a],D);if((!x||!T||T===A)&&(T=D.prototype,x))for(a in w)s[a]&&p(s[a].prototype,T);if(x&&_(b)!==T&&p(b,T),n&&!l(T,S))for(a in E=!0,c(T,S,{get:function(){return o(this)?this[P]:void 0}}),w)s[a]&&u(s[a],P,a);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:x,TYPED_ARRAY_TAG:E&&P,aTypedArray:F,aTypedArrayConstructor:C,exportTypedArrayMethod:R,exportTypedArrayStaticMethod:N,isView:B,isTypedArray:I,TypedArray:D,TypedArrayPrototype:T}},f5df:function(t,e,r){var a=r("00ee"),i=r("c6b6"),n=r("b622"),s=n("toStringTag"),o="Arguments"==i(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(r){}};t.exports=a?i:function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=l(e=Object(t),s))?r:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},f772:function(t,e,r){var a=r("5692"),i=r("90e3"),n=a("keys");t.exports=function(t){return n[t]||(n[t]=i(t))}},f8cd:function(t,e,r){var a=r("a691");t.exports=function(t){var e=a(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},fb15:function(t,e,r){"use strict";if(r.r(e),r.d(e,"dragonBones",(function(){return O})),"undefined"!==typeof window){var a=window.document.currentScript,i=r("8875");a=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var n=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);n&&(r.p=n[1])}var s=r("5fda"),o=r("8bbf"),l=class{constructor(t,e){this.listeners=t?t.listeners:[],this.inst=e||(()=>{})}listen(t){this.listeners.includes(t)||this.listeners.push(t)}unlisten(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}emit(){this.listeners.forEach(t=>t())}};function h(t){if(t.isVector3)return t;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return new s["Vector3"](...e.map(parseFloat))}function u(t){if(t.isEuler)return t;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return new s["Euler"](...e.slice(0,3).map(parseFloat),e[3])}function f(t){if(t.isQuaternion)return t;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return new s["Quaternion"](...e.map(parseFloat))}const c=Boolean,_=String,p=(s["Color"],s["Vector2"],[String,s["Vector3"]]),m=[String,s["Euler"]],d=[String,s["Quaternion"]];s["Spherical"],s["Fog"];function y(t){return!Number.isNaN(parseFloat(t))}function g(t){return/^\s*\S+\s*$/.test(t)}function v(t){if(t instanceof s["Vector3"])return!0;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return 3===e.length&&e.every(y)}function b(t){if(t instanceof s["Euler"])return!0;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return 4===e.length&&e.slice(0,3).every(y)&&/[XYZ]{3}/.test(e[3])}function D(t){if(t instanceof s["Quaternion"])return!0;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return 4===e.length&&e.every(y)}var T={props:{position:{type:p,validator:v},rotation:{type:m,validator:b},rotationQuaternion:{type:d,validator:D},scale:{type:p,validator:v},castShadow:c,receiveShadow:c,name:{type:_,validator:g},hidden:c},inject:{vglObject3d:{default:()=>new l},vglNamespace:{default(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},provide(){return{vglObject3d:new l(this.vglObject3d,()=>this.inst)}},computed:{inst:()=>new s["Object3D"],parent(){return this.vglObject3d.inst()}},methods:{emitAsObject3d(){this.vglNamespace.object3ds.emit(this.name,this.inst)}},beforeUnmount(){this.inst.parent&&this.inst.parent.remove(this.inst),void 0!==this.name&&(this.vglObject3d.unlisten(this.emitAsObject3d),this.vglNamespace.object3ds.delete(this.name,this.inst))},watch:{inst:{handler(t,e){e&&e.parent&&e.parent.remove(e),this.parent&&this.parent.add(t),this.position&&t.position.copy(h(this.position)),this.rotation&&t.rotation.copy(u(this.rotation)),this.rotationQuaternion&&t.quaternion.copy(f(this.rotationQuaternion)),this.scale&&t.scale.copy(h(this.scale)),Object.assign(t,{castShadow:this.castShadow,receiveShadow:this.receiveShadow,visible:!this.hidden,name:this.name}),void 0!==this.name&&this.vglNamespace.object3ds.set(this.name,t),e&&this.vglObject3d.emit()},immediate:!0},parent(t){t.add(this.inst)},name:[function(t){this.inst.name=t},{handler(t,e){void 0!==e&&(this.vglNamespace.object3ds.delete(e,this.inst),void 0===t&&this.vglObject3d.unlisten(this.emitAsObject3d)),void 0!==t&&(this.vglNamespace.object3ds.set(t,this.inst),void 0===e&&this.vglObject3d.listen(this.emitAsObject3d))},immediate:!0}],position(t){this.inst.position.copy(h(t)),this.vglObject3d.emit()},rotation(t){this.inst.rotation.copy(u(t)),this.vglObject3d.emit()},rotationQuaternion(t){this.inst.quaternion.copy(f(t)),this.vglObject3d.emit()},scale(t){this.inst.scale.copy(h(t)),this.vglObject3d.emit()},castShadow(t){this.inst.castShadow=t,this.vglObject3d.emit()},receiveShadow(t){this.inst.receiveShadow=t,this.vglObject3d.emit()},hidden(t){this.inst.visible=!t,this.vglObject3d.emit()}},render(){return this.$slots.default?Object(o["h"])("template",this.$slots.default()):void 0}},A=r("3b69"),O=A["a"],S={name:"VglDragonBones",mixins:[T],props:{skel:{type:Object,required:!0},atlas:{type:Object,required:!0},texture:{required:!0},armatureName:{type:String,required:!0},dragonbonesName:{type:String},animation:{type:String,required:!0}},data:function(){return{destroyed:!1}},computed:{inst:function(){var t=O.ThreeFactory.factory,e="function"===typeof this.texture?new s["Texture"](this.texture()):new s["Texture"](this.texture);e.needsUpdate=!0,t.parseDragonBonesData(this.skel),t.parseTextureAtlasData(this.atlas,e);var r=t.buildArmatureDisplay(this.armatureName,this.dragonbonesName);return r}},watch:{inst:function(t,e){t!=e&&this.setAnimation()}},methods:{setAnimation:function(){this.inst.animation.play(this.animation)},update:function(){this.destroyed||(O.ThreeFactory.factory.dragonBones.advanceTime(-1),this.vglObject3d.emit(),requestAnimationFrame(this._update))}},mounted:function(){this.destroyed=!1,this.inst&&(this.setAnimation(),this.$watch("animation",this.setAnimation),this._update=this.update.bind(this),requestAnimationFrame(this._update))},unmounted:function(){this.destroyed=!0,cancelAnimationFrame(this._update)}};e["default"]=S},fb2c:function(t,e,r){var a=r("74e8");a("Uint32",(function(t){return function(e,r,a){return t(this,e,r,a)}}))},fc6a:function(t,e,r){var a=r("44ad"),i=r("1d80");t.exports=function(t){return a(i(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,r){var a=r("4930");t.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})}));