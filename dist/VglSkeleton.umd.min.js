(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("three"),require("vue")):"function"===typeof define&&define.amd?define(["THREE","Vue"],e):"object"===typeof exports?exports["VglSkeleton"]=e(require("three"),require("vue")):t["VglSkeleton"]=e(t[void 0],t[void 0])})("undefined"!==typeof self?self:this,(function(t,e){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="fb15")}({"00ee":function(t,e,r){var a=r("b622"),i=a("toStringTag"),n={};n[i]="z",t.exports="[object z]"===String(n)},"0366":function(t,e,r){var a=r("1c0b");t.exports=function(t,e,r){if(a(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,a){return t.call(e,r,a)};case 3:return function(r,a,i){return t.call(e,r,a,i)}}return function(){return t.apply(e,arguments)}}},"057f":function(t,e,r){var a=r("fc6a"),i=r("241c").f,n={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return i(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==n.call(t)?o(t):i(a(t))}},"06cf":function(t,e,r){var a=r("83ab"),i=r("d1e7"),n=r("5c6c"),s=r("fc6a"),o=r("c04e"),l=r("5135"),h=r("0cfb"),u=Object.getOwnPropertyDescriptor;e.f=a?u:function(t,e){if(t=s(t),e=o(e,!0),h)try{return u(t,e)}catch(r){}if(l(t,e))return n(!i.f.call(t,e),t[e])}},"0b25":function(t,e,r){var a=r("a691"),i=r("50c4");t.exports=function(t){if(void 0===t)return 0;var e=a(t),r=i(e);if(e!==r)throw RangeError("Wrong length or index");return r}},"0cb2":function(t,e,r){var a=r("7b0b"),i=Math.floor,n="".replace,s=/\$([$&'`]|\d\d?|<[^>]*>)/g,o=/\$([$&'`]|\d\d?)/g;t.exports=function(t,e,r,l,h,u){var c=r+t.length,f=l.length,p=o;return void 0!==h&&(h=a(h),p=s),n.call(u,p,(function(a,n){var s;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":s=h[n.slice(1,-1)];break;default:var o=+n;if(0===o)return a;if(o>f){var u=i(o/10);return 0===u?a:u<=f?void 0===l[u-1]?n.charAt(1):l[u-1]+n.charAt(1):a}s=l[o-1]}return void 0===s?"":s}))}},"0cfb":function(t,e,r){var a=r("83ab"),i=r("d039"),n=r("cc12");t.exports=!a&&!i((function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},1276:function(t,e,r){"use strict";var a=r("d784"),i=r("44e7"),n=r("825a"),s=r("1d80"),o=r("4840"),l=r("8aa5"),h=r("50c4"),u=r("14c3"),c=r("9263"),f=r("d039"),p=[].push,d=Math.min,m=4294967295,_=!f((function(){return!RegExp(m,"y")}));a("split",2,(function(t,e,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var a=String(s(this)),n=void 0===r?m:r>>>0;if(0===n)return[];if(void 0===t)return[a];if(!i(t))return e.call(a,t,n);var o,l,h,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,_=new RegExp(t.source,f+"g");while(o=c.call(_,a)){if(l=_.lastIndex,l>d&&(u.push(a.slice(d,o.index)),o.length>1&&o.index<a.length&&p.apply(u,o.slice(1)),h=o[0].length,d=l,u.length>=n))break;_.lastIndex===o.index&&_.lastIndex++}return d===a.length?!h&&_.test("")||u.push(""):u.push(a.slice(d)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var i=s(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,i,r):a.call(String(i),e,r)},function(t,i){var s=r(a,t,this,i,a!==e);if(s.done)return s.value;var c=n(t),f=String(this),p=o(c,RegExp),y=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(_?"y":"g"),v=new p(_?c:"^(?:"+c.source+")",g),b=void 0===i?m:i>>>0;if(0===b)return[];if(0===f.length)return null===u(v,f)?[f]:[];var T=0,A=0,D=[];while(A<f.length){v.lastIndex=_?A:0;var x,S=u(v,_?f:f.slice(A));if(null===S||(x=d(h(v.lastIndex+(_?0:A)),f.length))===T)A=l(f,A,y);else{if(D.push(f.slice(T,A)),D.length===b)return D;for(var E=1;E<=S.length-1;E++)if(D.push(S[E]),D.length===b)return D;A=T=x}}return D.push(f.slice(T)),D}]}),!_)},"145e":function(t,e,r){"use strict";var a=r("7b0b"),i=r("23cb"),n=r("50c4"),s=Math.min;t.exports=[].copyWithin||function(t,e){var r=a(this),o=n(r.length),l=i(t,o),h=i(e,o),u=arguments.length>2?arguments[2]:void 0,c=s((void 0===u?o:i(u,o))-h,o-l),f=1;h<l&&l<h+c&&(f=-1,h+=c-1,l+=c-1);while(c-- >0)h in r?r[l]=r[h]:delete r[l],l+=f,h+=f;return r}},"14c3":function(t,e,r){var a=r("c6b6"),i=r("9263");t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var n=r.call(t,e);if("object"!==typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==a(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"170b":function(t,e,r){"use strict";var a=r("ebb5"),i=r("50c4"),n=r("23cb"),s=r("4840"),o=a.aTypedArray,l=a.exportTypedArrayMethod;l("subarray",(function(t,e){var r=o(this),a=r.length,l=n(t,a);return new(s(r,r.constructor))(r.buffer,r.byteOffset+l*r.BYTES_PER_ELEMENT,i((void 0===e?a:n(e,a))-l))}))},"182d":function(t,e,r){var a=r("f8cd");t.exports=function(t,e){var r=a(t);if(r%e)throw RangeError("Wrong offset");return r}},"19aa":function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t}},"1be4":function(t,e,r){var a=r("d066");t.exports=a("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,r){var a=r("b622"),i=a("iterator"),n=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){n=!0}};o[i]=function(){return this},Array.from(o,(function(){throw 2}))}catch(l){}t.exports=function(t,e){if(!e&&!n)return!1;var r=!1;try{var a={};a[i]=function(){return{next:function(){return{done:r=!0}}}},t(a)}catch(l){}return r}},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1dde":function(t,e,r){var a=r("d039"),i=r("b622"),n=r("2d00"),s=i("species");t.exports=function(t){return n>=51||!a((function(){var e=[],r=e.constructor={};return r[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"219c":function(t,e,r){"use strict";var a=r("ebb5"),i=a.aTypedArray,n=a.exportTypedArrayMethod,s=[].sort;n("sort",(function(t){return s.call(i(this),t)}))},"23cb":function(t,e,r){var a=r("a691"),i=Math.max,n=Math.min;t.exports=function(t,e){var r=a(t);return r<0?i(r+e,0):n(r,e)}},"23e7":function(t,e,r){var a=r("da84"),i=r("06cf").f,n=r("9112"),s=r("6eeb"),o=r("ce4e"),l=r("e893"),h=r("94ca");t.exports=function(t,e){var r,u,c,f,p,d,m=t.target,_=t.global,y=t.stat;if(u=_?a:y?a[m]||o(m,{}):(a[m]||{}).prototype,u)for(c in e){if(p=e[c],t.noTargetGet?(d=i(u,c),f=d&&d.value):f=u[c],r=h(_?c:m+(y?".":"#")+c,t.forced),!r&&void 0!==f){if(typeof p===typeof f)continue;l(p,f)}(t.sham||f&&f.sham)&&n(p,"sham",!0),s(u,c,p,t)}}},"241c":function(t,e,r){var a=r("ca84"),i=r("7839"),n=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,n)}},"25a1":function(t,e,r){"use strict";var a=r("ebb5"),i=r("d58f").right,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("reduceRight",(function(t){return i(n(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"25f0":function(t,e,r){"use strict";var a=r("6eeb"),i=r("825a"),n=r("d039"),s=r("ad6d"),o="toString",l=RegExp.prototype,h=l[o],u=n((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),c=h.name!=o;(u||c)&&a(RegExp.prototype,o,(function(){var t=i(this),e=String(t.source),r=t.flags,a=String(void 0===r&&t instanceof RegExp&&!("flags"in l)?s.call(t):r);return"/"+e+"/"+a}),{unsafe:!0})},2626:function(t,e,r){"use strict";var a=r("d066"),i=r("9bf2"),n=r("b622"),s=r("83ab"),o=n("species");t.exports=function(t){var e=a(t),r=i.f;s&&e&&!e[o]&&r(e,o,{configurable:!0,get:function(){return this}})}},2954:function(t,e,r){"use strict";var a=r("ebb5"),i=r("4840"),n=r("d039"),s=a.aTypedArray,o=a.aTypedArrayConstructor,l=a.exportTypedArrayMethod,h=[].slice,u=n((function(){new Int8Array(1).slice()}));l("slice",(function(t,e){var r=h.call(s(this),t,e),a=i(this,this.constructor),n=0,l=r.length,u=new(o(a))(l);while(l>n)u[n]=r[n++];return u}),u)},"2d00":function(t,e,r){var a,i,n=r("da84"),s=r("342f"),o=n.process,l=o&&o.versions,h=l&&l.v8;h?(a=h.split("."),i=a[0]+a[1]):s&&(a=s.match(/Edge\/(\d+)/),(!a||a[1]>=74)&&(a=s.match(/Chrome\/(\d+)/),a&&(i=a[1]))),t.exports=i&&+i},3280:function(t,e,r){"use strict";var a=r("ebb5"),i=r("e58c"),n=a.aTypedArray,s=a.exportTypedArrayMethod;s("lastIndexOf",(function(t){return i.apply(n(this),arguments)}))},"342f":function(t,e,r){var a=r("d066");t.exports=a("navigator","userAgent")||""},"35a1":function(t,e,r){var a=r("f5df"),i=r("3f8c"),n=r("b622"),s=n("iterator");t.exports=function(t){if(void 0!=t)return t[s]||t["@@iterator"]||i[a(t)]}},"37e8":function(t,e,r){var a=r("83ab"),i=r("9bf2"),n=r("825a"),s=r("df75");t.exports=a?Object.defineProperties:function(t,e){n(t);var r,a=s(e),o=a.length,l=0;while(o>l)i.f(t,r=a[l++],e[r]);return t}},"3a7b":function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").findIndex,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("findIndex",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},"3b69":function(t,e,r){"use strict";(function(t){r("99af"),r("c975"),r("e260"),r("d81d"),r("a434"),r("c19f"),r("b0c0"),r("d3b7"),r("25f0"),r("cfc3"),r("8b09"),r("5cc6"),r("84c3"),r("fb2c"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7");var a=r("53ca"),i=r("5fda"),n=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();(function(t){var e=function(){function e(e){this._clock=new t.WorldClock,this._events=[],this._objects=[],this._eventManager=null,this._eventManager=e}return e.prototype.advanceTime=function(e){if(this._objects.length>0){for(var r=0,a=this._objects;r<a.length;r++){var i=a[r];i.returnToPool()}this._objects.length=0}if(this._clock.advanceTime(e),this._events.length>0){for(var n=0;n<this._events.length;++n){var s=this._events[n],o=s.armature;null!==o._armatureData&&(o.eventDispatcher.dispatchDBEvent(s.type,s),s.type===t.EventObject.SOUND_EVENT&&this._eventManager.dispatchDBEvent(s.type,s)),this.bufferObject(s)}this._events.length=0}},e.prototype.bufferEvent=function(t){this._events.indexOf(t)<0&&this._events.push(t)},e.prototype.bufferObject=function(t){this._objects.indexOf(t)<0&&this._objects.push(t)},Object.defineProperty(e.prototype,"clock",{get:function(){return this._clock},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventManager",{get:function(){return this._eventManager},enumerable:!1,configurable:!0}),e.VERSION="5.7.000",e.yDown=!0,e.debug=!1,e.debugDraw=!1,e}();t.DragonBones=e})(s||(s={})),console.warn||(console.warn=function(){}),console.assert||(console.assert=function(){}),Date.now||(Date.now=function(){return(new Date).getTime()});var s;n=function(t,e){function r(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);r.prototype=e.prototype,t.prototype=new r};if("undefined"===typeof o&&"undefined"!==typeof window)var o=window;"object"===("undefined"===typeof exports?"undefined":Object(a["a"])(exports))&&"object"===Object(a["a"])(t)?t.exports=s:"function"===typeof define&&r("3c35")?define(["dragonBones"],(function(){return s})):"object"===("undefined"===typeof exports?"undefined":Object(a["a"])(exports))?exports=s:"undefined"!==typeof o&&(o.dragonBones=s),function(t){var e=function(){function t(){this.hashCode=t._hashCode++,this._isInPool=!1}return t._returnObject=function(e){var r=String(e.constructor),a=r in t._maxCountMap?t._maxCountMap[r]:t._defaultMaxCount,i=t._poolsMap[r]=t._poolsMap[r]||[];i.length<a&&(e._isInPool?console.warn("The object is already in the pool."):(e._isInPool=!0,i.push(e)))},t.toString=function(){throw new Error},t.setMaxCount=function(e,r){if((r<0||r!==r)&&(r=0),null!==e){var a=String(e),i=a in t._poolsMap?t._poolsMap[a]:null;null!==i&&i.length>r&&(i.length=r),t._maxCountMap[a]=r}else for(var a in t._defaultMaxCount=r,t._poolsMap){i=t._poolsMap[a];i.length>r&&(i.length=r),a in t._maxCountMap&&(t._maxCountMap[a]=r)}},t.clearPool=function(e){if(void 0===e&&(e=null),null!==e){var r=String(e),a=r in t._poolsMap?t._poolsMap[r]:null;null!==a&&a.length>0&&(a.length=0)}else for(var i in t._poolsMap){a=t._poolsMap[i];a.length=0}},t.borrowObject=function(e){var r=String(e),a=r in t._poolsMap?t._poolsMap[r]:null;if(null!==a&&a.length>0){var i=a.pop();return i._isInPool=!1,i}var n=new e;return n._onClear(),n},t.prototype.returnToPool=function(){this._onClear(),t._returnObject(this)},t._hashCode=0,t._defaultMaxCount=3e3,t._maxCountMap={},t._poolsMap={},t}();t.BaseObject=e}(s||(s={})),function(t){var e=function(){function t(t,e,r,a,i,n){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===a&&(a=1),void 0===i&&(i=0),void 0===n&&(n=0),this.a=t,this.b=e,this.c=r,this.d=a,this.tx=i,this.ty=n}return t.prototype.toString=function(){return"[object dragonBones.Matrix] a:"+this.a+" b:"+this.b+" c:"+this.c+" d:"+this.d+" tx:"+this.tx+" ty:"+this.ty},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.copyFromArray=function(t,e){return void 0===e&&(e=0),this.a=t[e],this.b=t[e+1],this.c=t[e+2],this.d=t[e+3],this.tx=t[e+4],this.ty=t[e+5],this},t.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this},t.prototype.concat=function(t){var e=this.a*t.a,r=0,a=0,i=this.d*t.d,n=this.tx*t.a+t.tx,s=this.ty*t.d+t.ty;return 0===this.b&&0===this.c||(e+=this.b*t.c,r+=this.b*t.d,a+=this.c*t.a,i+=this.c*t.b),0===t.b&&0===t.c||(r+=this.a*t.b,a+=this.d*t.c,n+=this.ty*t.c,s+=this.tx*t.b),this.a=e,this.b=r,this.c=a,this.d=i,this.tx=n,this.ty=s,this},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,a=this.d,i=this.tx,n=this.ty;if(0===e&&0===r)return this.b=this.c=0,0===t||0===a?this.a=this.b=this.tx=this.ty=0:(t=this.a=1/t,a=this.d=1/a,this.tx=-t*i,this.ty=-a*n),this;var s=t*a-e*r;if(0===s)return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this;s=1/s;var o=this.a=a*s;return e=this.b=-e*s,r=this.c=-r*s,a=this.d=t*s,this.tx=-(o*i+r*n),this.ty=-(e*i+a*n),this},t.prototype.transformPoint=function(t,e,r,a){void 0===a&&(a=!1),r.x=this.a*t+this.c*e,r.y=this.b*t+this.d*e,a||(r.x+=this.tx,r.y+=this.ty)},t.prototype.transformRectangle=function(t,e){void 0===e&&(e=!1);var r=this.a,a=this.b,i=this.c,n=this.d,s=e?0:this.tx,o=e?0:this.ty,l=t.x,h=t.y,u=l+t.width,c=h+t.height,f=r*l+i*h+s,p=a*l+n*h+o,d=r*u+i*h+s,m=a*u+n*h+o,_=r*u+i*c+s,y=a*u+n*c+o,g=r*l+i*c+s,v=a*l+n*c+o,b=0;f>d&&(b=f,f=d,d=b),_>g&&(b=_,_=g,g=b),t.x=Math.floor(f<_?f:_),t.width=Math.ceil((d>g?d:g)-t.x),p>m&&(b=p,p=m,m=b),y>v&&(b=y,y=v,v=b),t.y=Math.floor(p<y?p:y),t.height=Math.ceil((m>v?m:v)-t.y)},t}();t.Matrix=e}(s||(s={})),function(t){var e=function(){function t(t,e,r,a,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=1),void 0===n&&(n=1),this.x=t,this.y=e,this.skew=r,this.rotation=a,this.scaleX=i,this.scaleY=n}return t.normalizeRadian=function(t){return t=(t+Math.PI)%(2*Math.PI),t+=t>0?-Math.PI:Math.PI,t},t.prototype.toString=function(){return"[object dragonBones.Transform] x:"+this.x+" y:"+this.y+" skewX:"+180*this.skew/Math.PI+" skewY:"+180*this.rotation/Math.PI+" scaleX:"+this.scaleX+" scaleY:"+this.scaleY},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.skew=t.skew,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this},t.prototype.identity=function(){return this.x=this.y=0,this.skew=this.rotation=0,this.scaleX=this.scaleY=1,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.skew+=t.skew,this.rotation+=t.rotation,this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this},t.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this.skew-=t.skew,this.rotation-=t.rotation,this.scaleX/=t.scaleX,this.scaleY/=t.scaleY,this},t.prototype.fromMatrix=function(e){var r=this.scaleX,a=this.scaleY,i=t.PI_Q;this.x=e.tx,this.y=e.ty,this.rotation=Math.atan(e.b/e.a);var n=Math.atan(-e.c/e.d);return this.scaleX=this.rotation>-i&&this.rotation<i?e.a/Math.cos(this.rotation):e.b/Math.sin(this.rotation),this.scaleY=n>-i&&n<i?e.d/Math.cos(n):-e.c/Math.sin(n),r>=0&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.rotation=this.rotation-Math.PI),a>=0&&this.scaleY<0&&(this.scaleY=-this.scaleY,n-=Math.PI),this.skew=n-this.rotation,this},t.prototype.toMatrix=function(t){return 0===this.rotation?(t.a=1,t.b=0):(t.a=Math.cos(this.rotation),t.b=Math.sin(this.rotation)),0===this.skew?(t.c=-t.b,t.d=t.a):(t.c=-Math.sin(this.skew+this.rotation),t.d=Math.cos(this.skew+this.rotation)),1!==this.scaleX&&(t.a*=this.scaleX,t.b*=this.scaleX),1!==this.scaleY&&(t.c*=this.scaleY,t.d*=this.scaleY),t.tx=this.x,t.ty=this.y,this},t.PI=Math.PI,t.PI_D=2*Math.PI,t.PI_H=Math.PI/2,t.PI_Q=Math.PI/4,t.RAD_DEG=180/Math.PI,t.DEG_RAD=Math.PI/180,t}();t.Transform=e}(s||(s={})),function(t){var e=function(){function t(t,e,r,a,i,n,s,o){void 0===t&&(t=1),void 0===e&&(e=1),void 0===r&&(r=1),void 0===a&&(a=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),this.alphaMultiplier=t,this.redMultiplier=e,this.greenMultiplier=r,this.blueMultiplier=a,this.alphaOffset=i,this.redOffset=n,this.greenOffset=s,this.blueOffset=o}return t.prototype.copyFrom=function(t){this.alphaMultiplier=t.alphaMultiplier,this.redMultiplier=t.redMultiplier,this.greenMultiplier=t.greenMultiplier,this.blueMultiplier=t.blueMultiplier,this.alphaOffset=t.alphaOffset,this.redOffset=t.redOffset,this.greenOffset=t.greenOffset,this.blueOffset=t.blueOffset},t.prototype.identity=function(){this.alphaMultiplier=this.redMultiplier=this.greenMultiplier=this.blueMultiplier=1,this.alphaOffset=this.redOffset=this.greenOffset=this.blueOffset=0},t}();t.ColorTransform=e}(s||(s={})),function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t.prototype.clear=function(){this.x=this.y=0},t}();t.Point=e}(s||(s={})),function(t){var e=function(){function t(t,e,r,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===a&&(a=0),this.x=t,this.y=e,this.width=r,this.height=a}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},t.prototype.clear=function(){this.x=this.y=0,this.width=this.height=0},t}();t.Rectangle=e}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ints=[],e.floats=[],e.strings=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.UserData]"},e.prototype._onClear=function(){this.ints.length=0,this.floats.length=0,this.strings.length=0},e.prototype.addInt=function(t){this.ints.push(t)},e.prototype.addFloat=function(t){this.floats.push(t)},e.prototype.addString=function(t){this.strings.push(t)},e.prototype.getInt=function(t){return void 0===t&&(t=0),t>=0&&t<this.ints.length?this.ints[t]:0},e.prototype.getFloat=function(t){return void 0===t&&(t=0),t>=0&&t<this.floats.length?this.floats[t]:0},e.prototype.getString=function(t){return void 0===t&&(t=0),t>=0&&t<this.strings.length?this.strings[t]:""},e}(t.BaseObject);t.UserData=e;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=null,e}return n(e,t),e.toString=function(){return"[class dragonBones.ActionData]"},e.prototype._onClear=function(){null!==this.data&&this.data.returnToPool(),this.type=0,this.name="",this.bone=null,this.slot=null,this.data=null},e}(t.BaseObject);t.ActionData=r}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameIndices=[],e.cachedFrames=[],e.armatureNames=[],e.armatures={},e.userData=null,e}return n(e,t),e.toString=function(){return"[class dragonBones.DragonBonesData]"},e.prototype._onClear=function(){for(var t in this.armatures)this.armatures[t].returnToPool(),delete this.armatures[t];null!==this.userData&&this.userData.returnToPool(),this.autoSearch=!1,this.frameRate=0,this.version="",this.name="",this.stage=null,this.frameIndices.length=0,this.cachedFrames.length=0,this.armatureNames.length=0,this.binary=null,this.intArray=null,this.floatArray=null,this.frameIntArray=null,this.frameFloatArray=null,this.frameArray=null,this.timelineArray=null,this.colorArray=null,this.userData=null},e.prototype.addArmature=function(t){t.name in this.armatures?console.warn("Same armature: "+t.name):(t.parent=this,this.armatures[t.name]=t,this.armatureNames.push(t.name))},e.prototype.getArmature=function(t){return t in this.armatures?this.armatures[t]:null},e}(t.BaseObject);t.DragonBonesData=e}(s||(s={})),function(t){var e=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.aabb=new t.Rectangle,r.animationNames=[],r.sortedBones=[],r.sortedSlots=[],r.defaultActions=[],r.actions=[],r.bones={},r.slots={},r.constraints={},r.skins={},r.animations={},r.canvas=null,r.userData=null,r}return n(r,e),r.toString=function(){return"[class dragonBones.ArmatureData]"},r.prototype._onClear=function(){for(var t=0,e=this.defaultActions;t<e.length;t++){var r=e[t];r.returnToPool()}for(var a=0,i=this.actions;a<i.length;a++){r=i[a];r.returnToPool()}for(var n in this.bones)this.bones[n].returnToPool(),delete this.bones[n];for(var n in this.slots)this.slots[n].returnToPool(),delete this.slots[n];for(var n in this.constraints)this.constraints[n].returnToPool(),delete this.constraints[n];for(var n in this.skins)this.skins[n].returnToPool(),delete this.skins[n];for(var n in this.animations)this.animations[n].returnToPool(),delete this.animations[n];null!==this.canvas&&this.canvas.returnToPool(),null!==this.userData&&this.userData.returnToPool(),this.type=0,this.frameRate=0,this.cacheFrameRate=0,this.scale=1,this.name="",this.aabb.clear(),this.animationNames.length=0,this.sortedBones.length=0,this.sortedSlots.length=0,this.defaultActions.length=0,this.actions.length=0,this.defaultSkin=null,this.defaultAnimation=null,this.canvas=null,this.userData=null,this.parent=null},r.prototype.sortBones=function(){var t=this.sortedBones.length;if(!(t<=0)){var e=this.sortedBones.concat(),r=0,a=0;this.sortedBones.length=0;while(a<t){var i=e[r++];if(r>=t&&(r=0),!(this.sortedBones.indexOf(i)>=0)){var n=!1;for(var s in this.constraints){var o=this.constraints[s];if(o.root===i&&this.sortedBones.indexOf(o.target)<0){n=!0;break}}n||null!==i.parent&&this.sortedBones.indexOf(i.parent)<0||(this.sortedBones.push(i),a++)}}}},r.prototype.cacheFrames=function(t){if(!(this.cacheFrameRate>0))for(var e in this.cacheFrameRate=t,this.animations)this.animations[e].cacheFrames(this.cacheFrameRate)},r.prototype.setCacheFrame=function(t,e){var r=this.parent.cachedFrames,a=r.length;return r.length+=10,r[a]=t.a,r[a+1]=t.b,r[a+2]=t.c,r[a+3]=t.d,r[a+4]=t.tx,r[a+5]=t.ty,r[a+6]=e.rotation,r[a+7]=e.skew,r[a+8]=e.scaleX,r[a+9]=e.scaleY,a},r.prototype.getCacheFrame=function(t,e,r){var a=this.parent.cachedFrames;t.a=a[r],t.b=a[r+1],t.c=a[r+2],t.d=a[r+3],t.tx=a[r+4],t.ty=a[r+5],e.rotation=a[r+6],e.skew=a[r+7],e.scaleX=a[r+8],e.scaleY=a[r+9],e.x=t.tx,e.y=t.ty},r.prototype.addBone=function(t){t.name in this.bones?console.warn("Same bone: "+t.name):(this.bones[t.name]=t,this.sortedBones.push(t))},r.prototype.addSlot=function(t){t.name in this.slots?console.warn("Same slot: "+t.name):(this.slots[t.name]=t,this.sortedSlots.push(t))},r.prototype.addConstraint=function(t){t.name in this.constraints?console.warn("Same constraint: "+t.name):this.constraints[t.name]=t},r.prototype.addSkin=function(t){t.name in this.skins?console.warn("Same skin: "+t.name):(t.parent=this,this.skins[t.name]=t,null===this.defaultSkin&&(this.defaultSkin=t),"default"===t.name&&(this.defaultSkin=t))},r.prototype.addAnimation=function(t){t.name in this.animations?console.warn("Same animation: "+t.name):(t.parent=this,this.animations[t.name]=t,this.animationNames.push(t.name),null===this.defaultAnimation&&(this.defaultAnimation=t))},r.prototype.addAction=function(t,e){e?this.defaultActions.push(t):this.actions.push(t)},r.prototype.getBone=function(t){return t in this.bones?this.bones[t]:null},r.prototype.getSlot=function(t){return t in this.slots?this.slots[t]:null},r.prototype.getConstraint=function(t){return t in this.constraints?this.constraints[t]:null},r.prototype.getSkin=function(t){return t in this.skins?this.skins[t]:null},r.prototype.getMesh=function(t,e,r){var a=this.getSkin(t);return null===a?null:a.getDisplay(e,r)},r.prototype.getAnimation=function(t){return t in this.animations?this.animations[t]:null},r}(t.BaseObject);t.ArmatureData=e;var r=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.transform=new t.Transform,r.userData=null,r}return n(r,e),r.toString=function(){return"[class dragonBones.BoneData]"},r.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.inheritTranslation=!1,this.inheritRotation=!1,this.inheritScale=!1,this.inheritReflection=!1,this.type=0,this.length=0,this.alpha=1,this.name="",this.transform.identity(),this.userData=null,this.parent=null},r}(t.BaseObject);t.BoneData=r;var a=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.geometry=new t.GeometryData,r}return n(r,e),r.toString=function(){return"[class dragonBones.SurfaceData]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=1,this.segmentX=0,this.segmentY=0,this.geometry.clear()},r}(r);t.SurfaceData=a;var i=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=null,t.userData=null,t}return n(r,e),r.createColor=function(){return new t.ColorTransform},r.toString=function(){return"[class dragonBones.SlotData]"},r.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.blendMode=0,this.displayIndex=0,this.zOrder=0,this.zIndex=0,this.alpha=1,this.name="",this.color=null,this.userData=null,this.parent=null},r.DEFAULT_COLOR=new t.ColorTransform,r}(t.BaseObject);t.SlotData=i}(s||(s={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onClear=function(){this.order=0,this.name="",this.type=0,this.target=null,this.root=null,this.bone=null},e}(t.BaseObject);t.ConstraintData=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.IKConstraintData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.scaleEnabled=!1,this.bendPositive=!1,this.weight=1},e}(e);t.IKConstraintData=r;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bones=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.PathConstraintData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.pathSlot=null,this.pathDisplayData=null,this.bones.length=0,this.positionMode=0,this.spacingMode=1,this.rotateMode=1,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=0,this.translateMix=0},e.prototype.AddBone=function(t){this.bones.push(t)},e}(e);t.PathConstraintData=a}(s||(s={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.CanvasData]"},e.prototype._onClear=function(){this.hasBackground=!1,this.color=0,this.x=0,this.y=0,this.width=0,this.height=0},e}(t.BaseObject);t.CanvasData=e}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displays={},e}return n(e,t),e.toString=function(){return"[class dragonBones.SkinData]"},e.prototype._onClear=function(){for(var t in this.displays){for(var e=this.displays[t],r=0,a=e;r<a.length;r++){var i=a[r];null!==i&&i.returnToPool()}delete this.displays[t]}this.name="",this.parent=null},e.prototype.addDisplay=function(t,e){t in this.displays||(this.displays[t]=[]),null!==e&&(e.parent=this);var r=this.displays[t];r.push(e)},e.prototype.getDisplay=function(t,e){var r=this.getDisplays(t);if(null!==r)for(var a=0,i=r;a<i.length;a++){var n=i[a];if(null!==n&&n.name===e)return n}return null},e.prototype.getDisplays=function(t){return t in this.displays?this.displays[t]:null},e}(t.BaseObject);t.SkinData=e}(s||(s={})),function(t){var e=function(){function t(){this.weight=null}return t.prototype.clear=function(){this.isShared||null===this.weight||this.weight.returnToPool(),this.isShared=!1,this.inheritDeform=!1,this.offset=0,this.data=null,this.weight=null},t.prototype.shareFrom=function(t){this.isShared=!0,this.offset=t.offset,this.weight=t.weight},Object.defineProperty(t.prototype,"vertexCount",{get:function(){var t=this.data.intArray;return t[this.offset+0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"triangleCount",{get:function(){var t=this.data.intArray;return t[this.offset+1]},enumerable:!1,configurable:!0}),t}();t.GeometryData=e;var r=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.transform=new t.Transform,r}return n(r,e),r.prototype._onClear=function(){this.name="",this.path="",this.transform.identity(),this.parent=null},r}(t.BaseObject);t.DisplayData=r;var a=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.pivot=new t.Point,r}return n(r,e),r.toString=function(){return"[class dragonBones.ImageDisplayData]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=0,this.pivot.clear(),this.texture=null},r}(r);t.ImageDisplayData=a;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actions=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.ArmatureDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this);for(var e=0,r=this.actions;e<r.length;e++){var a=r[e];a.returnToPool()}this.type=1,this.inheritAnimation=!1,this.actions.length=0,this.armature=null},e.prototype.addAction=function(t){this.actions.push(t)},e}(r);t.ArmatureDisplayData=i;var s=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.geometry=new e,r}return n(r,t),r.toString=function(){return"[class dragonBones.MeshDisplayData]"},r.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=2,this.geometry.clear(),this.texture=null},r}(r);t.MeshDisplayData=s;var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boundingBox=null,e}return n(e,t),e.toString=function(){return"[class dragonBones.BoundingBoxDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),null!==this.boundingBox&&this.boundingBox.returnToPool(),this.type=3,this.boundingBox=null},e}(r);t.BoundingBoxDisplayData=o;var l=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.geometry=new e,r.curveLengths=[],r}return n(r,t),r.toString=function(){return"[class dragonBones.PathDisplayData]"},r.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=4,this.closed=!1,this.constantSpeed=!1,this.geometry.clear(),this.curveLengths.length=0},r}(r);t.PathDisplayData=l;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bones=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.WeightData]"},e.prototype._onClear=function(){this.count=0,this.offset=0,this.bones.length=0},e.prototype.addBone=function(t){this.bones.push(t)},e}(t.BaseObject);t.WeightData=h}(s||(s={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onClear=function(){this.color=0,this.width=0,this.height=0},e}(t.BaseObject);t.BoundingBoxData=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.RectangleBoundingBoxData]"},e._computeOutCode=function(t,e,r,a,i,n){var s=0;return t<r?s|=1:t>i&&(s|=2),e<a?s|=4:e>n&&(s|=8),s},e.rectangleIntersectsSegment=function(t,r,a,i,n,s,o,l,h,u,c){void 0===h&&(h=null),void 0===u&&(u=null),void 0===c&&(c=null);var f=t>n&&t<o&&r>s&&r<l,p=a>n&&a<o&&i>s&&i<l;if(f&&p)return-1;var d=0,m=e._computeOutCode(t,r,n,s,o,l),_=e._computeOutCode(a,i,n,s,o,l);while(1){if(0===(m|_)){d=2;break}if(0!==(m&_))break;var y=0,g=0,v=0,b=0!==m?m:_;0!==(4&b)?(y=t+(a-t)*(s-r)/(i-r),g=s,null!==c&&(v=.5*-Math.PI)):0!==(8&b)?(y=t+(a-t)*(l-r)/(i-r),g=l,null!==c&&(v=.5*Math.PI)):0!==(2&b)?(g=r+(i-r)*(o-t)/(a-t),y=o,null!==c&&(v=0)):0!==(1&b)&&(g=r+(i-r)*(n-t)/(a-t),y=n,null!==c&&(v=Math.PI)),b===m?(t=y,r=g,m=e._computeOutCode(t,r,n,s,o,l),null!==c&&(c.x=v)):(a=y,i=g,_=e._computeOutCode(a,i,n,s,o,l),null!==c&&(c.y=v))}return d&&(f?(d=2,null!==h&&(h.x=a,h.y=i),null!==u&&(u.x=a,u.y=a),null!==c&&(c.x=c.y+Math.PI)):p?(d=1,null!==h&&(h.x=t,h.y=r),null!==u&&(u.x=t,u.y=r),null!==c&&(c.y=c.x+Math.PI)):(d=3,null!==h&&(h.x=t,h.y=r),null!==u&&(u.x=a,u.y=i))),d},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=0},e.prototype.containsPoint=function(t,e){var r=.5*this.width;if(t>=-r&&t<=r){var a=.5*this.height;if(e>=-a&&e<=a)return!0}return!1},e.prototype.intersectsSegment=function(t,r,a,i,n,s,o){void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=null);var l=.5*this.width,h=.5*this.height,u=e.rectangleIntersectsSegment(t,r,a,i,-l,-h,l,h,n,s,o);return u},e}(e);t.RectangleBoundingBoxData=r;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.EllipseData]"},e.ellipseIntersectsSegment=function(t,e,r,a,i,n,s,o,l,h,u){void 0===l&&(l=null),void 0===h&&(h=null),void 0===u&&(u=null);var c=s/o,f=c*c;e*=c,a*=c;var p=r-t,d=a-e,m=Math.sqrt(p*p+d*d),_=p/m,y=d/m,g=(i-t)*_+(n-e)*y,v=g*g,b=t*t+e*e,T=s*s,A=T-b+v,D=0;if(A>=0){var x=Math.sqrt(A),S=g-x,E=g+x,w=S<0?-1:S<=m?0:1,M=E<0?-1:E<=m?0:1,P=w*M;if(P<0)return-1;0===P&&(-1===w?(D=2,r=t+E*_,a=(e+E*y)/c,null!==l&&(l.x=r,l.y=a),null!==h&&(h.x=r,h.y=a),null!==u&&(u.x=Math.atan2(a/T*f,r/T),u.y=u.x+Math.PI)):1===M?(D=1,t+=S*_,e=(e+S*y)/c,null!==l&&(l.x=t,l.y=e),null!==h&&(h.x=t,h.y=e),null!==u&&(u.x=Math.atan2(e/T*f,t/T),u.y=u.x+Math.PI)):(D=3,null!==l&&(l.x=t+S*_,l.y=(e+S*y)/c,null!==u&&(u.x=Math.atan2(l.y/T*f,l.x/T))),null!==h&&(h.x=t+E*_,h.y=(e+E*y)/c,null!==u&&(u.y=Math.atan2(h.y/T*f,h.x/T)))))}return D},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=1},e.prototype.containsPoint=function(t,e){var r=.5*this.width;if(t>=-r&&t<=r){var a=.5*this.height;if(e>=-a&&e<=a)return e*=r/a,Math.sqrt(t*t+e*e)<=r}return!1},e.prototype.intersectsSegment=function(t,r,a,i,n,s,o){void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=null);var l=e.ellipseIntersectsSegment(t,r,a,i,0,0,.5*this.width,.5*this.height,n,s,o);return l},e}(e);t.EllipseBoundingBoxData=a;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.vertices=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.PolygonBoundingBoxData]"},e.polygonIntersectsSegment=function(t,e,r,a,i,n,s,o){void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=null),t===r&&(t=r+1e-6),e===a&&(e=a+1e-6);for(var l=i.length,h=t-r,u=e-a,c=t*a-e*r,f=0,p=i[l-2],d=i[l-1],m=0,_=0,y=0,g=0,v=0,b=0,T=0;T<l;T+=2){var A=i[T],D=i[T+1];p===A&&(p=A+1e-4),d===D&&(d=D+1e-4);var x=p-A,S=d-D,E=p*D-d*A,w=h*S-u*x,M=(c*x-h*E)/w;if((M>=p&&M<=A||M>=A&&M<=p)&&(0===h||M>=t&&M<=r||M>=r&&M<=t)){var P=(c*S-u*E)/w;if((P>=d&&P<=D||P>=D&&P<=d)&&(0===u||P>=e&&P<=a||P>=a&&P<=e)){if(null===s){y=M,g=P,v=M,b=P,f++,null!==o&&(o.x=Math.atan2(D-d,A-p)-.5*Math.PI,o.y=o.x);break}var O=M-t;O<0&&(O=-O),0===f?(m=O,_=O,y=M,g=P,v=M,b=P,null!==o&&(o.x=Math.atan2(D-d,A-p)-.5*Math.PI,o.y=o.x)):(O<m&&(m=O,y=M,g=P,null!==o&&(o.x=Math.atan2(D-d,A-p)-.5*Math.PI)),O>_&&(_=O,v=M,b=P,null!==o&&(o.y=Math.atan2(D-d,A-p)-.5*Math.PI))),f++}}p=A,d=D}return 1===f?(null!==n&&(n.x=y,n.y=g),null!==s&&(s.x=y,s.y=g),null!==o&&(o.y=o.x+Math.PI)):f>1&&(f++,null!==n&&(n.x=y,n.y=g),null!==s&&(s.x=v,s.y=b)),f},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=2,this.x=0,this.y=0,this.vertices.length=0},e.prototype.containsPoint=function(t,e){var r=!1;if(t>=this.x&&t<=this.width&&e>=this.y&&e<=this.height)for(var a=0,i=this.vertices.length,n=i-2;a<i;a+=2){var s=this.vertices[n+1],o=this.vertices[a+1];if(o<e&&s>=e||s<e&&o>=e){var l=this.vertices[n],h=this.vertices[a];(e-o)*(l-h)/(s-o)+h<t&&(r=!r)}n=a}return r},e.prototype.intersectsSegment=function(t,a,i,n,s,o,l){void 0===s&&(s=null),void 0===o&&(o=null),void 0===l&&(l=null);var h=0;return 0!==r.rectangleIntersectsSegment(t,a,i,n,this.x,this.y,this.x+this.width,this.y+this.height,null,null,null)&&(h=e.polygonIntersectsSegment(t,a,i,n,this.vertices,s,o,l)),h},e}(e);t.PolygonBoundingBoxData=i}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cachedFrames=[],e.boneTimelines={},e.slotTimelines={},e.constraintTimelines={},e.animationTimelines={},e.boneCachedFrameIndices={},e.slotCachedFrameIndices={},e.actionTimeline=null,e.zOrderTimeline=null,e}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationData]"},e.prototype._onClear=function(){for(var t in this.boneTimelines){for(var e=0,r=this.boneTimelines[t];e<r.length;e++){var a=r[e];a.returnToPool()}delete this.boneTimelines[t]}for(var t in this.slotTimelines){for(var i=0,n=this.slotTimelines[t];i<n.length;i++){a=n[i];a.returnToPool()}delete this.slotTimelines[t]}for(var t in this.constraintTimelines){for(var s=0,o=this.constraintTimelines[t];s<o.length;s++){a=o[s];a.returnToPool()}delete this.constraintTimelines[t]}for(var t in this.animationTimelines){for(var l=0,h=this.animationTimelines[t];l<h.length;l++){a=h[l];a.returnToPool()}delete this.animationTimelines[t]}for(var t in this.boneCachedFrameIndices)delete this.boneCachedFrameIndices[t];for(var t in this.slotCachedFrameIndices)delete this.slotCachedFrameIndices[t];null!==this.actionTimeline&&this.actionTimeline.returnToPool(),null!==this.zOrderTimeline&&this.zOrderTimeline.returnToPool(),this.frameIntOffset=0,this.frameFloatOffset=0,this.frameOffset=0,this.blendType=0,this.frameCount=0,this.playTimes=0,this.duration=0,this.scale=1,this.fadeInTime=0,this.cacheFrameRate=0,this.name="",this.cachedFrames.length=0,this.actionTimeline=null,this.zOrderTimeline=null,this.parent=null},e.prototype.cacheFrames=function(t){if(!(this.cacheFrameRate>0)){this.cacheFrameRate=Math.max(Math.ceil(t*this.scale),1);var e=Math.ceil(this.cacheFrameRate*this.duration)+1;this.cachedFrames.length=e;for(var r=0,a=this.cacheFrames.length;r<a;++r)this.cachedFrames[r]=!1;for(var i=0,n=this.parent.sortedBones;i<n.length;i++){var s=n[i],o=new Array(e);for(r=0,a=o.length;r<a;++r)o[r]=-1;this.boneCachedFrameIndices[s.name]=o}for(var l=0,h=this.parent.sortedSlots;l<h.length;l++){var u=h[l];for(o=new Array(e),r=0,a=o.length;r<a;++r)o[r]=-1;this.slotCachedFrameIndices[u.name]=o}}},e.prototype.addBoneTimeline=function(t,e){var r=t in this.boneTimelines?this.boneTimelines[t]:this.boneTimelines[t]=[];r.indexOf(e)<0&&r.push(e)},e.prototype.addSlotTimeline=function(t,e){var r=t in this.slotTimelines?this.slotTimelines[t]:this.slotTimelines[t]=[];r.indexOf(e)<0&&r.push(e)},e.prototype.addConstraintTimeline=function(t,e){var r=t in this.constraintTimelines?this.constraintTimelines[t]:this.constraintTimelines[t]=[];r.indexOf(e)<0&&r.push(e)},e.prototype.addAnimationTimeline=function(t,e){var r=t in this.animationTimelines?this.animationTimelines[t]:this.animationTimelines[t]=[];r.indexOf(e)<0&&r.push(e)},e.prototype.getBoneTimelines=function(t){return t in this.boneTimelines?this.boneTimelines[t]:null},e.prototype.getSlotTimelines=function(t){return t in this.slotTimelines?this.slotTimelines[t]:null},e.prototype.getConstraintTimelines=function(t){return t in this.constraintTimelines?this.constraintTimelines[t]:null},e.prototype.getAnimationTimelines=function(t){return t in this.animationTimelines?this.animationTimelines[t]:null},e.prototype.getBoneCachedFrameIndices=function(t){return t in this.boneCachedFrameIndices?this.boneCachedFrameIndices[t]:null},e.prototype.getSlotCachedFrameIndices=function(t){return t in this.slotCachedFrameIndices?this.slotCachedFrameIndices[t]:null},e}(t.BaseObject);t.AnimationData=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.TimelineData]"},e.prototype._onClear=function(){this.type=10,this.offset=0,this.frameIndicesOffset=-1},e}(t.BaseObject);t.TimelineData=r;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationTimelineData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.x=0,this.y=0},e}(r);t.AnimationTimelineData=a}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boneMask=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationConfig]"},e.prototype._onClear=function(){this.pauseFadeOut=!0,this.fadeOutMode=4,this.fadeOutTweenType=1,this.fadeOutTime=-1,this.actionEnabled=!0,this.additive=!1,this.displayControl=!0,this.pauseFadeIn=!0,this.resetToPose=!0,this.fadeInTweenType=1,this.playTimes=-1,this.layer=0,this.position=0,this.duration=-1,this.timeScale=-100,this.weight=1,this.fadeInTime=-1,this.autoFadeOutTime=-1,this.name="",this.animation="",this.group="",this.boneMask.length=0},e.prototype.clear=function(){this._onClear()},e.prototype.copyFrom=function(t){this.pauseFadeOut=t.pauseFadeOut,this.fadeOutMode=t.fadeOutMode,this.autoFadeOutTime=t.autoFadeOutTime,this.fadeOutTweenType=t.fadeOutTweenType,this.actionEnabled=t.actionEnabled,this.additive=t.additive,this.displayControl=t.displayControl,this.pauseFadeIn=t.pauseFadeIn,this.resetToPose=t.resetToPose,this.playTimes=t.playTimes,this.layer=t.layer,this.position=t.position,this.duration=t.duration,this.timeScale=t.timeScale,this.fadeInTime=t.fadeInTime,this.fadeOutTime=t.fadeOutTime,this.fadeInTweenType=t.fadeInTweenType,this.weight=t.weight,this.name=t.name,this.animation=t.animation,this.group=t.group,this.boneMask.length=t.boneMask.length;for(var e=0,r=this.boneMask.length;e<r;++e)this.boneMask[e]=t.boneMask[e]},e}(t.BaseObject);t.AnimationConfig=e}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textures={},e}return n(e,t),e.prototype._onClear=function(){for(var t in this.textures)this.textures[t].returnToPool(),delete this.textures[t];this.autoSearch=!1,this.width=0,this.height=0,this.scale=1,this.name="",this.imagePath=""},e.prototype.copyFrom=function(t){for(var e in this.autoSearch=t.autoSearch,this.scale=t.scale,this.width=t.width,this.height=t.height,this.name=t.name,this.imagePath=t.imagePath,this.textures)this.textures[e].returnToPool(),delete this.textures[e];for(var e in t.textures){var r=this.createTexture();r.copyFrom(t.textures[e]),this.textures[e]=r}},e.prototype.addTexture=function(t){t.name in this.textures?console.warn("Same texture: "+t.name):(t.parent=this,this.textures[t.name]=t)},e.prototype.getTexture=function(t){return t in this.textures?this.textures[t]:null},e}(t.BaseObject);t.TextureAtlasData=e;var r=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.region=new t.Rectangle,r.frame=null,r}return n(r,e),r.createRectangle=function(){return new t.Rectangle},r.prototype._onClear=function(){this.rotated=!1,this.name="",this.region.clear(),this.parent=null,this.frame=null},r.prototype.copyFrom=function(t){this.rotated=t.rotated,this.name=t.name,this.region.copyFrom(t.region),this.parent=t.parent,null===this.frame&&null!==t.frame?this.frame=r.createRectangle():null!==this.frame&&null===t.frame&&(this.frame=null),null!==this.frame&&null!==t.frame&&this.frame.copyFrom(t.frame)},r}(t.BaseObject);t.TextureData=r}(s||(s={})),function(t){var e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._bones=[],t._slots=[],t._constraints=[],t._actions=[],t._animation=null,t._proxy=null,t._replaceTextureAtlasData=null,t._clock=null,t}return n(r,e),r.toString=function(){return"[class dragonBones.Armature]"},r._onSortSlots=function(t,e){return 1e3*t._zIndex+t._zOrder>1e3*e._zIndex+e._zOrder?1:-1},r.prototype._onClear=function(){null!==this._clock&&this._clock.remove(this);for(var t=0,e=this._bones;t<e.length;t++){var r=e[t];r.returnToPool()}for(var a=0,i=this._slots;a<i.length;a++){var n=i[a];n.returnToPool()}for(var s=0,o=this._constraints;s<o.length;s++){var l=o[s];l.returnToPool()}for(var h=0,u=this._actions;h<u.length;h++){var c=u[h];c.returnToPool()}null!==this._animation&&this._animation.returnToPool(),null!==this._proxy&&this._proxy.dbClear(),null!==this._replaceTextureAtlasData&&this._replaceTextureAtlasData.returnToPool(),this.inheritAnimation=!0,this.userData=null,this._lockUpdate=!1,this._slotsDirty=!0,this._zOrderDirty=!1,this._zIndexDirty=!1,this._alphaDirty=!0,this._flipX=!1,this._flipY=!1,this._cacheFrameIndex=-1,this._alpha=1,this._globalAlpha=1,this._bones.length=0,this._slots.length=0,this._constraints.length=0,this._actions.length=0,this._armatureData=null,this._animation=null,this._proxy=null,this._display=null,this._replaceTextureAtlasData=null,this._replacedTexture=null,this._dragonBones=null,this._clock=null,this._parent=null},r.prototype._sortZOrder=function(t,e){var r=this._armatureData.sortedSlots,a=null===t;if(this._zOrderDirty||!a){for(var i=0,n=r.length;i<n;++i){var s=a?i:t[e+i];if(!(s<0||s>=n)){var o=r[s],l=this.getSlot(o.name);null!==l&&l._setZOrder(i)}}this._slotsDirty=!0,this._zOrderDirty=!a}},r.prototype._addBone=function(t){this._bones.indexOf(t)<0&&this._bones.push(t)},r.prototype._addSlot=function(t){this._slots.indexOf(t)<0&&this._slots.push(t)},r.prototype._addConstraint=function(t){this._constraints.indexOf(t)<0&&this._constraints.push(t)},r.prototype._bufferAction=function(t,e){this._actions.indexOf(t)<0&&(e?this._actions.push(t):this._actions.unshift(t))},r.prototype.dispose=function(){null!==this._armatureData&&(this._lockUpdate=!0,this._dragonBones.bufferObject(this))},r.prototype.init=function(e,r,a,i){null===this._armatureData&&(this._armatureData=e,this._animation=t.BaseObject.borrowObject(t.Animation),this._proxy=r,this._display=a,this._dragonBones=i,this._proxy.dbInit(this),this._animation.init(this),this._animation.animations=this._armatureData.animations)},r.prototype.advanceTime=function(t){if(!this._lockUpdate)if(this._lockUpdate=!0,null!==this._armatureData)if(null!==this._armatureData.parent){var e=this._cacheFrameIndex;if(this._animation.advanceTime(t),this._slotsDirty||this._zIndexDirty){if(this._slots.sort(r._onSortSlots),this._zIndexDirty)for(var a=0,i=this._slots.length;a<i;++a)this._slots[a]._setZOrder(a);this._slotsDirty=!1,this._zIndexDirty=!1}if(this._alphaDirty){this._alphaDirty=!1,this._globalAlpha=this._alpha*(null!==this._parent?this._parent._globalAlpha:1);for(var n=0,s=this._bones;n<s.length;n++){var o=s[n];o._updateAlpha()}for(var l=0,h=this._slots;l<h.length;l++){var u=h[l];u._updateAlpha()}}if(this._cacheFrameIndex<0||this._cacheFrameIndex!==e){a=0,i=0;for(a=0,i=this._bones.length;a<i;++a)this._bones[a].update(this._cacheFrameIndex);for(a=0,i=this._slots.length;a<i;++a)this._slots[a].update(this._cacheFrameIndex)}if(this._actions.length>0){for(var c=0,f=this._actions;c<f.length;c++){var p=f[c],d=p.actionData;if(null!==d&&0===d.type)if(null!==p.slot){var m=p.slot.childArmature;null!==m&&m.animation.fadeIn(d.name)}else if(null!==p.bone)for(var _=0,y=this.getSlots();_<y.length;_++){u=y[_];if(u.parent===p.bone){m=u.childArmature;null!==m&&m.animation.fadeIn(d.name)}}else this._animation.fadeIn(d.name);p.returnToPool()}this._actions.length=0}this._lockUpdate=!1,this._proxy.dbUpdate()}else console.warn("The armature data has been disposed.\nPlease make sure dispose armature before call factory.clear().");else console.warn("The armature has been disposed.")},r.prototype.invalidUpdate=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),null!==t&&t.length>0){var r=this.getBone(t);if(null!==r&&(r.invalidUpdate(),e))for(var a=0,i=this._slots;a<i.length;a++){var n=i[a];n.parent===r&&n.invalidUpdate()}}else{for(var s=0,o=this._bones;s<o.length;s++){r=o[s];r.invalidUpdate()}if(e)for(var l=0,h=this._slots;l<h.length;l++){n=h[l];n.invalidUpdate()}}},r.prototype.containsPoint=function(t,e){for(var r=0,a=this._slots;r<a.length;r++){var i=a[r];if(i.containsPoint(t,e))return i}return null},r.prototype.intersectsSegment=function(t,e,r,a,i,n,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=null);for(var o=t===r,l=0,h=0,u=0,c=0,f=0,p=0,d=0,m=0,_=null,y=null,g=0,v=this._slots;g<v.length;g++){var b=v[g],T=b.intersectsSegment(t,e,r,a,i,n,s);if(T>0){if(null===i&&null===n){_=b;break}if(null!==i){var A=o?i.y-e:i.x-t;A<0&&(A=-A),(null===_||A<l)&&(l=A,u=i.x,c=i.y,_=b,s&&(d=s.x))}if(null!==n){A=n.x-t;A<0&&(A=-A),(null===y||A>h)&&(h=A,f=n.x,p=n.y,y=b,null!==s&&(m=s.y))}}}return null!==_&&null!==i&&(i.x=u,i.y=c,null!==s&&(s.x=d)),null!==y&&null!==n&&(n.x=f,n.y=p,null!==s&&(s.y=m)),_},r.prototype.getBone=function(t){for(var e=0,r=this._bones;e<r.length;e++){var a=r[e];if(a.name===t)return a}return null},r.prototype.getBoneByDisplay=function(t){var e=this.getSlotByDisplay(t);return null!==e?e.parent:null},r.prototype.getSlot=function(t){for(var e=0,r=this._slots;e<r.length;e++){var a=r[e];if(a.name===t)return a}return null},r.prototype.getSlotByDisplay=function(t){if(null!==t)for(var e=0,r=this._slots;e<r.length;e++){var a=r[e];if(a.display===t)return a}return null},r.prototype.getBones=function(){return this._bones},r.prototype.getSlots=function(){return this._slots},Object.defineProperty(r.prototype,"flipX",{get:function(){return this._flipX},set:function(t){this._flipX!==t&&(this._flipX=t,this.invalidUpdate())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"flipY",{get:function(){return this._flipY},set:function(t){this._flipY!==t&&(this._flipY=t,this.invalidUpdate())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cacheFrameRate",{get:function(){return this._armatureData.cacheFrameRate},set:function(t){if(this._armatureData.cacheFrameRate!==t){this._armatureData.cacheFrames(t);for(var e=0,r=this._slots;e<r.length;e++){var a=r[e],i=a.childArmature;null!==i&&(i.cacheFrameRate=t)}}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._armatureData.name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animation",{get:function(){return this._animation},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"proxy",{get:function(){return this._proxy},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"eventDispatcher",{get:function(){return this._proxy},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"display",{get:function(){return this._display},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"replacedTexture",{get:function(){return this._replacedTexture},set:function(t){if(this._replacedTexture!==t){null!==this._replaceTextureAtlasData&&(this._replaceTextureAtlasData.returnToPool(),this._replaceTextureAtlasData=null),this._replacedTexture=t;for(var e=0,r=this._slots;e<r.length;e++){var a=r[e];a.invalidUpdate(),a.update(-1)}}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clock",{get:function(){return this._clock},set:function(t){if(this._clock!==t){null!==this._clock&&this._clock.remove(this),this._clock=t,this._clock&&this._clock.add(this);for(var e=0,r=this._slots;e<r.length;e++){var a=r[e],i=a.childArmature;null!==i&&(i.clock=this._clock)}}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),r.prototype.getDisplay=function(){return this._display},r}(t.BaseObject);t.Armature=e}(s||(s={})),function(t){var e=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.globalTransformMatrix=new t.Matrix,r.global=new t.Transform,r.offset=new t.Transform,r}return n(r,e),r.prototype._onClear=function(){this.globalTransformMatrix.identity(),this.global.identity(),this.offset.identity(),this.origin=null,this.userData=null,this._globalDirty=!1,this._alpha=1,this._globalAlpha=1,this._armature=null},r.prototype.updateGlobalTransform=function(){this._globalDirty&&(this._globalDirty=!1,this.global.fromMatrix(this.globalTransformMatrix))},Object.defineProperty(r.prototype,"armature",{get:function(){return this._armature},enumerable:!1,configurable:!0}),r._helpMatrix=new t.Matrix,r._helpTransform=new t.Transform,r._helpPoint=new t.Point,r}(t.BaseObject);t.TransformObject=e}(s||(s={})),function(t){var e=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.animationPose=new t.Transform,r}return n(r,e),r.toString=function(){return"[class dragonBones.Bone]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),this.offsetMode=1,this.animationPose.identity(),this._transformDirty=!1,this._childrenTransformDirty=!1,this._localDirty=!0,this._hasConstraint=!1,this._visible=!0,this._cachedFrameIndex=-1,this._boneData=null,this._parent=null,this._cachedFrameIndices=null},r.prototype._updateGlobalTransformMatrix=function(e){var r=this._boneData,a=this.global,i=this.globalTransformMatrix,n=this.origin,s=this.offset,o=this.animationPose,l=this._parent,h=this._armature.flipX,u=this._armature.flipY===t.DragonBones.yDown,c=null!==l,f=0;if(1===this.offsetMode?null!==n?(a.x=n.x+s.x+o.x,a.scaleX=n.scaleX*s.scaleX*o.scaleX,a.scaleY=n.scaleY*s.scaleY*o.scaleY,t.DragonBones.yDown?(a.y=n.y+s.y+o.y,a.skew=n.skew+s.skew+o.skew,a.rotation=n.rotation+s.rotation+o.rotation):(a.y=n.y-s.y+o.y,a.skew=n.skew-s.skew+o.skew,a.rotation=n.rotation-s.rotation+o.rotation)):(a.copyFrom(s),t.DragonBones.yDown||(a.y=-a.y,a.skew=-a.skew,a.rotation=-a.rotation),a.add(o)):0===this.offsetMode?null!==n?a.copyFrom(n).add(o):a.copyFrom(o):(c=!1,a.copyFrom(s),t.DragonBones.yDown||(a.y=-a.y,a.skew=-a.skew,a.rotation=-a.rotation)),c){var p=1===l._boneData.type,d=p?l._bone:null,m=p?l._getGlobalTransformMatrix(a.x,a.y):l.globalTransformMatrix;if(!r.inheritScale||p&&null===d){if(r.inheritTranslation){var _=a.x,y=a.y;a.x=m.a*_+m.c*y+m.tx,a.y=m.b*_+m.d*y+m.ty}else h&&(a.x=-a.x),u&&(a.y=-a.y);r.inheritRotation?(l.updateGlobalTransform(),f=l.global.scaleX<0?a.rotation+l.global.rotation+Math.PI:a.rotation+l.global.rotation,m.a*m.d-m.b*m.c<0&&(f-=2*a.rotation,(h!==u||r.inheritReflection)&&(a.skew+=Math.PI),t.DragonBones.yDown||(a.skew=-a.skew)),a.rotation=f):(h||u)&&(h&&u?f=a.rotation+Math.PI:(f=h?Math.PI-a.rotation:-a.rotation,a.skew+=Math.PI),a.rotation=f),a.toMatrix(i)}else p?(r.inheritRotation&&(a.rotation+=l.global.rotation),d.updateGlobalTransform(),a.scaleX*=d.global.scaleX,a.scaleY*=d.global.scaleY,m.transformPoint(a.x,a.y,a),a.toMatrix(i),r.inheritTranslation?(a.x=i.tx,a.y=i.ty):(i.tx=a.x,i.ty=a.y)):(r.inheritRotation||(l.updateGlobalTransform(),f=h&&u?a.rotation-(l.global.rotation+Math.PI):h?a.rotation+l.global.rotation+Math.PI:u?a.rotation+l.global.rotation:a.rotation-l.global.rotation,a.rotation=f),a.toMatrix(i),i.concat(m),r.inheritTranslation?(a.x=i.tx,a.y=i.ty):(i.tx=a.x,i.ty=a.y),e?a.fromMatrix(i):this._globalDirty=!0)}else(h||u)&&(h&&(a.x=-a.x),u&&(a.y=-a.y),h&&u?f=a.rotation+Math.PI:(f=h?Math.PI-a.rotation:-a.rotation,a.skew+=Math.PI),a.rotation=f),a.toMatrix(i)},r.prototype._updateAlpha=function(){null!==this._parent?this._globalAlpha=this._alpha*this._parent._globalAlpha:this._globalAlpha=this._alpha*this._armature._globalAlpha},r.prototype.init=function(t,e){null===this._boneData&&(this._boneData=t,this._armature=e,this._alpha=this._boneData.alpha,null!==this._boneData.parent&&(this._parent=this._armature.getBone(this._boneData.parent.name)),this._armature._addBone(this),this.origin=this._boneData.transform)},r.prototype.update=function(t){if(t>=0&&null!==this._cachedFrameIndices){var e=this._cachedFrameIndices[t];if(e>=0&&this._cachedFrameIndex===e)this._transformDirty=!1;else if(e>=0)this._transformDirty=!0,this._cachedFrameIndex=e;else{if(this._hasConstraint)for(var r=0,a=this._armature._constraints;r<a.length;r++){var i=a[r];i._root===this&&i.update()}this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var n=0,s=this._armature._constraints;n<s.length;n++){i=s[n];i._root===this&&i.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty)if(this._transformDirty=!1,this._childrenTransformDirty=!0,this._cachedFrameIndex<0){var o=t>=0;this._localDirty&&this._updateGlobalTransformMatrix(o),o&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},r.prototype.updateByConstraint=function(){this._localDirty&&(this._localDirty=!1,(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&this._updateGlobalTransformMatrix(!0),this._transformDirty=!0)},r.prototype.invalidUpdate=function(){this._transformDirty=!0},r.prototype.contains=function(t){if(t===this)return!1;var e=t;while(e!==this&&null!==e)e=e.parent;return e===this},Object.defineProperty(r.prototype,"boneData",{get:function(){return this._boneData},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"visible",{get:function(){return this._visible},set:function(t){if(this._visible!==t){this._visible=t;for(var e=0,r=this._armature.getSlots();e<r.length;e++){var a=r[e];a.parent===this&&a._updateVisible()}}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._boneData.name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),r}(t.TransformObject);t.Bone=e}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._vertices=[],e._deformVertices=[],e._hullCache=[],e._matrixCahce=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.Surface]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._dX=0,this._dY=0,this._k=0,this._kX=0,this._kY=0,this._vertices.length=0,this._deformVertices.length=0,this._matrixCahce.length=0,this._hullCache.length=0,this._bone=null},e.prototype._getAffineTransform=function(t,e,r,a,i,n,s,o,l,h,u,c,f){var p=s-i,d=o-n,m=l-i,_=h-n;u.rotation=Math.atan2(d,p),u.skew=Math.atan2(_,m)-.5*Math.PI-u.rotation,f&&(u.rotation+=Math.PI),u.scaleX=Math.sqrt(p*p+d*d)/r,u.scaleY=Math.sqrt(m*m+_*_)/a,u.toMatrix(c),u.x=c.tx=i-(c.a*t+c.c*e),u.y=c.ty=n-(c.b*t+c.d*e)},e.prototype._updateVertices=function(){var t=this._armature.armatureData.parent,e=this._boneData.geometry,r=t.intArray,a=t.floatArray,i=r[e.offset+0],n=r[e.offset+2],s=this._vertices,o=this._deformVertices;if(null!==this._parent)if(1===this._parent._boneData.type)for(var l=0,h=i;l<h;++l){var u=2*l,c=a[n+u]+o[u],f=a[n+u+1]+o[u+1],p=this._parent._getGlobalTransformMatrix(c,f);s[u]=p.a*c+p.c*f+p.tx,s[u+1]=p.b*c+p.d*f+p.ty}else{var d=this._parent.globalTransformMatrix;for(l=0,h=i;l<h;++l){u=2*l,c=a[n+u]+o[u],f=a[n+u+1]+o[u+1];s[u]=d.a*c+d.c*f+d.tx,s[u+1]=d.b*c+d.d*f+d.ty}}else for(l=0,h=i;l<h;++l){u=2*l;s[u]=a[n+u]+o[u],s[u+1]=a[n+u+1]+o[u+1]}},e.prototype._updateGlobalTransformMatrix=function(t){var e=2*this._boneData.segmentX,r=this._vertices.length-2,a=200,i=this._vertices[0],n=this._vertices[1],s=this._vertices[e],o=this._vertices[e+1],l=this._vertices[r],h=this._vertices[r+1],u=this._vertices[r-e],c=this._vertices[r-e+1],f=i+.5*(l-i),p=n+.5*(h-n),d=s+.5*(u-s),m=o+.5*(c-o),_=f+.5*(d-f),y=p+.5*(m-p),g=s+.5*(l-s),v=o+.5*(h-o),b=u+.5*(l-u),T=c+.5*(h-c);this._getAffineTransform(0,0,a,a,_,y,g,v,b,T,this.global,this.globalTransformMatrix,!1),this._globalDirty=!1},e.prototype._getGlobalTransformMatrix=function(t,r){var a=200,i=1e3;if(t<-i||i<t||r<-i||i<r)return this.globalTransformMatrix;var n=!1,s=this._boneData,o=s.segmentX,l=s.segmentY,h=2*s.segmentX,u=this._dX,c=this._dY,f=Math.floor((t+a)/u),p=Math.floor((r+a)/c),d=0,m=f*u-a,_=p*c-a,y=this._matrixCahce,g=e._helpMatrix;if(t<-a){if(r<-a||r>=a)return this.globalTransformMatrix;if(n=r>this._kX*(t+a)+_,d=7*(2*(o*l+o+l+l+p)+(n?1:0)),y[d]>0)g.copyFromArray(y,d+1);else{var v=p*(h+2),b=this._hullCache[4],T=this._hullCache[5],A=this._hullCache[2]-(l-p)*b,D=this._hullCache[3]-(l-p)*T,x=this._vertices;n?this._getAffineTransform(-a,_+c,i-a,c,x[v+h+2],x[v+h+3],A+b,D+T,x[v],x[v+1],e._helpTransform,g,!0):this._getAffineTransform(-i,_,i-a,c,A,D,x[v],x[v+1],A+b,D+T,e._helpTransform,g,!1),y[d]=1,y[d+1]=g.a,y[d+2]=g.b,y[d+3]=g.c,y[d+4]=g.d,y[d+5]=g.tx,y[d+6]=g.ty}}else if(t>=a){if(r<-a||r>=a)return this.globalTransformMatrix;if(n=r>this._kX*(t-i)+_,d=7*(2*(o*l+o+p)+(n?1:0)),y[d]>0)g.copyFromArray(y,d+1);else{v=(p+1)*(h+2)-2,b=this._hullCache[4],T=this._hullCache[5],A=this._hullCache[0]+p*b,D=this._hullCache[1]+p*T,x=this._vertices;n?this._getAffineTransform(i,_+c,i-a,c,A+b,D+T,x[v+h+2],x[v+h+3],A,D,e._helpTransform,g,!0):this._getAffineTransform(a,_,i-a,c,x[v],x[v+1],A,D,x[v+h+2],x[v+h+3],e._helpTransform,g,!1),y[d]=1,y[d+1]=g.a,y[d+2]=g.b,y[d+3]=g.c,y[d+4]=g.d,y[d+5]=g.tx,y[d+6]=g.ty}}else if(r<-a){if(t<-a||t>=a)return this.globalTransformMatrix;if(n=r>this._kY*(t-m-u)-i,d=7*(2*(o*l+f)+(n?1:0)),y[d]>0)g.copyFromArray(y,d+1);else{v=2*f,b=this._hullCache[10],T=this._hullCache[11],A=this._hullCache[8]+f*b,D=this._hullCache[9]+f*T,x=this._vertices;n?this._getAffineTransform(m+u,-a,u,i-a,x[v+2],x[v+3],x[v],x[v+1],A+b,D+T,e._helpTransform,g,!0):this._getAffineTransform(m,-i,u,i-a,A,D,A+b,D+T,x[v],x[v+1],e._helpTransform,g,!1),y[d]=1,y[d+1]=g.a,y[d+2]=g.b,y[d+3]=g.c,y[d+4]=g.d,y[d+5]=g.tx,y[d+6]=g.ty}}else if(r>=a){if(t<-a||t>=a)return this.globalTransformMatrix;if(n=r>this._kY*(t-m-u)+a,d=7*(2*(o*l+o+l+f)+(n?1:0)),y[d]>0)g.copyFromArray(y,d+1);else{v=l*(h+2)+2*f,b=this._hullCache[10],T=this._hullCache[11],A=this._hullCache[6]-(o-f)*b,D=this._hullCache[7]-(o-f)*T,x=this._vertices;n?this._getAffineTransform(m+u,i,u,i-a,A+b,D+T,A,D,x[v+2],x[v+3],e._helpTransform,g,!0):this._getAffineTransform(m,a,u,i-a,x[v],x[v+1],x[v+2],x[v+3],A,D,e._helpTransform,g,!1),y[d]=1,y[d+1]=g.a,y[d+2]=g.b,y[d+3]=g.c,y[d+4]=g.d,y[d+5]=g.tx,y[d+6]=g.ty}}else if(n=r>this._k*(t-m-u)+_,d=7*(2*(o*p+f)+(n?1:0)),y[d]>0)g.copyFromArray(y,d+1);else{v=2*f+p*(h+2),x=this._vertices;n?this._getAffineTransform(m+u,_+c,u,c,x[v+h+4],x[v+h+5],x[v+h+2],x[v+h+3],x[v+2],x[v+3],e._helpTransform,g,!0):this._getAffineTransform(m,_,u,c,x[v],x[v+1],x[v+2],x[v+3],x[v+h+2],x[v+h+3],e._helpTransform,g,!1),y[d]=1,y[d+1]=g.a,y[d+2]=g.b,y[d+3]=g.c,y[d+4]=g.d,y[d+5]=g.tx,y[d+6]=g.ty}return g},e.prototype.init=function(e,r){if(null===this._boneData){t.prototype.init.call(this,e,r);var a=e.segmentX,i=e.segmentY,n=this._armature.armatureData.parent.intArray[e.geometry.offset+0],s=1e3,o=200;this._dX=2*o/a,this._dY=2*o/i,this._k=-this._dY/this._dX,this._kX=-this._dY/(s-o),this._kY=-(s-o)/this._dX,this._vertices.length=2*n,this._deformVertices.length=2*n,this._matrixCahce.length=2*(a*i+2*a+2*i)*7,this._hullCache.length=10;for(var l=0;l<2*n;++l)this._deformVertices[l]=0;null!==this._parent&&(0===this._parent.boneData.type?this._bone=this._parent:this._bone=this._parent._bone)}},e.prototype.update=function(t){if(t>=0&&null!==this._cachedFrameIndices){var r=this._cachedFrameIndices[t];if(r>=0&&this._cachedFrameIndex===r)this._transformDirty=!1;else if(r>=0)this._transformDirty=!0,this._cachedFrameIndex=r;else{if(this._hasConstraint)for(var a=0,i=this._armature._constraints;a<i.length;a++){var n=i[a];n._root===this&&n.update()}this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var s=0,o=this._armature._constraints;s<o.length;s++){n=o[s];n._root===this&&n.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty){this._transformDirty=!1,this._childrenTransformDirty=!0;for(var l=0,h=this._matrixCahce.length;l<h;l+=7)this._matrixCahce[l]=-1;if(this._updateVertices(),this._cachedFrameIndex<0){var u=t>=0;this._localDirty&&this._updateGlobalTransformMatrix(u),u&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);var c=1e3,f=200,p=2*this.global.x,d=2*this.global.y,m=e._helpPoint;this.globalTransformMatrix.transformPoint(c,-f,m),this._hullCache[0]=m.x,this._hullCache[1]=m.y,this._hullCache[2]=p-m.x,this._hullCache[3]=d-m.y,this.globalTransformMatrix.transformPoint(0,this._dY,m,!0),this._hullCache[4]=m.x,this._hullCache[5]=m.y,this.globalTransformMatrix.transformPoint(f,c,m),this._hullCache[6]=m.x,this._hullCache[7]=m.y,this._hullCache[8]=p-m.x,this._hullCache[9]=d-m.y,this.globalTransformMatrix.transformPoint(this._dX,0,m,!0),this._hullCache[10]=m.x,this._hullCache[11]=m.y}else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},e}(t.Bone);t.Surface=e}(s||(s={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.deformVertices=[],e}return n(e,t),e.toString=function(){return"[class dragonBones.DisplayFrame]"},e.prototype._onClear=function(){this.rawDisplayData=null,this.displayData=null,this.textureData=null,this.display=null,this.deformVertices.length=0},e.prototype.updateDeformVertices=function(){if(null!==this.rawDisplayData&&0===this.deformVertices.length){var t;if(2===this.rawDisplayData.type)t=this.rawDisplayData.geometry;else{if(4!==this.rawDisplayData.type)return;t=this.rawDisplayData.geometry}var e=0;e=null!==t.weight?2*t.weight.count:2*t.data.intArray[t.offset+0],this.deformVertices.length=e;for(var r=0,a=this.deformVertices.length;r<a;++r)this.deformVertices[r]=0}},e.prototype.getGeometryData=function(){if(null!==this.displayData){if(2===this.displayData.type)return this.displayData.geometry;if(4===this.displayData.type)return this.displayData.geometry}if(null!==this.rawDisplayData){if(2===this.rawDisplayData.type)return this.rawDisplayData.geometry;if(4===this.rawDisplayData.type)return this.rawDisplayData.geometry}return null},e.prototype.getBoundingBox=function(){return null!==this.displayData&&3===this.displayData.type?this.displayData.boundingBox:null!==this.rawDisplayData&&3===this.rawDisplayData.type?this.rawDisplayData.boundingBox:null},e.prototype.getTextureData=function(){if(null!==this.displayData){if(0===this.displayData.type)return this.displayData.texture;if(2===this.displayData.type)return this.displayData.texture}if(null!==this.textureData)return this.textureData;if(null!==this.rawDisplayData){if(0===this.rawDisplayData.type)return this.rawDisplayData.texture;if(2===this.rawDisplayData.type)return this.rawDisplayData.texture}return null},e}(t.BaseObject);t.DisplayFrame=e;var r=function(r){function a(){var e=null!==r&&r.apply(this,arguments)||this;return e._localMatrix=new t.Matrix,e._colorTransform=new t.ColorTransform,e._displayFrames=[],e._geometryBones=[],e._rawDisplay=null,e._meshDisplay=null,e._display=null,e}return n(a,r),a.prototype._onClear=function(){r.prototype._onClear.call(this);for(var e=[],a=0,i=this._displayFrames;a<i.length;a++){var n=i[a],s=n.display;s!==this._rawDisplay&&s!==this._meshDisplay&&e.indexOf(s)<0&&e.push(s),n.returnToPool()}for(var o=0,l=e;o<l.length;o++){var h=l[o];h instanceof t.Armature?h.dispose():this._disposeDisplay(h,!0)}null!==this._meshDisplay&&this._meshDisplay!==this._rawDisplay&&this._disposeDisplay(this._meshDisplay,!1),null!==this._rawDisplay&&this._disposeDisplay(this._rawDisplay,!1),this.displayController=null,this._displayDataDirty=!1,this._displayDirty=!1,this._geometryDirty=!1,this._textureDirty=!1,this._visibleDirty=!1,this._blendModeDirty=!1,this._zOrderDirty=!1,this._colorDirty=!1,this._verticesDirty=!1,this._transformDirty=!1,this._visible=!0,this._blendMode=0,this._displayIndex=-1,this._animationDisplayIndex=-1,this._zOrder=0,this._zIndex=0,this._cachedFrameIndex=-1,this._pivotX=0,this._pivotY=0,this._localMatrix.identity(),this._colorTransform.identity(),this._displayFrames.length=0,this._geometryBones.length=0,this._slotData=null,this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._rawDisplay=null,this._meshDisplay=null,this._display=null,this._childArmature=null,this._parent=null,this._cachedFrameIndices=null},a.prototype._hasDisplay=function(t){for(var e=0,r=this._displayFrames;e<r.length;e++){var a=r[e];if(a.display===t)return!0}return!1},a.prototype._isBonesUpdate=function(){for(var t=0,e=this._geometryBones;t<e.length;t++){var r=e[t];if(null!==r&&r._childrenTransformDirty)return!0}return!1},a.prototype._updateAlpha=function(){var t=this._alpha*this._parent._globalAlpha;this._globalAlpha!==t&&(this._globalAlpha=t,this._colorDirty=!0)},a.prototype._updateDisplayData=function(){var e=this._displayFrame,r=this._geometryData,i=this._textureData,n=null,s=null;if(this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._displayIndex>=0&&this._displayIndex<this._displayFrames.length&&(this._displayFrame=this._displayFrames[this._displayIndex],n=this._displayFrame.rawDisplayData,s=this._displayFrame.displayData,this._geometryData=this._displayFrame.getGeometryData(),this._boundingBoxData=this._displayFrame.getBoundingBox(),this._textureData=this._displayFrame.getTextureData()),this._displayFrame!==e||this._geometryData!==r||this._textureData!==i){if(null===this._geometryData&&null!==this._textureData){var o=null!==s&&0===s.type?s:n,l=this._textureData.parent.scale*this._armature._armatureData.scale,h=this._textureData.frame;this._pivotX=o.pivot.x,this._pivotY=o.pivot.y;var u=null!==h?h:this._textureData.region,c=u.width,f=u.height;this._textureData.rotated&&null===h&&(c=u.height,f=u.width),this._pivotX*=c*l,this._pivotY*=f*l,null!==h&&(this._pivotX+=h.x*l,this._pivotY+=h.y*l),null!==n&&o!==n&&(n.transform.toMatrix(a._helpMatrix),a._helpMatrix.invert(),a._helpMatrix.transformPoint(0,0,a._helpPoint),this._pivotX-=a._helpPoint.x,this._pivotY-=a._helpPoint.y,o.transform.toMatrix(a._helpMatrix),a._helpMatrix.invert(),a._helpMatrix.transformPoint(0,0,a._helpPoint),this._pivotX+=a._helpPoint.x,this._pivotY+=a._helpPoint.y),t.DragonBones.yDown||(this._pivotY=(this._textureData.rotated?this._textureData.region.width:this._textureData.region.height)*l-this._pivotY)}else this._pivotX=0,this._pivotY=0;if(this.origin=null!==n?n.transform:null!==s?s.transform:null,null!==this.origin?this.global.copyFrom(this.origin).add(this.offset).toMatrix(this._localMatrix):this.global.copyFrom(this.offset).toMatrix(this._localMatrix),this._geometryData!==r)if(this._geometryDirty=!0,this._verticesDirty=!0,null!==this._geometryData){if(this._geometryBones.length=0,null!==this._geometryData.weight)for(var p=0,d=this._geometryData.weight.bones.length;p<d;++p){var m=this._armature.getBone(this._geometryData.weight.bones[p].name);this._geometryBones.push(m)}}else this._geometryBones.length=0,this._geometryData=null;this._textureDirty=this._textureData!==i,this._transformDirty=!0}},a.prototype._updateDisplay=function(){var e=null!==this._display?this._display:this._rawDisplay,r=this._childArmature;null!==this._displayFrame?(this._display=this._displayFrame.display,null!==this._display&&this._display instanceof t.Armature?(this._childArmature=this._display,this._display=this._childArmature.display):this._childArmature=null):(this._display=null,this._childArmature=null);var a=null!==this._display?this._display:this._rawDisplay;if(a!==e&&(this._textureDirty=!0,this._visibleDirty=!0,this._blendModeDirty=!0,this._colorDirty=!0,this._transformDirty=!0,this._onUpdateDisplay(),this._replaceDisplay(e)),this._childArmature!==r&&(null!==r&&(r._parent=null,r.clock=null,r.inheritAnimation&&r.animation.reset()),null!==this._childArmature&&(this._childArmature._parent=this,this._childArmature.clock=this._armature.clock,this._childArmature.inheritAnimation))){if(0===this._childArmature.cacheFrameRate){var i=this._armature.cacheFrameRate;0!==i&&(this._childArmature.cacheFrameRate=i)}if(null!==this._displayFrame){var n=null,s=null!==this._displayFrame.displayData?this._displayFrame.displayData:this._displayFrame.rawDisplayData;if(null!==s&&1===s.type&&(n=s.actions),null!==n&&n.length>0)for(var o=0,l=n;o<l.length;o++){var h=l[o],u=t.BaseObject.borrowObject(t.EventObject);t.EventObject.actionDataToInstance(h,u,this._armature),u.slot=this,this._armature._bufferAction(u,!1)}else this._childArmature.animation.play()}}},a.prototype._updateGlobalTransformMatrix=function(t){var e=0===this._parent._boneData.type?this._parent.globalTransformMatrix:this._parent._getGlobalTransformMatrix(this.global.x,this.global.y);this.globalTransformMatrix.copyFrom(this._localMatrix),this.globalTransformMatrix.concat(e),t?this.global.fromMatrix(this.globalTransformMatrix):this._globalDirty=!0},a.prototype._setDisplayIndex=function(t,e){if(void 0===e&&(e=!1),e){if(this._animationDisplayIndex===t)return;this._animationDisplayIndex=t}this._displayIndex!==t&&(this._displayIndex=t<this._displayFrames.length?t:this._displayFrames.length-1,this._displayDataDirty=!0,this._displayDirty=this._displayIndex<0||this._display!==this._displayFrames[this._displayIndex].display)},a.prototype._setZOrder=function(t){return this._zOrder,this._zOrder=t,this._zOrderDirty=!0,this._zOrderDirty},a.prototype._setColor=function(t){return this._colorTransform.copyFrom(t),this._colorDirty=!0},a.prototype.init=function(t,e,r,a){if(null===this._slotData){this._slotData=t,this._colorDirty=!0,this._blendModeDirty=!0,this._blendMode=this._slotData.blendMode,this._zOrder=this._slotData.zOrder,this._zIndex=this._slotData.zIndex,this._alpha=this._slotData.alpha,this._colorTransform.copyFrom(this._slotData.color),this._rawDisplay=r,this._meshDisplay=a,this._armature=e;var i=this._armature.getBone(this._slotData.parent.name);null!==i&&(this._parent=i),this._armature._addSlot(this),this._initDisplay(this._rawDisplay,!1),this._rawDisplay!==this._meshDisplay&&this._initDisplay(this._meshDisplay,!1),this._onUpdateDisplay(),this._addDisplay()}},a.prototype.update=function(t){if(this._displayDataDirty&&(this._updateDisplayData(),this._displayDataDirty=!1),this._displayDirty&&(this._updateDisplay(),this._displayDirty=!1),(this._geometryDirty||this._textureDirty)&&(null!==this._display&&this._display!==this._rawDisplay&&this._display!==this._meshDisplay||this._updateFrame(),this._geometryDirty=!1,this._textureDirty=!1),null!==this._display){if(this._visibleDirty&&(this._updateVisible(),this._visibleDirty=!1),this._blendModeDirty&&(this._updateBlendMode(),this._blendModeDirty=!1),this._colorDirty&&(this._updateColor(),this._colorDirty=!1),this._zOrderDirty&&(this._updateZOrder(),this._zOrderDirty=!1),null!==this._geometryData&&this._display===this._meshDisplay){var e=null!==this._geometryData.weight,r=0!==this._parent._boneData.type;if((this._verticesDirty||e&&this._isBonesUpdate()||r&&this._parent._childrenTransformDirty)&&(this._verticesDirty=!1,this._updateMesh()),e||r)return}if(t>=0&&null!==this._cachedFrameIndices){var a=this._cachedFrameIndices[t];a>=0&&this._cachedFrameIndex===a?this._transformDirty=!1:a>=0?(this._transformDirty=!0,this._cachedFrameIndex=a):this._transformDirty||this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}else(this._transformDirty||this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1);if(this._transformDirty){if(this._cachedFrameIndex<0){var i=t>=0;this._updateGlobalTransformMatrix(i),i&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);this._updateTransform(),this._transformDirty=!1}}},a.prototype.invalidUpdate=function(){this._displayDataDirty=!0,this._displayDirty=!0,this._transformDirty=!0},a.prototype.updateTransformAndMatrix=function(){this._transformDirty&&(this._updateGlobalTransformMatrix(!1),this._transformDirty=!1)},a.prototype.replaceRawDisplayData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var r=this._displayFrames[e];if(r.rawDisplayData!==t){if(r.deformVertices.length=0,r.rawDisplayData=t,null===r.rawDisplayData){var a=this._armature._armatureData.defaultSkin;if(null!==a){var i=a.getDisplays(this._slotData.name);null!==i&&e<i.length&&(r.rawDisplayData=i[e])}}e===this._displayIndex&&(this._displayDataDirty=!0)}},a.prototype.replaceDisplayData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var r=this._displayFrames[e];r.displayData!==t&&r.rawDisplayData!==t&&(r.displayData=t,e===this._displayIndex&&(this._displayDataDirty=!0))},a.prototype.replaceTextureData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var r=this._displayFrames[e];r.textureData!==t&&(r.textureData=t,e===this._displayIndex&&(this._displayDataDirty=!0))},a.prototype.replaceDisplay=function(e,r){if(void 0===r&&(r=-1),r<0)r=this._displayIndex<0?0:this._displayIndex;else if(r>=this._displayFrames.length)return;var a=this._displayFrames[r];if(a.display!==e){var i=a.display;a.display=e,null===i||i===this._rawDisplay||i===this._meshDisplay||this._hasDisplay(i)||i instanceof t.Armature||this._disposeDisplay(i,!0),null===e||e===this._rawDisplay||e===this._meshDisplay||this._hasDisplay(i)||e instanceof t.Armature||this._initDisplay(e,!0),r===this._displayIndex&&(this._displayDirty=!0)}},a.prototype.containsPoint=function(t,e){return null!==this._boundingBoxData&&(this.updateTransformAndMatrix(),a._helpMatrix.copyFrom(this.globalTransformMatrix),a._helpMatrix.invert(),a._helpMatrix.transformPoint(t,e,a._helpPoint),this._boundingBoxData.containsPoint(a._helpPoint.x,a._helpPoint.y))},a.prototype.intersectsSegment=function(t,e,r,i,n,s,o){if(void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=null),null===this._boundingBoxData)return 0;this.updateTransformAndMatrix(),a._helpMatrix.copyFrom(this.globalTransformMatrix),a._helpMatrix.invert(),a._helpMatrix.transformPoint(t,e,a._helpPoint),t=a._helpPoint.x,e=a._helpPoint.y,a._helpMatrix.transformPoint(r,i,a._helpPoint),r=a._helpPoint.x,i=a._helpPoint.y;var l=this._boundingBoxData.intersectsSegment(t,e,r,i,n,s,o);return l>0&&(1===l||2===l?null!==n?(this.globalTransformMatrix.transformPoint(n.x,n.y,n),null!==s&&(s.x=n.x,s.y=n.y)):null!==s&&this.globalTransformMatrix.transformPoint(s.x,s.y,s):(null!==n&&this.globalTransformMatrix.transformPoint(n.x,n.y,n),null!==s&&this.globalTransformMatrix.transformPoint(s.x,s.y,s)),null!==o&&(this.globalTransformMatrix.transformPoint(Math.cos(o.x),Math.sin(o.x),a._helpPoint,!0),o.x=Math.atan2(a._helpPoint.y,a._helpPoint.x),this.globalTransformMatrix.transformPoint(Math.cos(o.y),Math.sin(o.y),a._helpPoint,!0),o.y=Math.atan2(a._helpPoint.y,a._helpPoint.x))),l},a.prototype.getDisplayFrameAt=function(t){return this._displayFrames[t]},Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this._updateVisible())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"displayFrameCount",{get:function(){return this._displayFrames.length},set:function(r){var a=this._displayFrames.length;if(a<r){this._displayFrames.length=r;for(var i=a;i<r;++i)this._displayFrames[i]=t.BaseObject.borrowObject(e)}else if(a>r){for(i=a-1;i<r;--i)this.replaceDisplay(null,i),this._displayFrames[i].returnToPool();this._displayFrames.length=r}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"displayIndex",{get:function(){return this._displayIndex},set:function(t){this._setDisplayIndex(t),this.update(-1)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this._slotData.name},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"displayList",{get:function(){for(var t=new Array,e=0,r=this._displayFrames;e<r.length;e++){var a=r[e];t.push(a.display)}return t},set:function(t){this.displayFrameCount=t.length;for(var e=0,r=0,a=t;r<a.length;r++){var i=a[r];this.replaceDisplay(i,e++)}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"slotData",{get:function(){return this._slotData},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"boundingBoxData",{get:function(){return this._boundingBoxData},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rawDisplay",{get:function(){return this._rawDisplay},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"meshDisplay",{get:function(){return this._meshDisplay},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"display",{get:function(){return this._display},set:function(t){this._display!==t&&(0===this._displayFrames.length&&(this.displayFrameCount=1,this._displayIndex=0),this.replaceDisplay(t,this._displayIndex))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"childArmature",{get:function(){return this._childArmature},set:function(t){this._childArmature!==t&&(this.display=t)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),a.prototype.getDisplay=function(){return this._display},a.prototype.setDisplay=function(t){this.display=t},a}(t.TransformObject);t.Slot=r}(s||(s={})),function(t){var e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype._onClear=function(){this._armature=null,this._target=null,this._root=null,this._bone=null},Object.defineProperty(r.prototype,"name",{get:function(){return this._constraintData.name},enumerable:!1,configurable:!0}),r._helpMatrix=new t.Matrix,r._helpTransform=new t.Transform,r._helpPoint=new t.Point,r}(t.BaseObject);t.Constraint=e;var r=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.toString=function(){return"[class dragonBones.IKConstraint]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),this._bendPositive=!1,this._weight=1,this._constraintData=null},r.prototype._computeA=function(){var e=this._target.global,r=this._root.global,a=this._root.globalTransformMatrix,i=Math.atan2(e.y-r.y,e.x-r.x);r.scaleX<0&&(i+=Math.PI),r.rotation+=t.Transform.normalizeRadian(i-r.rotation)*this._weight,r.toMatrix(a)},r.prototype._computeB=function(){var e=this._bone._boneData.length,r=this._root,a=this._target.global,i=r.global,n=this._bone.global,s=this._bone.globalTransformMatrix,o=s.a*e,l=s.b*e,h=o*o+l*l,u=Math.sqrt(h),c=n.x-i.x,f=n.y-i.y,p=c*c+f*f,d=Math.sqrt(p),m=n.rotation,_=i.rotation,y=Math.atan2(f,c);c=a.x-i.x,f=a.y-i.y;var g=c*c+f*f,v=Math.sqrt(g),b=0;if(u+d<=v||v+u<=d||v+d<=u)b=Math.atan2(a.y-i.y,a.x-i.x),u+d<=v||d<u&&(b+=Math.PI);else{var T=(p-h+g)/(2*g),A=Math.sqrt(p-T*T*g)/v,D=i.x+c*T,x=i.y+f*T,S=-f*A,E=c*A,w=!1,M=r.parent;if(null!==M){var P=M.globalTransformMatrix;w=P.a*P.d-P.b*P.c<0}w!==this._bendPositive?(n.x=D-S,n.y=x-E):(n.x=D+S,n.y=x+E),b=Math.atan2(n.y-i.y,n.x-i.x)}var O=t.Transform.normalizeRadian(b-y);i.rotation=_+O*this._weight,i.toMatrix(r.globalTransformMatrix);var I=y+O*this._weight;n.x=i.x+Math.cos(I)*d,n.y=i.y+Math.sin(I)*d;var C=Math.atan2(a.y-n.y,a.x-n.x);n.scaleX<0&&(C+=Math.PI),n.rotation=i.rotation+m-_+t.Transform.normalizeRadian(C-O-m)*this._weight,n.toMatrix(s)},r.prototype.init=function(t,e){if(null===this._constraintData){this._constraintData=t,this._armature=e,this._target=this._armature.getBone(this._constraintData.target.name),this._root=this._armature.getBone(this._constraintData.root.name),this._bone=null!==this._constraintData.bone?this._armature.getBone(this._constraintData.bone.name):null;var r=this._constraintData;this._bendPositive=r.bendPositive,this._weight=r.weight,this._root._hasConstraint=!0}},r.prototype.update=function(){this._root.updateByConstraint(),null!==this._bone?(this._bone.updateByConstraint(),this._computeB()):this._computeA()},r.prototype.invalidUpdate=function(){this._root.invalidUpdate(),null!==this._bone&&this._bone.invalidUpdate()},r}(e);t.IKConstraint=r;var a=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._bones=[],t._spaces=[],t._positions=[],t._curves=[],t._boneLengths=[],t._pathGlobalVertices=[],t._segments=[10],t}return n(r,e),r.toString=function(){return"[class dragonBones.PathConstraint]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),this.dirty=!1,this.pathOffset=0,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=1,this.translateMix=1,this._pathSlot=null,this._bones.length=0,this._spaces.length=0,this._positions.length=0,this._curves.length=0,this._boneLengths.length=0,this._pathGlobalVertices.length=0},r.prototype._updatePathVertices=function(t){var e=this._armature,r=e.armatureData.parent,a=e.armatureData.scale,i=r.intArray,n=r.floatArray,s=t.offset,o=i[s+0],l=i[s+2];this._pathGlobalVertices.length=2*o;var h=t.weight;if(null!==h)for(var u=this._pathSlot._geometryBones,c=h.bones.length,f=h.offset,p=i[f+1],d=p,m=f+2+c,_=(w=0,0);w<o;w++){for(var y=i[m++],g=0,v=0,b=0,T=y;b<T;b++){var A=i[m++],D=u[A];if(null!==D){D.updateByConstraint();E=D.globalTransformMatrix;var x=n[d++];P=n[d++]*a,O=n[d++]*a;g+=(E.a*P+E.c*O+E.tx)*x,v+=(E.b*P+E.d*O+E.ty)*x}}this._pathGlobalVertices[_++]=g,this._pathGlobalVertices[_++]=v}else{var S=this._pathSlot.parent;S.updateByConstraint();for(var E=S.globalTransformMatrix,w=0,M=l;w<o;w+=2){var P=n[M++]*a,O=n[M++]*a,I=E.a*P+E.c*O+E.tx,C=E.b*P+E.d*O+E.ty;this._pathGlobalVertices[w]=I,this._pathGlobalVertices[w+1]=C}}},r.prototype._computeVertices=function(t,e,r,a){for(var i=r,n=t;i<e;i+=2)a[i]=this._pathGlobalVertices[n++],a[i+1]=this._pathGlobalVertices[n++]},r.prototype._computeBezierCurve=function(t,e,r,a,i){var n=this._armature,s=n.armatureData.parent.intArray,o=s[t.geometry.offset+0],l=this._positions,h=this._spaces,u=t.closed,c=Array(),f=2*o,p=f/6,d=-1,m=this.position;l.length=3*e+2;var _=0;if(t.constantSpeed){u?(f+=2,c.length=o,this._computeVertices(2,f-4,0,c),this._computeVertices(0,2,f-4,c),c[f-2]=c[0],c[f-1]=c[1]):(p--,f-=4,c.length=f,this._computeVertices(2,f,0,c));var y=new Array(p);_=0;for(var g,v,b,T,A,D,x,S,E=c[0],w=c[1],M=0,P=0,O=0,I=0,C=0,R=0,F=(W=0,2);W<p;W++,F+=6)M=c[F],P=c[F+1],O=c[F+2],I=c[F+3],C=c[F+4],R=c[F+5],g=.1875*(E-2*M+O),v=.1875*(w-2*P+I),b=.09375*(3*(M-O)-E+C),T=.09375*(3*(P-I)-w+R),A=2*g+b,D=2*v+T,x=.75*(M-E)+g+.16666667*b,S=.75*(P-w)+v+.16666667*T,_+=Math.sqrt(x*x+S*S),x+=A,S+=D,A+=b,D+=T,_+=Math.sqrt(x*x+S*S),x+=A,S+=D,_+=Math.sqrt(x*x+S*S),x+=A+b,S+=D+T,_+=Math.sqrt(x*x+S*S),y[W]=_,E=C,w=R;if(a&&(m*=_),i)for(W=0;W<e;W++)h[W]*=_;for(var B=this._segments,N=0,k=(W=0,G=0,H=0,0);W<e;W++,G+=3){q=h[W];m+=q;var V=m;if(u)V%=_,V<0&&(V+=_),H=0;else{if(V<0)continue;if(V>_)continue}for(;;H++){var L=y[H];if(!(V>L)){if(0===H)V/=L;else{var j=y[H-1];V=(V-j)/(L-j)}break}}if(H!==d){d=H;var U=6*H;for(E=c[U],w=c[U+1],M=c[U+2],P=c[U+3],O=c[U+4],I=c[U+5],C=c[U+6],R=c[U+7],g=.03*(E-2*M+O),v=.03*(w-2*P+I),b=.006*(3*(M-O)-E+C),T=.006*(3*(P-I)-w+R),A=2*g+b,D=2*v+T,x=.3*(M-E)+g+.16666667*b,S=.3*(P-w)+v+.16666667*T,N=Math.sqrt(x*x+S*S),B[0]=N,U=1;U<8;U++)x+=A,S+=D,A+=b,D+=T,N+=Math.sqrt(x*x+S*S),B[U]=N;x+=A,S+=D,N+=Math.sqrt(x*x+S*S),B[8]=N,x+=A+b,S+=D+T,N+=Math.sqrt(x*x+S*S),B[9]=N,k=0}for(V*=N;;k++){var Y=B[k];if(!(V>Y)){if(0===k)V/=Y;else{j=B[k-1];V=k+(V-j)/(Y-j)}break}}this.addCurvePosition(.1*V,E,w,M,P,O,I,C,R,l,G,r)}}else{var X=t.curveLengths;if(p-=u?1:2,_=X[p],a&&(m*=_),i)for(var W=0;W<e;W++)h[W]*=_;c.length=8;for(var W=0,G=0,H=0;W<e;W++,G+=3){var q=h[W];if(m+=q,u)m%=_,m<0&&(m+=_),H=0;else{if(m<0)continue;if(m>_)continue}for(var z=0;;H++){var Z=X[H];if(!(m>Z)){if(0===H)z=m/Z;else{var K=X[H-1];z=(m-K)/(Z-K)}break}}H!==d&&(d=H,u&&H===p?(this._computeVertices(f-4,4,0,c),this._computeVertices(0,4,4,c)):this._computeVertices(6*H+2,8,0,c)),this.addCurvePosition(z,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],l,G,r)}}},r.prototype.addCurvePosition=function(t,e,r,a,i,n,s,o,l,h,u,c){if(0===t)return h[u]=e,h[u+1]=r,void(h[u+2]=0);if(1===t)return h[u]=o,h[u+1]=l,void(h[u+2]=0);var f=1-t,p=f*f,d=t*t,m=p*f,_=p*t*3,y=f*d*3,g=t*d,v=m*e+_*a+y*n+g*o,b=m*r+_*i+y*s+g*l;h[u]=v,h[u+1]=b,h[u+2]=c?Math.atan2(b-(m*r+_*i+y*s),v-(m*e+_*a+y*n)):0},r.prototype.init=function(t,e){this._constraintData=t,this._armature=e;var r=t;this.pathOffset=r.pathDisplayData.geometry.offset,this.position=r.position,this.spacing=r.spacing,this.rotateOffset=r.rotateOffset,this.rotateMix=r.rotateMix,this.translateMix=r.translateMix,this._root=this._armature.getBone(r.root.name),this._target=this._armature.getBone(r.target.name),this._pathSlot=this._armature.getSlot(r.pathSlot.name);for(var a=0,i=r.bones.length;a<i;a++){var n=this._armature.getBone(r.bones[a].name);null!==n&&this._bones.push(n)}2===r.rotateMode&&(this._boneLengths.length=this._bones.length),this._root._hasConstraint=!0},r.prototype.update=function(){var e=this._pathSlot;if(null!==e._geometryData&&e._geometryData.offset===this.pathOffset){var r=this._constraintData,a=!1;if(this._root._childrenTransformDirty?(this._updatePathVertices(e._geometryData),a=!0):(e._verticesDirty||e._isBonesUpdate())&&(this._updatePathVertices(e._geometryData),e._verticesDirty=!1,a=!0),a||this.dirty){var i=r.positionMode,n=r.spacingMode,s=r.rotateMode,o=this._bones,l=0===n,h=2===s,u=0===s,c=o.length,f=u?c:c+1,p=this.spacing,d=this._spaces;if(d.length=f,h||l){d[0]=0;for(var m=0,_=f-1;m<_;m++){var y=o[m];y.updateByConstraint();var g=y._boneData.length,v=y.globalTransformMatrix,b=g*v.a,T=g*v.b,A=Math.sqrt(b*b+T*T);h&&(this._boneLengths[m]=A),d[m+1]=(g+p)*A/g}}else for(m=0;m<f;m++)d[m]=p;this._computeBezierCurve(e._displayFrame.rawDisplayData,f,u,1===i,2===n);var D,x=this._positions,S=this.rotateOffset,E=x[0],w=x[1];if(0===S)D=1===s;else{D=!1;y=e.parent;if(null!==y){v=y.globalTransformMatrix;S*=v.a*v.d-v.b*v.c>0?t.Transform.DEG_RAD:-t.Transform.DEG_RAD}}for(var M=this.rotateMix,P=this.translateMix,O=(m=0,3);m<c;m++,O+=3){y=o[m];y.updateByConstraint();v=y.globalTransformMatrix;v.tx+=(E-v.tx)*P,v.ty+=(w-v.ty)*P;b=x[O],T=x[O+1];var I=b-E,C=T-w;if(h){var R=this._boneLengths[m],F=(Math.sqrt(I*I+C*C)/R-1)*M+1;v.a*=F,v.b*=F}if(E=b,w=T,M>0){var B=v.a,N=v.b,k=v.c,V=v.d,L=void 0,j=void 0,U=void 0;if(L=u?x[O-1]:Math.atan2(C,I),L-=Math.atan2(N,B),D){j=Math.cos(L),U=Math.sin(L);var Y=y._boneData.length;E+=(Y*(j*B-U*N)-I)*M,w+=(Y*(U*B+j*N)-C)*M}else L+=S;L>t.Transform.PI?L-=t.Transform.PI_D:L<-t.Transform.PI&&(L+=t.Transform.PI_D),L*=M,j=Math.cos(L),U=Math.sin(L),v.a=j*B-U*N,v.b=U*B+j*N,v.c=j*k-U*V,v.d=U*k+j*V}y.global.fromMatrix(v)}this.dirty=!1}}},r.prototype.invalidUpdate=function(){},r}(e);t.PathConstraint=a}(s||(s={})),function(t){var e=function(){function t(t){void 0===t&&(t=0),this.time=0,this.timeScale=1,this._systemTime=0,this._animatebles=[],this._clock=null,this.time=t,this._systemTime=.001*(new Date).getTime()}return t.prototype.advanceTime=function(t){t!==t&&(t=0);var e=.001*Date.now();if(t<0&&(t=e-this._systemTime),this._systemTime=e,1!==this.timeScale&&(t*=this.timeScale),0!==t){t<0?this.time-=t:this.time+=t;for(var r=0,a=0,i=this._animatebles.length;r<i;++r){var n=this._animatebles[r];null!==n?(a>0&&(this._animatebles[r-a]=n,this._animatebles[r]=null),n.advanceTime(t)):a++}if(a>0){for(i=this._animatebles.length;r<i;++r){var s=this._animatebles[r];null!==s?this._animatebles[r-a]=s:a++}this._animatebles.length-=a}}},t.prototype.contains=function(t){if(t===this)return!1;var e=t;while(e!==this&&null!==e)e=e.clock;return e===this},t.prototype.add=function(t){this._animatebles.indexOf(t)<0&&(this._animatebles.push(t),t.clock=this)},t.prototype.remove=function(t){var e=this._animatebles.indexOf(t);e>=0&&(this._animatebles[e]=null,t.clock=null)},t.prototype.clear=function(){for(var t=0,e=this._animatebles;t<e.length;t++){var r=e[t];null!==r&&(r.clock=null)}},Object.defineProperty(t.prototype,"clock",{get:function(){return this._clock},set:function(t){this._clock!==t&&(null!==this._clock&&this._clock.remove(this),this._clock=t,null!==this._clock&&this._clock.add(this))},enumerable:!1,configurable:!0}),t}();t.WorldClock=e}(s||(s={})),function(t){var e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._animationNames=[],t._animationStates=[],t._animations={},t._blendStates={},t._animationConfig=null,t}return n(r,e),r.toString=function(){return"[class dragonBones.Animation]"},r.prototype._onClear=function(){for(var t=0,e=this._animationStates;t<e.length;t++){var r=e[t];r.returnToPool()}for(var a in this._animations)delete this._animations[a];for(var a in this._blendStates){var i=this._blendStates[a];for(var n in i)i[n].returnToPool();delete this._blendStates[a]}null!==this._animationConfig&&this._animationConfig.returnToPool(),this.timeScale=1,this._animationDirty=!1,this._inheritTimeScale=1,this._animationNames.length=0,this._animationStates.length=0,this._armature=null,this._animationConfig=null,this._lastAnimationState=null},r.prototype._fadeOut=function(t){switch(t.fadeOutMode){case 1:for(var e=0,r=this._animationStates;e<r.length;e++){var a=r[e];null===a._parent&&(a.layer===t.layer&&a.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 2:for(var i=0,n=this._animationStates;i<n.length;i++){a=n[i];null===a._parent&&(a.group===t.group&&a.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 3:for(var s=0,o=this._animationStates;s<o.length;s++){a=o[s];null===a._parent&&(a.layer===t.layer&&a.group===t.group&&a.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 4:for(var l=0,h=this._animationStates;l<h.length;l++){a=h[l];null===a._parent&&a.fadeOut(t.fadeOutTime,t.pauseFadeOut)}break;case 5:default:break}},r.prototype.init=function(e){null===this._armature&&(this._armature=e,this._animationConfig=t.BaseObject.borrowObject(t.AnimationConfig))},r.prototype.advanceTime=function(t){for(var e in t<0&&(t=-t),this._armature.inheritAnimation&&null!==this._armature._parent?this._inheritTimeScale=this._armature._parent._armature.animation._inheritTimeScale*this.timeScale:this._inheritTimeScale=this.timeScale,1!==this._inheritTimeScale&&(t*=this._inheritTimeScale),this._blendStates){var r=this._blendStates[e];for(var a in r)r[a].reset()}var i=this._animationStates.length;if(1===i){var n=this._animationStates[0];if(n._fadeState>0&&n._subFadeState>0)this._armature._dragonBones.bufferObject(n),this._animationStates.length=0,this._lastAnimationState=null;else{var s=n.animationData,o=s.cacheFrameRate;if(this._animationDirty&&o>0){this._animationDirty=!1;for(var l=0,h=this._armature.getBones();l<h.length;l++){var u=h[l];u._cachedFrameIndices=s.getBoneCachedFrameIndices(u.name)}for(var c=0,f=this._armature.getSlots();c<f.length;c++){var p=f[c];if(p.displayFrameCount>0){var d=p.getDisplayFrameAt(0).rawDisplayData;if(null!==d&&d.parent===this._armature.armatureData.defaultSkin){p._cachedFrameIndices=s.getSlotCachedFrameIndices(p.name);continue}}p._cachedFrameIndices=null}}n.advanceTime(t,o)}}else if(i>1){for(var m=0,_=0;m<i;++m){n=this._animationStates[m];n._fadeState>0&&n._subFadeState>0?(_++,this._armature._dragonBones.bufferObject(n),this._animationDirty=!0,this._lastAnimationState===n&&(this._lastAnimationState=null)):(_>0&&(this._animationStates[m-_]=n),n.advanceTime(t,0)),m===i-1&&_>0&&(this._animationStates.length-=_,null===this._lastAnimationState&&this._animationStates.length>0&&(this._lastAnimationState=this._animationStates[this._animationStates.length-1]))}this._armature._cacheFrameIndex=-1}else this._armature._cacheFrameIndex=-1},r.prototype.reset=function(){for(var t=0,e=this._animationStates;t<e.length;t++){var r=e[t];r.returnToPool()}this._animationDirty=!1,this._animationConfig.clear(),this._animationStates.length=0,this._lastAnimationState=null},r.prototype.stop=function(t){if(void 0===t&&(t=null),null!==t){var e=this.getState(t);null!==e&&e.stop()}else for(var r=0,a=this._animationStates;r<a.length;r++){e=a[r];e.stop()}},r.prototype.playConfig=function(e){var r=e.animation;if(!(r in this._animations))return console.warn("Non-existent animation.\n","DragonBones name: "+this._armature.armatureData.parent.name,"Armature name: "+this._armature.name,"Animation name: "+r),null;var a=this._animations[r];if(5===e.fadeOutMode)for(var i=0,n=this._animationStates;i<n.length;i++){var s=n[i];if(s._fadeState<1&&s.layer===e.layer&&s.animationData===a)return s}0===this._animationStates.length?e.fadeInTime=0:e.fadeInTime<0&&(e.fadeInTime=a.fadeInTime),e.fadeOutTime<0&&(e.fadeOutTime=e.fadeInTime),e.timeScale<=-100&&(e.timeScale=1/a.scale),a.frameCount>0?(e.position<0?(e.position%=a.duration,e.position=a.duration-e.position):e.position===a.duration?e.position-=1e-6:e.position>a.duration&&(e.position%=a.duration),e.duration>0&&e.position+e.duration>a.duration&&(e.duration=a.duration-e.position),e.playTimes<0&&(e.playTimes=a.playTimes)):(e.playTimes=1,e.position=0,e.duration>0&&(e.duration=0)),0===e.duration&&(e.duration=-1),this._fadeOut(e);var o=t.BaseObject.borrowObject(t.AnimationState);if(o.init(this._armature,a,e),this._animationDirty=!0,this._armature._cacheFrameIndex=-1,this._animationStates.length>0){for(var l=!1,h=0,u=this._animationStates.length;h<u;++h){if(o.layer>this._animationStates[h].layer){l=!0,this._animationStates.splice(h,0,o);break}if(h!==u-1&&o.layer>this._animationStates[h+1].layer){l=!0,this._animationStates.splice(h+1,0,o);break}}l||this._animationStates.push(o)}else this._animationStates.push(o);for(var c=0,f=this._armature.getSlots();c<f.length;c++){var p=f[c],d=p.childArmature;null!==d&&d.inheritAnimation&&d.animation.hasAnimation(r)&&null===d.animation.getState(r)&&d.animation.fadeIn(r)}for(var m in a.animationTimelines){var _=this.fadeIn(m,0,1,o.layer,"",5);if(null!==_){var y=a.animationTimelines[m];_.actionEnabled=!1,_.resetToPose=!1,_.stop(),o.addState(_,y);var g=this._animationStates.indexOf(o),v=this._animationStates.indexOf(_);v<g&&(this._animationStates.splice(g,1),this._animationStates.splice(v,0,o))}}return this._lastAnimationState=o,o},r.prototype.play=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=e,this._animationConfig.fadeInTime=0,this._animationConfig.animation=null!==t?t:"",null!==t&&t.length>0)this.playConfig(this._animationConfig);else if(null===this._lastAnimationState){var r=this._armature.armatureData.defaultAnimation;null!==r&&(this._animationConfig.animation=r.name,this.playConfig(this._animationConfig))}else this._lastAnimationState.isPlaying||this._lastAnimationState.isCompleted?(this._animationConfig.animation=this._lastAnimationState.name,this.playConfig(this._animationConfig)):this._lastAnimationState.play();return this._lastAnimationState},r.prototype.fadeIn=function(t,e,r,a,i,n){return void 0===e&&(e=-1),void 0===r&&(r=-1),void 0===a&&(a=0),void 0===i&&(i=null),void 0===n&&(n=3),this._animationConfig.clear(),this._animationConfig.fadeOutMode=n,this._animationConfig.playTimes=r,this._animationConfig.layer=a,this._animationConfig.fadeInTime=e,this._animationConfig.animation=t,this._animationConfig.group=null!==i?i:"",this.playConfig(this._animationConfig)},r.prototype.gotoAndPlayByTime=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=r,this._animationConfig.position=e,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t,this.playConfig(this._animationConfig)},r.prototype.gotoAndPlayByFrame=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=r,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t;var a=t in this._animations?this._animations[t]:null;return null!==a&&(this._animationConfig.position=a.frameCount>0?a.duration*e/a.frameCount:0),this.playConfig(this._animationConfig)},r.prototype.gotoAndPlayByProgress=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=r,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t;var a=t in this._animations?this._animations[t]:null;return null!==a&&(this._animationConfig.position=a.duration*(e>0?e:0)),this.playConfig(this._animationConfig)},r.prototype.gotoAndStopByTime=function(t,e){void 0===e&&(e=0);var r=this.gotoAndPlayByTime(t,e,1);return null!==r&&r.stop(),r},r.prototype.gotoAndStopByFrame=function(t,e){void 0===e&&(e=0);var r=this.gotoAndPlayByFrame(t,e,1);return null!==r&&r.stop(),r},r.prototype.gotoAndStopByProgress=function(t,e){void 0===e&&(e=0);var r=this.gotoAndPlayByProgress(t,e,1);return null!==r&&r.stop(),r},r.prototype.getBlendState=function(e,r,a){e in this._blendStates||(this._blendStates[e]={});var i=this._blendStates[e];if(!(r in i)){var n=i[r]=t.BaseObject.borrowObject(t.BlendState);n.target=a}return i[r]},r.prototype.getState=function(t,e){void 0===e&&(e=-1);var r=this._animationStates.length;while(r--){var a=this._animationStates[r];if(a.name===t&&(e<0||a.layer===e))return a}return null},r.prototype.hasAnimation=function(t){return t in this._animations},r.prototype.getStates=function(){return this._animationStates},Object.defineProperty(r.prototype,"isPlaying",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++){var r=e[t];if(r.isPlaying)return!0}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isCompleted",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++){var r=e[t];if(!r.isCompleted)return!1}return this._animationStates.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastAnimationName",{get:function(){return null!==this._lastAnimationState?this._lastAnimationState.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animations",{get:function(){return this._animations},set:function(t){if(this._animations!==t){for(var e in this._animationNames.length=0,this._animations)delete this._animations[e];for(var e in t)this._animationNames.push(e),this._animations[e]=t[e]}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animationConfig",{get:function(){return this._animationConfig.clear(),this._animationConfig},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!1,configurable:!0}),r}(t.BaseObject);t.Animation=e}(s||(s={})),function(t){var e=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._boneMask=[],t._boneTimelines=[],t._boneBlendTimelines=[],t._slotTimelines=[],t._slotBlendTimelines=[],t._constraintTimelines=[],t._animationTimelines=[],t._poseTimelines=[],t._actionTimeline=null,t._zOrderTimeline=null,t}return n(a,e),a.toString=function(){return"[class dragonBones.AnimationState]"},a.prototype._onClear=function(){for(var t=0,e=this._boneTimelines;t<e.length;t++){var r=e[t];r.returnToPool()}for(var a=0,i=this._boneBlendTimelines;a<i.length;a++){r=i[a];r.returnToPool()}for(var n=0,s=this._slotTimelines;n<s.length;n++){r=s[n];r.returnToPool()}for(var o=0,l=this._slotBlendTimelines;o<l.length;o++){r=l[o];r.returnToPool()}for(var h=0,u=this._constraintTimelines;h<u.length;h++){r=u[h];r.returnToPool()}for(var c=0,f=this._animationTimelines;c<f.length;c++){r=f[c];var p=r.target;p._parent===this&&(p._fadeState=1,p._subFadeState=1,p._parent=null),r.returnToPool()}null!==this._actionTimeline&&this._actionTimeline.returnToPool(),null!==this._zOrderTimeline&&this._zOrderTimeline.returnToPool(),this.actionEnabled=!1,this.additive=!1,this.displayControl=!1,this.resetToPose=!1,this.blendType=0,this.playTimes=1,this.layer=0,this.timeScale=1,this._weight=1,this.parameterX=0,this.parameterY=0,this.positionX=0,this.positionY=0,this.autoFadeOutTime=0,this.fadeTotalTime=0,this.name="",this.group="",this._timelineDirty=2,this._playheadState=0,this._fadeState=-1,this._subFadeState=-1,this._position=0,this._duration=0,this._fadeTime=0,this._time=0,this._fadeProgress=0,this._weightResult=0,this._boneMask.length=0,this._boneTimelines.length=0,this._boneBlendTimelines.length=0,this._slotTimelines.length=0,this._slotBlendTimelines.length=0,this._constraintTimelines.length=0,this._animationTimelines.length=0,this._poseTimelines.length=0,this._animationData=null,this._armature=null,this._actionTimeline=null,this._zOrderTimeline=null,this._activeChildA=null,this._activeChildB=null,this._parent=null},a.prototype._updateTimelines=function(){for(var e=0,r=this._armature._constraints;e<r.length;e++){var a=r[e],i=this._animationData.getConstraintTimelines(a.name);if(null!==i)for(var n=0,s=i;n<s.length;n++){var o=s[n];switch(o.type){case 30:var l=t.BaseObject.borrowObject(t.IKConstraintTimelineState);l.target=a,l.init(this._armature,this,o),this._constraintTimelines.push(l);break;default:break}}else if(this.resetToPose){l=t.BaseObject.borrowObject(t.IKConstraintTimelineState);l.target=a,l.init(this._armature,this,null),this._constraintTimelines.push(l),this._poseTimelines.push(l)}}},a.prototype._updateBoneAndSlotTimelines=function(){for(var e={},a=0,i=this._boneTimelines;a<i.length;a++){var n=i[a],s=n.target.target.name;s in e||(e[s]=[]),e[s].push(n)}for(var o=0,l=this._boneBlendTimelines;o<l.length;o++){n=l[o],s=n.target.target.name;s in e||(e[s]=[]),e[s].push(n)}for(var h=0,u=this._armature.getBones();h<u.length;h++){var c=u[h];s=c.name;if(this.containsBoneMask(s))if(s in e)delete e[s];else{var f=this._animationData.getBoneTimelines(s),p=this._armature.animation.getBlendState(r.BONE_TRANSFORM,c.name,c);if(null!==f)for(var d=0,m=f;d<m.length;d++){var _=m[d];switch(_.type){case 10:n=t.BaseObject.borrowObject(t.BoneAllTimelineState);n.target=p,n.init(this._armature,this,_),this._boneTimelines.push(n);break;case 11:n=t.BaseObject.borrowObject(t.BoneTranslateTimelineState);n.target=p,n.init(this._armature,this,_),this._boneTimelines.push(n);break;case 12:n=t.BaseObject.borrowObject(t.BoneRotateTimelineState);n.target=p,n.init(this._armature,this,_),this._boneTimelines.push(n);break;case 13:n=t.BaseObject.borrowObject(t.BoneScaleTimelineState);n.target=p,n.init(this._armature,this,_),this._boneTimelines.push(n);break;case 60:n=t.BaseObject.borrowObject(t.AlphaTimelineState);n.target=this._armature.animation.getBlendState(r.BONE_ALPHA,c.name,c),n.init(this._armature,this,_),this._boneBlendTimelines.push(n);break;case 50:n=t.BaseObject.borrowObject(t.SurfaceTimelineState);n.target=this._armature.animation.getBlendState(r.SURFACE,c.name,c),n.init(this._armature,this,_),this._boneBlendTimelines.push(n);break;default:break}}else if(this.resetToPose)if(0===c._boneData.type){n=t.BaseObject.borrowObject(t.BoneAllTimelineState);n.target=p,n.init(this._armature,this,null),this._boneTimelines.push(n),this._poseTimelines.push(n)}else{n=t.BaseObject.borrowObject(t.SurfaceTimelineState);n.target=this._armature.animation.getBlendState(r.SURFACE,c.name,c),n.init(this._armature,this,null),this._boneBlendTimelines.push(n),this._poseTimelines.push(n)}}}for(var y in e)for(var g=0,v=e[y];g<v.length;g++){n=v[g];var b=this._boneTimelines.indexOf(n);b>=0&&(this._boneTimelines.splice(b,1),n.returnToPool()),b=this._boneBlendTimelines.indexOf(n),b>=0&&(this._boneBlendTimelines.splice(b,1),n.returnToPool())}for(var T={},A=[],D=0,x=this._slotTimelines;D<x.length;D++){n=x[D],s=n.target.name;s in T||(T[s]=[]),T[s].push(n)}for(var S=0,E=this._slotBlendTimelines;S<E.length;S++){n=E[S],s=n.target.target.name;s in T||(T[s]=[]),T[s].push(n)}for(var w=0,M=this._armature.getSlots();w<M.length;w++){var P=M[w],O=P.parent.name;if(this.containsBoneMask(O)){s=P.name;if(s in T)delete T[s];else{var I=!1,C=!1;A.length=0;f=this._animationData.getSlotTimelines(s);if(null!==f)for(var R=0,F=f;R<F.length;R++){_=F[R];switch(_.type){case 20:n=t.BaseObject.borrowObject(t.SlotDisplayTimelineState);n.target=P,n.init(this._armature,this,_),this._slotTimelines.push(n),I=!0;break;case 23:n=t.BaseObject.borrowObject(t.SlotZIndexTimelineState);n.target=this._armature.animation.getBlendState(r.SLOT_Z_INDEX,P.name,P),n.init(this._armature,this,_),this._slotBlendTimelines.push(n);break;case 21:n=t.BaseObject.borrowObject(t.SlotColorTimelineState);n.target=P,n.init(this._armature,this,_),this._slotTimelines.push(n),C=!0;break;case 22:var B=this._animationData.parent.parent,N=B.timelineArray,k=this._animationData.frameIntOffset+N[_.offset+3],V=B.frameIntArray,L=V[k+0];L<0&&(L+=65536);for(var j=0,U=P.displayFrameCount;j<U;++j){var Y=P.getDisplayFrameAt(j),X=Y.getGeometryData();if(null!==X&&X.offset===L){n=t.BaseObject.borrowObject(t.DeformTimelineState);n.target=this._armature.animation.getBlendState(r.SLOT_DEFORM,Y.rawDisplayData.name,P),n.displayFrame=Y,n.init(this._armature,this,_),this._slotBlendTimelines.push(n),Y.updateDeformVertices(),A.push(L);break}}break;case 24:n=t.BaseObject.borrowObject(t.AlphaTimelineState);n.target=this._armature.animation.getBlendState(r.SLOT_ALPHA,P.name,P),n.init(this._armature,this,_),this._slotBlendTimelines.push(n);break;default:break}}if(this.resetToPose){if(!I){n=t.BaseObject.borrowObject(t.SlotDisplayTimelineState);n.target=P,n.init(this._armature,this,null),this._slotTimelines.push(n),this._poseTimelines.push(n)}if(!C){n=t.BaseObject.borrowObject(t.SlotColorTimelineState);n.target=P,n.init(this._armature,this,null),this._slotTimelines.push(n),this._poseTimelines.push(n)}for(j=0,U=P.displayFrameCount;j<U;++j){Y=P.getDisplayFrameAt(j);if(0!==Y.deformVertices.length){X=Y.getGeometryData();if(null!==X&&A.indexOf(X.offset)<0){n=t.BaseObject.borrowObject(t.DeformTimelineState);n.displayFrame=Y,n.target=this._armature.animation.getBlendState(r.SLOT_DEFORM,P.name,P),n.init(this._armature,this,null),this._slotBlendTimelines.push(n),this._poseTimelines.push(n)}}}}}}}for(var y in T)for(var W=0,G=T[y];W<G.length;W++){n=G[W],b=this._slotTimelines.indexOf(n);b>=0&&(this._slotTimelines.splice(b,1),n.returnToPool()),b=this._slotBlendTimelines.indexOf(n),b>=0&&(this._slotBlendTimelines.splice(b,1),n.returnToPool())}},a.prototype._advanceFadeTime=function(e){var r=this._fadeState>0;if(this._subFadeState<0){this._subFadeState=0;var a=null===this._parent&&this.actionEnabled;if(a){var i=r?t.EventObject.FADE_OUT:t.EventObject.FADE_IN;if(this._armature.eventDispatcher.hasDBEventListener(i)){var n=t.BaseObject.borrowObject(t.EventObject);n.type=i,n.armature=this._armature,n.animationState=this,this._armature._dragonBones.bufferEvent(n)}}}if(e<0&&(e=-e),this._fadeTime+=e,this._fadeTime>=this.fadeTotalTime?(this._subFadeState=1,this._fadeProgress=r?0:1):this._fadeTime>0?this._fadeProgress=r?1-this._fadeTime/this.fadeTotalTime:this._fadeTime/this.fadeTotalTime:this._fadeProgress=r?1:0,this._subFadeState>0){r||(this._playheadState|=1,this._fadeState=0);a=null===this._parent&&this.actionEnabled;if(a){i=r?t.EventObject.FADE_OUT_COMPLETE:t.EventObject.FADE_IN_COMPLETE;if(this._armature.eventDispatcher.hasDBEventListener(i)){n=t.BaseObject.borrowObject(t.EventObject);n.type=i,n.armature=this._armature,n.animationState=this,this._armature._dragonBones.bufferEvent(n)}}}},a.prototype.init=function(e,r,a){if(null===this._armature){if(this._armature=e,this._animationData=r,this.resetToPose=a.resetToPose,this.additive=a.additive,this.displayControl=a.displayControl,this.actionEnabled=a.actionEnabled,this.blendType=r.blendType,this.layer=a.layer,this.playTimes=a.playTimes,this.timeScale=a.timeScale,this.fadeTotalTime=a.fadeInTime,this.autoFadeOutTime=a.autoFadeOutTime,this.name=a.name.length>0?a.name:a.animation,this.group=a.group,this._weight=a.weight,a.pauseFadeIn?this._playheadState=2:this._playheadState=3,a.duration<0?(this._position=0,this._duration=this._animationData.duration,0!==a.position?this.timeScale>=0?this._time=a.position:this._time=a.position-this._duration:this._time=0):(this._position=a.position,this._duration=a.duration,this._time=0),this.timeScale<0&&0===this._time&&(this._time=-1e-6),this.fadeTotalTime<=0&&(this._fadeProgress=.999999),a.boneMask.length>0){this._boneMask.length=a.boneMask.length;for(var i=0,n=this._boneMask.length;i<n;++i)this._boneMask[i]=a.boneMask[i]}this._actionTimeline=t.BaseObject.borrowObject(t.ActionTimelineState),this._actionTimeline.init(this._armature,this,this._animationData.actionTimeline),this._actionTimeline.currentTime=this._time,this._actionTimeline.currentTime<0&&(this._actionTimeline.currentTime=this._duration-this._actionTimeline.currentTime),null!==this._animationData.zOrderTimeline&&(this._zOrderTimeline=t.BaseObject.borrowObject(t.ZOrderTimelineState),this._zOrderTimeline.init(this._armature,this,this._animationData.zOrderTimeline))}},a.prototype.advanceTime=function(t,e){0===this._fadeState&&0===this._subFadeState||this._advanceFadeTime(t),3===this._playheadState&&(1!==this.timeScale&&(t*=this.timeScale),this._time+=t),0!==this._timelineDirty&&(2===this._timelineDirty&&this._updateTimelines(),this._timelineDirty=0,this._updateBoneAndSlotTimelines());var r=0!==this._fadeState||0===this._subFadeState,a=0===this._fadeState&&e>0,i=!0,n=!0,s=this._time;if(this._weightResult=this._weight*this._fadeProgress,null!==this._parent&&(this._weightResult*=this._parent._weightResult),this._actionTimeline.playState<=0&&this._actionTimeline.update(s),0!==this._weight){if(a){var o=2*e;this._actionTimeline.currentTime=Math.floor(this._actionTimeline.currentTime*o)/o}if(null!==this._zOrderTimeline&&this._zOrderTimeline.playState<=0&&this._zOrderTimeline.update(s),a){var l=Math.floor(this._actionTimeline.currentTime*e);this._armature._cacheFrameIndex===l?(i=!1,n=!1):(this._armature._cacheFrameIndex=l,this._animationData.cachedFrames[l]?n=!1:this._animationData.cachedFrames[l]=!0)}if(i){var h=!1,u=null;if(n)for(var c=0,f=this._boneTimelines.length;c<f;++c){var p=this._boneTimelines[c];if(p.playState<=0&&p.update(s),p.target!==u){var d=p.target;if(h=d.update(this),u=d,1===d.dirty){var m=d.target.animationPose;m.x=0,m.y=0,m.rotation=0,m.skew=0,m.scaleX=1,m.scaleY=1}}h&&p.blend(r)}for(c=0,f=this._boneBlendTimelines.length;c<f;++c){p=this._boneBlendTimelines[c];p.playState<=0&&p.update(s),p.target.update(this)&&p.blend(r)}if(this.displayControl)for(c=0,f=this._slotTimelines.length;c<f;++c){p=this._slotTimelines[c];if(p.playState<=0){var _=p.target,y=_.displayController;null!==y&&y!==this.name&&y!==this.group||p.update(s)}}for(c=0,f=this._slotBlendTimelines.length;c<f;++c){p=this._slotBlendTimelines[c];if(p.playState<=0){d=p.target;p.update(s),d.update(this)&&p.blend(r)}}for(c=0,f=this._constraintTimelines.length;c<f;++c){p=this._constraintTimelines[c];p.playState<=0&&p.update(s)}if(this._animationTimelines.length>0){var g=100,v=100,b=null,T=null;for(c=0,f=this._animationTimelines.length;c<f;++c){p=this._animationTimelines[c];if(p.playState<=0&&p.update(s),1===this.blendType){var A=p.target,D=this.parameterX-A.positionX;D>=0?D<g&&(g=D,b=A):-D<v&&(v=-D,T=A)}}null!==b&&(this._activeChildA!==b&&(null!==this._activeChildA&&(this._activeChildA.weight=0),this._activeChildA=b,this._activeChildA.activeTimeline()),this._activeChildB!==T&&(null!==this._activeChildB&&(this._activeChildB.weight=0),this._activeChildB=T),b.weight=v/(g+v),T&&(T.weight=1-b.weight))}}if(0===this._fadeState){if(this._subFadeState>0&&(this._subFadeState=0,this._poseTimelines.length>0)){for(var x=0,S=this._poseTimelines;x<S.length;x++){p=S[x];var E=this._boneTimelines.indexOf(p);E>=0?(this._boneTimelines.splice(E,1),p.returnToPool()):(E=this._boneBlendTimelines.indexOf(p),E>=0?(this._boneBlendTimelines.splice(E,1),p.returnToPool()):(E=this._slotTimelines.indexOf(p),E>=0?(this._slotTimelines.splice(E,1),p.returnToPool()):(E=this._slotBlendTimelines.indexOf(p),E>=0?(this._slotBlendTimelines.splice(E,1),p.returnToPool()):(E=this._constraintTimelines.indexOf(p),E>=0&&(this._constraintTimelines.splice(E,1),p.returnToPool())))))}this._poseTimelines.length=0}this._actionTimeline.playState>0&&this.autoFadeOutTime>=0&&this.fadeOut(this.autoFadeOutTime)}}},a.prototype.play=function(){this._playheadState=3},a.prototype.stop=function(){this._playheadState&=1},a.prototype.fadeOut=function(t,e){if(void 0===e&&(e=!0),t<0&&(t=0),e&&(this._playheadState&=2),this._fadeState>0){if(t>this.fadeTotalTime-this._fadeTime)return}else{this._fadeState=1,this._subFadeState=-1,(t<=0||this._fadeProgress<=0)&&(this._fadeProgress=1e-6);for(var r=0,a=this._boneTimelines;r<a.length;r++){var i=a[r];i.fadeOut()}for(var n=0,s=this._boneBlendTimelines;n<s.length;n++){i=s[n];i.fadeOut()}for(var o=0,l=this._slotTimelines;o<l.length;o++){i=l[o];i.fadeOut()}for(var h=0,u=this._slotBlendTimelines;h<u.length;h++){i=u[h];i.fadeOut()}for(var c=0,f=this._constraintTimelines;c<f.length;c++){i=f[c];i.fadeOut()}for(var p=0,d=this._animationTimelines;p<d.length;p++){i=d[p];i.fadeOut();var m=i.target;m.fadeOut(999999,!0)}}this.displayControl=!1,this.fadeTotalTime=this._fadeProgress>1e-6?t/this._fadeProgress:0,this._fadeTime=this.fadeTotalTime*(1-this._fadeProgress)},a.prototype.containsBoneMask=function(t){return 0===this._boneMask.length||this._boneMask.indexOf(t)>=0},a.prototype.addBoneMask=function(t,e){void 0===e&&(e=!0);var r=this._armature.getBone(t);if(null!==r){if(this._boneMask.indexOf(t)<0&&this._boneMask.push(t),e)for(var a=0,i=this._armature.getBones();a<i.length;a++){var n=i[a];this._boneMask.indexOf(n.name)<0&&r.contains(n)&&this._boneMask.push(n.name)}this._timelineDirty=1}},a.prototype.removeBoneMask=function(t,e){void 0===e&&(e=!0);var r=this._boneMask.indexOf(t);if(r>=0&&this._boneMask.splice(r,1),e){var a=this._armature.getBone(t);if(null!==a){var i=this._armature.getBones();if(this._boneMask.length>0)for(var n=0,s=i;n<s.length;n++){var o=s[n],l=this._boneMask.indexOf(o.name);l>=0&&a.contains(o)&&this._boneMask.splice(l,1)}else for(var h=0,u=i;h<u.length;h++){o=u[h];o!==a&&(a.contains(o)||this._boneMask.push(o.name))}}}this._timelineDirty=1},a.prototype.removeAllBoneMask=function(){this._boneMask.length=0,this._timelineDirty=1},a.prototype.addState=function(e,r){if(void 0===r&&(r=null),null!==r)for(var a=0,i=r;a<i.length;a++){var n=i[a];switch(n.type){case 40:var s=t.BaseObject.borrowObject(t.AnimationProgressTimelineState);if(s.target=e,s.init(this._armature,this,n),this._animationTimelines.push(s),0!==this.blendType){var o=n;e.positionX=o.x,e.positionY=o.y,e.weight=0}e._parent=this,this.resetToPose=!1;break;case 41:s=t.BaseObject.borrowObject(t.AnimationWeightTimelineState);s.target=e,s.init(this._armature,this,n),this._animationTimelines.push(s);break;case 42:s=t.BaseObject.borrowObject(t.AnimationParametersTimelineState);s.target=e,s.init(this._armature,this,n),this._animationTimelines.push(s);break;default:break}}null===e._parent&&(e._parent=this)},a.prototype.activeTimeline=function(){for(var t=0,e=this._slotTimelines;t<e.length;t++){var r=e[t];r.dirty=!0,r.currentTime=-1}},Object.defineProperty(a.prototype,"isFadeIn",{get:function(){return this._fadeState<0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isFadeOut",{get:function(){return this._fadeState>0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isFadeComplete",{get:function(){return 0===this._fadeState},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isPlaying",{get:function(){return 0!==(2&this._playheadState)&&this._actionTimeline.playState<=0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isCompleted",{get:function(){return this._actionTimeline.playState>0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentPlayTimes",{get:function(){return this._actionTimeline.currentPlayTimes},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"totalTime",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentTime",{get:function(){return this._actionTimeline.currentTime},set:function(t){var e=this._actionTimeline.currentPlayTimes-(this._actionTimeline.playState>0?1:0);if((t<0||this._duration<t)&&(t=t%this._duration+e*this._duration,t<0&&(t+=this._duration)),this.playTimes>0&&e===this.playTimes-1&&t===this._duration&&null===this._parent&&(t=this._duration-1e-6),this._time!==t){this._time=t,this._actionTimeline.setCurrentTime(this._time),null!==this._zOrderTimeline&&(this._zOrderTimeline.playState=-1);for(var r=0,a=this._boneTimelines;r<a.length;r++){var i=a[r];i.playState=-1}for(var n=0,s=this._slotTimelines;n<s.length;n++){i=s[n];i.playState=-1}}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"weight",{get:function(){return this._weight},set:function(t){if(this._weight!==t){this._weight=t;for(var e=0,r=this._boneTimelines;e<r.length;e++){var a=r[e];a.dirty=!0}for(var i=0,n=this._boneBlendTimelines;i<n.length;i++){a=n[i];a.dirty=!0}for(var s=0,o=this._slotBlendTimelines;s<o.length;s++){a=o[s];a.dirty=!0}}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"animationData",{get:function(){return this._animationData},enumerable:!1,configurable:!0}),a}(t.BaseObject);t.AnimationState=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.BlendState]"},e.prototype._onClear=function(){this.reset(),this.target=null},e.prototype.update=function(t){var e=t.layer,r=t._weightResult;if(this.dirty>0){if(this.leftWeight>0){if(this.layer!==e){if(this.layerWeight>=this.leftWeight)return this.dirty++,this.layer=e,this.leftWeight=0,this.blendWeight=0,!1;this.layer=e,this.leftWeight-=this.layerWeight,this.layerWeight=0}return r*=this.leftWeight,this.dirty++,this.blendWeight=r,this.layerWeight+=this.blendWeight,!0}return!1}return this.dirty++,this.layer=e,this.leftWeight=1,this.blendWeight=r,this.layerWeight=r,!0},e.prototype.reset=function(){this.dirty=0,this.layer=0,this.leftWeight=0,this.layerWeight=0,this.blendWeight=0},e.BONE_TRANSFORM="boneTransform",e.BONE_ALPHA="boneAlpha",e.SURFACE="surface",e.SLOT_DEFORM="slotDeform",e.SLOT_ALPHA="slotAlpha",e.SLOT_Z_INDEX="slotZIndex",e}(t.BaseObject);t.BlendState=r}(s||(s={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onClear=function(){this.dirty=!1,this.playState=-1,this.currentPlayTimes=0,this.currentTime=-1,this.target=null,this._isTween=!1,this._valueOffset=0,this._frameValueOffset=0,this._frameOffset=0,this._frameRate=0,this._frameCount=0,this._frameIndex=-1,this._frameRateR=0,this._position=0,this._duration=0,this._timeScale=1,this._timeOffset=0,this._animationData=null,this._timelineData=null,this._armature=null,this._animationState=null,this._actionTimeline=null,this._frameArray=null,this._valueArray=null,this._timelineArray=null,this._frameIndices=null},e.prototype._setCurrentTime=function(t){var e=this.playState,r=this.currentPlayTimes,a=this.currentTime;if(null!==this._actionTimeline&&this._frameCount<=1)this.playState=this._actionTimeline.playState>=0?1:-1,this.currentPlayTimes=1,this.currentTime=this._actionTimeline.currentTime;else if(null===this._actionTimeline||1!==this._timeScale||0!==this._timeOffset){var i=this._animationState.playTimes,n=i*this._duration;t*=this._timeScale,0!==this._timeOffset&&(t+=this._timeOffset*this._animationData.duration),i>0&&(t>=n||t<=-n)?(this.playState<=0&&3===this._animationState._playheadState&&(this.playState=1),this.currentPlayTimes=i,this.currentTime=t<0?0:1===this.playState?this._duration+1e-6:this._duration):(0!==this.playState&&3===this._animationState._playheadState&&(this.playState=0),t<0?(t=-t,this.currentPlayTimes=Math.floor(t/this._duration),this.currentTime=this._duration-t%this._duration):(this.currentPlayTimes=Math.floor(t/this._duration),this.currentTime=t%this._duration)),this.currentTime+=this._position}else this.playState=this._actionTimeline.playState,this.currentPlayTimes=this._actionTimeline.currentPlayTimes,this.currentTime=this._actionTimeline.currentTime;return(this.currentPlayTimes!==r||this.currentTime!==a)&&((e<0&&this.playState!==e||this.playState<=0&&this.currentPlayTimes!==r)&&(this._frameIndex=-1),!0)},e.prototype.init=function(t,e,r){if(this._armature=t,this._animationState=e,this._timelineData=r,this._actionTimeline=this._animationState._actionTimeline,this===this._actionTimeline&&(this._actionTimeline=null),this._animationData=this._animationState.animationData,this._frameRate=this._animationData.parent.frameRate,this._frameRateR=1/this._frameRate,this._position=this._animationState._position,this._duration=this._animationState._duration,null!==this._timelineData){var a=this._animationData.parent.parent;this._frameArray=a.frameArray,this._timelineArray=a.timelineArray,this._frameIndices=a.frameIndices,this._frameCount=this._timelineArray[this._timelineData.offset+2],this._frameValueOffset=this._timelineArray[this._timelineData.offset+4],this._timeScale=100/this._timelineArray[this._timelineData.offset+0],this._timeOffset=.01*this._timelineArray[this._timelineData.offset+1]}},e.prototype.fadeOut=function(){this.dirty=!1},e.prototype.update=function(t){if(this._setCurrentTime(t)){if(this._frameCount>1){var e=Math.floor(this.currentTime*this._frameRate),r=this._frameIndices[this._timelineData.frameIndicesOffset+e];this._frameIndex!==r&&(this._frameIndex=r,this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex],this._onArriveAtFrame())}else this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData&&(this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5]),this._onArriveAtFrame());(this._isTween||this.dirty)&&this._onUpdateFrame()}},e.prototype.blend=function(t){},e}(t.BaseObject);t.TimelineState=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e._getEasingValue=function(t,e,r){var a=e;switch(t){case 3:a=Math.pow(e,2);break;case 4:a=1-Math.pow(1-e,2);break;case 5:a=.5*(1-Math.cos(e*Math.PI));break}return(a-e)*r+e},e._getEasingCurveValue=function(t,e,r,a){if(t<=0)return 0;if(t>=1)return 1;var i=r>0,n=r+1,s=Math.floor(t*n),o=0,l=0;return i?(o=0===s?0:e[a+s-1],l=s===n-1?1e4:e[a+s]):(o=e[a+s-1],l=e[a+s]),1e-4*(o+(l-o)*(t*n-s))},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._tweenType=0,this._curveCount=0,this._framePosition=0,this._frameDurationR=0,this._tweenEasing=0,this._tweenProgress=0,this._valueScale=1},e.prototype._onArriveAtFrame=function(){if(this._frameCount>1&&(this._frameIndex!==this._frameCount-1||0===this._animationState.playTimes||this._animationState.currentPlayTimes<this._animationState.playTimes-1))if(this._tweenType=this._frameArray[this._frameOffset+1],this._isTween=0!==this._tweenType,this._isTween?2===this._tweenType?this._curveCount=this._frameArray[this._frameOffset+2]:0!==this._tweenType&&1!==this._tweenType&&(this._tweenEasing=.01*this._frameArray[this._frameOffset+2]):this.dirty=!0,this._framePosition=this._frameArray[this._frameOffset]*this._frameRateR,this._frameIndex===this._frameCount-1)this._frameDurationR=1/(this._animationData.duration-this._framePosition);else{var t=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex+1],e=this._frameArray[t]*this._frameRateR-this._framePosition;this._frameDurationR=e>0?1/e:0}else this.dirty=!0,this._isTween=!1},e.prototype._onUpdateFrame=function(){this._isTween&&(this.dirty=!0,this._tweenProgress=(this.currentTime-this._framePosition)*this._frameDurationR,2===this._tweenType?this._tweenProgress=e._getEasingCurveValue(this._tweenProgress,this._frameArray,this._curveCount,this._frameOffset+3):1!==this._tweenType&&(this._tweenProgress=e._getEasingValue(this._tweenType,this._tweenProgress,this._tweenEasing)))},e}(e);t.TweenTimelineState=r;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._current=0,this._difference=0,this._result=0},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._valueScale,r=this._valueArray,a=this._valueOffset+this._frameValueOffset+this._frameIndex;if(this._isTween){var i=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:a+1;1===e?(this._current=r[a],this._difference=r[i]-this._current):(this._current=r[a]*e,this._difference=r[i]*e-this._current)}else this._result=r[a]*e}else this._result=0},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._result=this._current+this._difference*this._tweenProgress)},e}(r);t.SingleValueTimelineState=a;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._currentA=0,this._currentB=0,this._differenceA=0,this._differenceB=0,this._resultA=0,this._resultB=0},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._valueScale,r=this._valueArray,a=this._valueOffset+this._frameValueOffset+2*this._frameIndex;if(this._isTween){var i=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:a+2;1===e?(this._currentA=r[a],this._currentB=r[a+1],this._differenceA=r[i]-this._currentA,this._differenceB=r[i+1]-this._currentB):(this._currentA=r[a]*e,this._currentB=r[a+1]*e,this._differenceA=r[i]*e-this._currentA,this._differenceB=r[i+1]*e-this._currentB)}else this._resultA=r[a]*e,this._resultB=r[a+1]*e}else this._resultA=0,this._resultB=0},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._resultA=this._currentA+this._differenceA*this._tweenProgress,this._resultB=this._currentB+this._differenceB*this._tweenProgress)},e}(r);t.DoubleValueTimelineState=i;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rd=[],e}return n(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._valueCount=0,this._rd.length=0},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);var e=this._valueCount,r=this._rd;if(null!==this._timelineData){var a=this._valueScale,i=this._valueArray,n=this._valueOffset+this._frameValueOffset+this._frameIndex*e;if(this._isTween){var s=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:n+e;if(1===a)for(var o=0;o<e;++o)r[e+o]=i[s+o]-i[n+o];else for(o=0;o<e;++o)r[e+o]=(i[s+o]-i[n+o])*a}else if(1===a)for(o=0;o<e;++o)r[o]=i[n+o];else for(o=0;o<e;++o)r[o]=i[n+o]*a}else for(o=0;o<e;++o)r[o]=0},e.prototype._onUpdateFrame=function(){if(t.prototype._onUpdateFrame.call(this),this._isTween){var e=this._valueCount,r=this._valueScale,a=this._tweenProgress,i=this._valueArray,n=this._rd,s=this._valueOffset+this._frameValueOffset+this._frameIndex*e;if(1===r)for(var o=0;o<e;++o)n[o]=i[s+o]+n[e+o]*a;else for(o=0;o<e;++o)n[o]=i[s+o]*r+n[e+o]*a}},e}(r);t.MutilpleValueTimelineState=s}(s||(s={})),function(t){var e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.toString=function(){return"[class dragonBones.ActionTimelineState]"},r.prototype._onCrossFrame=function(e){var r=this._armature.eventDispatcher;if(this._animationState.actionEnabled)for(var a=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+e],i=this._frameArray[a+1],n=this._animationData.parent.actions,s=0;s<i;++s){var o=this._frameArray[a+2+s],l=n[o];if(0===l.type){var h=t.BaseObject.borrowObject(t.EventObject);h.time=this._frameArray[a]/this._frameRate,h.animationState=this._animationState,t.EventObject.actionDataToInstance(l,h,this._armature),this._armature._bufferAction(h,!0)}else{var u=10===l.type?t.EventObject.FRAME_EVENT:t.EventObject.SOUND_EVENT;if(11===l.type||r.hasDBEventListener(u)){h=t.BaseObject.borrowObject(t.EventObject);h.time=this._frameArray[a]/this._frameRate,h.animationState=this._animationState,t.EventObject.actionDataToInstance(l,h,this._armature),this._armature._dragonBones.bufferEvent(h)}}}},r.prototype._onArriveAtFrame=function(){},r.prototype._onUpdateFrame=function(){},r.prototype.update=function(e){var r=this.playState,a=this.currentPlayTimes,i=this.currentTime;if(this._setCurrentTime(e)){var n=null===this._animationState._parent&&this._animationState.actionEnabled,s=this._armature.eventDispatcher;if(r<0){if(this.playState===r)return;if(this._animationState.displayControl&&this._animationState.resetToPose&&this._armature._sortZOrder(null,0),n&&s.hasDBEventListener(t.EventObject.START)){var o=t.BaseObject.borrowObject(t.EventObject);o.type=t.EventObject.START,o.armature=this._armature,o.animationState=this._animationState,this._armature._dragonBones.bufferEvent(o)}}var l=this._animationState.timeScale<0,h=null,u=null;if(n&&this.currentPlayTimes!==a&&(s.hasDBEventListener(t.EventObject.LOOP_COMPLETE)&&(h=t.BaseObject.borrowObject(t.EventObject),h.type=t.EventObject.LOOP_COMPLETE,h.armature=this._armature,h.animationState=this._animationState),this.playState>0&&s.hasDBEventListener(t.EventObject.COMPLETE)&&(u=t.BaseObject.borrowObject(t.EventObject),u.type=t.EventObject.COMPLETE,u.armature=this._armature,u.animationState=this._animationState)),this._frameCount>1){var c=this._timelineData,f=Math.floor(this.currentTime*this._frameRate),p=this._frameIndices[c.frameIndicesOffset+f];if(this._frameIndex!==p){var d=this._frameIndex;if(this._frameIndex=p,null!==this._timelineArray)if(this._frameOffset=this._animationData.frameOffset+this._timelineArray[c.offset+5+this._frameIndex],l){if(d<0){var m=Math.floor(i*this._frameRate);d=this._frameIndices[c.frameIndicesOffset+m],this.currentPlayTimes===a&&d===p&&(d=-1)}while(d>=0){var _=this._animationData.frameOffset+this._timelineArray[c.offset+5+d],y=this._frameArray[_]/this._frameRate;if(this._position<=y&&y<=this._position+this._duration&&this._onCrossFrame(d),null!==h&&0===d&&(this._armature._dragonBones.bufferEvent(h),h=null),d>0?d--:d=this._frameCount-1,d===p)break}}else{if(d<0){m=Math.floor(i*this._frameRate);d=this._frameIndices[c.frameIndicesOffset+m];_=this._animationData.frameOffset+this._timelineArray[c.offset+5+d],y=this._frameArray[_]/this._frameRate;this.currentPlayTimes===a&&(i<=y?d>0?d--:d=this._frameCount-1:d===p&&(d=-1))}while(d>=0){d<this._frameCount-1?d++:d=0;_=this._animationData.frameOffset+this._timelineArray[c.offset+5+d],y=this._frameArray[_]/this._frameRate;if(this._position<=y&&y<=this._position+this._duration&&this._onCrossFrame(d),null!==h&&0===d&&(this._armature._dragonBones.bufferEvent(h),h=null),d===p)break}}}}else if(this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData)){this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5];y=this._frameArray[this._frameOffset]/this._frameRate;this.currentPlayTimes===a?i<=y&&this._onCrossFrame(this._frameIndex):this._position<=y&&(l||null===h||(this._armature._dragonBones.bufferEvent(h),h=null),this._onCrossFrame(this._frameIndex))}null!==h&&this._armature._dragonBones.bufferEvent(h),null!==u&&this._armature._dragonBones.bufferEvent(u)}},r.prototype.setCurrentTime=function(t){this._setCurrentTime(t),this._frameIndex=-1},r}(t.TimelineState);t.ActionTimelineState=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.ZOrderTimelineState]"},e.prototype._onArriveAtFrame=function(){if(this.playState>=0){var t=this._frameArray[this._frameOffset+1];t>0?this._armature._sortZOrder(this._frameArray,this._frameOffset+2):this._armature._sortZOrder(null,0)}},e.prototype._onUpdateFrame=function(){},e}(t.TimelineState);t.ZOrderTimelineState=r;var a=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.toString=function(){return"[class dragonBones.BoneAllTimelineState]"},r.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._rd[2]=t.Transform.normalizeRadian(this._rd[2]),this._rd[3]=t.Transform.normalizeRadian(this._rd[3])),null===this._timelineData&&(this._rd[4]=1,this._rd[5]=1)},r.prototype.init=function(t,r,a){e.prototype.init.call(this,t,r,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=6,this._valueArray=this._animationData.parent.parent.frameFloatArray},r.prototype.fadeOut=function(){this.dirty=!1,this._rd[2]=t.Transform.normalizeRadian(this._rd[2]),this._rd[3]=t.Transform.normalizeRadian(this._rd[3])},r.prototype.blend=function(t){var e=this._armature.armatureData.scale,r=this._rd,a=this.target,i=a.target,n=a.blendWeight,s=i.animationPose;a.dirty>1?(s.x+=r[0]*n*e,s.y+=r[1]*n*e,s.rotation+=r[2]*n,s.skew+=r[3]*n,s.scaleX+=(r[4]-1)*n,s.scaleY+=(r[5]-1)*n):(s.x=r[0]*n*e,s.y=r[1]*n*e,s.rotation=r[2]*n,s.skew=r[3]*n,s.scaleX=(r[4]-1)*n+1,s.scaleY=(r[5]-1)*n+1),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},r}(t.MutilpleValueTimelineState);t.BoneAllTimelineState=a;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.BoneTranslateTimelineState]"},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight,i=r.animationPose;e.dirty>1?(i.x+=this._resultA*a,i.y+=this._resultB*a):1!==a?(i.x=this._resultA*a,i.y=this._resultB*a):(i.x=this._resultA,i.y=this._resultB),(t||this.dirty)&&(this.dirty=!1,r._transformDirty=!0)},e}(t.DoubleValueTimelineState);t.BoneTranslateTimelineState=i;var s=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.toString=function(){return"[class dragonBones.BoneRotateTimelineState]"},r.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._differenceA=t.Transform.normalizeRadian(this._differenceA),this._differenceB=t.Transform.normalizeRadian(this._differenceB))},r.prototype.init=function(t,r,a){e.prototype.init.call(this,t,r,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},r.prototype.fadeOut=function(){this.dirty=!1,this._resultA=t.Transform.normalizeRadian(this._resultA),this._resultB=t.Transform.normalizeRadian(this._resultB)},r.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight,i=r.animationPose;e.dirty>1?(i.rotation+=this._resultA*a,i.skew+=this._resultB*a):1!==a?(i.rotation=this._resultA*a,i.skew=this._resultB*a):(i.rotation=this._resultA,i.skew=this._resultB),(t||this.dirty)&&(this.dirty=!1,r._transformDirty=!0)},r}(t.DoubleValueTimelineState);t.BoneRotateTimelineState=s;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.BoneScaleTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._resultA=1,this._resultB=1)},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight,i=r.animationPose;e.dirty>1?(i.scaleX+=(this._resultA-1)*a,i.scaleY+=(this._resultB-1)*a):1!==a?(i.scaleX=(this._resultA-1)*a+1,i.scaleY=(this._resultB-1)*a+1):(i.scaleX=this._resultA,i.scaleY=this._resultB),(t||this.dirty)&&(this.dirty=!1,r._transformDirty=!0)},e}(t.DoubleValueTimelineState);t.BoneScaleTimelineState=o;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.SurfaceTimelineState]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},e.prototype.init=function(e,r,a){if(t.prototype.init.call(this,e,r,a),null!==this._timelineData){var i=this._animationData.parent.parent,n=i.frameIntArray,s=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3];this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=n[s+2],this._deformCount=n[s+1],this._deformOffset=n[s+3],this._sameValueOffset=n[s+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=i.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.target.target._deformVertices.length},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight,i=r._deformVertices,n=this._valueArray;if(null!==n)for(var s=this._valueCount,o=this._deformOffset,l=this._sameValueOffset,h=this._rd,u=0;u<this._deformCount;++u){var c=0;c=u<o?n[l+u]:u<o+s?h[u-o]:n[l+u-s],e.dirty>1?i[u]+=c*a:i[u]=c*a}else if(1===e.dirty)for(u=0;u<this._deformCount;++u)i[u]=0;(t||this.dirty)&&(this.dirty=!1,r._transformDirty=!0)},e}(t.MutilpleValueTimelineState);t.SurfaceTimelineState=l;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.AlphaTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._result=1)},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight;e.dirty>1?(r._alpha+=this._result*a,r._alpha>1&&(r._alpha=1)):r._alpha=this._result*a,(t||this.dirty)&&(this.dirty=!1,this._armature._alphaDirty=!0)},e}(t.SingleValueTimelineState);t.AlphaTimelineState=h;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.SlotDisplayTimelineState]"},e.prototype._onArriveAtFrame=function(){if(this.playState>=0){var t=this.target,e=null!==this._timelineData?this._frameArray[this._frameOffset+1]:t._slotData.displayIndex;t.displayIndex!==e&&t._setDisplayIndex(e,!0)}},e.prototype._onUpdateFrame=function(){},e}(t.TimelineState);t.SlotDisplayTimelineState=u;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._current=[0,0,0,0,0,0,0,0],e._difference=[0,0,0,0,0,0,0,0],e._result=[0,0,0,0,0,0,0,0],e}return n(e,t),e.toString=function(){return"[class dragonBones.SlotColorTimelineState]"},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._animationData.parent.parent,r=e.colorArray,a=e.frameIntArray,i=this._animationData.frameIntOffset+this._frameValueOffset+this._frameIndex,n=a[i];n<0&&(n+=65536),this._isTween?(this._current[0]=r[n++],this._current[1]=r[n++],this._current[2]=r[n++],this._current[3]=r[n++],this._current[4]=r[n++],this._current[5]=r[n++],this._current[6]=r[n++],this._current[7]=r[n++],n=this._frameIndex===this._frameCount-1?a[this._animationData.frameIntOffset+this._frameValueOffset]:a[i+1],n<0&&(n+=65536),this._difference[0]=r[n++]-this._current[0],this._difference[1]=r[n++]-this._current[1],this._difference[2]=r[n++]-this._current[2],this._difference[3]=r[n++]-this._current[3],this._difference[4]=r[n++]-this._current[4],this._difference[5]=r[n++]-this._current[5],this._difference[6]=r[n++]-this._current[6],this._difference[7]=r[n++]-this._current[7]):(this._result[0]=.01*r[n++],this._result[1]=.01*r[n++],this._result[2]=.01*r[n++],this._result[3]=.01*r[n++],this._result[4]=r[n++],this._result[5]=r[n++],this._result[6]=r[n++],this._result[7]=r[n++])}else{var s=this.target,o=s.slotData.color;this._result[0]=o.alphaMultiplier,this._result[1]=o.redMultiplier,this._result[2]=o.greenMultiplier,this._result[3]=o.blueMultiplier,this._result[4]=o.alphaOffset,this._result[5]=o.redOffset,this._result[6]=o.greenOffset,this._result[7]=o.blueOffset}},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._result[0]=.01*(this._current[0]+this._difference[0]*this._tweenProgress),this._result[1]=.01*(this._current[1]+this._difference[1]*this._tweenProgress),this._result[2]=.01*(this._current[2]+this._difference[2]*this._tweenProgress),this._result[3]=.01*(this._current[3]+this._difference[3]*this._tweenProgress),this._result[4]=this._current[4]+this._difference[4]*this._tweenProgress,this._result[5]=this._current[5]+this._difference[5]*this._tweenProgress,this._result[6]=this._current[6]+this._difference[6]*this._tweenProgress,this._result[7]=this._current[7]+this._difference[7]*this._tweenProgress)},e.prototype.fadeOut=function(){this._isTween=!1},e.prototype.update=function(e){if(t.prototype.update.call(this,e),this._isTween||this.dirty){var r=this.target,a=r._colorTransform;if(0!==this._animationState._fadeState||0!==this._animationState._subFadeState){if(a.alphaMultiplier!==this._result[0]||a.redMultiplier!==this._result[1]||a.greenMultiplier!==this._result[2]||a.blueMultiplier!==this._result[3]||a.alphaOffset!==this._result[4]||a.redOffset!==this._result[5]||a.greenOffset!==this._result[6]||a.blueOffset!==this._result[7]){var i=Math.pow(this._animationState._fadeProgress,4);a.alphaMultiplier+=(this._result[0]-a.alphaMultiplier)*i,a.redMultiplier+=(this._result[1]-a.redMultiplier)*i,a.greenMultiplier+=(this._result[2]-a.greenMultiplier)*i,a.blueMultiplier+=(this._result[3]-a.blueMultiplier)*i,a.alphaOffset+=(this._result[4]-a.alphaOffset)*i,a.redOffset+=(this._result[5]-a.redOffset)*i,a.greenOffset+=(this._result[6]-a.greenOffset)*i,a.blueOffset+=(this._result[7]-a.blueOffset)*i,r._colorDirty=!0}}else this.dirty&&(this.dirty=!1,a.alphaMultiplier===this._result[0]&&a.redMultiplier===this._result[1]&&a.greenMultiplier===this._result[2]&&a.blueMultiplier===this._result[3]&&a.alphaOffset===this._result[4]&&a.redOffset===this._result[5]&&a.greenOffset===this._result[6]&&a.blueOffset===this._result[7]||(a.alphaMultiplier=this._result[0],a.redMultiplier=this._result[1],a.greenMultiplier=this._result[2],a.blueMultiplier=this._result[3],a.alphaOffset=this._result[4],a.redOffset=this._result[5],a.greenOffset=this._result[6],a.blueOffset=this._result[7],r._colorDirty=!0))}},e}(t.TweenTimelineState);t.SlotColorTimelineState=c;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.SlotZIndexTimelineState]"},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null===this._timelineData){var e=this.target,r=e.target;this._result=r.slotData.zIndex}},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueArray=this._animationData.parent.parent.frameIntArray},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight;e.dirty>1?r._zIndex+=this._result*a:r._zIndex=this._result*a,(t||this.dirty)&&(this.dirty=!1,this._armature._zIndexDirty=!0)},e}(t.SingleValueTimelineState);t.SlotZIndexTimelineState=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.DeformTimelineState]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.displayFrame=null,this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},e.prototype.init=function(e,r,a){if(t.prototype.init.call(this,e,r,a),null!==this._timelineData){var i=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3],n=this._animationData.parent.parent,s=n.frameIntArray;this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=s[i+2],this._deformCount=s[i+1],this._deformOffset=s[i+3],this._sameValueOffset=s[i+4],this._sameValueOffset<0&&(this._sameValueOffset+=65536),this._sameValueOffset+=this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=n.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.displayFrame.deformVertices.length},e.prototype.blend=function(t){var e=this.target,r=e.target,a=e.blendWeight,i=this.displayFrame.deformVertices,n=this._valueArray;if(null!==n)for(var s=this._valueCount,o=this._deformOffset,l=this._sameValueOffset,h=this._rd,u=0;u<this._deformCount;++u){var c=0;c=u<o?n[l+u]:u<o+s?h[u-o]:n[l+u-s],e.dirty>1?i[u]+=c*a:i[u]=c*a}else if(1===e.dirty)for(u=0;u<this._deformCount;++u)i[u]=0;(t||this.dirty)&&(this.dirty=!1,r._geometryData===this.displayFrame.getGeometryData()&&(r._verticesDirty=!0))},e}(t.MutilpleValueTimelineState);t.DeformTimelineState=p;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.IKConstraintTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;if(null!==this._timelineData)e._bendPositive=this._currentA>0,e._weight=this._currentB;else{var r=e._constraintData;e._bendPositive=r.bendPositive,e._weight=r.weight}e.invalidUpdate(),this.dirty=!1},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.DoubleValueTimelineState);t.IKConstraintTimelineState=d;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationProgressTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.currentTime=this._result*e.totalTime),this.dirty=!1},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.SingleValueTimelineState);t.AnimationProgressTimelineState=m;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationWeightTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.weight=this._result),this.dirty=!1},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.SingleValueTimelineState);t.AnimationWeightTimelineState=_;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.AnimationParametersTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.parameterX=this._resultA,e.parameterY=this._resultB),this.dirty=!1},e.prototype.init=function(e,r,a){t.prototype.init.call(this,e,r,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.DoubleValueTimelineState);t.AnimationParametersTimelineState=y}(s||(s={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.actionDataToInstance=function(t,r,a){0===t.type?r.type=e.FRAME_EVENT:r.type=10===t.type?e.FRAME_EVENT:e.SOUND_EVENT,r.name=t.name,r.armature=a,r.actionData=t,r.data=t.data,null!==t.bone&&(r.bone=a.getBone(t.bone.name)),null!==t.slot&&(r.slot=a.getSlot(t.slot.name))},e.toString=function(){return"[class dragonBones.EventObject]"},e.prototype._onClear=function(){this.time=0,this.type="",this.name="",this.armature=null,this.bone=null,this.slot=null,this.animationState=null,this.actionData=null,this.data=null},e.START="start",e.LOOP_COMPLETE="loopComplete",e.COMPLETE="complete",e.FADE_IN="fadeIn",e.FADE_IN_COMPLETE="fadeInComplete",e.FADE_OUT="fadeOut",e.FADE_OUT_COMPLETE="fadeOutComplete",e.FRAME_EVENT="frameEvent",e.SOUND_EVENT="soundEvent",e}(t.BaseObject);t.EventObject=e}(s||(s={})),function(t){var e=function(){function t(){}return t._getArmatureType=function(t){switch(t.toLowerCase()){case"stage":return 2;case"armature":return 0;case"movieclip":return 1;default:return 0}},t._getBoneType=function(t){switch(t.toLowerCase()){case"bone":return 0;case"surface":return 1;default:return 0}},t._getPositionMode=function(t){switch(t.toLocaleLowerCase()){case"percent":return 1;case"fixed":return 0;default:return 1}},t._getSpacingMode=function(t){switch(t.toLocaleLowerCase()){case"length":return 0;case"percent":return 2;case"fixed":return 1;default:return 0}},t._getRotateMode=function(t){switch(t.toLocaleLowerCase()){case"tangent":return 0;case"chain":return 1;case"chainscale":return 2;default:return 0}},t._getDisplayType=function(t){switch(t.toLowerCase()){case"image":return 0;case"mesh":return 2;case"armature":return 1;case"boundingbox":return 3;case"path":return 4;default:return 0}},t._getBoundingBoxType=function(t){switch(t.toLowerCase()){case"rectangle":return 0;case"ellipse":return 1;case"polygon":return 2;default:return 0}},t._getBlendMode=function(t){switch(t.toLowerCase()){case"normal":return 0;case"add":return 1;case"alpha":return 2;case"darken":return 3;case"difference":return 4;case"erase":return 5;case"hardlight":return 6;case"invert":return 7;case"layer":return 8;case"lighten":return 9;case"multiply":return 10;case"overlay":return 11;case"screen":return 12;case"subtract":return 13;default:return 0}},t._getAnimationBlendType=function(t){switch(t.toLowerCase()){case"none":return 0;case"1d":return 1;default:return 0}},t._getActionType=function(t){switch(t.toLowerCase()){case"play":return 0;case"frame":return 10;case"sound":return 11;default:return 0}},t.DATA_VERSION_2_3="2.3",t.DATA_VERSION_3_0="3.0",t.DATA_VERSION_4_0="4.0",t.DATA_VERSION_4_5="4.5",t.DATA_VERSION_5_0="5.0",t.DATA_VERSION_5_5="5.5",t.DATA_VERSION_5_6="5.6",t.DATA_VERSION=t.DATA_VERSION_5_6,t.DATA_VERSIONS=[t.DATA_VERSION_4_0,t.DATA_VERSION_4_5,t.DATA_VERSION_5_0,t.DATA_VERSION_5_5,t.DATA_VERSION_5_6],t.TEXTURE_ATLAS="textureAtlas",t.SUB_TEXTURE="SubTexture",t.FORMAT="format",t.IMAGE_PATH="imagePath",t.WIDTH="width",t.HEIGHT="height",t.ROTATED="rotated",t.FRAME_X="frameX",t.FRAME_Y="frameY",t.FRAME_WIDTH="frameWidth",t.FRAME_HEIGHT="frameHeight",t.DRADON_BONES="dragonBones",t.USER_DATA="userData",t.ARMATURE="armature",t.CANVAS="canvas",t.BONE="bone",t.SURFACE="surface",t.SLOT="slot",t.CONSTRAINT="constraint",t.SKIN="skin",t.DISPLAY="display",t.FRAME="frame",t.IK="ik",t.PATH_CONSTRAINT="path",t.ANIMATION="animation",t.TIMELINE="timeline",t.FFD="ffd",t.TRANSLATE_FRAME="translateFrame",t.ROTATE_FRAME="rotateFrame",t.SCALE_FRAME="scaleFrame",t.DISPLAY_FRAME="displayFrame",t.COLOR_FRAME="colorFrame",t.DEFAULT_ACTIONS="defaultActions",t.ACTIONS="actions",t.EVENTS="events",t.INTS="ints",t.FLOATS="floats",t.STRINGS="strings",t.TRANSFORM="transform",t.PIVOT="pivot",t.AABB="aabb",t.COLOR="color",t.VERSION="version",t.COMPATIBLE_VERSION="compatibleVersion",t.FRAME_RATE="frameRate",t.TYPE="type",t.SUB_TYPE="subType",t.NAME="name",t.PARENT="parent",t.TARGET="target",t.STAGE="stage",t.SHARE="share",t.PATH="path",t.LENGTH="length",t.DISPLAY_INDEX="displayIndex",t.Z_ORDER="zOrder",t.Z_INDEX="zIndex",t.BLEND_MODE="blendMode",t.INHERIT_TRANSLATION="inheritTranslation",t.INHERIT_ROTATION="inheritRotation",t.INHERIT_SCALE="inheritScale",t.INHERIT_REFLECTION="inheritReflection",t.INHERIT_ANIMATION="inheritAnimation",t.INHERIT_DEFORM="inheritDeform",t.SEGMENT_X="segmentX",t.SEGMENT_Y="segmentY",t.BEND_POSITIVE="bendPositive",t.CHAIN="chain",t.WEIGHT="weight",t.BLEND_TYPE="blendType",t.FADE_IN_TIME="fadeInTime",t.PLAY_TIMES="playTimes",t.SCALE="scale",t.OFFSET="offset",t.POSITION="position",t.DURATION="duration",t.TWEEN_EASING="tweenEasing",t.TWEEN_ROTATE="tweenRotate",t.TWEEN_SCALE="tweenScale",t.CLOCK_WISE="clockwise",t.CURVE="curve",t.SOUND="sound",t.EVENT="event",t.ACTION="action",t.X="x",t.Y="y",t.SKEW_X="skX",t.SKEW_Y="skY",t.SCALE_X="scX",t.SCALE_Y="scY",t.VALUE="value",t.ROTATE="rotate",t.SKEW="skew",t.ALPHA="alpha",t.ALPHA_OFFSET="aO",t.RED_OFFSET="rO",t.GREEN_OFFSET="gO",t.BLUE_OFFSET="bO",t.ALPHA_MULTIPLIER="aM",t.RED_MULTIPLIER="rM",t.GREEN_MULTIPLIER="gM",t.BLUE_MULTIPLIER="bM",t.UVS="uvs",t.VERTICES="vertices",t.TRIANGLES="triangles",t.WEIGHTS="weights",t.SLOT_POSE="slotPose",t.BONE_POSE="bonePose",t.BONES="bones",t.POSITION_MODE="positionMode",t.SPACING_MODE="spacingMode",t.ROTATE_MODE="rotateMode",t.SPACING="spacing",t.ROTATE_OFFSET="rotateOffset",t.ROTATE_MIX="rotateMix",t.TRANSLATE_MIX="translateMix",t.TARGET_DISPLAY="targetDisplay",t.CLOSED="closed",t.CONSTANT_SPEED="constantSpeed",t.VERTEX_COUNT="vertexCount",t.LENGTHS="lengths",t.GOTO_AND_PLAY="gotoAndPlay",t.DEFAULT_NAME="default",t}();t.DataParser=e}(s||(s={})),function(t){var e=function(e){function i(){var r=null!==e&&e.apply(this,arguments)||this;return r._rawTextureAtlasIndex=0,r._rawBones=[],r._data=null,r._armature=null,r._bone=null,r._geometry=null,r._slot=null,r._skin=null,r._mesh=null,r._animation=null,r._timeline=null,r._rawTextureAtlases=null,r._frameValueType=0,r._defaultColorOffset=-1,r._prevClockwise=0,r._prevRotation=0,r._frameDefaultValue=0,r._frameValueScale=1,r._helpMatrixA=new t.Matrix,r._helpMatrixB=new t.Matrix,r._helpTransform=new t.Transform,r._helpColorTransform=new t.ColorTransform,r._helpPoint=new t.Point,r._helpArray=[],r._intArray=[],r._floatArray=[],r._frameIntArray=[],r._frameFloatArray=[],r._frameArray=[],r._timelineArray=[],r._colorArray=[],r._cacheRawMeshes=[],r._cacheMeshes=[],r._actionFrames=[],r._weightSlotPose={},r._weightBonePoses={},r._cacheBones={},r._slotChildActions={},r}return n(i,e),i._getBoolean=function(t,e,r){if(e in t){var i=t[e],n=Object(a["a"])(i);if("boolean"===n)return i;if("string"!==n)return!!i;switch(i){case"0":case"NaN":case"":case"false":case"null":case"undefined":return!1;default:return!0}}return r},i._getNumber=function(t,e,r){if(e in t){var a=t[e];return null===a||"NaN"===a?r:+a||0}return r},i._getString=function(t,e,r){if(e in t){var i=t[e],n=Object(a["a"])(i);return"string"===n?i:String(i)}return r},i.prototype._getCurvePoint=function(t,e,r,a,i,n,s,o,l,h){var u=1-l,c=u*u,f=l*l,p=u*c,d=3*l*c,m=3*u*f,_=l*f;h.x=p*t+d*r+m*i+_*s,h.y=p*e+d*a+m*n+_*o},i.prototype._samplingEasingCurve=function(t,e){var r=t.length;if(r%3===1){for(var a=-2,i=0,n=e.length;i<n;++i){var s=(i+1)/(n+1);while((a+6<r?t[a+6]:1)<s)a+=6;var o=a>=0&&a+6<r,l=o?t[a]:0,h=o?t[a+1]:0,u=t[a+2],c=t[a+3],f=t[a+4],p=t[a+5],d=o?t[a+6]:1,m=o?t[a+7]:1,_=0,y=1;while(y-_>1e-4){var g=.5*(y+_);this._getCurvePoint(l,h,u,c,f,p,d,m,g,this._helpPoint),s-this._helpPoint.x>0?_=g:y=g}e[i]=this._helpPoint.y}return!0}for(a=0,i=0,n=e.length;i<n;++i){s=(i+1)/(n+1);while(t[a+6]<s)a+=6;l=t[a],h=t[a+1],u=t[a+2],c=t[a+3],f=t[a+4],p=t[a+5],d=t[a+6],m=t[a+7],_=0,y=1;while(y-_>1e-4){g=.5*(y+_);this._getCurvePoint(l,h,u,c,f,p,d,m,g,this._helpPoint),s-this._helpPoint.x>0?_=g:y=g}e[i]=this._helpPoint.y}return!1},i.prototype._parseActionDataInFrame=function(e,r,a,i){t.DataParser.EVENT in e&&this._mergeActionFrame(e[t.DataParser.EVENT],r,10,a,i),t.DataParser.SOUND in e&&this._mergeActionFrame(e[t.DataParser.SOUND],r,11,a,i),t.DataParser.ACTION in e&&this._mergeActionFrame(e[t.DataParser.ACTION],r,0,a,i),t.DataParser.EVENTS in e&&this._mergeActionFrame(e[t.DataParser.EVENTS],r,10,a,i),t.DataParser.ACTIONS in e&&this._mergeActionFrame(e[t.DataParser.ACTIONS],r,0,a,i)},i.prototype._mergeActionFrame=function(t,e,a,i,n){for(var s=this._armature.actions.length,o=this._parseActionData(t,a,i,n),l=0,h=null,u=0,c=o;u<c.length;u++){var f=c[u];this._armature.addAction(f,!1)}0===this._actionFrames.length&&(h=new r,h.frameStart=0,this._actionFrames.push(h),h=null);for(var p=0,d=this._actionFrames;p<d.length;p++){var m=d[p];if(m.frameStart===e){h=m;break}if(m.frameStart>e)break;l++}null===h&&(h=new r,h.frameStart=e,this._actionFrames.splice(l,0,h));for(var _=0;_<o.length;++_)h.actions.push(s+_)},i.prototype._parseArmature=function(e,r){var a=t.BaseObject.borrowObject(t.ArmatureData);if(a.name=i._getString(e,t.DataParser.NAME,""),a.frameRate=i._getNumber(e,t.DataParser.FRAME_RATE,this._data.frameRate),a.scale=r,t.DataParser.TYPE in e&&"string"===typeof e[t.DataParser.TYPE]?a.type=t.DataParser._getArmatureType(e[t.DataParser.TYPE]):a.type=i._getNumber(e,t.DataParser.TYPE,0),0===a.frameRate&&(a.frameRate=24),this._armature=a,t.DataParser.CANVAS in e){var n=e[t.DataParser.CANVAS],s=t.BaseObject.borrowObject(t.CanvasData);t.DataParser.COLOR in n?s.hasBackground=!0:s.hasBackground=!1,s.color=i._getNumber(n,t.DataParser.COLOR,0),s.x=i._getNumber(n,t.DataParser.X,0)*a.scale,s.y=i._getNumber(n,t.DataParser.Y,0)*a.scale,s.width=i._getNumber(n,t.DataParser.WIDTH,0)*a.scale,s.height=i._getNumber(n,t.DataParser.HEIGHT,0)*a.scale,a.canvas=s}if(t.DataParser.AABB in e){var o=e[t.DataParser.AABB];a.aabb.x=i._getNumber(o,t.DataParser.X,0)*a.scale,a.aabb.y=i._getNumber(o,t.DataParser.Y,0)*a.scale,a.aabb.width=i._getNumber(o,t.DataParser.WIDTH,0)*a.scale,a.aabb.height=i._getNumber(o,t.DataParser.HEIGHT,0)*a.scale}if(t.DataParser.BONE in e)for(var l=e[t.DataParser.BONE],h=0,u=l;h<u.length;h++){var c=u[h],f=i._getString(c,t.DataParser.PARENT,""),p=this._parseBone(c);if(f.length>0){var d=a.getBone(f);null!==d?p.parent=d:(f in this._cacheBones||(this._cacheBones[f]=[]),this._cacheBones[f].push(p))}if(p.name in this._cacheBones){for(var m=0,_=this._cacheBones[p.name];m<_.length;m++){var y=_[m];y.parent=p}delete this._cacheBones[p.name]}a.addBone(p),this._rawBones.push(p)}if(t.DataParser.IK in e)for(var g=e[t.DataParser.IK],v=0,b=g;v<b.length;v++){var T=b[v],A=this._parseIKConstraint(T);A&&a.addConstraint(A)}if(a.sortBones(),t.DataParser.SLOT in e)for(var D=0,x=e[t.DataParser.SLOT],S=0,E=x;S<E.length;S++){var w=E[S];a.addSlot(this._parseSlot(w,D++))}if(t.DataParser.SKIN in e)for(var M=e[t.DataParser.SKIN],P=0,O=M;P<O.length;P++){var I=O[P];a.addSkin(this._parseSkin(I))}if(t.DataParser.PATH_CONSTRAINT in e)for(var C=e[t.DataParser.PATH_CONSTRAINT],R=0,F=C;R<F.length;R++){var B=F[R];A=this._parsePathConstraint(B);A&&a.addConstraint(A)}for(var N=0,k=this._cacheRawMeshes.length;N<k;++N){var V=this._cacheRawMeshes[N],L=i._getString(V,t.DataParser.SHARE,"");if(0!==L.length){var j=i._getString(V,t.DataParser.SKIN,t.DataParser.DEFAULT_NAME);0===j.length&&(j=t.DataParser.DEFAULT_NAME);var U=a.getMesh(j,"",L);if(null!==U){var Y=this._cacheMeshes[N];Y.geometry.shareFrom(U.geometry)}}}if(t.DataParser.ANIMATION in e)for(var X=e[t.DataParser.ANIMATION],W=0,G=X;W<G.length;W++){var H=G[W],q=this._parseAnimation(H);a.addAnimation(q)}if(t.DataParser.DEFAULT_ACTIONS in e)for(var z=this._parseActionData(e[t.DataParser.DEFAULT_ACTIONS],0,null,null),Z=0,K=z;Z<K.length;Z++){var $=K[Z];if(a.addAction($,!0),0===$.type){q=a.getAnimation($.name);null!==q&&(a.defaultAnimation=q)}}if(t.DataParser.ACTIONS in e){z=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null);for(var J=0,Q=z;J<Q.length;J++){$=Q[J];a.addAction($,!1)}}for(var tt in this._rawBones.length=0,this._cacheRawMeshes.length=0,this._cacheMeshes.length=0,this._armature=null,this._weightSlotPose)delete this._weightSlotPose[tt];for(var tt in this._weightBonePoses)delete this._weightBonePoses[tt];for(var tt in this._cacheBones)delete this._cacheBones[tt];for(var tt in this._slotChildActions)delete this._slotChildActions[tt];return a},i.prototype._parseBone=function(e){var r=0;if(r=t.DataParser.TYPE in e&&"string"===typeof e[t.DataParser.TYPE]?t.DataParser._getBoneType(e[t.DataParser.TYPE]):i._getNumber(e,t.DataParser.TYPE,0),0===r){var a=this._armature.scale,n=t.BaseObject.borrowObject(t.BoneData);return n.inheritTranslation=i._getBoolean(e,t.DataParser.INHERIT_TRANSLATION,!0),n.inheritRotation=i._getBoolean(e,t.DataParser.INHERIT_ROTATION,!0),n.inheritScale=i._getBoolean(e,t.DataParser.INHERIT_SCALE,!0),n.inheritReflection=i._getBoolean(e,t.DataParser.INHERIT_REFLECTION,!0),n.length=i._getNumber(e,t.DataParser.LENGTH,0)*a,n.alpha=i._getNumber(e,t.DataParser.ALPHA,1),n.name=i._getString(e,t.DataParser.NAME,""),t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],n.transform,a),n}var s=t.BaseObject.borrowObject(t.SurfaceData);return s.alpha=i._getNumber(e,t.DataParser.ALPHA,1),s.name=i._getString(e,t.DataParser.NAME,""),s.segmentX=i._getNumber(e,t.DataParser.SEGMENT_X,0),s.segmentY=i._getNumber(e,t.DataParser.SEGMENT_Y,0),this._parseGeometry(e,s.geometry),s},i.prototype._parseIKConstraint=function(e){var r=this._armature.getBone(i._getString(e,t.DataParser.BONE,""));if(null===r)return null;var a=this._armature.getBone(i._getString(e,t.DataParser.TARGET,""));if(null===a)return null;var n=i._getNumber(e,t.DataParser.CHAIN,0),s=t.BaseObject.borrowObject(t.IKConstraintData);return s.scaleEnabled=i._getBoolean(e,t.DataParser.SCALE,!1),s.bendPositive=i._getBoolean(e,t.DataParser.BEND_POSITIVE,!0),s.weight=i._getNumber(e,t.DataParser.WEIGHT,1),s.name=i._getString(e,t.DataParser.NAME,""),s.type=0,s.target=a,n>0&&null!==r.parent?(s.root=r.parent,s.bone=r):(s.root=r,s.bone=null),s},i.prototype._parsePathConstraint=function(e){var r=this._armature.getSlot(i._getString(e,t.DataParser.TARGET,""));if(null===r)return null;var a=this._armature.defaultSkin;if(null===a)return null;var n=a.getDisplay(r.name,i._getString(e,t.DataParser.TARGET_DISPLAY,r.name));if(null===n||!(n instanceof t.PathDisplayData))return null;var s=e[t.DataParser.BONES];if(null===s||0===s.length)return null;var o=t.BaseObject.borrowObject(t.PathConstraintData);o.name=i._getString(e,t.DataParser.NAME,""),o.type=1,o.pathSlot=r,o.pathDisplayData=n,o.target=r.parent,o.positionMode=t.DataParser._getPositionMode(i._getString(e,t.DataParser.POSITION_MODE,"")),o.spacingMode=t.DataParser._getSpacingMode(i._getString(e,t.DataParser.SPACING_MODE,"")),o.rotateMode=t.DataParser._getRotateMode(i._getString(e,t.DataParser.ROTATE_MODE,"")),o.position=i._getNumber(e,t.DataParser.POSITION,0),o.spacing=i._getNumber(e,t.DataParser.SPACING,0),o.rotateOffset=i._getNumber(e,t.DataParser.ROTATE_OFFSET,0),o.rotateMix=i._getNumber(e,t.DataParser.ROTATE_MIX,1),o.translateMix=i._getNumber(e,t.DataParser.TRANSLATE_MIX,1);for(var l=0,h=s;l<h.length;l++){var u=h[l],c=this._armature.getBone(u);null!==c&&(o.AddBone(c),null===o.root&&(o.root=c))}return o},i.prototype._parseSlot=function(e,r){var a=t.BaseObject.borrowObject(t.SlotData);return a.displayIndex=i._getNumber(e,t.DataParser.DISPLAY_INDEX,0),a.zOrder=r,a.zIndex=i._getNumber(e,t.DataParser.Z_INDEX,0),a.alpha=i._getNumber(e,t.DataParser.ALPHA,1),a.name=i._getString(e,t.DataParser.NAME,""),a.parent=this._armature.getBone(i._getString(e,t.DataParser.PARENT,"")),t.DataParser.BLEND_MODE in e&&"string"===typeof e[t.DataParser.BLEND_MODE]?a.blendMode=t.DataParser._getBlendMode(e[t.DataParser.BLEND_MODE]):a.blendMode=i._getNumber(e,t.DataParser.BLEND_MODE,0),t.DataParser.COLOR in e?(a.color=t.SlotData.createColor(),this._parseColorTransform(e[t.DataParser.COLOR],a.color)):a.color=t.SlotData.DEFAULT_COLOR,t.DataParser.ACTIONS in e&&(this._slotChildActions[a.name]=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null)),a},i.prototype._parseSkin=function(e){var r=t.BaseObject.borrowObject(t.SkinData);if(r.name=i._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===r.name.length&&(r.name=t.DataParser.DEFAULT_NAME),t.DataParser.SLOT in e){var a=e[t.DataParser.SLOT];this._skin=r;for(var n=0,s=a;n<s.length;n++){var o=s[n],l=i._getString(o,t.DataParser.NAME,""),h=this._armature.getSlot(l);if(null!==h){if(this._slot=h,t.DataParser.DISPLAY in o)for(var u=o[t.DataParser.DISPLAY],c=0,f=u;c<f.length;c++){var p=f[c];p?r.addDisplay(l,this._parseDisplay(p)):r.addDisplay(l,null)}this._slot=null}}this._skin=null}return r},i.prototype._parseDisplay=function(e){var r=i._getString(e,t.DataParser.NAME,""),a=i._getString(e,t.DataParser.PATH,""),n=0,s=null;switch(n=t.DataParser.TYPE in e&&"string"===typeof e[t.DataParser.TYPE]?t.DataParser._getDisplayType(e[t.DataParser.TYPE]):i._getNumber(e,t.DataParser.TYPE,n),n){case 0:var o=s=t.BaseObject.borrowObject(t.ImageDisplayData);o.name=r,o.path=a.length>0?a:r,this._parsePivot(e,o);break;case 1:var l=s=t.BaseObject.borrowObject(t.ArmatureDisplayData);if(l.name=r,l.path=a.length>0?a:r,l.inheritAnimation=!0,t.DataParser.ACTIONS in e)for(var h=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null),u=0,c=h;u<c.length;u++){var f=c[u];l.addAction(f)}else if(this._slot.name in this._slotChildActions){var p=this._skin.getDisplays(this._slot.name);if(null===p?0===this._slot.displayIndex:this._slot.displayIndex===p.length){for(var d=0,m=this._slotChildActions[this._slot.name];d<m.length;d++){f=m[d];l.addAction(f)}delete this._slotChildActions[this._slot.name]}}break;case 2:var _=s=t.BaseObject.borrowObject(t.MeshDisplayData);_.geometry.inheritDeform=i._getBoolean(e,t.DataParser.INHERIT_DEFORM,!0),_.name=r,_.path=a.length>0?a:r,t.DataParser.SHARE in e?(_.geometry.data=this._data,this._cacheRawMeshes.push(e),this._cacheMeshes.push(_)):this._parseMesh(e,_);break;case 3:var y=this._parseBoundingBox(e);if(null!==y){var g=s=t.BaseObject.borrowObject(t.BoundingBoxDisplayData);g.name=r,g.path=a.length>0?a:r,g.boundingBox=y}break;case 4:var v=e[t.DataParser.LENGTHS],b=s=t.BaseObject.borrowObject(t.PathDisplayData);b.closed=i._getBoolean(e,t.DataParser.CLOSED,!1),b.constantSpeed=i._getBoolean(e,t.DataParser.CONSTANT_SPEED,!1),b.name=r,b.path=a.length>0?a:r,b.curveLengths.length=v.length;for(var T=0,A=v.length;T<A;++T)b.curveLengths[T]=v[T];this._parsePath(e,b);break}return null!==s&&t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],s.transform,this._armature.scale),s},i.prototype._parsePath=function(t,e){this._parseGeometry(t,e.geometry)},i.prototype._parsePivot=function(e,r){if(t.DataParser.PIVOT in e){var a=e[t.DataParser.PIVOT];r.pivot.x=i._getNumber(a,t.DataParser.X,0),r.pivot.y=i._getNumber(a,t.DataParser.Y,0)}else r.pivot.x=.5,r.pivot.y=.5},i.prototype._parseMesh=function(e,r){if(this._parseGeometry(e,r.geometry),t.DataParser.WEIGHTS in e){var a=e[t.DataParser.SLOT_POSE],i=e[t.DataParser.BONE_POSE],n=this._skin.name+"_"+this._slot.name+"_"+r.name;this._weightSlotPose[n]=a,this._weightBonePoses[n]=i}},i.prototype._parseBoundingBox=function(e){var r=null,a=0;switch(a=t.DataParser.SUB_TYPE in e&&"string"===typeof e[t.DataParser.SUB_TYPE]?t.DataParser._getBoundingBoxType(e[t.DataParser.SUB_TYPE]):i._getNumber(e,t.DataParser.SUB_TYPE,a),a){case 0:r=t.BaseObject.borrowObject(t.RectangleBoundingBoxData);break;case 1:r=t.BaseObject.borrowObject(t.EllipseBoundingBoxData);break;case 2:r=this._parsePolygonBoundingBox(e);break}return null!==r&&(r.color=i._getNumber(e,t.DataParser.COLOR,0),0!==r.type&&1!==r.type||(r.width=i._getNumber(e,t.DataParser.WIDTH,0),r.height=i._getNumber(e,t.DataParser.HEIGHT,0))),r},i.prototype._parsePolygonBoundingBox=function(e){var r=t.BaseObject.borrowObject(t.PolygonBoundingBoxData);if(t.DataParser.VERTICES in e){var a=this._armature.scale,i=e[t.DataParser.VERTICES],n=r.vertices;n.length=i.length;for(var s=0,o=i.length;s<o;s+=2){var l=i[s]*a,h=i[s+1]*a;n[s]=l,n[s+1]=h,0===s?(r.x=l,r.y=h,r.width=l,r.height=h):(l<r.x?r.x=l:l>r.width&&(r.width=l),h<r.y?r.y=h:h>r.height&&(r.height=h))}r.width-=r.x,r.height-=r.y}else console.warn("Data error.\n Please reexport DragonBones Data to fixed the bug.");return r},i.prototype._parseAnimation=function(e){var r=t.BaseObject.borrowObject(t.AnimationData);if(r.blendType=t.DataParser._getAnimationBlendType(i._getString(e,t.DataParser.BLEND_TYPE,"")),r.frameCount=i._getNumber(e,t.DataParser.DURATION,0),r.playTimes=i._getNumber(e,t.DataParser.PLAY_TIMES,1),r.duration=r.frameCount/this._armature.frameRate,r.fadeInTime=i._getNumber(e,t.DataParser.FADE_IN_TIME,0),r.scale=i._getNumber(e,t.DataParser.SCALE,1),r.name=i._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===r.name.length&&(r.name=t.DataParser.DEFAULT_NAME),r.frameIntOffset=this._frameIntArray.length,r.frameFloatOffset=this._frameFloatArray.length,r.frameOffset=this._frameArray.length,this._animation=r,t.DataParser.FRAME in e){var a=e[t.DataParser.FRAME],n=a.length;if(n>0)for(var s=0,o=0;s<n;++s){var l=a[s];this._parseActionDataInFrame(l,o,null,null),o+=i._getNumber(l,t.DataParser.DURATION,1)}}if(t.DataParser.Z_ORDER in e&&(this._animation.zOrderTimeline=this._parseTimeline(e[t.DataParser.Z_ORDER],null,t.DataParser.FRAME,1,0,0,this._parseZOrderFrame)),t.DataParser.BONE in e)for(var h=e[t.DataParser.BONE],u=0,c=h;u<c.length;u++){var f=c[u];this._parseBoneTimeline(f)}if(t.DataParser.SLOT in e){h=e[t.DataParser.SLOT];for(var p=0,d=h;p<d.length;p++){f=d[p];this._parseSlotTimeline(f)}}if(t.DataParser.FFD in e){h=e[t.DataParser.FFD];for(var m=0,_=h;m<_.length;m++){f=_[m];var y=i._getString(f,t.DataParser.SKIN,t.DataParser.DEFAULT_NAME),g=i._getString(f,t.DataParser.SLOT,""),v=i._getString(f,t.DataParser.NAME,"");if(0===y.length&&(y=t.DataParser.DEFAULT_NAME),this._slot=this._armature.getSlot(g),this._mesh=this._armature.getMesh(y,g,v),null!==this._slot&&null!==this._mesh){var b=this._parseTimeline(f,null,t.DataParser.FRAME,22,2,0,this._parseSlotDeformFrame);null!==b&&this._animation.addSlotTimeline(g,b),this._slot=null,this._mesh=null}}}if(t.DataParser.IK in e){h=e[t.DataParser.IK];for(var T=0,A=h;T<A.length;T++){f=A[T];var D=i._getString(f,t.DataParser.NAME,""),x=this._armature.getConstraint(D);if(null!==x){b=this._parseTimeline(f,null,t.DataParser.FRAME,30,1,2,this._parseIKConstraintFrame);null!==b&&this._animation.addConstraintTimeline(D,b)}}}if(this._actionFrames.length>0&&(this._animation.actionTimeline=this._parseTimeline(null,this._actionFrames,"",0,0,0,this._parseActionFrame),this._actionFrames.length=0),t.DataParser.TIMELINE in e){h=e[t.DataParser.TIMELINE];for(var S=0,E=h;S<E.length;S++){f=E[S];var w=i._getNumber(f,t.DataParser.TYPE,0),M=i._getString(f,t.DataParser.NAME,"");b=null;switch(w){case 0:break;case 20:case 23:case 60:case 24:case 40:case 41:if(20===w?(this._frameValueType=0,this._frameValueScale=1):(this._frameValueType=1,this._frameValueScale=23===w?1:40===w||41===w?1e4:100),this._frameDefaultValue=60===w||24===w||41===w?1:0,40===w&&0!==r.blendType){b=t.BaseObject.borrowObject(t.AnimationTimelineData);var P=b;P.x=i._getNumber(f,t.DataParser.X,0),P.y=i._getNumber(f,t.DataParser.Y,0)}b=this._parseTimeline(f,null,t.DataParser.FRAME,w,this._frameValueType,1,this._parseSingleValueFrame,b);break;case 11:case 12:case 13:case 30:case 42:30===w||42===w?(this._frameValueType=1,this._frameValueScale=42===w?1e4:100):(this._frameValueScale=12===w?t.Transform.DEG_RAD:1,this._frameValueType=2),this._frameDefaultValue=13===w||30===w?1:0,b=this._parseTimeline(f,null,t.DataParser.FRAME,w,this._frameValueType,2,this._parseDoubleValueFrame);break;case 1:break;case 50:var O=this._armature.getBone(M);if(null===O)continue;this._geometry=O.geometry,b=this._parseTimeline(f,null,t.DataParser.FRAME,w,2,0,this._parseDeformFrame),this._geometry=null;break;case 22:for(var y in this._geometry=null,this._armature.skins){var I=this._armature.skins[y];for(var C in I.displays)for(var R=I.displays[C],F=0,B=R;F<B.length;F++){var N=B[F];if(null!==N&&N.name===M){this._geometry=N.geometry;break}}}if(null===this._geometry)continue;b=this._parseTimeline(f,null,t.DataParser.FRAME,w,2,0,this._parseDeformFrame),this._geometry=null;break;case 21:b=this._parseTimeline(f,null,t.DataParser.FRAME,w,1,1,this._parseSlotColorFrame);break}if(null!==b)switch(w){case 0:break;case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(M,b);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(M,b);break;case 30:this._animation.addConstraintTimeline(M,b);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(M,b);break}}}return this._animation=null,r},i.prototype._parseTimeline=function(e,a,n,s,o,l,h,u){if(void 0===u&&(u=null),null!==e&&n.length>0&&n in e&&(a=e[n]),null===a)return null;var c=a.length;if(0===c)return null;var f=this._frameIntArray.length,p=this._frameFloatArray.length,d=this._timelineArray.length;switch(null===u&&(u=t.BaseObject.borrowObject(t.TimelineData)),u.type=s,u.offset=d,this._frameValueType=o,this._timeline=u,this._timelineArray.length+=5+c,null!==e?(this._timelineArray[d+0]=Math.round(100*i._getNumber(e,t.DataParser.SCALE,1)),this._timelineArray[d+1]=Math.round(100*i._getNumber(e,t.DataParser.OFFSET,0))):(this._timelineArray[d+0]=100,this._timelineArray[d+1]=0),this._timelineArray[d+2]=c,this._timelineArray[d+3]=l,this._frameValueType){case 0:this._timelineArray[d+4]=0;break;case 1:this._timelineArray[d+4]=f-this._animation.frameIntOffset;break;case 2:this._timelineArray[d+4]=p-this._animation.frameFloatOffset;break}if(1===c)u.frameIndicesOffset=-1,this._timelineArray[d+5+0]=h.call(this,a[0],0,0)-this._animation.frameOffset;else{var m=this._animation.frameCount+1,_=this._data.frameIndices,y=_.length;_.length+=m,u.frameIndicesOffset=y;for(var g=0,v=0,b=0,T=0;g<m;++g){if(b+T<=g&&v<c){var A=a[v];b=g,T=v===c-1?this._animation.frameCount-b:A instanceof r?this._actionFrames[v+1].frameStart-b:i._getNumber(A,t.DataParser.DURATION,1),this._timelineArray[d+5+v]=h.call(this,A,b,T)-this._animation.frameOffset,v++}_[y+g]=v-1}}return this._timeline=null,u},i.prototype._parseBoneTimeline=function(e){var r=this._armature.getBone(i._getString(e,t.DataParser.NAME,""));if(null!==r){if(this._bone=r,this._slot=this._armature.getSlot(this._bone.name),t.DataParser.TRANSLATE_FRAME in e){this._frameDefaultValue=0,this._frameValueScale=1;var a=this._parseTimeline(e,null,t.DataParser.TRANSLATE_FRAME,11,2,2,this._parseDoubleValueFrame);null!==a&&this._animation.addBoneTimeline(r.name,a)}if(t.DataParser.ROTATE_FRAME in e){this._frameDefaultValue=0,this._frameValueScale=1;a=this._parseTimeline(e,null,t.DataParser.ROTATE_FRAME,12,2,2,this._parseBoneRotateFrame);null!==a&&this._animation.addBoneTimeline(r.name,a)}if(t.DataParser.SCALE_FRAME in e){this._frameDefaultValue=1,this._frameValueScale=1;a=this._parseTimeline(e,null,t.DataParser.SCALE_FRAME,13,2,2,this._parseBoneScaleFrame);null!==a&&this._animation.addBoneTimeline(r.name,a)}if(t.DataParser.FRAME in e){a=this._parseTimeline(e,null,t.DataParser.FRAME,10,2,6,this._parseBoneAllFrame);null!==a&&this._animation.addBoneTimeline(r.name,a)}this._bone=null,this._slot=null}},i.prototype._parseSlotTimeline=function(e){var r=this._armature.getSlot(i._getString(e,t.DataParser.NAME,""));if(null!==r){var a=null,n=null;this._slot=r,a=t.DataParser.DISPLAY_FRAME in e?this._parseTimeline(e,null,t.DataParser.DISPLAY_FRAME,20,0,0,this._parseSlotDisplayFrame):this._parseTimeline(e,null,t.DataParser.FRAME,20,0,0,this._parseSlotDisplayFrame),n=t.DataParser.COLOR_FRAME in e?this._parseTimeline(e,null,t.DataParser.COLOR_FRAME,21,1,1,this._parseSlotColorFrame):this._parseTimeline(e,null,t.DataParser.FRAME,21,1,1,this._parseSlotColorFrame),null!==a&&this._animation.addSlotTimeline(r.name,a),null!==n&&this._animation.addSlotTimeline(r.name,n),this._slot=null}},i.prototype._parseFrame=function(t,e,r){var a=this._frameArray.length;return this._frameArray.length+=1,this._frameArray[a+0]=e,a},i.prototype._parseTweenFrame=function(e,r,a){var n=this._parseFrame(e,r,a);if(a>0)if(t.DataParser.CURVE in e){var s=a+1;this._helpArray.length=s;var o=this._samplingEasingCurve(e[t.DataParser.CURVE],this._helpArray);this._frameArray.length+=2+this._helpArray.length,this._frameArray[n+1]=2,this._frameArray[n+2]=o?s:-s;for(var l=0;l<s;++l)this._frameArray[n+3+l]=Math.round(1e4*this._helpArray[l])}else{var h=-2,u=h;t.DataParser.TWEEN_EASING in e&&(u=i._getNumber(e,t.DataParser.TWEEN_EASING,h)),u===h?(this._frameArray.length+=1,this._frameArray[n+1]=0):0===u?(this._frameArray.length+=1,this._frameArray[n+1]=1):u<0?(this._frameArray.length+=2,this._frameArray[n+1]=3,this._frameArray[n+2]=Math.round(100*-u)):u<=1?(this._frameArray.length+=2,this._frameArray[n+1]=4,this._frameArray[n+2]=Math.round(100*u)):(this._frameArray.length+=2,this._frameArray[n+1]=5,this._frameArray[n+2]=Math.round(100*u-100))}else this._frameArray.length+=1,this._frameArray[n+1]=0;return n},i.prototype._parseSingleValueFrame=function(e,r,a){var n=0;switch(this._frameValueType){case 0:n=this._parseFrame(e,r,a),this._frameArray.length+=1,this._frameArray[n+1]=i._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue);break;case 1:n=this._parseTweenFrame(e,r,a);var s=this._frameIntArray.length;this._frameIntArray.length+=1,this._frameIntArray[s]=Math.round(i._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale);break;case 2:n=this._parseTweenFrame(e,r,a);s=this._frameFloatArray.length;this._frameFloatArray.length+=1,this._frameFloatArray[s]=i._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale;break}return n},i.prototype._parseDoubleValueFrame=function(e,r,a){var n=0;switch(this._frameValueType){case 0:n=this._parseFrame(e,r,a),this._frameArray.length+=2,this._frameArray[n+1]=i._getNumber(e,t.DataParser.X,this._frameDefaultValue),this._frameArray[n+2]=i._getNumber(e,t.DataParser.Y,this._frameDefaultValue);break;case 1:n=this._parseTweenFrame(e,r,a);var s=this._frameIntArray.length;this._frameIntArray.length+=2,this._frameIntArray[s]=Math.round(i._getNumber(e,t.DataParser.X,this._frameDefaultValue)*this._frameValueScale),this._frameIntArray[s+1]=Math.round(i._getNumber(e,t.DataParser.Y,this._frameDefaultValue)*this._frameValueScale);break;case 2:n=this._parseTweenFrame(e,r,a);s=this._frameFloatArray.length;this._frameFloatArray.length+=2,this._frameFloatArray[s]=i._getNumber(e,t.DataParser.X,this._frameDefaultValue)*this._frameValueScale,this._frameFloatArray[s+1]=i._getNumber(e,t.DataParser.Y,this._frameDefaultValue)*this._frameValueScale;break}return n},i.prototype._parseActionFrame=function(t,e,r){var a=this._frameArray.length,i=t.actions.length;this._frameArray.length+=2+i,this._frameArray[a+0]=e,this._frameArray[a+0+1]=i;for(var n=0;n<i;++n)this._frameArray[a+0+2+n]=t.actions[n];return a},i.prototype._parseZOrderFrame=function(e,r,a){var i=this._parseFrame(e,r,a);if(t.DataParser.Z_ORDER in e){var n=e[t.DataParser.Z_ORDER];if(n.length>0){for(var s=this._armature.sortedSlots.length,o=new Array(s-n.length/2),l=new Array(s),h=0;h<o.length;++h)o[h]=0;for(var u=0;u<s;++u)l[u]=-1;for(var c=0,f=0,p=0,d=n.length;p<d;p+=2){var m=n[p],_=n[p+1];while(c!==m)o[f++]=c++;var y=c+_;l[y]=c++}while(c<s)o[f++]=c++;this._frameArray.length+=1+s,this._frameArray[i+1]=s;var g=s;while(g--)-1===l[g]?this._frameArray[i+2+g]=o[--f]||0:this._frameArray[i+2+g]=l[g]||0;return i}}return this._frameArray.length+=1,this._frameArray[i+1]=0,i},i.prototype._parseBoneAllFrame=function(e,r,a){this._helpTransform.identity(),t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],this._helpTransform,1);var n=this._helpTransform.rotation;0!==r&&(0===this._prevClockwise?n=this._prevRotation+t.Transform.normalizeRadian(n-this._prevRotation):((this._prevClockwise>0?n>=this._prevRotation:n<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),n=this._prevRotation+n-this._prevRotation+t.Transform.PI_D*this._prevClockwise)),this._prevClockwise=i._getNumber(e,t.DataParser.TWEEN_ROTATE,0),this._prevRotation=n;var s=this._parseTweenFrame(e,r,a),o=this._frameFloatArray.length;return this._frameFloatArray.length+=6,this._frameFloatArray[o++]=this._helpTransform.x,this._frameFloatArray[o++]=this._helpTransform.y,this._frameFloatArray[o++]=n,this._frameFloatArray[o++]=this._helpTransform.skew,this._frameFloatArray[o++]=this._helpTransform.scaleX,this._frameFloatArray[o++]=this._helpTransform.scaleY,this._parseActionDataInFrame(e,r,this._bone,this._slot),s},i.prototype._parseBoneTranslateFrame=function(e,r,a){var n=this._parseTweenFrame(e,r,a),s=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[s++]=i._getNumber(e,t.DataParser.X,0),this._frameFloatArray[s++]=i._getNumber(e,t.DataParser.Y,0),n},i.prototype._parseBoneRotateFrame=function(e,r,a){var n=i._getNumber(e,t.DataParser.ROTATE,0)*t.Transform.DEG_RAD;0!==r&&(0===this._prevClockwise?n=this._prevRotation+t.Transform.normalizeRadian(n-this._prevRotation):((this._prevClockwise>0?n>=this._prevRotation:n<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),n=this._prevRotation+n-this._prevRotation+t.Transform.PI_D*this._prevClockwise)),this._prevClockwise=i._getNumber(e,t.DataParser.CLOCK_WISE,0),this._prevRotation=n;var s=this._parseTweenFrame(e,r,a),o=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[o++]=n,this._frameFloatArray[o++]=i._getNumber(e,t.DataParser.SKEW,0)*t.Transform.DEG_RAD,s},i.prototype._parseBoneScaleFrame=function(e,r,a){var n=this._parseTweenFrame(e,r,a),s=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[s++]=i._getNumber(e,t.DataParser.X,1),this._frameFloatArray[s++]=i._getNumber(e,t.DataParser.Y,1),n},i.prototype._parseSlotDisplayFrame=function(e,r,a){var n=this._parseFrame(e,r,a);return this._frameArray.length+=1,t.DataParser.VALUE in e?this._frameArray[n+1]=i._getNumber(e,t.DataParser.VALUE,0):this._frameArray[n+1]=i._getNumber(e,t.DataParser.DISPLAY_INDEX,0),this._parseActionDataInFrame(e,r,this._slot.parent,this._slot),n},i.prototype._parseSlotColorFrame=function(e,r,a){var i=this._parseTweenFrame(e,r,a),n=-1;if(t.DataParser.VALUE in e||t.DataParser.COLOR in e){var s=t.DataParser.VALUE in e?e[t.DataParser.VALUE]:e[t.DataParser.COLOR];for(var o in s){this._parseColorTransform(s,this._helpColorTransform),n=this._colorArray.length,this._colorArray.length+=8,this._colorArray[n++]=Math.round(100*this._helpColorTransform.alphaMultiplier),this._colorArray[n++]=Math.round(100*this._helpColorTransform.redMultiplier),this._colorArray[n++]=Math.round(100*this._helpColorTransform.greenMultiplier),this._colorArray[n++]=Math.round(100*this._helpColorTransform.blueMultiplier),this._colorArray[n++]=Math.round(this._helpColorTransform.alphaOffset),this._colorArray[n++]=Math.round(this._helpColorTransform.redOffset),this._colorArray[n++]=Math.round(this._helpColorTransform.greenOffset),this._colorArray[n++]=Math.round(this._helpColorTransform.blueOffset),n-=8;break}}n<0&&(this._defaultColorOffset<0&&(this._defaultColorOffset=n=this._colorArray.length,this._colorArray.length+=8,this._colorArray[n++]=100,this._colorArray[n++]=100,this._colorArray[n++]=100,this._colorArray[n++]=100,this._colorArray[n++]=0,this._colorArray[n++]=0,this._colorArray[n++]=0,this._colorArray[n++]=0),n=this._defaultColorOffset);var l=this._frameIntArray.length;return this._frameIntArray.length+=1,this._frameIntArray[l]=n,i},i.prototype._parseSlotDeformFrame=function(e,r,a){var n=this._frameFloatArray.length,s=this._parseTweenFrame(e,r,a),o=t.DataParser.VERTICES in e?e[t.DataParser.VERTICES]:null,l=i._getNumber(e,t.DataParser.OFFSET,0),h=this._intArray[this._mesh.geometry.offset+0],u=this._mesh.parent.name+"_"+this._slot.name+"_"+this._mesh.name,c=this._mesh.geometry.weight,f=0,p=0,d=0,m=0;if(null!==c){var _=this._weightSlotPose[u];this._helpMatrixA.copyFromArray(_,0),this._frameFloatArray.length+=2*c.count,d=c.offset+2+c.bones.length}else this._frameFloatArray.length+=2*h;for(var y=0;y<2*h;y+=2)if(null===o?(f=0,p=0):(f=y<l||y-l>=o.length?0:o[y-l],p=y+1<l||y+1-l>=o.length?0:o[y+1-l]),null!==c){var g=this._weightBonePoses[u],v=this._intArray[d++];this._helpMatrixA.transformPoint(f,p,this._helpPoint,!0),f=this._helpPoint.x,p=this._helpPoint.y;for(var b=0;b<v;++b){var T=this._intArray[d++];this._helpMatrixB.copyFromArray(g,7*T+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(f,p,this._helpPoint,!0),this._frameFloatArray[n+m++]=this._helpPoint.x,this._frameFloatArray[n+m++]=this._helpPoint.y}}else this._frameFloatArray[n+y]=f,this._frameFloatArray[n+y+1]=p;if(0===r){var A=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[A+0]=this._mesh.geometry.offset,this._frameIntArray[A+1]=this._frameFloatArray.length-n,this._frameIntArray[A+2]=this._frameFloatArray.length-n,this._frameIntArray[A+3]=0,this._frameIntArray[A+4]=n-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=A-this._animation.frameIntOffset}return s},i.prototype._parseIKConstraintFrame=function(e,r,a){var n=this._parseTweenFrame(e,r,a),s=this._frameIntArray.length;return this._frameIntArray.length+=2,this._frameIntArray[s++]=i._getBoolean(e,t.DataParser.BEND_POSITIVE,!0)?1:0,this._frameIntArray[s++]=Math.round(100*i._getNumber(e,t.DataParser.WEIGHT,1)),n},i.prototype._parseActionData=function(e,r,a,n){var s=new Array;if("string"===typeof e){var o=t.BaseObject.borrowObject(t.ActionData);o.type=r,o.name=e,o.bone=a,o.slot=n,s.push(o)}else if(e instanceof Array)for(var l=0,h=e;l<h.length;l++){var u=h[l];o=t.BaseObject.borrowObject(t.ActionData);if(t.DataParser.GOTO_AND_PLAY in u?(o.type=0,o.name=i._getString(u,t.DataParser.GOTO_AND_PLAY,"")):(t.DataParser.TYPE in u&&"string"===typeof u[t.DataParser.TYPE]?o.type=t.DataParser._getActionType(u[t.DataParser.TYPE]):o.type=i._getNumber(u,t.DataParser.TYPE,r),o.name=i._getString(u,t.DataParser.NAME,"")),t.DataParser.BONE in u){var c=i._getString(u,t.DataParser.BONE,"");o.bone=this._armature.getBone(c)}else o.bone=a;if(t.DataParser.SLOT in u){var f=i._getString(u,t.DataParser.SLOT,"");o.slot=this._armature.getSlot(f)}else o.slot=n;var p=null;if(t.DataParser.INTS in u){null===p&&(p=t.BaseObject.borrowObject(t.UserData));for(var d=u[t.DataParser.INTS],m=0,_=d;m<_.length;m++){var y=_[m];p.addInt(y)}}if(t.DataParser.FLOATS in u){null===p&&(p=t.BaseObject.borrowObject(t.UserData));for(var g=u[t.DataParser.FLOATS],v=0,b=g;v<b.length;v++){y=b[v];p.addFloat(y)}}if(t.DataParser.STRINGS in u){null===p&&(p=t.BaseObject.borrowObject(t.UserData));for(var T=u[t.DataParser.STRINGS],A=0,D=T;A<D.length;A++){y=D[A];p.addString(y)}}o.data=p,s.push(o)}return s},i.prototype._parseDeformFrame=function(e,r,a){var n=this._frameFloatArray.length,s=this._parseTweenFrame(e,r,a),o=t.DataParser.VERTICES in e?e[t.DataParser.VERTICES]:t.DataParser.VALUE in e?e[t.DataParser.VALUE]:null,l=i._getNumber(e,t.DataParser.OFFSET,0),h=this._intArray[this._geometry.offset+0],u=this._geometry.weight,c=0,f=0;if(null!==u);else{this._frameFloatArray.length+=2*h;for(var p=0;p<2*h;p+=2)null!==o?(c=p<l||p-l>=o.length?0:o[p-l],f=p+1<l||p+1-l>=o.length?0:o[p+1-l]):(c=0,f=0),this._frameFloatArray[n+p]=c,this._frameFloatArray[n+p+1]=f}if(0===r){var d=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[d+0]=this._geometry.offset,this._frameIntArray[d+1]=this._frameFloatArray.length-n,this._frameIntArray[d+2]=this._frameFloatArray.length-n,this._frameIntArray[d+3]=0,this._frameIntArray[d+4]=n-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=d-this._animation.frameIntOffset}return s},i.prototype._parseTransform=function(e,r,a){r.x=i._getNumber(e,t.DataParser.X,0)*a,r.y=i._getNumber(e,t.DataParser.Y,0)*a,t.DataParser.ROTATE in e||t.DataParser.SKEW in e?(r.rotation=t.Transform.normalizeRadian(i._getNumber(e,t.DataParser.ROTATE,0)*t.Transform.DEG_RAD),r.skew=t.Transform.normalizeRadian(i._getNumber(e,t.DataParser.SKEW,0)*t.Transform.DEG_RAD)):(t.DataParser.SKEW_X in e||t.DataParser.SKEW_Y in e)&&(r.rotation=t.Transform.normalizeRadian(i._getNumber(e,t.DataParser.SKEW_Y,0)*t.Transform.DEG_RAD),r.skew=t.Transform.normalizeRadian(i._getNumber(e,t.DataParser.SKEW_X,0)*t.Transform.DEG_RAD)-r.rotation),r.scaleX=i._getNumber(e,t.DataParser.SCALE_X,1),r.scaleY=i._getNumber(e,t.DataParser.SCALE_Y,1)},i.prototype._parseColorTransform=function(e,r){r.alphaMultiplier=.01*i._getNumber(e,t.DataParser.ALPHA_MULTIPLIER,100),r.redMultiplier=.01*i._getNumber(e,t.DataParser.RED_MULTIPLIER,100),r.greenMultiplier=.01*i._getNumber(e,t.DataParser.GREEN_MULTIPLIER,100),r.blueMultiplier=.01*i._getNumber(e,t.DataParser.BLUE_MULTIPLIER,100),r.alphaOffset=i._getNumber(e,t.DataParser.ALPHA_OFFSET,0),r.redOffset=i._getNumber(e,t.DataParser.RED_OFFSET,0),r.greenOffset=i._getNumber(e,t.DataParser.GREEN_OFFSET,0),r.blueOffset=i._getNumber(e,t.DataParser.BLUE_OFFSET,0)},i.prototype._parseGeometry=function(e,r){var a=e[t.DataParser.VERTICES],i=Math.floor(a.length/2),n=0,s=this._intArray.length,o=this._floatArray.length;r.offset=s,r.data=this._data,this._intArray.length+=4,this._intArray[s+0]=i,this._intArray[s+2]=o,this._intArray[s+3]=-1,this._floatArray.length+=2*i;for(var l=0,h=2*i;l<h;++l)this._floatArray[o+l]=a[l];if(t.DataParser.TRIANGLES in e){var u=e[t.DataParser.TRIANGLES];n=Math.floor(u.length/3),this._intArray.length+=3*n;for(l=0,h=3*n;l<h;++l)this._intArray[s+4+l]=u[l]}if(this._intArray[s+1]=n,t.DataParser.UVS in e){var c=e[t.DataParser.UVS],f=o+2*i;this._floatArray.length+=2*i;for(l=0,h=2*i;l<h;++l)this._floatArray[f+l]=c[l]}if(t.DataParser.WEIGHTS in e){var p=e[t.DataParser.WEIGHTS],d=Math.floor(p.length-i)/2,m=this._intArray.length,_=this._floatArray.length,y=0,g=this._armature.sortedBones,v=t.BaseObject.borrowObject(t.WeightData);if(v.count=d,v.offset=m,this._intArray.length+=2+y+i+d,this._intArray[m+1]=_,t.DataParser.BONE_POSE in e){var b=e[t.DataParser.SLOT_POSE],T=e[t.DataParser.BONE_POSE],A=new Array;y=Math.floor(T.length/7),A.length=y;for(l=0;l<y;++l){var D=T[7*l],x=this._rawBones[D];v.addBone(x),A[l]=D,this._intArray[m+2+l]=g.indexOf(x)}this._floatArray.length+=3*d,this._helpMatrixA.copyFromArray(b,0);l=0;for(var S=0,E=m+2+y,w=_;l<i;++l){var M=2*l,P=this._intArray[E++]=p[S++],O=this._floatArray[o+M],I=this._floatArray[o+M+1];this._helpMatrixA.transformPoint(O,I,this._helpPoint),O=this._helpPoint.x,I=this._helpPoint.y;for(var C=0;C<P;++C){D=p[S++];var R=A.indexOf(D);this._helpMatrixB.copyFromArray(T,7*R+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(O,I,this._helpPoint),this._intArray[E++]=R,this._floatArray[w++]=p[S++],this._floatArray[w++]=this._helpPoint.x,this._floatArray[w++]=this._helpPoint.y}}}else{var F=e[t.DataParser.BONES];y=F.length;for(l=0;l<y;l++){D=F[l],x=this._rawBones[D];v.addBone(x),this._intArray[m+2+l]=g.indexOf(x)}this._floatArray.length+=3*d;l=0,S=0,w=0,E=m+2+y;for(var B=_;l<d;l++){P=p[S++];this._intArray[E++]=P;for(C=0;C<P;C++){R=p[S++];var N=p[S++];O=a[w++],I=a[w++];this._intArray[E++]=F.indexOf(R),this._floatArray[B++]=N,this._floatArray[B++]=O,this._floatArray[B++]=I}}}r.weight=v}},i.prototype._parseArray=function(t){this._intArray.length=0,this._floatArray.length=0,this._frameIntArray.length=0,this._frameFloatArray.length=0,this._frameArray.length=0,this._timelineArray.length=0,this._colorArray.length=0},i.prototype._modifyArray=function(){this._intArray.length%Int16Array.BYTES_PER_ELEMENT!==0&&this._intArray.push(0),this._frameIntArray.length%Int16Array.BYTES_PER_ELEMENT!==0&&this._frameIntArray.push(0),this._frameArray.length%Int16Array.BYTES_PER_ELEMENT!==0&&this._frameArray.push(0),this._timelineArray.length%Uint16Array.BYTES_PER_ELEMENT!==0&&this._timelineArray.push(0),this._timelineArray.length%Int16Array.BYTES_PER_ELEMENT!==0&&this._colorArray.push(0);for(var t=this._intArray.length*Int16Array.BYTES_PER_ELEMENT,e=this._floatArray.length*Float32Array.BYTES_PER_ELEMENT,r=this._frameIntArray.length*Int16Array.BYTES_PER_ELEMENT,a=this._frameFloatArray.length*Float32Array.BYTES_PER_ELEMENT,i=this._frameArray.length*Int16Array.BYTES_PER_ELEMENT,n=this._timelineArray.length*Uint16Array.BYTES_PER_ELEMENT,s=this._colorArray.length*Int16Array.BYTES_PER_ELEMENT,o=t+e+r+a+i+n+s,l=new ArrayBuffer(o),h=new Int16Array(l,0,this._intArray.length),u=new Float32Array(l,t,this._floatArray.length),c=new Int16Array(l,t+e,this._frameIntArray.length),f=new Float32Array(l,t+e+r,this._frameFloatArray.length),p=new Int16Array(l,t+e+r+a,this._frameArray.length),d=new Uint16Array(l,t+e+r+a+i,this._timelineArray.length),m=new Int16Array(l,t+e+r+a+i+n,this._colorArray.length),_=0,y=this._intArray.length;_<y;++_)h[_]=this._intArray[_];for(_=0,y=this._floatArray.length;_<y;++_)u[_]=this._floatArray[_];for(_=0,y=this._frameIntArray.length;_<y;++_)c[_]=this._frameIntArray[_];for(_=0,y=this._frameFloatArray.length;_<y;++_)f[_]=this._frameFloatArray[_];for(_=0,y=this._frameArray.length;_<y;++_)p[_]=this._frameArray[_];for(_=0,y=this._timelineArray.length;_<y;++_)d[_]=this._timelineArray[_];for(_=0,y=this._colorArray.length;_<y;++_)m[_]=this._colorArray[_];this._data.binary=l,this._data.intArray=h,this._data.floatArray=u,this._data.frameIntArray=c,this._data.frameFloatArray=f,this._data.frameArray=p,this._data.timelineArray=d,this._data.colorArray=m,this._defaultColorOffset=-1},i.prototype.parseDragonBonesData=function(e,r){void 0===r&&(r=1),console.assert(null!==e&&void 0!==e,"Data error.");var a=i._getString(e,t.DataParser.VERSION,""),n=i._getString(e,t.DataParser.COMPATIBLE_VERSION,"");if(t.DataParser.DATA_VERSIONS.indexOf(a)>=0||t.DataParser.DATA_VERSIONS.indexOf(n)>=0){var s=t.BaseObject.borrowObject(t.DragonBonesData);if(s.version=a,s.name=i._getString(e,t.DataParser.NAME,""),s.frameRate=i._getNumber(e,t.DataParser.FRAME_RATE,24),0===s.frameRate&&(s.frameRate=24),t.DataParser.ARMATURE in e){this._data=s,this._parseArray(e);for(var o=e[t.DataParser.ARMATURE],l=0,h=o;l<h.length;l++){var u=h[l];s.addArmature(this._parseArmature(u,r))}this._data.binary||this._modifyArray(),t.DataParser.STAGE in e?s.stage=s.getArmature(i._getString(e,t.DataParser.STAGE,"")):s.armatureNames.length>0&&(s.stage=s.getArmature(s.armatureNames[0])),this._data=null}return t.DataParser.TEXTURE_ATLAS in e&&(this._rawTextureAtlases=e[t.DataParser.TEXTURE_ATLAS]),s}return console.assert(!1,"Nonsupport data version: "+a+"\nPlease convert DragonBones data to support version.\nRead more: https://github.com/DragonBones/Tools/"),null},i.prototype.parseTextureAtlasData=function(e,r,a){if(void 0===a&&(a=1),console.assert(void 0!==e),null===e){if(null===this._rawTextureAtlases||0===this._rawTextureAtlases.length)return!1;var n=this._rawTextureAtlases[this._rawTextureAtlasIndex++];return this.parseTextureAtlasData(n,r,a),this._rawTextureAtlasIndex>=this._rawTextureAtlases.length&&(this._rawTextureAtlasIndex=0,this._rawTextureAtlases=null),!0}if(r.width=i._getNumber(e,t.DataParser.WIDTH,0),r.height=i._getNumber(e,t.DataParser.HEIGHT,0),r.scale=1===a?1/i._getNumber(e,t.DataParser.SCALE,1):a,r.name=i._getString(e,t.DataParser.NAME,""),r.imagePath=i._getString(e,t.DataParser.IMAGE_PATH,""),t.DataParser.SUB_TEXTURE in e)for(var s=e[t.DataParser.SUB_TEXTURE],o=0,l=s.length;o<l;++o){var h=s[o],u=i._getNumber(h,t.DataParser.FRAME_WIDTH,-1),c=i._getNumber(h,t.DataParser.FRAME_HEIGHT,-1),f=r.createTexture();f.rotated=i._getBoolean(h,t.DataParser.ROTATED,!1),f.name=i._getString(h,t.DataParser.NAME,""),f.region.x=i._getNumber(h,t.DataParser.X,0),f.region.y=i._getNumber(h,t.DataParser.Y,0),f.region.width=i._getNumber(h,t.DataParser.WIDTH,0),f.region.height=i._getNumber(h,t.DataParser.HEIGHT,0),u>0&&c>0&&(f.frame=t.TextureData.createRectangle(),f.frame.x=i._getNumber(h,t.DataParser.FRAME_X,0),f.frame.y=i._getNumber(h,t.DataParser.FRAME_Y,0),f.frame.width=u,f.frame.height=c),r.addTexture(f)}return!0},i.getInstance=function(){return null===i._objectDataParserInstance&&(i._objectDataParserInstance=new i),i._objectDataParserInstance},i._objectDataParserInstance=null,i}(t.DataParser);t.ObjectDataParser=e;var r=function(){function t(){this.frameStart=0,this.actions=[]}return t}();t.ActionFrame=r}(s||(s={})),function(t){var e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype._inRange=function(t,e,r){return e<=t&&t<=r},r.prototype._decodeUTF8=function(t){var e,r=-1,a=-1,i=65533,n=0,s="",o=0,l=0,h=0,u=0;while(t.length>n){var c=t[n++];if(c===r)e=0!==l?i:a;else if(0===l)this._inRange(c,0,127)?e=c:(this._inRange(c,194,223)?(l=1,u=128,o=c-192):this._inRange(c,224,239)?(l=2,u=2048,o=c-224):this._inRange(c,240,244)&&(l=3,u=65536,o=c-240),o*=Math.pow(64,l),e=null);else if(this._inRange(c,128,191))if(h+=1,o+=(c-128)*Math.pow(64,l-h),h!==l)e=null;else{var f=o,p=u;o=0,l=0,h=0,u=0,e=this._inRange(f,p,1114111)&&!this._inRange(f,55296,57343)?f:c}else o=0,l=0,h=0,u=0,n--,e=c;null!==e&&e!==a&&(e<=65535?e>0&&(s+=String.fromCharCode(e)):(e-=65536,s+=String.fromCharCode(55296+(e>>10&1023)),s+=String.fromCharCode(56320+(1023&e))))}return s},r.prototype._parseBinaryTimeline=function(e,r,a){void 0===a&&(a=null);var i=null!==a?a:t.BaseObject.borrowObject(t.TimelineData);i.type=e,i.offset=r,this._timeline=i;var n=this._timelineArrayBuffer[i.offset+2];if(1===n)i.frameIndicesOffset=-1;else{var s=0,o=this._animation.frameCount+1,l=this._data.frameIndices;s=l.length,l.length+=o,i.frameIndicesOffset=s;for(var h=0,u=0,c=0,f=0;h<o;++h)c+f<=h&&u<n&&(c=this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[i.offset+5+u]],f=u===n-1?this._animation.frameCount-c:this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[i.offset+5+u+1]]-c,u++),l[s+h]=u-1}return this._timeline=null,i},r.prototype._parseAnimation=function(e){var r=t.BaseObject.borrowObject(t.AnimationData);r.blendType=t.DataParser._getAnimationBlendType(t.ObjectDataParser._getString(e,t.DataParser.BLEND_TYPE,"")),r.frameCount=t.ObjectDataParser._getNumber(e,t.DataParser.DURATION,0),r.playTimes=t.ObjectDataParser._getNumber(e,t.DataParser.PLAY_TIMES,1),r.duration=r.frameCount/this._armature.frameRate,r.fadeInTime=t.ObjectDataParser._getNumber(e,t.DataParser.FADE_IN_TIME,0),r.scale=t.ObjectDataParser._getNumber(e,t.DataParser.SCALE,1),r.name=t.ObjectDataParser._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===r.name.length&&(r.name=t.DataParser.DEFAULT_NAME);var a=e[t.DataParser.OFFSET];if(r.frameIntOffset=a[0],r.frameFloatOffset=a[1],r.frameOffset=a[2],this._animation=r,t.DataParser.ACTION in e&&(r.actionTimeline=this._parseBinaryTimeline(0,e[t.DataParser.ACTION])),t.DataParser.Z_ORDER in e&&(r.zOrderTimeline=this._parseBinaryTimeline(1,e[t.DataParser.Z_ORDER])),t.DataParser.BONE in e){var i=e[t.DataParser.BONE];for(var n in i){var s=i[n],o=this._armature.getBone(n);if(null!==o)for(var l=0,h=s.length;l<h;l+=2){var u=s[l],c=s[l+1],f=this._parseBinaryTimeline(u,c);this._animation.addBoneTimeline(o.name,f)}}}if(t.DataParser.SLOT in e){i=e[t.DataParser.SLOT];for(var n in i){s=i[n];var p=this._armature.getSlot(n);if(null!==p)for(l=0,h=s.length;l<h;l+=2){u=s[l],c=s[l+1],f=this._parseBinaryTimeline(u,c);this._animation.addSlotTimeline(p.name,f)}}}if(t.DataParser.CONSTRAINT in e){i=e[t.DataParser.CONSTRAINT];for(var n in i){s=i[n];var d=this._armature.getConstraint(n);if(null!==d)for(l=0,h=s.length;l<h;l+=2){u=s[l],c=s[l+1],f=this._parseBinaryTimeline(u,c);this._animation.addConstraintTimeline(d.name,f)}}}if(t.DataParser.TIMELINE in e){s=e[t.DataParser.TIMELINE];for(var m=0,_=s;m<_.length;m++){var y=_[m];c=t.ObjectDataParser._getNumber(y,t.DataParser.OFFSET,0);if(c>=0){u=t.ObjectDataParser._getNumber(y,t.DataParser.TYPE,0);var g=t.ObjectDataParser._getString(y,t.DataParser.NAME,"");f=null;if(40===u&&0!==r.blendType){f=t.BaseObject.borrowObject(t.AnimationTimelineData);var v=f;v.x=t.ObjectDataParser._getNumber(y,t.DataParser.X,0),v.y=t.ObjectDataParser._getNumber(y,t.DataParser.Y,0)}switch(f=this._parseBinaryTimeline(u,c,f),u){case 0:break;case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(g,f);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(g,f);break;case 30:this._animation.addConstraintTimeline(g,f);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(g,f);break}}}}return this._animation=null,r},r.prototype._parseGeometry=function(e,r){r.offset=e[t.DataParser.OFFSET],r.data=this._data;var a=this._intArrayBuffer[r.offset+3];if(a<-1&&(a+=65536),a>=0){var i=t.BaseObject.borrowObject(t.WeightData),n=this._intArrayBuffer[r.offset+0],s=this._intArrayBuffer[a+0];i.offset=a;for(var o=0;o<s;++o){var l=this._intArrayBuffer[a+2+o];i.addBone(this._rawBones[l])}for(var h=a+2+s,u=0,c=(o=0,n);o<c;++o){var f=this._intArrayBuffer[h++];u+=f,h+=f}i.count=u,r.weight=i}},r.prototype._parseArray=function(e){var r=e[t.DataParser.OFFSET],a=r[1],i=r[3],n=r[5],s=r[7],o=r[9],l=r[11],h=r.length>12?r[13]:0,u=new Int16Array(this._binary,this._binaryOffset+r[0],a/Int16Array.BYTES_PER_ELEMENT),c=new Float32Array(this._binary,this._binaryOffset+r[2],i/Float32Array.BYTES_PER_ELEMENT),f=new Int16Array(this._binary,this._binaryOffset+r[4],n/Int16Array.BYTES_PER_ELEMENT),p=new Float32Array(this._binary,this._binaryOffset+r[6],s/Float32Array.BYTES_PER_ELEMENT),d=new Int16Array(this._binary,this._binaryOffset+r[8],o/Int16Array.BYTES_PER_ELEMENT),m=new Uint16Array(this._binary,this._binaryOffset+r[10],l/Uint16Array.BYTES_PER_ELEMENT),_=h>0?new Int16Array(this._binary,this._binaryOffset+r[12],h/Uint16Array.BYTES_PER_ELEMENT):u;this._data.binary=this._binary,this._data.intArray=this._intArrayBuffer=u,this._data.floatArray=c,this._data.frameIntArray=f,this._data.frameFloatArray=p,this._data.frameArray=this._frameArrayBuffer=d,this._data.timelineArray=this._timelineArrayBuffer=m,this._data.colorArray=_},r.prototype.parseDragonBonesData=function(t,r){void 0===r&&(r=1),console.assert(null!==t&&void 0!==t&&t instanceof ArrayBuffer,"Data error.");var a=new Uint8Array(t,0,8);if(a[0]!=="D".charCodeAt(0)||a[1]!=="B".charCodeAt(0)||a[2]!=="D".charCodeAt(0)||a[3]!=="T".charCodeAt(0))return console.assert(!1,"Nonsupport data."),null;var i=new Uint32Array(t,8,1)[0],n=new Uint8Array(t,12,i),s=this._decodeUTF8(n),o=JSON.parse(s);return this._binaryOffset=12+i,this._binary=t,e.prototype.parseDragonBonesData.call(this,o,r)},r.getInstance=function(){return null===r._binaryDataParserInstance&&(r._binaryDataParserInstance=new r),r._binaryDataParserInstance},r._binaryDataParserInstance=null,r}(t.ObjectDataParser);t.BinaryDataParser=e}(s||(s={})),function(t){var e=function(){function e(r){void 0===r&&(r=null),this.autoSearch=!1,this._dragonBonesDataMap={},this._textureAtlasDataMap={},this._dragonBones=null,this._dataParser=null,null===e._objectParser&&(e._objectParser=new t.ObjectDataParser),null===e._binaryParser&&(e._binaryParser=new t.BinaryDataParser),this._dataParser=null!==r?r:e._objectParser}return e.prototype._isSupportMesh=function(){return!0},e.prototype._getTextureData=function(t,e){if(t in this._textureAtlasDataMap)for(var r=0,a=this._textureAtlasDataMap[t];r<a.length;r++){var i=a[r],n=i.getTexture(e);if(null!==n)return n}if(this.autoSearch)for(var s in this._textureAtlasDataMap)for(var o=0,l=this._textureAtlasDataMap[s];o<l.length;o++){i=l[o];if(i.autoSearch){n=i.getTexture(e);if(null!==n)return n}}return null},e.prototype._fillBuildArmaturePackage=function(t,e,r,a,i){var n=null,s=null;if(e.length>0&&e in this._dragonBonesDataMap&&(n=this._dragonBonesDataMap[e],s=n.getArmature(r)),null===s&&(0===e.length||this.autoSearch))for(var o in this._dragonBonesDataMap)if(n=this._dragonBonesDataMap[o],(0===e.length||n.autoSearch)&&(s=n.getArmature(r),null!==s)){e=o;break}if(null!==s){if(t.dataName=e,t.textureAtlasName=i,t.data=n,t.armature=s,t.skin=null,a.length>0&&(t.skin=s.getSkin(a),null===t.skin&&this.autoSearch))for(var o in this._dragonBonesDataMap){var l=this._dragonBonesDataMap[o],h=l.getArmature(a);if(null!==h){t.skin=h.defaultSkin;break}}return null===t.skin&&(t.skin=s.defaultSkin),!0}return!1},e.prototype._buildBones=function(e,r){for(var a=0,i=e.armature.sortedBones;a<i.length;a++){var n=i[a],s=t.BaseObject.borrowObject(0===n.type?t.Bone:t.Surface);s.init(n,r)}},e.prototype._buildSlots=function(t,e){var r=t.skin,a=t.armature.defaultSkin;if(null!==r&&null!==a){var i={};for(var n in a.displays){var s=a.getDisplays(n);i[n]=s}if(r!==a)for(var n in r.displays){s=r.getDisplays(n);i[n]=s}for(var o=0,l=t.armature.sortedSlots;o<l.length;o++){var h=l[o],u=h.name in i?i[h.name]:null,c=this._buildSlot(t,h,e);if(null!==u){c.displayFrameCount=u.length;for(var f=0,p=c.displayFrameCount;f<p;++f){var d=u[f];if(c.replaceRawDisplayData(d,f),null!==d){if(t.textureAtlasName.length>0){var m=this._getTextureData(t.textureAtlasName,d.path);c.replaceTextureData(m,f)}var _=this._getSlotDisplay(t,d,c);c.replaceDisplay(_,f)}else c.replaceDisplay(null)}}c._setDisplayIndex(h.displayIndex,!0)}}},e.prototype._buildConstraints=function(e,r){var a=e.armature.constraints;for(var i in a){var n=a[i];switch(n.type){case 0:var s=t.BaseObject.borrowObject(t.IKConstraint);s.init(n,r),r._addConstraint(s);break;case 1:var o=t.BaseObject.borrowObject(t.PathConstraint);o.init(n,r),r._addConstraint(o);break;default:var l=t.BaseObject.borrowObject(t.IKConstraint);l.init(n,r),r._addConstraint(l);break}}},e.prototype._buildChildArmature=function(t,e,r){return this.buildArmature(r.path,null!==t?t.dataName:"","",null!==t?t.textureAtlasName:"")},e.prototype._getSlotDisplay=function(e,r,a){var i=null!==e?e.dataName:r.parent.parent.parent.name,n=null;switch(r.type){case 0:var s=r;null===s.texture&&(s.texture=this._getTextureData(i,r.path)),n=a.rawDisplay;break;case 2:var o=r;null===o.texture&&(o.texture=this._getTextureData(i,o.path)),n=this._isSupportMesh()?a.meshDisplay:a.rawDisplay;break;case 1:var l=r,h=this._buildChildArmature(e,a,l);if(null!==h){if(h.inheritAnimation=l.inheritAnimation,!h.inheritAnimation){var u=l.actions.length>0?l.actions:h.armatureData.defaultActions;if(u.length>0)for(var c=0,f=u;c<f.length;c++){var p=f[c],d=t.BaseObject.borrowObject(t.EventObject);t.EventObject.actionDataToInstance(p,d,a.armature),d.slot=a,a.armature._bufferAction(d,!1)}else h.animation.play()}l.armature=h.armatureData}n=h;break;case 3:break;default:break}return n},e.prototype.parseDragonBonesData=function(t,r,a){void 0===r&&(r=null),void 0===a&&(a=1);var i=t instanceof ArrayBuffer?e._binaryParser:this._dataParser,n=i.parseDragonBonesData(t,a);while(1){var s=this._buildTextureAtlasData(null,null);if(!i.parseTextureAtlasData(null,s,a)){s.returnToPool();break}this.addTextureAtlasData(s,r)}return null!==n&&this.addDragonBonesData(n,r),n},e.prototype.parseTextureAtlasData=function(t,e,r,a){void 0===r&&(r=null),void 0===a&&(a=1);var i=this._buildTextureAtlasData(null,null);return this._dataParser.parseTextureAtlasData(t,i,a),this._buildTextureAtlasData(i,e||null),this.addTextureAtlasData(i,r),i},e.prototype.updateTextureAtlases=function(t,e){var r=this.getTextureAtlasData(e);if(null!==r)for(var a=0,i=r.length;a<i;++a)a<t.length&&this._buildTextureAtlasData(r[a],t[a])},e.prototype.getDragonBonesData=function(t){return t in this._dragonBonesDataMap?this._dragonBonesDataMap[t]:null},e.prototype.addDragonBonesData=function(t,e){if(void 0===e&&(e=null),e=null!==e?e:t.name,e in this._dragonBonesDataMap){if(this._dragonBonesDataMap[e]===t)return;console.warn("Can not add same name data: "+e)}else this._dragonBonesDataMap[e]=t},e.prototype.removeDragonBonesData=function(t,e){void 0===e&&(e=!0),t in this._dragonBonesDataMap&&(e&&this._dragonBones.bufferObject(this._dragonBonesDataMap[t]),delete this._dragonBonesDataMap[t])},e.prototype.getTextureAtlasData=function(t){return t in this._textureAtlasDataMap?this._textureAtlasDataMap[t]:null},e.prototype.addTextureAtlasData=function(t,e){void 0===e&&(e=null),e=null!==e?e:t.name;var r=e in this._textureAtlasDataMap?this._textureAtlasDataMap[e]:this._textureAtlasDataMap[e]=[];r.indexOf(t)<0&&r.push(t)},e.prototype.removeTextureAtlasData=function(t,e){if(void 0===e&&(e=!0),t in this._textureAtlasDataMap){var r=this._textureAtlasDataMap[t];if(e)for(var a=0,i=r;a<i.length;a++){var n=i[a];this._dragonBones.bufferObject(n)}delete this._textureAtlasDataMap[t]}},e.prototype.getArmatureData=function(t,e){void 0===e&&(e="");var a=new r;return this._fillBuildArmaturePackage(a,e,t,"","")?a.armature:null},e.prototype.clear=function(t){for(var e in void 0===t&&(t=!0),this._dragonBonesDataMap)t&&this._dragonBones.bufferObject(this._dragonBonesDataMap[e]),delete this._dragonBonesDataMap[e];for(var e in this._textureAtlasDataMap){if(t)for(var r=this._textureAtlasDataMap[e],a=0,i=r;a<i.length;a++){var n=i[a];this._dragonBones.bufferObject(n)}delete this._textureAtlasDataMap[e]}},e.prototype.buildArmature=function(t,e,a,i){void 0===e&&(e=""),void 0===a&&(a=""),void 0===i&&(i="");var n=new r;if(!this._fillBuildArmaturePackage(n,e||"",t,a||"",i||""))return console.warn("No armature data: "+t+", "+(null!==e?e:"")),null;var s=this._buildArmature(n);return this._buildBones(n,s),this._buildSlots(n,s),this._buildConstraints(n,s),s.invalidUpdate(null,!0),s.advanceTime(0),s},e.prototype.replaceDisplay=function(t,e,r){if(void 0===r&&(r=-1),r<0&&(r=t.displayIndex),r<0&&(r=0),t.replaceDisplayData(e,r),null!==e){var a=this._getSlotDisplay(null,e,t);if(0===e.type){var i=t.getDisplayFrameAt(r).rawDisplayData;null!==i&&2===i.type&&(a=t.meshDisplay)}t.replaceDisplay(a,r)}else t.replaceDisplay(null,r)},e.prototype.replaceSlotDisplay=function(t,e,r,a,i,n){void 0===n&&(n=-1);var s=this.getArmatureData(e,t||"");if(null===s||null===s.defaultSkin)return!1;var o=s.defaultSkin.getDisplay(r,a);return this.replaceDisplay(i,o,n),!0},e.prototype.replaceSlotDisplayList=function(t,e,r,a){var i=this.getArmatureData(e,t||"");if(!i||!i.defaultSkin)return!1;var n=i.defaultSkin.getDisplays(r);if(!n)return!1;a.displayFrameCount=n.length;for(var s=0,o=a.displayFrameCount;s<o;++s){var l=n[s];this.replaceDisplay(a,l,s)}return!0},e.prototype.replaceSkin=function(t,e,r,a){void 0===r&&(r=!1),void 0===a&&(a=null);for(var i=!1,n=e.parent.defaultSkin,s=0,o=t.getSlots();s<o.length;s++){var l=o[s];if(!(null!==a&&a.indexOf(l.name)>=0)){var h=e.getDisplays(l.name);if(null!==h||(null!==n&&e!==n&&(h=n.getDisplays(l.name)),null!==h)){l.displayFrameCount=h.length;for(var u=0,c=l.displayFrameCount;u<c;++u){var f=h[u];l.replaceRawDisplayData(f,u),null!==f?l.replaceDisplay(this._getSlotDisplay(null,f,l),u):l.replaceDisplay(null,u)}i=!0}else r&&(l.displayFrameCount=0)}}return i},e.prototype.replaceAnimation=function(e,r,a){void 0===a&&(a=!0);var i=r.defaultSkin;if(null===i)return!1;if(a)e.animation.animations=r.animations;else{var n=e.animation.animations,s={};for(var o in n)s[o]=n[o];for(var o in r.animations)s[o]=r.animations[o];e.animation.animations=s}for(var l=0,h=e.getSlots();l<h.length;l++)for(var u=h[l],c=0,f=0,p=u.displayList;f<p.length;f++){var d=p[f];if(d instanceof t.Armature){var m=i.getDisplays(u.name);if(null!==m&&c<m.length){var _=m[c];if(null!==_&&1===_.type){var y=this.getArmatureData(_.path,_.parent.parent.parent.name);y&&this.replaceAnimation(d,y,a)}}}c++}return!0},e.prototype.getAllDragonBonesData=function(){return this._dragonBonesDataMap},e.prototype.getAllTextureAtlasData=function(){return this._textureAtlasDataMap},Object.defineProperty(e.prototype,"clock",{get:function(){return this._dragonBones.clock},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragonBones",{get:function(){return this._dragonBones},enumerable:!1,configurable:!0}),e._objectParser=null,e._binaryParser=null,e}();t.BaseFactory=e;var r=function(){function t(){this.dataName="",this.textureAtlasName="",this.skin=null}return t}();t.BuildArmaturePackage=r}(s||(s={})),function(t){var e=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.material=null,t._renderTexture=null,t}return n(a,e),a.toString=function(){return"[class dragonBones.ThreeTextureAtlasData]"},a.prototype._onClear=function(){e.prototype._onClear.call(this),null!==this.material&&this.material.dispose(),this._renderTexture,this.material=null,this._renderTexture=null},a.prototype.createTexture=function(){return t.BaseObject.borrowObject(r)},Object.defineProperty(a.prototype,"renderTexture",{get:function(){return this._renderTexture},set:function(t){this._renderTexture!==t&&(this._renderTexture=t)},enumerable:!1,configurable:!0}),a}(t.TextureAtlasData);t.ThreeTextureAtlasData=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.toString=function(){return"[class dragonBones.ThreeTextureData]"},e}(t.TextureData);t.ThreeTextureData=r}(s||(s={})),function(t){var e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.debugDraw=!1,t._debugDraw=!1,t._armature=null,t._debugDrawer=null,t}return n(r,e),r.prototype.dbInit=function(t){this._armature=t},r.prototype.dbClear=function(){this._debugDrawer,this._armature=null,this._debugDrawer=null},r.prototype.dbUpdate=function(){var e=t.DragonBones.debugDraw||this.debugDraw;(e||this._debugDraw)&&(this._debugDraw=e,this._debugDraw?(null===this._debugDrawer&&(this._debugDrawer=new i["Group"]),this.add(this._debugDrawer)):null!==this._debugDrawer&&this._debugDrawer.parent===this&&this.remove(this._debugDrawer))},r.prototype.dispose=function(t){void 0===t&&(t=!0),null!==this._armature&&(this._armature.dispose(),this._armature=null)},r.prototype.dispatchDBEvent=function(t,e){this.dispatchEvent(e)},r.prototype.hasDBEventListener=function(t){var e=this._listeners;return void 0!==e&&t in e},r.prototype.addDBEventListener=function(t,e,r){e.bind(r),this.addEventListener(t,e)},r.prototype.removeDBEventListener=function(t,e,r){this.removeEventListener(t,e)},Object.defineProperty(r.prototype,"armature",{get:function(){return this._armature},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"animation",{get:function(){return this._armature.animation},enumerable:!1,configurable:!0}),r.prototype.hasEvent=function(t){return this.hasDBEventListener(t)},r.prototype.addEvent=function(t,e,r){this.addDBEventListener(t,e,r)},r.prototype.removeEvent=function(t,e,r){this.removeDBEventListener(t,e,r)},r}(i["Group"]);t.ThreeArmatureDisplay=e}(s||(s={})),function(t){var e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._material=null,t}return n(r,e),r.toString=function(){return"[class dragonBones.ThreeSlot]"},r.prototype._onClear=function(){e.prototype._onClear.call(this),null!==this._material&&this._material.dispose(),this._renderDisplay=null,this._material=null},r.prototype._clearGeometry=function(e){for(var r=e.vertices,a=e.faces,i=e.faceVertexUvs[0],n=0,s=r;n<s.length;n++){var o=s[n];t.ThreeFactory.release(o,t.ThreeFactory.POOL_TYPE_VECTOR3)}for(var l=0,h=a;l<h.length;l++){var u=h[l];t.ThreeFactory.release(u,t.ThreeFactory.POOL_TYPE_FACE3)}for(var c=0,f=i;c<f.length;c++)for(var p=f[c],d=0,m=p;d<m.length;d++){var _=m[d];t.ThreeFactory.release(_,t.ThreeFactory.POOL_TYPE_VECTOR2)}r.length=0,a.length=0,i.length=0},r.prototype._initDisplay=function(t,e){},r.prototype._disposeDisplay=function(t,e){e||t.geometry.dispose()},r.prototype._onUpdateDisplay=function(){this._renderDisplay=this._display?this._display:this._rawDisplay,this._renderDisplay.matrixAutoUpdate=!1},r.prototype._addDisplay=function(){var t=this._armature.display;t.add(this._renderDisplay)},r.prototype._replaceDisplay=function(t){var e=this._armature.display,r=t;e.add(this._renderDisplay),e.remove(r)},r.prototype._removeDisplay=function(){this._renderDisplay.parent.remove(this._renderDisplay)},r.prototype._updateZOrder=function(){this._renderDisplay.position.setZ(this._zOrder)},r.prototype._updateVisible=function(){this._renderDisplay.visible=this._parent.visible&&this._visible},r.prototype._updateBlendMode=function(){if(this._renderDisplay===this._rawDisplay){var t=this._textureData;if(null===t)return;var e=t.parent;if(null===e.renderTexture)return;var r=this._renderDisplay;0!==this._blendMode?(null===this._material&&(this._material=new i["MeshBasicMaterial"],this._material.copy(e.material)),this._material.blending=i["AdditiveBlending"],r.material=this._material):r.material=e.material}},r.prototype._updateColor=function(){if(this._renderDisplay===this._rawDisplay){var t=this._textureData;if(null===t)return;var e=t.parent;if(null===e.renderTexture)return;var r=this._colorTransform.alphaMultiplier*this._globalAlpha,a=this._renderDisplay;1!==r||1!==this._colorTransform.redMultiplier||1!==this._colorTransform.greenMultiplier||1!==this._colorTransform.blueMultiplier?(null===this._material&&(this._material=new i["MeshBasicMaterial"],this._material.copy(e.material)),this._material.opacity=r,this._material.color.setRGB(this._colorTransform.redMultiplier,this._colorTransform.greenMultiplier,this._colorTransform.blueMultiplier),a.material=this._material):a.material=e.material}},r.prototype._updateFrame=function(){var e=this._textureData,a=this._renderDisplay;if(null!==e){var i=e.parent,n=i.renderTexture;if(null!==n){var s=i.width>0?i.width:n.image.width,o=i.height>0?i.height:n.image.height,l=e.region.x,h=e.region.y,u=e.region.width,c=e.region.height,f=a.geometry,p=f.vertices,d=f.faces,m=f.faceVertexUvs[0];if(this._clearGeometry(f),null!==this._geometryData){var _=this._geometryData.data,y=_.intArray,g=_.floatArray,v=y[this._geometryData.offset+0],b=y[this._geometryData.offset+1],T=y[this._geometryData.offset+2];T<0&&(T+=65536);for(var A=T+2*v,D=this._geometryData.offset+4,x=this._armature._armatureData.scale,S=new Array,E=0,w=v;E<w;++E){var M=2*E,P=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_VECTOR3),O=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_VECTOR2);p.push(P),S.push(O),O.set(g[A+M],g[A+M+1]),P.set(g[T+M]*x,g[T+M+1]*x,0),e.rotated?O.set((l+(1-O.y)*u)/s,(h+O.x*c)/o):O.set((l+O.x*u)/s,1-(h+O.y*c)/o)}for(E=0;E<b;++E){var I=3*E,C=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_FACE3),R=[];d.push(C),m.push(R),C.a=y[D+I],C.b=y[D+I+1],C.c=y[D+I+2],R[0]=S[C.a],R[1]=S[C.b],R[2]=S[C.c]}}else{x=i.scale*this._armature._armatureData.scale;var F=r.RAW_UVS,B=r.RAW_INDICES;for(S=new Array,E=0;E<4;++E){var N=2*E;P=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_VECTOR3),O=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_VECTOR2);p.push(P),S.push(O),O.set(F[N],F[N+1]),P.set(O.x*u*x-this._pivotX,O.y*c*x-this._pivotY,0),e.rotated?O.set((l+(1-O.y)*u)/s,(h+O.x*c)/o):O.set((l+O.x*u)/s,1-(h+O.y*c)/o)}for(E=0;E<2;++E){I=3*E,C=t.ThreeFactory.create(t.ThreeFactory.POOL_TYPE_FACE3),R=[];d.push(C),m.push(R),C.a=B[I],C.b=B[I+1],C.c=B[I+2],R[0]=S[C.a],R[1]=S[C.b],R[2]=S[C.c]}}return null!==this._material&&this._material.copy(i.material),a.material=i.material,void(this._visibleDirty=!0)}}a.visible=!1,a.position.set(0,0,a.position.z)},r.prototype._updateMesh=function(){var t=this._armature._armatureData.scale,e=this._displayFrame.deformVertices,r=this._geometryBones,a=this._geometryData,i=a.weight,n=e.length>0&&a.inheritDeform,s=this._renderDisplay,o=s.geometry,l=o.vertices;if(null!==i){var h=a.data,u=h.intArray,c=h.floatArray,f=u[a.offset+0],p=u[i.offset+1];p<0&&(p+=65536);for(var d=0,m=i.offset+2+r.length,_=p,y=0;d<f;++d){for(var g=u[m++],v=0,b=0,T=0;T<g;++T){var A=u[m++],D=r[A];if(null!==D){var x=D.globalTransformMatrix,S=c[_++],E=c[_++]*t,w=c[_++]*t;n&&(E+=e[y++],w+=e[y++]),v+=(x.a*E+x.c*w+x.tx)*S,b+=(x.b*E+x.d*w+x.ty)*S}}var M=l[d];M.set(v,b,0)}}else if(n){o.verticesNeedUpdate=!0;var P=0!==this._parent._boneData.type,O=(h=a.data,u=h.intArray,c=h.floatArray,f=u[a.offset+0],u[a.offset+2]);O<0&&(O+=65536);d=0;for(var I=2*f;d<I;d+=2){var C=c[O+d]*t+e[d],R=c[O+d+1]*t+e[d+1];M=l[d/2];if(P){x=this._parent._getGlobalTransformMatrix(C,R);M.set(x.a*C+x.c*R+x.tx,x.b*C+x.d*R+x.ty,0)}else M.set(C,R,0)}}},r.prototype._updateTransform=function(){var t=this.globalTransformMatrix,e=this._renderDisplay.matrix.elements;e[0]=t.a,e[1]=t.b,e[4]=t.c,e[5]=t.d,e[12]=t.tx,e[13]=t.ty,this._renderDisplay.matrixWorldNeedsUpdate=!0},r.prototype._identityTransform=function(){this._renderDisplay.matrix.identity()},r.RAW_UVS=[0,0,1,0,0,1,1,1],r.RAW_INDICES=[0,1,2,3,2,1],r}(t.Slot);t.ThreeSlot=e}(s||(s={})),function(t){var e=function(e){function r(t){void 0===t&&(t=null);var a=e.call(this,t)||this;return null===r._dragonBonesInstance&&(r._dragonBonesInstance=r._createDragonBones()),a._dragonBones=r._dragonBonesInstance,a}return n(r,e),r._createDragonBones=function(){var e=new t.ThreeArmatureDisplay,r=new t.DragonBones(e);return r},r.create=function(t){var e;if(e=t in r._pools?r._pools[t]:r._pools[t]=[],e.length>0)return e.pop();switch(t){case r.POOL_TYPE_VECTOR2:return new i["Vector2"];case r.POOL_TYPE_VECTOR3:return new i["Vector3"];case r.POOL_TYPE_FACE3:return new i["Face3"](0,1,2)}throw new Error},r.release=function(t,e){var a;a=e in r._pools?r._pools[e]:r._pools[e]=[],a.indexOf(t)<0&&a.push(t)},Object.defineProperty(r,"factory",{get:function(){return null===r._factory&&(r._factory=new r),r._factory},enumerable:!1,configurable:!0}),r.prototype._buildTextureAtlasData=function(e,r){if(e){e.renderTexture=r;var a=new i["MeshBasicMaterial"];a.side=i["DoubleSide"],a.transparent=!0,null!==r&&(a.map=r),e.material=a}else e=t.BaseObject.borrowObject(t.ThreeTextureAtlasData);return e},r.prototype._buildArmature=function(e){var r=t.BaseObject.borrowObject(t.Armature),a=new t.ThreeArmatureDisplay;return r.init(e.armature,a,a,this._dragonBones),r},r.prototype._buildSlot=function(e,a,n){var s=t.BaseObject.borrowObject(t.ThreeSlot),o=new i["Geometry"],l=new i["Mesh"](o,r._emptyMaterial);return s.init(a,n,l,l),s},r.prototype.buildArmatureDisplay=function(t,e,r,a){void 0===e&&(e=""),void 0===r&&(r=""),void 0===a&&(a="");var i=this.buildArmature(t,e||"",r||"",a||"");return null!==i?(this._dragonBones.clock.add(i),i.display):null},r.prototype.getTextureDisplay=function(t,e){void 0===e&&(e=null);var r=this._getTextureData(null!==e?e:"",t);if(null!==r){var a=r.parent;if(null!==a.renderTexture){var n=new i["SpriteMaterial"]({map:a.renderTexture}),s=new i["Sprite"](n);return s}}return null},Object.defineProperty(r.prototype,"soundEventManager",{get:function(){return this._dragonBones.eventManager},enumerable:!1,configurable:!0}),r.POOL_TYPE_VECTOR2="POOL_TYPE_VECTOR2",r.POOL_TYPE_VECTOR3="POOL_TYPE_VECTOR3",r.POOL_TYPE_FACE3="POOL_TYPE_FACE3",r._emptyMaterial=new i["MeshBasicMaterial"],r._pools={},r._dragonBonesInstance=null,r._factory=null,r}(t.BaseFactory);t.ThreeFactory=e}(s||(s={})),e["a"]=s}).call(this,r("dd40")(t))},"3bbe":function(t,e,r){var a=r("861d");t.exports=function(t){if(!a(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3c35":function(t,e){(function(e){t.exports=e}).call(this,{})},"3c5d":function(t,e,r){"use strict";var a=r("ebb5"),i=r("50c4"),n=r("182d"),s=r("7b0b"),o=r("d039"),l=a.aTypedArray,h=a.exportTypedArrayMethod,u=o((function(){new Int8Array(1).set({})}));h("set",(function(t){l(this);var e=n(arguments.length>1?arguments[1]:void 0,1),r=this.length,a=s(t),o=i(a.length),h=0;if(o+e>r)throw RangeError("Wrong length");while(h<o)this[e+h]=a[h++]}),u)},"3ca3":function(t,e,r){"use strict";var a=r("6547").charAt,i=r("69f3"),n=r("7dd0"),s="String Iterator",o=i.set,l=i.getterFor(s);n(String,"String",(function(t){o(this,{type:s,string:String(t),index:0})}),(function(){var t,e=l(this),r=e.string,i=e.index;return i>=r.length?{value:void 0,done:!0}:(t=a(r,i),e.index+=t.length,{value:t,done:!1})}))},"3f8c":function(t,e){t.exports={}},"3fcc":function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").map,n=r("4840"),s=a.aTypedArray,o=a.aTypedArrayConstructor,l=a.exportTypedArrayMethod;l("map",(function(t){return i(s(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(o(n(t,t.constructor)))(e)}))}))},"428f":function(t,e,r){var a=r("da84");t.exports=a},"44ad":function(t,e,r){var a=r("d039"),i=r("c6b6"),n="".split;t.exports=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?n.call(t,""):Object(t)}:Object},"44d2":function(t,e,r){var a=r("b622"),i=r("7c73"),n=r("9bf2"),s=a("unscopables"),o=Array.prototype;void 0==o[s]&&n.f(o,s,{configurable:!0,value:i(null)}),t.exports=function(t){o[s][t]=!0}},"44e7":function(t,e,r){var a=r("861d"),i=r("c6b6"),n=r("b622"),s=n("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},4840:function(t,e,r){var a=r("825a"),i=r("1c0b"),n=r("b622"),s=n("species");t.exports=function(t,e){var r,n=a(t).constructor;return void 0===n||void 0==(r=a(n)[s])?e:i(r)}},4930:function(t,e,r){var a=r("d039");t.exports=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())}))},"498a":function(t,e,r){"use strict";var a=r("23e7"),i=r("58a8").trim,n=r("c8d2");a({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"4d64":function(t,e,r){var a=r("fc6a"),i=r("50c4"),n=r("23cb"),s=function(t){return function(e,r,s){var o,l=a(e),h=i(l.length),u=n(s,h);if(t&&r!=r){while(h>u)if(o=l[u++],o!=o)return!0}else for(;h>u;u++)if((t||u in l)&&l[u]===r)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},"50c4":function(t,e,r){var a=r("a691"),i=Math.min;t.exports=function(t){return t>0?i(a(t),9007199254740991):0}},5135:function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},5319:function(t,e,r){"use strict";var a=r("d784"),i=r("825a"),n=r("50c4"),s=r("a691"),o=r("1d80"),l=r("8aa5"),h=r("0cb2"),u=r("14c3"),c=Math.max,f=Math.min,p=function(t){return void 0===t?t:String(t)};a("replace",2,(function(t,e,r,a){var d=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=a.REPLACE_KEEPS_$0,_=d?"$":"$0";return[function(r,a){var i=o(this),n=void 0==r?void 0:r[t];return void 0!==n?n.call(r,i,a):e.call(String(i),r,a)},function(t,a){if(!d&&m||"string"===typeof a&&-1===a.indexOf(_)){var o=r(e,t,this,a);if(o.done)return o.value}var y=i(t),g=String(this),v="function"===typeof a;v||(a=String(a));var b=y.global;if(b){var T=y.unicode;y.lastIndex=0}var A=[];while(1){var D=u(y,g);if(null===D)break;if(A.push(D),!b)break;var x=String(D[0]);""===x&&(y.lastIndex=l(g,n(y.lastIndex),T))}for(var S="",E=0,w=0;w<A.length;w++){D=A[w];for(var M=String(D[0]),P=c(f(s(D.index),g.length),0),O=[],I=1;I<D.length;I++)O.push(p(D[I]));var C=D.groups;if(v){var R=[M].concat(O,P,g);void 0!==C&&R.push(C);var F=String(a.apply(void 0,R))}else F=h(M,g,P,O,C,a);P>=E&&(S+=g.slice(E,P)+F,E=P+M.length)}return S+g.slice(E)}]}))},"53ca":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("a4d3"),r("e01a"),r("d28b"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}},5692:function(t,e,r){var a=r("c430"),i=r("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.3",mode:a?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,r){var a=r("d066"),i=r("241c"),n=r("7418"),s=r("825a");t.exports=a("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=n.f;return r?e.concat(r(t)):e}},5899:function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),i=r("5899"),n="["+i+"]",s=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),l=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(s,"")),2&t&&(r=r.replace(o,"")),r}};t.exports={start:l(1),end:l(2),trim:l(3)}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5cc6":function(t,e,r){var a=r("74e8");a("Uint8",(function(t){return function(e,r,a){return t(this,e,r,a)}}))},"5f96":function(t,e,r){"use strict";var a=r("ebb5"),i=a.aTypedArray,n=a.exportTypedArrayMethod,s=[].join;n("join",(function(t){return s.apply(i(this),arguments)}))},"5fda":function(e,r){e.exports=t},"60bd":function(t,e,r){"use strict";var a=r("da84"),i=r("ebb5"),n=r("e260"),s=r("b622"),o=s("iterator"),l=a.Uint8Array,h=n.values,u=n.keys,c=n.entries,f=i.aTypedArray,p=i.exportTypedArrayMethod,d=l&&l.prototype[o],m=!!d&&("values"==d.name||void 0==d.name),_=function(){return h.call(f(this))};p("entries",(function(){return c.call(f(this))})),p("keys",(function(){return u.call(f(this))})),p("values",_,!m),p(o,_,!m)},"621a":function(t,e,r){"use strict";var a=r("da84"),i=r("83ab"),n=r("a981"),s=r("9112"),o=r("e2cc"),l=r("d039"),h=r("19aa"),u=r("a691"),c=r("50c4"),f=r("0b25"),p=r("77a7"),d=r("e163"),m=r("d2bb"),_=r("241c").f,y=r("9bf2").f,g=r("81d5"),v=r("d44e"),b=r("69f3"),T=b.get,A=b.set,D="ArrayBuffer",x="DataView",S="prototype",E="Wrong length",w="Wrong index",M=a[D],P=M,O=a[x],I=O&&O[S],C=Object.prototype,R=a.RangeError,F=p.pack,B=p.unpack,N=function(t){return[255&t]},k=function(t){return[255&t,t>>8&255]},V=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},L=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},j=function(t){return F(t,23,4)},U=function(t){return F(t,52,8)},Y=function(t,e){y(t[S],e,{get:function(){return T(this)[e]}})},X=function(t,e,r,a){var i=f(r),n=T(t);if(i+e>n.byteLength)throw R(w);var s=T(n.buffer).bytes,o=i+n.byteOffset,l=s.slice(o,o+e);return a?l:l.reverse()},W=function(t,e,r,a,i,n){var s=f(r),o=T(t);if(s+e>o.byteLength)throw R(w);for(var l=T(o.buffer).bytes,h=s+o.byteOffset,u=a(+i),c=0;c<e;c++)l[h+c]=u[n?c:e-c-1]};if(n){if(!l((function(){M(1)}))||!l((function(){new M(-1)}))||l((function(){return new M,new M(1.5),new M(NaN),M.name!=D}))){P=function(t){return h(this,P),new M(f(t))};for(var G,H=P[S]=M[S],q=_(M),z=0;q.length>z;)(G=q[z++])in P||s(P,G,M[G]);H.constructor=P}m&&d(I)!==C&&m(I,C);var Z=new O(new P(2)),K=I.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||o(I,{setInt8:function(t,e){K.call(this,t,e<<24>>24)},setUint8:function(t,e){K.call(this,t,e<<24>>24)}},{unsafe:!0})}else P=function(t){h(this,P,D);var e=f(t);A(this,{bytes:g.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},O=function(t,e,r){h(this,O,x),h(t,P,x);var a=T(t).byteLength,n=u(e);if(n<0||n>a)throw R("Wrong offset");if(r=void 0===r?a-n:c(r),n+r>a)throw R(E);A(this,{buffer:t,byteLength:r,byteOffset:n}),i||(this.buffer=t,this.byteLength=r,this.byteOffset=n)},i&&(Y(P,"byteLength"),Y(O,"buffer"),Y(O,"byteLength"),Y(O,"byteOffset")),o(O[S],{getInt8:function(t){return X(this,1,t)[0]<<24>>24},getUint8:function(t){return X(this,1,t)[0]},getInt16:function(t){var e=X(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=X(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return L(X(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return L(X(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return B(X(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return B(X(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){W(this,1,t,N,e)},setUint8:function(t,e){W(this,1,t,N,e)},setInt16:function(t,e){W(this,2,t,k,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){W(this,2,t,k,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){W(this,4,t,V,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){W(this,4,t,V,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){W(this,4,t,j,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){W(this,8,t,U,e,arguments.length>2?arguments[2]:void 0)}});v(P,D),v(O,x),t.exports={ArrayBuffer:P,DataView:O}},"649e":function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").some,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("some",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},6547:function(t,e,r){var a=r("a691"),i=r("1d80"),n=function(t){return function(e,r){var n,s,o=String(i(e)),l=a(r),h=o.length;return l<0||l>=h?t?"":void 0:(n=o.charCodeAt(l),n<55296||n>56319||l+1===h||(s=o.charCodeAt(l+1))<56320||s>57343?t?o.charAt(l):n:t?o.slice(l,l+2):s-56320+(n-55296<<10)+65536)}};t.exports={codeAt:n(!1),charAt:n(!0)}},"65f0":function(t,e,r){var a=r("861d"),i=r("e8b5"),n=r("b622"),s=n("species");t.exports=function(t,e){var r;return i(t)&&(r=t.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?a(r)&&(r=r[s],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},"69f3":function(t,e,r){var a,i,n,s=r("7f9a"),o=r("da84"),l=r("861d"),h=r("9112"),u=r("5135"),c=r("c6cd"),f=r("f772"),p=r("d012"),d=o.WeakMap,m=function(t){return n(t)?i(t):a(t,{})},_=function(t){return function(e){var r;if(!l(e)||(r=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}};if(s){var y=c.state||(c.state=new d),g=y.get,v=y.has,b=y.set;a=function(t,e){return e.facade=t,b.call(y,t,e),e},i=function(t){return g.call(y,t)||{}},n=function(t){return v.call(y,t)}}else{var T=f("state");p[T]=!0,a=function(t,e){return e.facade=t,h(t,T,e),e},i=function(t){return u(t,T)?t[T]:{}},n=function(t){return u(t,T)}}t.exports={set:a,get:i,has:n,enforce:m,getterFor:_}},"6eeb":function(t,e,r){var a=r("da84"),i=r("9112"),n=r("5135"),s=r("ce4e"),o=r("8925"),l=r("69f3"),h=l.get,u=l.enforce,c=String(String).split("String");(t.exports=function(t,e,r,o){var l,h=!!o&&!!o.unsafe,f=!!o&&!!o.enumerable,p=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||n(r,"name")||i(r,"name",e),l=u(r),l.source||(l.source=c.join("string"==typeof e?e:""))),t!==a?(h?!p&&t[e]&&(f=!0):delete t[e],f?t[e]=r:i(t,e,r)):f?t[e]=r:s(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&h(this).source||o(this)}))},7156:function(t,e,r){var a=r("861d"),i=r("d2bb");t.exports=function(t,e,r){var n,s;return i&&"function"==typeof(n=e.constructor)&&n!==r&&a(s=n.prototype)&&s!==r.prototype&&i(t,s),t}},"72f7":function(t,e,r){"use strict";var a=r("ebb5").exportTypedArrayMethod,i=r("d039"),n=r("da84"),s=n.Uint8Array,o=s&&s.prototype||{},l=[].toString,h=[].join;i((function(){l.call({})}))&&(l=function(){return h.call(this)});var u=o.toString!=l;a("toString",l,u)},"735e":function(t,e,r){"use strict";var a=r("ebb5"),i=r("81d5"),n=a.aTypedArray,s=a.exportTypedArrayMethod;s("fill",(function(t){return i.apply(n(this),arguments)}))},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"746f":function(t,e,r){var a=r("428f"),i=r("5135"),n=r("e538"),s=r("9bf2").f;t.exports=function(t){var e=a.Symbol||(a.Symbol={});i(e,t)||s(e,t,{value:n.f(t)})}},"74e8":function(t,e,r){"use strict";var a=r("23e7"),i=r("da84"),n=r("83ab"),s=r("8aa7"),o=r("ebb5"),l=r("621a"),h=r("19aa"),u=r("5c6c"),c=r("9112"),f=r("50c4"),p=r("0b25"),d=r("182d"),m=r("c04e"),_=r("5135"),y=r("f5df"),g=r("861d"),v=r("7c73"),b=r("d2bb"),T=r("241c").f,A=r("a078"),D=r("b727").forEach,x=r("2626"),S=r("9bf2"),E=r("06cf"),w=r("69f3"),M=r("7156"),P=w.get,O=w.set,I=S.f,C=E.f,R=Math.round,F=i.RangeError,B=l.ArrayBuffer,N=l.DataView,k=o.NATIVE_ARRAY_BUFFER_VIEWS,V=o.TYPED_ARRAY_TAG,L=o.TypedArray,j=o.TypedArrayPrototype,U=o.aTypedArrayConstructor,Y=o.isTypedArray,X="BYTES_PER_ELEMENT",W="Wrong length",G=function(t,e){var r=0,a=e.length,i=new(U(t))(a);while(a>r)i[r]=e[r++];return i},H=function(t,e){I(t,e,{get:function(){return P(this)[e]}})},q=function(t){var e;return t instanceof B||"ArrayBuffer"==(e=y(t))||"SharedArrayBuffer"==e},z=function(t,e){return Y(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Z=function(t,e){return z(t,e=m(e,!0))?u(2,t[e]):C(t,e)},K=function(t,e,r){return!(z(t,e=m(e,!0))&&g(r)&&_(r,"value"))||_(r,"get")||_(r,"set")||r.configurable||_(r,"writable")&&!r.writable||_(r,"enumerable")&&!r.enumerable?I(t,e,r):(t[e]=r.value,t)};n?(k||(E.f=Z,S.f=K,H(j,"buffer"),H(j,"byteOffset"),H(j,"byteLength"),H(j,"length")),a({target:"Object",stat:!0,forced:!k},{getOwnPropertyDescriptor:Z,defineProperty:K}),t.exports=function(t,e,r){var n=t.match(/\d+$/)[0]/8,o=t+(r?"Clamped":"")+"Array",l="get"+t,u="set"+t,m=i[o],_=m,y=_&&_.prototype,S={},E=function(t,e){var r=P(t);return r.view[l](e*n+r.byteOffset,!0)},w=function(t,e,a){var i=P(t);r&&(a=(a=R(a))<0?0:a>255?255:255&a),i.view[u](e*n+i.byteOffset,a,!0)},C=function(t,e){I(t,e,{get:function(){return E(this,e)},set:function(t){return w(this,e,t)},enumerable:!0})};k?s&&(_=e((function(t,e,r,a){return h(t,_,o),M(function(){return g(e)?q(e)?void 0!==a?new m(e,d(r,n),a):void 0!==r?new m(e,d(r,n)):new m(e):Y(e)?G(_,e):A.call(_,e):new m(p(e))}(),t,_)})),b&&b(_,L),D(T(m),(function(t){t in _||c(_,t,m[t])})),_.prototype=y):(_=e((function(t,e,r,a){h(t,_,o);var i,s,l,u=0,c=0;if(g(e)){if(!q(e))return Y(e)?G(_,e):A.call(_,e);i=e,c=d(r,n);var m=e.byteLength;if(void 0===a){if(m%n)throw F(W);if(s=m-c,s<0)throw F(W)}else if(s=f(a)*n,s+c>m)throw F(W);l=s/n}else l=p(e),s=l*n,i=new B(s);O(t,{buffer:i,byteOffset:c,byteLength:s,length:l,view:new N(i)});while(u<l)C(t,u++)})),b&&b(_,L),y=_.prototype=v(j)),y.constructor!==_&&c(y,"constructor",_),V&&c(y,V,o),S[o]=_,a({global:!0,forced:_!=m,sham:!k},S),X in _||c(_,X,n),X in y||c(y,X,n),x(o)}):t.exports=function(){}},"77a7":function(t,e){var r=1/0,a=Math.abs,i=Math.pow,n=Math.floor,s=Math.log,o=Math.LN2,l=function(t,e,l){var h,u,c,f=new Array(l),p=8*l-e-1,d=(1<<p)-1,m=d>>1,_=23===e?i(2,-24)-i(2,-77):0,y=t<0||0===t&&1/t<0?1:0,g=0;for(t=a(t),t!=t||t===r?(u=t!=t?1:0,h=d):(h=n(s(t)/o),t*(c=i(2,-h))<1&&(h--,c*=2),t+=h+m>=1?_/c:_*i(2,1-m),t*c>=2&&(h++,c/=2),h+m>=d?(u=0,h=d):h+m>=1?(u=(t*c-1)*i(2,e),h+=m):(u=t*i(2,m-1)*i(2,e),h=0));e>=8;f[g++]=255&u,u/=256,e-=8);for(h=h<<e|u,p+=e;p>0;f[g++]=255&h,h/=256,p-=8);return f[--g]|=128*y,f},h=function(t,e){var a,n=t.length,s=8*n-e-1,o=(1<<s)-1,l=o>>1,h=s-7,u=n-1,c=t[u--],f=127&c;for(c>>=7;h>0;f=256*f+t[u],u--,h-=8);for(a=f&(1<<-h)-1,f>>=-h,h+=e;h>0;a=256*a+t[u],u--,h-=8);if(0===f)f=1-l;else{if(f===o)return a?NaN:c?-r:r;a+=i(2,e),f-=l}return(c?-1:1)*a*i(2,f-e)};t.exports={pack:l,unpack:h}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(t,e,r){var a=r("1d80");t.exports=function(t){return Object(a(t))}},"7c73":function(t,e,r){var a,i=r("825a"),n=r("37e8"),s=r("7839"),o=r("d012"),l=r("1be4"),h=r("cc12"),u=r("f772"),c=">",f="<",p="prototype",d="script",m=u("IE_PROTO"),_=function(){},y=function(t){return f+d+c+t+f+"/"+d+c},g=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){var t,e=h("iframe"),r="java"+d+":";return e.style.display="none",l.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},b=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch(e){}b=a?g(a):v();var t=s.length;while(t--)delete b[p][s[t]];return b()};o[m]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(_[p]=i(t),r=new _,_[p]=null,r[m]=t):r=b(),void 0===e?r:n(r,e)}},"7dd0":function(t,e,r){"use strict";var a=r("23e7"),i=r("9ed3"),n=r("e163"),s=r("d2bb"),o=r("d44e"),l=r("9112"),h=r("6eeb"),u=r("b622"),c=r("c430"),f=r("3f8c"),p=r("ae93"),d=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,_=u("iterator"),y="keys",g="values",v="entries",b=function(){return this};t.exports=function(t,e,r,u,p,T,A){i(r,e,u);var D,x,S,E=function(t){if(t===p&&I)return I;if(!m&&t in P)return P[t];switch(t){case y:return function(){return new r(this,t)};case g:return function(){return new r(this,t)};case v:return function(){return new r(this,t)}}return function(){return new r(this)}},w=e+" Iterator",M=!1,P=t.prototype,O=P[_]||P["@@iterator"]||p&&P[p],I=!m&&O||E(p),C="Array"==e&&P.entries||O;if(C&&(D=n(C.call(new t)),d!==Object.prototype&&D.next&&(c||n(D)===d||(s?s(D,d):"function"!=typeof D[_]&&l(D,_,b)),o(D,w,!0,!0),c&&(f[w]=b))),p==g&&O&&O.name!==g&&(M=!0,I=function(){return O.call(this)}),c&&!A||P[_]===I||l(P,_,I),f[e]=I,p)if(x={values:E(g),keys:T?I:E(y),entries:E(v)},A)for(S in x)(m||M||!(S in P))&&h(P,S,x[S]);else a({target:e,proto:!0,forced:m||M},x);return x}},"7f9a":function(t,e,r){var a=r("da84"),i=r("8925"),n=a.WeakMap;t.exports="function"===typeof n&&/native code/.test(i(n))},"81d5":function(t,e,r){"use strict";var a=r("7b0b"),i=r("23cb"),n=r("50c4");t.exports=function(t){var e=a(this),r=n(e.length),s=arguments.length,o=i(s>1?arguments[1]:void 0,r),l=s>2?arguments[2]:void 0,h=void 0===l?r:i(l,r);while(h>o)e[o++]=t;return e}},"825a":function(t,e,r){var a=r("861d");t.exports=function(t){if(!a(t))throw TypeError(String(t)+" is not an object");return t}},"82f8":function(t,e,r){"use strict";var a=r("ebb5"),i=r("4d64").includes,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("includes",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},"83ab":function(t,e,r){var a=r("d039");t.exports=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(t,e,r){"use strict";var a=r("c04e"),i=r("9bf2"),n=r("5c6c");t.exports=function(t,e,r){var s=a(e);s in t?i.f(t,s,n(0,r)):t[s]=r}},"84c3":function(t,e,r){var a=r("74e8");a("Uint16",(function(t){return function(e,r,a){return t(this,e,r,a)}}))},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8875:function(t,e,r){var a,i,n;(function(r,s){i=[],a=s,n="function"===typeof a?a.apply(e,i):a,void 0===n||(t.exports=n)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var r,a,i,n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,s=/@([^@]*):(\d+):(\d+)\s*$/gi,o=n.exec(p.stack)||s.exec(p.stack),l=o&&o[1]||!1,h=o&&o[2]||!1,u=document.location.href.replace(document.location.hash,""),c=document.getElementsByTagName("script");l===u&&(r=document.documentElement.outerHTML,a=new RegExp("(?:[^\\n]+?\\n){0,"+(h-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=r.replace(a,"$1").trim());for(var f=0;f<c.length;f++){if("interactive"===c[f].readyState)return c[f];if(c[f].src===l)return c[f];if(l===u&&c[f].innerHTML&&c[f].innerHTML.trim()===i)return c[f]}return null}}return t}))},8925:function(t,e,r){var a=r("c6cd"),i=Function.toString;"function"!=typeof a.inspectSource&&(a.inspectSource=function(t){return i.call(t)}),t.exports=a.inspectSource},"8aa5":function(t,e,r){"use strict";var a=r("6547").charAt;t.exports=function(t,e,r){return e+(r?a(t,e).length:1)}},"8aa7":function(t,e,r){var a=r("da84"),i=r("d039"),n=r("1c7e"),s=r("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,o=a.ArrayBuffer,l=a.Int8Array;t.exports=!s||!i((function(){l(1)}))||!i((function(){new l(-1)}))||!n((function(t){new l,new l(null),new l(1.5),new l(t)}),!0)||i((function(){return 1!==new l(new o(2),1,void 0).length}))},"8b09":function(t,e,r){var a=r("74e8");a("Int16",(function(t){return function(e,r,a){return t(this,e,r,a)}}))},"8bbf":function(t,r){t.exports=e},"90e3":function(t,e){var r=0,a=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+a).toString(36)}},9112:function(t,e,r){var a=r("83ab"),i=r("9bf2"),n=r("5c6c");t.exports=a?function(t,e,r){return i.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},9263:function(t,e,r){"use strict";var a=r("ad6d"),i=r("9f7f"),n=RegExp.prototype.exec,s=String.prototype.replace,o=n,l=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),h=i.UNSUPPORTED_Y||i.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],c=l||u||h;c&&(o=function(t){var e,r,i,o,c=this,f=h&&c.sticky,p=a.call(c),d=c.source,m=0,_=t;return f&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),_=String(t).slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==t[c.lastIndex-1])&&(d="(?: "+d+")",_=" "+_,m++),r=new RegExp("^(?:"+d+")",p)),u&&(r=new RegExp("^"+d+"$(?!\\s)",p)),l&&(e=c.lastIndex),i=n.call(f?r:c,_),f?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:l&&i&&(c.lastIndex=c.global?i.index+i[0].length:e),u&&i&&i.length>1&&s.call(i[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i}),t.exports=o},"94ca":function(t,e,r){var a=r("d039"),i=/#|\.prototype\./,n=function(t,e){var r=o[s(t)];return r==h||r!=l&&("function"==typeof e?a(e):!!e)},s=n.normalize=function(t){return String(t).replace(i,".").toLowerCase()},o=n.data={},l=n.NATIVE="N",h=n.POLYFILL="P";t.exports=n},"99af":function(t,e,r){"use strict";var a=r("23e7"),i=r("d039"),n=r("e8b5"),s=r("861d"),o=r("7b0b"),l=r("50c4"),h=r("8418"),u=r("65f0"),c=r("1dde"),f=r("b622"),p=r("2d00"),d=f("isConcatSpreadable"),m=9007199254740991,_="Maximum allowed index exceeded",y=p>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),g=c("concat"),v=function(t){if(!s(t))return!1;var e=t[d];return void 0!==e?!!e:n(t)},b=!y||!g;a({target:"Array",proto:!0,forced:b},{concat:function(t){var e,r,a,i,n,s=o(this),c=u(s,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(n=-1===e?s:arguments[e],v(n)){if(i=l(n.length),f+i>m)throw TypeError(_);for(r=0;r<i;r++,f++)r in n&&h(c,f,n[r])}else{if(f>=m)throw TypeError(_);h(c,f++,n)}return c.length=f,c}})},"9a8c":function(t,e,r){"use strict";var a=r("ebb5"),i=r("145e"),n=a.aTypedArray,s=a.exportTypedArrayMethod;s("copyWithin",(function(t,e){return i.call(n(this),t,e,arguments.length>2?arguments[2]:void 0)}))},"9bf2":function(t,e,r){var a=r("83ab"),i=r("0cfb"),n=r("825a"),s=r("c04e"),o=Object.defineProperty;e.f=a?o:function(t,e,r){if(n(t),e=s(e,!0),n(r),i)try{return o(t,e,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},"9ed3":function(t,e,r){"use strict";var a=r("ae93").IteratorPrototype,i=r("7c73"),n=r("5c6c"),s=r("d44e"),o=r("3f8c"),l=function(){return this};t.exports=function(t,e,r){var h=e+" Iterator";return t.prototype=i(a,{next:n(1,r)}),s(t,h,!1,!0),o[h]=l,t}},"9f7f":function(t,e,r){"use strict";var a=r("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=a((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=a((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a078:function(t,e,r){var a=r("7b0b"),i=r("50c4"),n=r("35a1"),s=r("e95a"),o=r("0366"),l=r("ebb5").aTypedArrayConstructor;t.exports=function(t){var e,r,h,u,c,f,p=a(t),d=arguments.length,m=d>1?arguments[1]:void 0,_=void 0!==m,y=n(p);if(void 0!=y&&!s(y)){c=y.call(p),f=c.next,p=[];while(!(u=f.call(c)).done)p.push(u.value)}for(_&&d>2&&(m=o(m,arguments[2],2)),r=i(p.length),h=new(l(this))(r),e=0;r>e;e++)h[e]=_?m(p[e],e):p[e];return h}},a434:function(t,e,r){"use strict";var a=r("23e7"),i=r("23cb"),n=r("a691"),s=r("50c4"),o=r("7b0b"),l=r("65f0"),h=r("8418"),u=r("1dde"),c=r("ae40"),f=u("splice"),p=c("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,m=Math.min,_=9007199254740991,y="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var r,a,u,c,f,p,g=o(this),v=s(g.length),b=i(t,v),T=arguments.length;if(0===T?r=a=0:1===T?(r=0,a=v-b):(r=T-2,a=m(d(n(e),0),v-b)),v+r-a>_)throw TypeError(y);for(u=l(g,a),c=0;c<a;c++)f=b+c,f in g&&h(u,c,g[f]);if(u.length=a,r<a){for(c=b;c<v-a;c++)f=c+a,p=c+r,f in g?g[p]=g[f]:delete g[p];for(c=v;c>v-a+r;c--)delete g[c-1]}else if(r>a)for(c=v-a;c>b;c--)f=c+a-1,p=c+r-1,f in g?g[p]=g[f]:delete g[p];for(c=0;c<r;c++)g[c+b]=arguments[c+2];return g.length=v-a+r,u}})},a4d3:function(t,e,r){"use strict";var a=r("23e7"),i=r("da84"),n=r("d066"),s=r("c430"),o=r("83ab"),l=r("4930"),h=r("fdbf"),u=r("d039"),c=r("5135"),f=r("e8b5"),p=r("861d"),d=r("825a"),m=r("7b0b"),_=r("fc6a"),y=r("c04e"),g=r("5c6c"),v=r("7c73"),b=r("df75"),T=r("241c"),A=r("057f"),D=r("7418"),x=r("06cf"),S=r("9bf2"),E=r("d1e7"),w=r("9112"),M=r("6eeb"),P=r("5692"),O=r("f772"),I=r("d012"),C=r("90e3"),R=r("b622"),F=r("e538"),B=r("746f"),N=r("d44e"),k=r("69f3"),V=r("b727").forEach,L=O("hidden"),j="Symbol",U="prototype",Y=R("toPrimitive"),X=k.set,W=k.getterFor(j),G=Object[U],H=i.Symbol,q=n("JSON","stringify"),z=x.f,Z=S.f,K=A.f,$=E.f,J=P("symbols"),Q=P("op-symbols"),tt=P("string-to-symbol-registry"),et=P("symbol-to-string-registry"),rt=P("wks"),at=i.QObject,it=!at||!at[U]||!at[U].findChild,nt=o&&u((function(){return 7!=v(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?function(t,e,r){var a=z(G,e);a&&delete G[e],Z(t,e,r),a&&t!==G&&Z(G,e,a)}:Z,st=function(t,e){var r=J[t]=v(H[U]);return X(r,{type:j,tag:t,description:e}),o||(r.description=e),r},ot=h?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},lt=function(t,e,r){t===G&&lt(Q,e,r),d(t);var a=y(e,!0);return d(r),c(J,a)?(r.enumerable?(c(t,L)&&t[L][a]&&(t[L][a]=!1),r=v(r,{enumerable:g(0,!1)})):(c(t,L)||Z(t,L,g(1,{})),t[L][a]=!0),nt(t,a,r)):Z(t,a,r)},ht=function(t,e){d(t);var r=_(e),a=b(r).concat(dt(r));return V(a,(function(e){o&&!ct.call(r,e)||lt(t,e,r[e])})),t},ut=function(t,e){return void 0===e?v(t):ht(v(t),e)},ct=function(t){var e=y(t,!0),r=$.call(this,e);return!(this===G&&c(J,e)&&!c(Q,e))&&(!(r||!c(this,e)||!c(J,e)||c(this,L)&&this[L][e])||r)},ft=function(t,e){var r=_(t),a=y(e,!0);if(r!==G||!c(J,a)||c(Q,a)){var i=z(r,a);return!i||!c(J,a)||c(r,L)&&r[L][a]||(i.enumerable=!0),i}},pt=function(t){var e=K(_(t)),r=[];return V(e,(function(t){c(J,t)||c(I,t)||r.push(t)})),r},dt=function(t){var e=t===G,r=K(e?Q:_(t)),a=[];return V(r,(function(t){!c(J,t)||e&&!c(G,t)||a.push(J[t])})),a};if(l||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=C(t),r=function(t){this===G&&r.call(Q,t),c(this,L)&&c(this[L],e)&&(this[L][e]=!1),nt(this,e,g(1,t))};return o&&it&&nt(G,e,{configurable:!0,set:r}),st(e,t)},M(H[U],"toString",(function(){return W(this).tag})),M(H,"withoutSetter",(function(t){return st(C(t),t)})),E.f=ct,S.f=lt,x.f=ft,T.f=A.f=pt,D.f=dt,F.f=function(t){return st(R(t),t)},o&&(Z(H[U],"description",{configurable:!0,get:function(){return W(this).description}}),s||M(G,"propertyIsEnumerable",ct,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:H}),V(b(rt),(function(t){B(t)})),a({target:j,stat:!0,forced:!l},{for:function(t){var e=String(t);if(c(tt,e))return tt[e];var r=H(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(c(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),a({target:"Object",stat:!0,forced:!l,sham:!o},{create:ut,defineProperty:lt,defineProperties:ht,getOwnPropertyDescriptor:ft}),a({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:pt,getOwnPropertySymbols:dt}),a({target:"Object",stat:!0,forced:u((function(){D.f(1)}))},{getOwnPropertySymbols:function(t){return D.f(m(t))}}),q){var mt=!l||u((function(){var t=H();return"[null]"!=q([t])||"{}"!=q({a:t})||"{}"!=q(Object(t))}));a({target:"JSON",stat:!0,forced:mt},{stringify:function(t,e,r){var a,i=[t],n=1;while(arguments.length>n)i.push(arguments[n++]);if(a=e,(p(e)||void 0!==t)&&!ot(t))return f(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!ot(e))return e}),i[1]=e,q.apply(null,i)}})}H[U][Y]||w(H[U],Y,H[U].valueOf),N(H,j),I[L]=!0},a640:function(t,e,r){"use strict";var a=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&a((function(){r.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var r=Math.ceil,a=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?a:r)(t)}},a975:function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").every,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("every",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},a981:function(t,e){t.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},a9e3:function(t,e,r){"use strict";var a=r("83ab"),i=r("da84"),n=r("94ca"),s=r("6eeb"),o=r("5135"),l=r("c6b6"),h=r("7156"),u=r("c04e"),c=r("d039"),f=r("7c73"),p=r("241c").f,d=r("06cf").f,m=r("9bf2").f,_=r("58a8").trim,y="Number",g=i[y],v=g.prototype,b=l(f(v))==y,T=function(t){var e,r,a,i,n,s,o,l,h=u(t,!1);if("string"==typeof h&&h.length>2)if(h=_(h),e=h.charCodeAt(0),43===e||45===e){if(r=h.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(h.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+h}for(n=h.slice(2),s=n.length,o=0;o<s;o++)if(l=n.charCodeAt(o),l<48||l>i)return NaN;return parseInt(n,a)}return+h};if(n(y,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var A,D=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof D&&(b?c((function(){v.valueOf.call(r)})):l(r)!=y)?h(new g(T(e)),r,D):T(e)},x=a?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),S=0;x.length>S;S++)o(g,A=x[S])&&!o(D,A)&&m(D,A,d(g,A));D.prototype=v,v.constructor=D,s(i,y,D)}},ac1f:function(t,e,r){"use strict";var a=r("23e7"),i=r("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,e,r){"use strict";var a=r("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae40:function(t,e,r){var a=r("83ab"),i=r("d039"),n=r("5135"),s=Object.defineProperty,o={},l=function(t){throw t};t.exports=function(t,e){if(n(o,t))return o[t];e||(e={});var r=[][t],h=!!n(e,"ACCESSORS")&&e.ACCESSORS,u=n(e,0)?e[0]:l,c=n(e,1)?e[1]:void 0;return o[t]=!!r&&!i((function(){if(h&&!a)return!0;var t={length:-1};h?s(t,1,{enumerable:!0,get:l}):t[1]=1,r.call(t,u,c)}))}},ae93:function(t,e,r){"use strict";var a,i,n,s=r("d039"),o=r("e163"),l=r("9112"),h=r("5135"),u=r("b622"),c=r("c430"),f=u("iterator"),p=!1,d=function(){return this};[].keys&&(n=[].keys(),"next"in n?(i=o(o(n)),i!==Object.prototype&&(a=i)):p=!0);var m=void 0==a||s((function(){var t={};return a[f].call(t)!==t}));m&&(a={}),c&&!m||h(a,f)||l(a,f,d),t.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:p}},b041:function(t,e,r){"use strict";var a=r("00ee"),i=r("f5df");t.exports=a?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(t,e,r){var a=r("83ab"),i=r("9bf2").f,n=Function.prototype,s=n.toString,o=/^\s*function ([^ (]*)/,l="name";a&&!(l in n)&&i(n,l,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},b39a:function(t,e,r){"use strict";var a=r("da84"),i=r("ebb5"),n=r("d039"),s=a.Int8Array,o=i.aTypedArray,l=i.exportTypedArrayMethod,h=[].toLocaleString,u=[].slice,c=!!s&&n((function(){h.call(new s(1))})),f=n((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!n((function(){s.prototype.toLocaleString.call([1,2])}));l("toLocaleString",(function(){return h.apply(c?u.call(o(this)):o(this),arguments)}),f)},b622:function(t,e,r){var a=r("da84"),i=r("5692"),n=r("5135"),s=r("90e3"),o=r("4930"),l=r("fdbf"),h=i("wks"),u=a.Symbol,c=l?u:u&&u.withoutSetter||s;t.exports=function(t){return n(h,t)||(o&&n(u,t)?h[t]=u[t]:h[t]=c("Symbol."+t)),h[t]}},b64b:function(t,e,r){var a=r("23e7"),i=r("7b0b"),n=r("df75"),s=r("d039"),o=s((function(){n(1)}));a({target:"Object",stat:!0,forced:o},{keys:function(t){return n(i(t))}})},b727:function(t,e,r){var a=r("0366"),i=r("44ad"),n=r("7b0b"),s=r("50c4"),o=r("65f0"),l=[].push,h=function(t){var e=1==t,r=2==t,h=3==t,u=4==t,c=6==t,f=7==t,p=5==t||c;return function(d,m,_,y){for(var g,v,b=n(d),T=i(b),A=a(m,_,3),D=s(T.length),x=0,S=y||o,E=e?S(d,D):r||f?S(d,0):void 0;D>x;x++)if((p||x in T)&&(g=T[x],v=A(g,x,b),t))if(e)E[x]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:l.call(E,g)}else switch(t){case 4:return!1;case 7:l.call(E,g)}return c?-1:h||u?u:E}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterOut:h(7)}},baa5:function(t,e,r){var a=r("23e7"),i=r("e58c");a({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},be8e:function(t,e,r){var a=r("f748"),i=Math.abs,n=Math.pow,s=n(2,-52),o=n(2,-23),l=n(2,127)*(2-o),h=n(2,-126),u=function(t){return t+1/s-1/s};t.exports=Math.fround||function(t){var e,r,n=i(t),c=a(t);return n<h?c*u(n/h/o)*h*o:(e=(1+o/s)*n,r=e-(e-n),r>l||r!=r?c*(1/0):c*r)}},c04e:function(t,e,r){var a=r("861d");t.exports=function(t,e){if(!a(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!a(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!a(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!a(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},c19f:function(t,e,r){"use strict";var a=r("23e7"),i=r("da84"),n=r("621a"),s=r("2626"),o="ArrayBuffer",l=n[o],h=i[o];a({global:!0,forced:h!==l},{ArrayBuffer:l}),s(o)},c1ac:function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").filter,n=r("4840"),s=a.aTypedArray,o=a.aTypedArrayConstructor,l=a.exportTypedArrayMethod;l("filter",(function(t){var e=i(s(this),t,arguments.length>1?arguments[1]:void 0),r=n(this,this.constructor),a=0,l=e.length,h=new(o(r))(l);while(l>a)h[a]=e[a++];return h}))},c430:function(t,e){t.exports=!1},c6b6:function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},c6cd:function(t,e,r){var a=r("da84"),i=r("ce4e"),n="__core-js_shared__",s=a[n]||i(n,{});t.exports=s},c8ba:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(a){"object"===typeof window&&(r=window)}t.exports=r},c8d2:function(t,e,r){var a=r("d039"),i=r("5899"),n="";t.exports=function(t){return a((function(){return!!i[t]()||n[t]()!=n||i[t].name!==t}))}},c975:function(t,e,r){"use strict";var a=r("23e7"),i=r("4d64").indexOf,n=r("a640"),s=r("ae40"),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0,h=n("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:l||!h||!u},{indexOf:function(t){return l?o.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},ca84:function(t,e,r){var a=r("5135"),i=r("fc6a"),n=r("4d64").indexOf,s=r("d012");t.exports=function(t,e){var r,o=i(t),l=0,h=[];for(r in o)!a(s,r)&&a(o,r)&&h.push(r);while(e.length>l)a(o,r=e[l++])&&(~n(h,r)||h.push(r));return h}},ca91:function(t,e,r){"use strict";var a=r("ebb5"),i=r("d58f").left,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("reduce",(function(t){return i(n(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},cc12:function(t,e,r){var a=r("da84"),i=r("861d"),n=a.document,s=i(n)&&i(n.createElement);t.exports=function(t){return s?n.createElement(t):{}}},cd26:function(t,e,r){"use strict";var a=r("ebb5"),i=a.aTypedArray,n=a.exportTypedArrayMethod,s=Math.floor;n("reverse",(function(){var t,e=this,r=i(e).length,a=s(r/2),n=0;while(n<a)t=e[n],e[n++]=e[--r],e[r]=t;return e}))},ce4e:function(t,e,r){var a=r("da84"),i=r("9112");t.exports=function(t,e){try{i(a,t,e)}catch(r){a[t]=e}return e}},cfc3:function(t,e,r){var a=r("74e8");a("Float32",(function(t){return function(e,r,a){return t(this,e,r,a)}}))},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,r){var a=r("428f"),i=r("da84"),n=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?n(a[t])||n(i[t]):a[t]&&a[t][e]||i[t]&&i[t][e]}},d139:function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").find,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("find",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},d1e7:function(t,e,r){"use strict";var a={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!a.call({1:2},1);e.f=n?function(t){var e=i(this,t);return!!e&&e.enumerable}:a},d28b:function(t,e,r){var a=r("746f");a("iterator")},d2bb:function(t,e,r){var a=r("825a"),i=r("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(r,[]),e=r instanceof Array}catch(n){}return function(r,n){return a(r),i(n),e?t.call(r,n):r.__proto__=n,r}}():void 0)},d3b7:function(t,e,r){var a=r("00ee"),i=r("6eeb"),n=r("b041");a||i(Object.prototype,"toString",n,{unsafe:!0})},d44e:function(t,e,r){var a=r("9bf2").f,i=r("5135"),n=r("b622"),s=n("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,s)&&a(t,s,{configurable:!0,value:e})}},d58f:function(t,e,r){var a=r("1c0b"),i=r("7b0b"),n=r("44ad"),s=r("50c4"),o=function(t){return function(e,r,o,l){a(r);var h=i(e),u=n(h),c=s(h.length),f=t?c-1:0,p=t?-1:1;if(o<2)while(1){if(f in u){l=u[f],f+=p;break}if(f+=p,t?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:c>f;f+=p)f in u&&(l=r(l,u[f],f,h));return l}};t.exports={left:o(!1),right:o(!0)}},d5d6:function(t,e,r){"use strict";var a=r("ebb5"),i=r("b727").forEach,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("forEach",(function(t){i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},d784:function(t,e,r){"use strict";r("ac1f");var a=r("6eeb"),i=r("d039"),n=r("b622"),s=r("9263"),o=r("9112"),l=n("species"),h=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),c=n("replace"),f=function(){return!!/./[c]&&""===/./[c]("a","$0")}(),p=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,c){var d=n(t),m=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),_=m&&!i((function(){var e=!1,r=/a/;return"split"===t&&(r={},r.constructor={},r.constructor[l]=function(){return r},r.flags="",r[d]=/./[d]),r.exec=function(){return e=!0,null},r[d](""),!e}));if(!m||!_||"replace"===t&&(!h||!u||f)||"split"===t&&!p){var y=/./[d],g=r(d,""[t],(function(t,e,r,a,i){return e.exec===s?m&&!i?{done:!0,value:y.call(e,r,a)}:{done:!0,value:t.call(r,e,a)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),v=g[0],b=g[1];a(String.prototype,t,v),a(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}c&&o(RegExp.prototype[d],"sham",!0)}},d81d:function(t,e,r){"use strict";var a=r("23e7"),i=r("b727").map,n=r("1dde"),s=r("ae40"),o=n("map"),l=s("map");a({target:"Array",proto:!0,forced:!o||!l},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},da84:function(t,e,r){(function(e){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,r("c8ba"))},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},ddb0:function(t,e,r){var a=r("da84"),i=r("fdbc"),n=r("e260"),s=r("9112"),o=r("b622"),l=o("iterator"),h=o("toStringTag"),u=n.values;for(var c in i){var f=a[c],p=f&&f.prototype;if(p){if(p[l]!==u)try{s(p,l,u)}catch(m){p[l]=u}if(p[h]||s(p,h,c),i[c])for(var d in n)if(p[d]!==n[d])try{s(p,d,n[d])}catch(m){p[d]=n[d]}}}},df75:function(t,e,r){var a=r("ca84"),i=r("7839");t.exports=Object.keys||function(t){return a(t,i)}},e01a:function(t,e,r){"use strict";var a=r("23e7"),i=r("83ab"),n=r("da84"),s=r("5135"),o=r("861d"),l=r("9bf2").f,h=r("e893"),u=n.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var c={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(c[e]=!0),e};h(f,u);var p=f.prototype=u.prototype;p.constructor=f;var d=p.toString,m="Symbol(test)"==String(u("test")),_=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=d.call(t);if(s(c,t))return"";var r=m?e.slice(7,-1):e.replace(_,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:f})}},e163:function(t,e,r){var a=r("5135"),i=r("7b0b"),n=r("f772"),s=r("e177"),o=n("IE_PROTO"),l=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=i(t),a(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},e177:function(t,e,r){var a=r("d039");t.exports=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,r){"use strict";var a=r("fc6a"),i=r("44d2"),n=r("3f8c"),s=r("69f3"),o=r("7dd0"),l="Array Iterator",h=s.set,u=s.getterFor(l);t.exports=o(Array,"Array",(function(t,e){h(this,{type:l,target:a(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,r=t.kind,a=t.index++;return!e||a>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:a,done:!1}:"values"==r?{value:e[a],done:!1}:{value:[a,e[a]],done:!1}}),"values"),n.Arguments=n.Array,i("keys"),i("values"),i("entries")},e2cc:function(t,e,r){var a=r("6eeb");t.exports=function(t,e,r){for(var i in e)a(t,i,e[i],r);return t}},e538:function(t,e,r){var a=r("b622");e.f=a},e58c:function(t,e,r){"use strict";var a=r("fc6a"),i=r("a691"),n=r("50c4"),s=r("a640"),o=r("ae40"),l=Math.min,h=[].lastIndexOf,u=!!h&&1/[1].lastIndexOf(1,-0)<0,c=s("lastIndexOf"),f=o("indexOf",{ACCESSORS:!0,1:0}),p=u||!c||!f;t.exports=p?function(t){if(u)return h.apply(this,arguments)||0;var e=a(this),r=n(e.length),s=r-1;for(arguments.length>1&&(s=l(s,i(arguments[1]))),s<0&&(s=r+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:h},e893:function(t,e,r){var a=r("5135"),i=r("56ef"),n=r("06cf"),s=r("9bf2");t.exports=function(t,e){for(var r=i(e),o=s.f,l=n.f,h=0;h<r.length;h++){var u=r[h];a(t,u)||o(t,u,l(e,u))}}},e8b5:function(t,e,r){var a=r("c6b6");t.exports=Array.isArray||function(t){return"Array"==a(t)}},e91f:function(t,e,r){"use strict";var a=r("ebb5"),i=r("4d64").indexOf,n=a.aTypedArray,s=a.exportTypedArrayMethod;s("indexOf",(function(t){return i(n(this),t,arguments.length>1?arguments[1]:void 0)}))},e95a:function(t,e,r){var a=r("b622"),i=r("3f8c"),n=a("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[n]===t)}},ebb5:function(t,e,r){"use strict";var a,i=r("a981"),n=r("83ab"),s=r("da84"),o=r("861d"),l=r("5135"),h=r("f5df"),u=r("9112"),c=r("6eeb"),f=r("9bf2").f,p=r("e163"),d=r("d2bb"),m=r("b622"),_=r("90e3"),y=s.Int8Array,g=y&&y.prototype,v=s.Uint8ClampedArray,b=v&&v.prototype,T=y&&p(y),A=g&&p(g),D=Object.prototype,x=D.isPrototypeOf,S=m("toStringTag"),E=_("TYPED_ARRAY_TAG"),w=i&&!!d&&"Opera"!==h(s.opera),M=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},O={BigInt64Array:8,BigUint64Array:8},I=function(t){if(!o(t))return!1;var e=h(t);return"DataView"===e||l(P,e)||l(O,e)},C=function(t){if(!o(t))return!1;var e=h(t);return l(P,e)||l(O,e)},R=function(t){if(C(t))return t;throw TypeError("Target is not a typed array")},F=function(t){if(d){if(x.call(T,t))return t}else for(var e in P)if(l(P,a)){var r=s[e];if(r&&(t===r||x.call(r,t)))return t}throw TypeError("Target is not a typed array constructor")},B=function(t,e,r){if(n){if(r)for(var a in P){var i=s[a];i&&l(i.prototype,t)&&delete i.prototype[t]}A[t]&&!r||c(A,t,r?e:w&&g[t]||e)}},N=function(t,e,r){var a,i;if(n){if(d){if(r)for(a in P)i=s[a],i&&l(i,t)&&delete i[t];if(T[t]&&!r)return;try{return c(T,t,r?e:w&&y[t]||e)}catch(o){}}for(a in P)i=s[a],!i||i[t]&&!r||c(i,t,e)}};for(a in P)s[a]||(w=!1);if((!w||"function"!=typeof T||T===Function.prototype)&&(T=function(){throw TypeError("Incorrect invocation")},w))for(a in P)s[a]&&d(s[a],T);if((!w||!A||A===D)&&(A=T.prototype,w))for(a in P)s[a]&&d(s[a].prototype,A);if(w&&p(b)!==A&&d(b,A),n&&!l(A,S))for(a in M=!0,f(A,S,{get:function(){return o(this)?this[E]:void 0}}),P)s[a]&&u(s[a],E,a);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:w,TYPED_ARRAY_TAG:M&&E,aTypedArray:R,aTypedArrayConstructor:F,exportTypedArrayMethod:B,exportTypedArrayStaticMethod:N,isView:I,isTypedArray:C,TypedArray:T,TypedArrayPrototype:A}},f5df:function(t,e,r){var a=r("00ee"),i=r("c6b6"),n=r("b622"),s=n("toStringTag"),o="Arguments"==i(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(r){}};t.exports=a?i:function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=l(e=Object(t),s))?r:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},f664:function(t,e,r){var a=r("23e7"),i=r("be8e");a({target:"Math",stat:!0},{fround:i})},f748:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},f772:function(t,e,r){var a=r("5692"),i=r("90e3"),n=a("keys");t.exports=function(t){return n[t]||(n[t]=i(t))}},f8cd:function(t,e,r){var a=r("a691");t.exports=function(t){var e=a(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},fb15:function(t,e,r){"use strict";if(r.r(e),r.d(e,"VglSpine",(function(){return I})),r.d(e,"VglDragonbones",(function(){return C})),"undefined"!==typeof window){var a=window.document.currentScript,i=r("8875");a=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var n=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);n&&(r.p=n[1])}r("a9e3");var s=r("5fda"),o=r("8bbf"),l=class{constructor(t,e){this.listeners=t?t.listeners:[],this.inst=e||(()=>{})}listen(t){this.listeners.includes(t)||this.listeners.push(t)}unlisten(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}emit(){this.listeners.forEach(t=>t())}};function h(t){if(t.isVector3)return t;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return new s["Vector3"](...e.map(parseFloat))}function u(t){if(t.isEuler)return t;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return new s["Euler"](...e.slice(0,3).map(parseFloat),e[3])}function c(t){if(t.isQuaternion)return t;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return new s["Quaternion"](...e.map(parseFloat))}const f=Boolean,p=String,d=(s["Color"],s["Vector2"],[String,s["Vector3"]]),m=[String,s["Euler"]],_=[String,s["Quaternion"]];s["Spherical"],s["Fog"];function y(t){return!Number.isNaN(parseFloat(t))}function g(t){return/^\s*\S+\s*$/.test(t)}function v(t){if(t instanceof s["Vector3"])return!0;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return 3===e.length&&e.every(y)}function b(t){if(t instanceof s["Euler"])return!0;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return 4===e.length&&e.slice(0,3).every(y)&&/[XYZ]{3}/.test(e[3])}function T(t){if(t instanceof s["Quaternion"])return!0;const e=Array.isArray(t)?t:t.trim().split(/\s+/);return 4===e.length&&e.every(y)}var A,D={props:{position:{type:d,validator:v},rotation:{type:m,validator:b},rotationQuaternion:{type:_,validator:T},scale:{type:d,validator:v},castShadow:f,receiveShadow:f,name:{type:p,validator:g},hidden:f},inject:{vglObject3d:{default:()=>new l},vglNamespace:{default(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},provide(){return{vglObject3d:new l(this.vglObject3d,()=>this.inst)}},computed:{inst:()=>new s["Object3D"],parent(){return this.vglObject3d.inst()}},methods:{emitAsObject3d(){this.vglNamespace.object3ds.emit(this.name,this.inst)}},beforeUnmount(){this.inst.parent&&this.inst.parent.remove(this.inst),void 0!==this.name&&(this.vglObject3d.unlisten(this.emitAsObject3d),this.vglNamespace.object3ds.delete(this.name,this.inst))},watch:{inst:{handler(t,e){e&&e.parent&&e.parent.remove(e),this.parent&&this.parent.add(t),this.position&&t.position.copy(h(this.position)),this.rotation&&t.rotation.copy(u(this.rotation)),this.rotationQuaternion&&t.quaternion.copy(c(this.rotationQuaternion)),this.scale&&t.scale.copy(h(this.scale)),Object.assign(t,{castShadow:this.castShadow,receiveShadow:this.receiveShadow,visible:!this.hidden,name:this.name}),void 0!==this.name&&this.vglNamespace.object3ds.set(this.name,t),e&&this.vglObject3d.emit()},immediate:!0},parent(t){t.add(this.inst)},name:[function(t){this.inst.name=t},{handler(t,e){void 0!==e&&(this.vglNamespace.object3ds.delete(e,this.inst),void 0===t&&this.vglObject3d.unlisten(this.emitAsObject3d)),void 0!==t&&(this.vglNamespace.object3ds.set(t,this.inst),void 0===e&&this.vglObject3d.listen(this.emitAsObject3d))},immediate:!0}],position(t){this.inst.position.copy(h(t)),this.vglObject3d.emit()},rotation(t){this.inst.rotation.copy(u(t)),this.vglObject3d.emit()},rotationQuaternion(t){this.inst.quaternion.copy(c(t)),this.vglObject3d.emit()},scale(t){this.inst.scale.copy(h(t)),this.vglObject3d.emit()},castShadow(t){this.inst.castShadow=t,this.vglObject3d.emit()},receiveShadow(t){this.inst.receiveShadow=t,this.vglObject3d.emit()},hidden(t){this.inst.visible=!t,this.vglObject3d.emit()}},render(){return this.$slots.default?Object(o["h"])("template",this.$slots.default()):void 0}},x=(r("c975"),r("e260"),r("baa5"),r("d81d"),r("a434"),r("b0c0"),r("f664"),r("b64b"),r("d3b7"),r("ac1f"),r("5319"),r("1276"),r("498a"),r("cfc3"),r("8b09"),r("5cc6"),r("84c3"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("ddb0"),function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}());(function(t){var e,r,a,i=function(){function t(t,e,r){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var a=0;a<e.length;a++)this.timelineIds[e[a].getPropertyId()]=!0;this.duration=r}return t.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},t.prototype.apply=function(t,e,r,a,i,n,s,o){if(null==t)throw new Error("skeleton cannot be null.");a&&0!=this.duration&&(r%=this.duration,e>0&&(e%=this.duration));for(var l=this.timelines,h=0,u=l.length;h<u;h++)l[h].apply(t,e,r,i,n,s,o)},t.binarySearch=function(t,e,r){void 0===r&&(r=1);var a=0,i=t.length/r-2;if(0==i)return r;var n=i>>>1;while(1){if(t[(n+1)*r]<=e?a=n+1:i=n,a==i)return(a+1)*r;n=a+i>>>1}},t.linearSearch=function(t,e,r){for(var a=0,i=t.length-r;a<=i;a+=r)if(t[a]>e)return a;return-1},t}();t.Animation=i,function(t){t[t["setup"]=0]="setup",t[t["first"]=1]="first",t[t["replace"]=2]="replace",t[t["add"]=3]="add"}(e=t.MixBlend||(t.MixBlend={})),function(t){t[t["mixIn"]=0]="mixIn",t[t["mixOut"]=1]="mixOut"}(r=t.MixDirection||(t.MixDirection={})),function(t){t[t["rotate"]=0]="rotate",t[t["translate"]=1]="translate",t[t["scale"]=2]="scale",t[t["shear"]=3]="shear",t[t["attachment"]=4]="attachment",t[t["color"]=5]="color",t[t["deform"]=6]="deform",t[t["event"]=7]="event",t[t["drawOrder"]=8]="drawOrder",t[t["ikConstraint"]=9]="ikConstraint",t[t["transformConstraint"]=10]="transformConstraint",t[t["pathConstraintPosition"]=11]="pathConstraintPosition",t[t["pathConstraintSpacing"]=12]="pathConstraintSpacing",t[t["pathConstraintMix"]=13]="pathConstraintMix",t[t["twoColor"]=14]="twoColor"}(a=t.TimelineType||(t.TimelineType={}));var n=function(){function e(r){if(r<=0)throw new Error("frameCount must be > 0: "+r);this.curves=t.Utils.newFloatArray((r-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var r=t*e.BEZIER_SIZE;if(r==this.curves.length)return e.LINEAR;var a=this.curves[r];return a==e.LINEAR?e.LINEAR:a==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,r,a,i,n){var s=.03*(2*-r+i),o=.03*(2*-a+n),l=.006*(3*(r-i)+1),h=.006*(3*(a-n)+1),u=2*s+l,c=2*o+h,f=.3*r+s+.16666667*l,p=.3*a+o+.16666667*h,d=t*e.BEZIER_SIZE,m=this.curves;m[d++]=e.BEZIER;for(var _=f,y=p,g=d+e.BEZIER_SIZE-1;d<g;d+=2)m[d]=_,m[d+1]=y,f+=u,p+=c,u+=l,c+=h,_+=f,y+=p},e.prototype.getCurvePercent=function(r,a){a=t.MathUtils.clamp(a,0,1);var i=this.curves,n=r*e.BEZIER_SIZE,s=i[n];if(s==e.LINEAR)return a;if(s==e.STEPPED)return 0;n++;for(var o=0,l=n,h=n+e.BEZIER_SIZE-1;n<h;n+=2)if(o=i[n],o>=a){var u=void 0,c=void 0;return n==l?(u=0,c=0):(u=i[n-2],c=i[n-1]),c+(i[n+1]-c)*(a-u)/(o-u)}var f=i[n-1];return f+(1-f)*(a-o)/(1-o)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=n;var s=function(r){function n(e){var a=r.call(this,e)||this;return a.frames=t.Utils.newFloatArray(e<<1),a}return x(n,r),n.prototype.getPropertyId=function(){return(a.rotate<<24)+this.boneIndex},n.prototype.setFrame=function(t,e,r){t<<=1,this.frames[t]=e,this.frames[t+n.ROTATION]=r},n.prototype.apply=function(t,r,a,s,o,l,h){var u=this.frames,c=t.bones[this.boneIndex];if(c.active)if(a<u[0])switch(l){case e.setup:return void(c.rotation=c.data.rotation);case e.first:var f=c.data.rotation-c.rotation;c.rotation+=(f-360*(16384-(16384.499999999996-f/360|0)))*o}else if(a>=u[u.length-n.ENTRIES]){var p=u[u.length+n.PREV_ROTATION];switch(l){case e.setup:c.rotation=c.data.rotation+p*o;break;case e.first:case e.replace:p+=c.data.rotation-c.rotation,p-=360*(16384-(16384.499999999996-p/360|0));case e.add:c.rotation+=p*o}}else{var d=i.binarySearch(u,a,n.ENTRIES),m=u[d+n.PREV_ROTATION],_=u[d],y=this.getCurvePercent((d>>1)-1,1-(a-_)/(u[d+n.PREV_TIME]-_)),g=u[d+n.ROTATION]-m;switch(g=m+(g-360*(16384-(16384.499999999996-g/360|0)))*y,l){case e.setup:c.rotation=c.data.rotation+(g-360*(16384-(16384.499999999996-g/360|0)))*o;break;case e.first:case e.replace:g+=c.data.rotation-c.rotation;case e.add:c.rotation+=(g-360*(16384-(16384.499999999996-g/360|0)))*o}}},n.ENTRIES=2,n.PREV_TIME=-2,n.PREV_ROTATION=-1,n.ROTATION=1,n}(n);t.RotateTimeline=s;var o=function(r){function n(e){var a=r.call(this,e)||this;return a.frames=t.Utils.newFloatArray(e*n.ENTRIES),a}return x(n,r),n.prototype.getPropertyId=function(){return(a.translate<<24)+this.boneIndex},n.prototype.setFrame=function(t,e,r,a){t*=n.ENTRIES,this.frames[t]=e,this.frames[t+n.X]=r,this.frames[t+n.Y]=a},n.prototype.apply=function(t,r,a,s,o,l,h){var u=this.frames,c=t.bones[this.boneIndex];if(c.active)if(a<u[0])switch(l){case e.setup:return c.x=c.data.x,void(c.y=c.data.y);case e.first:c.x+=(c.data.x-c.x)*o,c.y+=(c.data.y-c.y)*o}else{var f=0,p=0;if(a>=u[u.length-n.ENTRIES])f=u[u.length+n.PREV_X],p=u[u.length+n.PREV_Y];else{var d=i.binarySearch(u,a,n.ENTRIES);f=u[d+n.PREV_X],p=u[d+n.PREV_Y];var m=u[d],_=this.getCurvePercent(d/n.ENTRIES-1,1-(a-m)/(u[d+n.PREV_TIME]-m));f+=(u[d+n.X]-f)*_,p+=(u[d+n.Y]-p)*_}switch(l){case e.setup:c.x=c.data.x+f*o,c.y=c.data.y+p*o;break;case e.first:case e.replace:c.x+=(c.data.x+f-c.x)*o,c.y+=(c.data.y+p-c.y)*o;break;case e.add:c.x+=f*o,c.y+=p*o}}},n.ENTRIES=3,n.PREV_TIME=-3,n.PREV_X=-2,n.PREV_Y=-1,n.X=1,n.Y=2,n}(n);t.TranslateTimeline=o;var l=function(n){function s(t){return n.call(this,t)||this}return x(s,n),s.prototype.getPropertyId=function(){return(a.scale<<24)+this.boneIndex},s.prototype.apply=function(a,n,o,l,h,u,c){var f=this.frames,p=a.bones[this.boneIndex];if(p.active)if(o<f[0])switch(u){case e.setup:return p.scaleX=p.data.scaleX,void(p.scaleY=p.data.scaleY);case e.first:p.scaleX+=(p.data.scaleX-p.scaleX)*h,p.scaleY+=(p.data.scaleY-p.scaleY)*h}else{var d=0,m=0;if(o>=f[f.length-s.ENTRIES])d=f[f.length+s.PREV_X]*p.data.scaleX,m=f[f.length+s.PREV_Y]*p.data.scaleY;else{var _=i.binarySearch(f,o,s.ENTRIES);d=f[_+s.PREV_X],m=f[_+s.PREV_Y];var y=f[_],g=this.getCurvePercent(_/s.ENTRIES-1,1-(o-y)/(f[_+s.PREV_TIME]-y));d=(d+(f[_+s.X]-d)*g)*p.data.scaleX,m=(m+(f[_+s.Y]-m)*g)*p.data.scaleY}if(1==h)u==e.add?(p.scaleX+=d-p.data.scaleX,p.scaleY+=m-p.data.scaleY):(p.scaleX=d,p.scaleY=m);else{var v=0,b=0;if(c==r.mixOut)switch(u){case e.setup:v=p.data.scaleX,b=p.data.scaleY,p.scaleX=v+(Math.abs(d)*t.MathUtils.signum(v)-v)*h,p.scaleY=b+(Math.abs(m)*t.MathUtils.signum(b)-b)*h;break;case e.first:case e.replace:v=p.scaleX,b=p.scaleY,p.scaleX=v+(Math.abs(d)*t.MathUtils.signum(v)-v)*h,p.scaleY=b+(Math.abs(m)*t.MathUtils.signum(b)-b)*h;break;case e.add:v=p.scaleX,b=p.scaleY,p.scaleX=v+(Math.abs(d)*t.MathUtils.signum(v)-p.data.scaleX)*h,p.scaleY=b+(Math.abs(m)*t.MathUtils.signum(b)-p.data.scaleY)*h}else switch(u){case e.setup:v=Math.abs(p.data.scaleX)*t.MathUtils.signum(d),b=Math.abs(p.data.scaleY)*t.MathUtils.signum(m),p.scaleX=v+(d-v)*h,p.scaleY=b+(m-b)*h;break;case e.first:case e.replace:v=Math.abs(p.scaleX)*t.MathUtils.signum(d),b=Math.abs(p.scaleY)*t.MathUtils.signum(m),p.scaleX=v+(d-v)*h,p.scaleY=b+(m-b)*h;break;case e.add:v=t.MathUtils.signum(d),b=t.MathUtils.signum(m),p.scaleX=Math.abs(p.scaleX)*v+(d-Math.abs(p.data.scaleX)*v)*h,p.scaleY=Math.abs(p.scaleY)*b+(m-Math.abs(p.data.scaleY)*b)*h}}}},s}(o);t.ScaleTimeline=l;var h=function(t){function r(e){return t.call(this,e)||this}return x(r,t),r.prototype.getPropertyId=function(){return(a.shear<<24)+this.boneIndex},r.prototype.apply=function(t,a,n,s,o,l,h){var u=this.frames,c=t.bones[this.boneIndex];if(c.active)if(n<u[0])switch(l){case e.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case e.first:c.shearX+=(c.data.shearX-c.shearX)*o,c.shearY+=(c.data.shearY-c.shearY)*o}else{var f=0,p=0;if(n>=u[u.length-r.ENTRIES])f=u[u.length+r.PREV_X],p=u[u.length+r.PREV_Y];else{var d=i.binarySearch(u,n,r.ENTRIES);f=u[d+r.PREV_X],p=u[d+r.PREV_Y];var m=u[d],_=this.getCurvePercent(d/r.ENTRIES-1,1-(n-m)/(u[d+r.PREV_TIME]-m));f+=(u[d+r.X]-f)*_,p+=(u[d+r.Y]-p)*_}switch(l){case e.setup:c.shearX=c.data.shearX+f*o,c.shearY=c.data.shearY+p*o;break;case e.first:case e.replace:c.shearX+=(c.data.shearX+f-c.shearX)*o,c.shearY+=(c.data.shearY+p-c.shearY)*o;break;case e.add:c.shearX+=f*o,c.shearY+=p*o}}},r}(o);t.ShearTimeline=h;var u=function(r){function n(e){var a=r.call(this,e)||this;return a.frames=t.Utils.newFloatArray(e*n.ENTRIES),a}return x(n,r),n.prototype.getPropertyId=function(){return(a.color<<24)+this.slotIndex},n.prototype.setFrame=function(t,e,r,a,i,s){t*=n.ENTRIES,this.frames[t]=e,this.frames[t+n.R]=r,this.frames[t+n.G]=a,this.frames[t+n.B]=i,this.frames[t+n.A]=s},n.prototype.apply=function(t,r,a,s,o,l,h){var u=t.slots[this.slotIndex];if(u.bone.active){var c=this.frames;if(a<c[0])switch(l){case e.setup:return void u.color.setFromColor(u.data.color);case e.first:var f=u.color,p=u.data.color;f.add((p.r-f.r)*o,(p.g-f.g)*o,(p.b-f.b)*o,(p.a-f.a)*o)}else{var d=0,m=0,_=0,y=0;if(a>=c[c.length-n.ENTRIES]){var g=c.length;d=c[g+n.PREV_R],m=c[g+n.PREV_G],_=c[g+n.PREV_B],y=c[g+n.PREV_A]}else{var v=i.binarySearch(c,a,n.ENTRIES);d=c[v+n.PREV_R],m=c[v+n.PREV_G],_=c[v+n.PREV_B],y=c[v+n.PREV_A];var b=c[v],T=this.getCurvePercent(v/n.ENTRIES-1,1-(a-b)/(c[v+n.PREV_TIME]-b));d+=(c[v+n.R]-d)*T,m+=(c[v+n.G]-m)*T,_+=(c[v+n.B]-_)*T,y+=(c[v+n.A]-y)*T}if(1==o)u.color.set(d,m,_,y);else{f=u.color;l==e.setup&&f.setFromColor(u.data.color),f.add((d-f.r)*o,(m-f.g)*o,(_-f.b)*o,(y-f.a)*o)}}}},n.ENTRIES=5,n.PREV_TIME=-5,n.PREV_R=-4,n.PREV_G=-3,n.PREV_B=-2,n.PREV_A=-1,n.R=1,n.G=2,n.B=3,n.A=4,n}(n);t.ColorTimeline=u;var c=function(r){function n(e){var a=r.call(this,e)||this;return a.frames=t.Utils.newFloatArray(e*n.ENTRIES),a}return x(n,r),n.prototype.getPropertyId=function(){return(a.twoColor<<24)+this.slotIndex},n.prototype.setFrame=function(t,e,r,a,i,s,o,l,h){t*=n.ENTRIES,this.frames[t]=e,this.frames[t+n.R]=r,this.frames[t+n.G]=a,this.frames[t+n.B]=i,this.frames[t+n.A]=s,this.frames[t+n.R2]=o,this.frames[t+n.G2]=l,this.frames[t+n.B2]=h},n.prototype.apply=function(t,r,a,s,o,l,h){var u=t.slots[this.slotIndex];if(u.bone.active){var c=this.frames;if(a<c[0])switch(l){case e.setup:return u.color.setFromColor(u.data.color),void u.darkColor.setFromColor(u.data.darkColor);case e.first:var f=u.color,p=u.darkColor,d=u.data.color,m=u.data.darkColor;f.add((d.r-f.r)*o,(d.g-f.g)*o,(d.b-f.b)*o,(d.a-f.a)*o),p.add((m.r-p.r)*o,(m.g-p.g)*o,(m.b-p.b)*o,0)}else{var _=0,y=0,g=0,v=0,b=0,T=0,A=0;if(a>=c[c.length-n.ENTRIES]){var D=c.length;_=c[D+n.PREV_R],y=c[D+n.PREV_G],g=c[D+n.PREV_B],v=c[D+n.PREV_A],b=c[D+n.PREV_R2],T=c[D+n.PREV_G2],A=c[D+n.PREV_B2]}else{var x=i.binarySearch(c,a,n.ENTRIES);_=c[x+n.PREV_R],y=c[x+n.PREV_G],g=c[x+n.PREV_B],v=c[x+n.PREV_A],b=c[x+n.PREV_R2],T=c[x+n.PREV_G2],A=c[x+n.PREV_B2];var S=c[x],E=this.getCurvePercent(x/n.ENTRIES-1,1-(a-S)/(c[x+n.PREV_TIME]-S));_+=(c[x+n.R]-_)*E,y+=(c[x+n.G]-y)*E,g+=(c[x+n.B]-g)*E,v+=(c[x+n.A]-v)*E,b+=(c[x+n.R2]-b)*E,T+=(c[x+n.G2]-T)*E,A+=(c[x+n.B2]-A)*E}if(1==o)u.color.set(_,y,g,v),u.darkColor.set(b,T,A,1);else{f=u.color,p=u.darkColor;l==e.setup&&(f.setFromColor(u.data.color),p.setFromColor(u.data.darkColor)),f.add((_-f.r)*o,(y-f.g)*o,(g-f.b)*o,(v-f.a)*o),p.add((b-p.r)*o,(T-p.g)*o,(A-p.b)*o,0)}}}},n.ENTRIES=8,n.PREV_TIME=-8,n.PREV_R=-7,n.PREV_G=-6,n.PREV_B=-5,n.PREV_A=-4,n.PREV_R2=-3,n.PREV_G2=-2,n.PREV_B2=-1,n.R=1,n.G=2,n.B=3,n.A=4,n.R2=5,n.G2=6,n.B2=7,n}(n);t.TwoColorTimeline=c;var f=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return n.prototype.getPropertyId=function(){return(a.attachment<<24)+this.slotIndex},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r},n.prototype.apply=function(t,a,n,s,o,l,h){var u=t.slots[this.slotIndex];if(u.bone.active)if(h!=r.mixOut){var c=this.frames;if(n<c[0])l!=e.setup&&l!=e.first||this.setAttachment(t,u,u.data.attachmentName);else{var f=0;f=n>=c[c.length-1]?c.length-1:i.binarySearch(c,n,1)-1;var p=this.attachmentNames[f];t.slots[this.slotIndex].setAttachment(null==p?null:t.getAttachment(this.slotIndex,p))}}else l==e.setup&&this.setAttachment(t,u,u.data.attachmentName)},n.prototype.setAttachment=function(t,e,r){e.attachment=null==r?null:t.getAttachment(this.slotIndex,r)},n}();t.AttachmentTimeline=f;var p=null,d=function(r){function n(e){var a=r.call(this,e)||this;return a.frames=t.Utils.newFloatArray(e),a.frameVertices=new Array(e),null==p&&(p=t.Utils.newFloatArray(64)),a}return x(n,r),n.prototype.getPropertyId=function(){return(a.deform<<27)+ +this.attachment.id+this.slotIndex},n.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.frameVertices[t]=r},n.prototype.apply=function(r,a,n,s,o,l,h){var u=r.slots[this.slotIndex];if(u.bone.active){var c=u.getAttachment();if(c instanceof t.VertexAttachment&&c.deformAttachment==this.attachment){var f=u.deform;0==f.length&&(l=e.setup);var p=this.frameVertices,d=p[0].length,m=this.frames;if(n<m[0]){var _=c;switch(l){case e.setup:return void(f.length=0);case e.first:if(1==o){f.length=0;break}var y=t.Utils.setArraySize(f,d);if(null==_.bones)for(var g=_.vertices,v=0;v<d;v++)y[v]+=(g[v]-y[v])*o;else{o=1-o;for(v=0;v<d;v++)y[v]*=o}}}else{var b=t.Utils.setArraySize(f,d);if(n>=m[m.length-1]){var T=p[m.length-1];if(1==o)if(l==e.add){_=c;if(null==_.bones){g=_.vertices;for(var A=0;A<d;A++)b[A]+=T[A]-g[A]}else for(var D=0;D<d;D++)b[D]+=T[D]}else t.Utils.arrayCopy(T,0,b,0,d);else switch(l){case e.setup:var x=c;if(null==x.bones){g=x.vertices;for(var S=0;S<d;S++){var E=g[S];b[S]=E+(T[S]-E)*o}}else for(var w=0;w<d;w++)b[w]=T[w]*o;break;case e.first:case e.replace:for(var M=0;M<d;M++)b[M]+=(T[M]-b[M])*o;break;case e.add:_=c;if(null==_.bones){g=_.vertices;for(var P=0;P<d;P++)b[P]+=(T[P]-g[P])*o}else for(var O=0;O<d;O++)b[O]+=T[O]*o}}else{var I=i.binarySearch(m,n),C=p[I-1],R=p[I],F=m[I],B=this.getCurvePercent(I-1,1-(n-F)/(m[I-1]-F));if(1==o)if(l==e.add){_=c;if(null==_.bones){g=_.vertices;for(var N=0;N<d;N++){var k=C[N];b[N]+=k+(R[N]-k)*B-g[N]}}else for(var V=0;V<d;V++){k=C[V];b[V]+=k+(R[V]-k)*B}}else for(var L=0;L<d;L++){k=C[L];b[L]=k+(R[L]-k)*B}else switch(l){case e.setup:var j=c;if(null==j.bones){g=j.vertices;for(var U=0;U<d;U++){k=C[U],E=g[U];b[U]=E+(k+(R[U]-k)*B-E)*o}}else for(var Y=0;Y<d;Y++){k=C[Y];b[Y]=(k+(R[Y]-k)*B)*o}break;case e.first:case e.replace:for(var X=0;X<d;X++){k=C[X];b[X]+=(k+(R[X]-k)*B-b[X])*o}break;case e.add:_=c;if(null==_.bones){g=_.vertices;for(var W=0;W<d;W++){k=C[W];b[W]+=(k+(R[W]-k)*B-g[W])*o}}else for(var G=0;G<d;G++){k=C[G];b[G]+=(k+(R[G]-k)*B)*o}}}}}}},n}(n);t.DeformTimeline=d;var m=function(){function e(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return e.prototype.getPropertyId=function(){return a.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,r,a,n,s,o){if(null!=a){var l=this.frames,h=this.frames.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,a,n,s,o),e=-1;else if(e>=l[h-1])return;if(!(r<l[0])){var u=0;if(e<l[0])u=0;else{u=i.binarySearch(l,e);var c=l[u];while(u>0){if(l[u-1]!=c)break;u--}}for(;u<h&&r>=l[u];u++)a.push(this.events[u])}}},e}();t.EventTimeline=m;var _=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return n.prototype.getPropertyId=function(){return a.drawOrder<<24},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.drawOrders[t]=r},n.prototype.apply=function(a,n,s,o,l,h,u){var c=a.drawOrder,f=a.slots;if(u!=r.mixOut){var p=this.frames;if(s<p[0])h!=e.setup&&h!=e.first||t.Utils.arrayCopy(a.slots,0,a.drawOrder,0,a.slots.length);else{var d=0;d=s>=p[p.length-1]?p.length-1:i.binarySearch(p,s)-1;var m=this.drawOrders[d];if(null==m)t.Utils.arrayCopy(f,0,c,0,f.length);else for(var _=0,y=m.length;_<y;_++)c[_]=f[m[_]]}}else h==e.setup&&t.Utils.arrayCopy(a.slots,0,a.drawOrder,0,a.slots.length)},n}();t.DrawOrderTimeline=_;var y=function(n){function s(e){var r=n.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e*s.ENTRIES),r}return x(s,n),s.prototype.getPropertyId=function(){return(a.ikConstraint<<24)+this.ikConstraintIndex},s.prototype.setFrame=function(t,e,r,a,i,n,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.MIX]=r,this.frames[t+s.SOFTNESS]=a,this.frames[t+s.BEND_DIRECTION]=i,this.frames[t+s.COMPRESS]=n?1:0,this.frames[t+s.STRETCH]=o?1:0},s.prototype.apply=function(t,a,n,o,l,h,u){var c=this.frames,f=t.ikConstraints[this.ikConstraintIndex];if(f.active)if(n<c[0])switch(h){case e.setup:return f.mix=f.data.mix,f.softness=f.data.softness,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,void(f.stretch=f.data.stretch);case e.first:f.mix+=(f.data.mix-f.mix)*l,f.softness+=(f.data.softness-f.softness)*l,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch}else if(n>=c[c.length-s.ENTRIES])h==e.setup?(f.mix=f.data.mix+(c[c.length+s.PREV_MIX]-f.data.mix)*l,f.softness=f.data.softness+(c[c.length+s.PREV_SOFTNESS]-f.data.softness)*l,u==r.mixOut?(f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch):(f.bendDirection=c[c.length+s.PREV_BEND_DIRECTION],f.compress=0!=c[c.length+s.PREV_COMPRESS],f.stretch=0!=c[c.length+s.PREV_STRETCH])):(f.mix+=(c[c.length+s.PREV_MIX]-f.mix)*l,f.softness+=(c[c.length+s.PREV_SOFTNESS]-f.softness)*l,u==r.mixIn&&(f.bendDirection=c[c.length+s.PREV_BEND_DIRECTION],f.compress=0!=c[c.length+s.PREV_COMPRESS],f.stretch=0!=c[c.length+s.PREV_STRETCH]));else{var p=i.binarySearch(c,n,s.ENTRIES),d=c[p+s.PREV_MIX],m=c[p+s.PREV_SOFTNESS],_=c[p],y=this.getCurvePercent(p/s.ENTRIES-1,1-(n-_)/(c[p+s.PREV_TIME]-_));h==e.setup?(f.mix=f.data.mix+(d+(c[p+s.MIX]-d)*y-f.data.mix)*l,f.softness=f.data.softness+(m+(c[p+s.SOFTNESS]-m)*y-f.data.softness)*l,u==r.mixOut?(f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch):(f.bendDirection=c[p+s.PREV_BEND_DIRECTION],f.compress=0!=c[p+s.PREV_COMPRESS],f.stretch=0!=c[p+s.PREV_STRETCH])):(f.mix+=(d+(c[p+s.MIX]-d)*y-f.mix)*l,f.softness+=(m+(c[p+s.SOFTNESS]-m)*y-f.softness)*l,u==r.mixIn&&(f.bendDirection=c[p+s.PREV_BEND_DIRECTION],f.compress=0!=c[p+s.PREV_COMPRESS],f.stretch=0!=c[p+s.PREV_STRETCH]))}},s.ENTRIES=6,s.PREV_TIME=-6,s.PREV_MIX=-5,s.PREV_SOFTNESS=-4,s.PREV_BEND_DIRECTION=-3,s.PREV_COMPRESS=-2,s.PREV_STRETCH=-1,s.MIX=1,s.SOFTNESS=2,s.BEND_DIRECTION=3,s.COMPRESS=4,s.STRETCH=5,s}(n);t.IkConstraintTimeline=y;var g=function(r){function n(e){var a=r.call(this,e)||this;return a.frames=t.Utils.newFloatArray(e*n.ENTRIES),a}return x(n,r),n.prototype.getPropertyId=function(){return(a.transformConstraint<<24)+this.transformConstraintIndex},n.prototype.setFrame=function(t,e,r,a,i,s){t*=n.ENTRIES,this.frames[t]=e,this.frames[t+n.ROTATE]=r,this.frames[t+n.TRANSLATE]=a,this.frames[t+n.SCALE]=i,this.frames[t+n.SHEAR]=s},n.prototype.apply=function(t,r,a,s,o,l,h){var u=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(c.active)if(a<u[0]){var f=c.data;switch(l){case e.setup:return c.rotateMix=f.rotateMix,c.translateMix=f.translateMix,c.scaleMix=f.scaleMix,void(c.shearMix=f.shearMix);case e.first:c.rotateMix+=(f.rotateMix-c.rotateMix)*o,c.translateMix+=(f.translateMix-c.translateMix)*o,c.scaleMix+=(f.scaleMix-c.scaleMix)*o,c.shearMix+=(f.shearMix-c.shearMix)*o}}else{var p=0,d=0,m=0,_=0;if(a>=u[u.length-n.ENTRIES]){var y=u.length;p=u[y+n.PREV_ROTATE],d=u[y+n.PREV_TRANSLATE],m=u[y+n.PREV_SCALE],_=u[y+n.PREV_SHEAR]}else{var g=i.binarySearch(u,a,n.ENTRIES);p=u[g+n.PREV_ROTATE],d=u[g+n.PREV_TRANSLATE],m=u[g+n.PREV_SCALE],_=u[g+n.PREV_SHEAR];var v=u[g],b=this.getCurvePercent(g/n.ENTRIES-1,1-(a-v)/(u[g+n.PREV_TIME]-v));p+=(u[g+n.ROTATE]-p)*b,d+=(u[g+n.TRANSLATE]-d)*b,m+=(u[g+n.SCALE]-m)*b,_+=(u[g+n.SHEAR]-_)*b}if(l==e.setup){f=c.data;c.rotateMix=f.rotateMix+(p-f.rotateMix)*o,c.translateMix=f.translateMix+(d-f.translateMix)*o,c.scaleMix=f.scaleMix+(m-f.scaleMix)*o,c.shearMix=f.shearMix+(_-f.shearMix)*o}else c.rotateMix+=(p-c.rotateMix)*o,c.translateMix+=(d-c.translateMix)*o,c.scaleMix+=(m-c.scaleMix)*o,c.shearMix+=(_-c.shearMix)*o}},n.ENTRIES=5,n.PREV_TIME=-5,n.PREV_ROTATE=-4,n.PREV_TRANSLATE=-3,n.PREV_SCALE=-2,n.PREV_SHEAR=-1,n.ROTATE=1,n.TRANSLATE=2,n.SCALE=3,n.SHEAR=4,n}(n);t.TransformConstraintTimeline=g;var v=function(r){function n(e){var a=r.call(this,e)||this;return a.frames=t.Utils.newFloatArray(e*n.ENTRIES),a}return x(n,r),n.prototype.getPropertyId=function(){return(a.pathConstraintPosition<<24)+this.pathConstraintIndex},n.prototype.setFrame=function(t,e,r){t*=n.ENTRIES,this.frames[t]=e,this.frames[t+n.VALUE]=r},n.prototype.apply=function(t,r,a,s,o,l,h){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(a<u[0])switch(l){case e.setup:return void(c.position=c.data.position);case e.first:c.position+=(c.data.position-c.position)*o}else{var f=0;if(a>=u[u.length-n.ENTRIES])f=u[u.length+n.PREV_VALUE];else{var p=i.binarySearch(u,a,n.ENTRIES);f=u[p+n.PREV_VALUE];var d=u[p],m=this.getCurvePercent(p/n.ENTRIES-1,1-(a-d)/(u[p+n.PREV_TIME]-d));f+=(u[p+n.VALUE]-f)*m}l==e.setup?c.position=c.data.position+(f-c.data.position)*o:c.position+=(f-c.position)*o}},n.ENTRIES=2,n.PREV_TIME=-2,n.PREV_VALUE=-1,n.VALUE=1,n}(n);t.PathConstraintPositionTimeline=v;var b=function(t){function r(e){return t.call(this,e)||this}return x(r,t),r.prototype.getPropertyId=function(){return(a.pathConstraintSpacing<<24)+this.pathConstraintIndex},r.prototype.apply=function(t,a,n,s,o,l,h){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(n<u[0])switch(l){case e.setup:return void(c.spacing=c.data.spacing);case e.first:c.spacing+=(c.data.spacing-c.spacing)*o}else{var f=0;if(n>=u[u.length-r.ENTRIES])f=u[u.length+r.PREV_VALUE];else{var p=i.binarySearch(u,n,r.ENTRIES);f=u[p+r.PREV_VALUE];var d=u[p],m=this.getCurvePercent(p/r.ENTRIES-1,1-(n-d)/(u[p+r.PREV_TIME]-d));f+=(u[p+r.VALUE]-f)*m}l==e.setup?c.spacing=c.data.spacing+(f-c.data.spacing)*o:c.spacing+=(f-c.spacing)*o}},r}(v);t.PathConstraintSpacingTimeline=b;var T=function(r){function n(e){var a=r.call(this,e)||this;return a.frames=t.Utils.newFloatArray(e*n.ENTRIES),a}return x(n,r),n.prototype.getPropertyId=function(){return(a.pathConstraintMix<<24)+this.pathConstraintIndex},n.prototype.setFrame=function(t,e,r,a){t*=n.ENTRIES,this.frames[t]=e,this.frames[t+n.ROTATE]=r,this.frames[t+n.TRANSLATE]=a},n.prototype.apply=function(t,r,a,s,o,l,h){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(a<u[0])switch(l){case e.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case e.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*o,c.translateMix+=(c.data.translateMix-c.translateMix)*o}else{var f=0,p=0;if(a>=u[u.length-n.ENTRIES])f=u[u.length+n.PREV_ROTATE],p=u[u.length+n.PREV_TRANSLATE];else{var d=i.binarySearch(u,a,n.ENTRIES);f=u[d+n.PREV_ROTATE],p=u[d+n.PREV_TRANSLATE];var m=u[d],_=this.getCurvePercent(d/n.ENTRIES-1,1-(a-m)/(u[d+n.PREV_TIME]-m));f+=(u[d+n.ROTATE]-f)*_,p+=(u[d+n.TRANSLATE]-p)*_}l==e.setup?(c.rotateMix=c.data.rotateMix+(f-c.data.rotateMix)*o,c.translateMix=c.data.translateMix+(p-c.data.translateMix)*o):(c.rotateMix+=(f-c.rotateMix)*o,c.translateMix+=(p-c.translateMix)*o)}},n.ENTRIES=3,n.PREV_TIME=-3,n.PREV_ROTATE=-2,n.PREV_TRANSLATE=-1,n.ROTATE=1,n.TRANSLATE=2,n}(n);t.PathConstraintMixTimeline=T})(A||(A={})),function(t){var e=function(){function e(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new i(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new r})),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,r=0,a=e.length;r<a;r++){var i=e[r];if(null!=i){i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;var n=t*i.timeScale;if(i.delay>0){if(i.delay-=n,i.delay>0)continue;n=-i.delay,i.delay=0}var s=i.next;if(null!=s){var o=i.trackLast-s.delay;if(o>=0){s.delay=0,s.trackTime+=0==i.timeScale?0:(o/i.timeScale+t)*s.timeScale,i.trackTime+=n,this.setCurrent(r,s,!0);while(null!=s.mixingFrom)s.mixTime+=t,s=s.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&null==i.mixingFrom){e[r]=null,this.queue.end(i),this.disposeNext(i);continue}if(null!=i.mixingFrom&&this.updateMixingFrom(i,t)){var l=i.mixingFrom;i.mixingFrom=null,null!=l&&(l.mixingTo=null);while(null!=l)this.queue.end(l),l=l.mixingFrom}i.trackTime+=n}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var r=t.mixingFrom;if(null==r)return!0;var a=this.updateMixingFrom(r,e);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=r.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=r.mixingFrom,null!=r.mixingFrom&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),a):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)},e.prototype.apply=function(r){if(null==r)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var a=this.events,i=this.tracks,n=!1,s=0,o=i.length;s<o;s++){var l=i[s];if(!(null==l||l.delay>0)){n=!0;var h=0==s?t.MixBlend.first:l.mixBlend,u=l.alpha;null!=l.mixingFrom?u*=this.applyMixingFrom(l,r,h):l.trackTime>=l.trackEnd&&null==l.next&&(u=0);var c=l.animationLast,f=l.getAnimationTime(),p=l.animation.timelines.length,d=l.animation.timelines;if(0==s&&1==u||h==t.MixBlend.add)for(var m=0;m<p;m++){t.Utils.webkit602BugfixHelper(u,h);var _=d[m];_ instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(_,r,f,h,!0):_.apply(r,c,f,a,u,h,t.MixDirection.mixIn)}else{var y=l.timelineMode,g=0==l.timelinesRotation.length;g&&t.Utils.setArraySize(l.timelinesRotation,p<<1,null);var v=l.timelinesRotation;for(m=0;m<p;m++){var b=d[m],T=y[m]==e.SUBSEQUENT?h:t.MixBlend.setup;b instanceof t.RotateTimeline?this.applyRotateTimeline(b,r,f,u,T,v,m<<1,g):b instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(b,r,f,h,!0):(t.Utils.webkit602BugfixHelper(u,h),b.apply(r,c,f,a,u,T,t.MixDirection.mixIn))}}this.queueEvents(l,f),a.length=0,l.nextAnimationLast=f,l.nextTrackLast=l.trackTime}}for(var A=this.unkeyedState+e.SETUP,D=r.slots,x=0,S=r.slots.length;x<S;x++){var E=D[x];if(E.attachmentState==A){var w=E.data.attachmentName;E.attachment=null==w?null:r.getAttachment(E.data.index,w)}}return this.unkeyedState+=2,this.queue.drain(),n},e.prototype.applyMixingFrom=function(r,a,i){var n=r.mixingFrom;null!=n.mixingFrom&&this.applyMixingFrom(n,a,i);var s=0;0==r.mixDuration?(s=1,i==t.MixBlend.first&&(i=t.MixBlend.setup)):(s=r.mixTime/r.mixDuration,s>1&&(s=1),i!=t.MixBlend.first&&(i=n.mixBlend));var o=s<n.eventThreshold?this.events:null,l=s<n.attachmentThreshold,h=s<n.drawOrderThreshold,u=n.animationLast,c=n.getAnimationTime(),f=n.animation.timelines.length,p=n.animation.timelines,d=n.alpha*r.interruptAlpha,m=d*(1-s);if(i==t.MixBlend.add)for(var _=0;_<f;_++)p[_].apply(a,u,c,o,m,i,t.MixDirection.mixOut);else{var y=n.timelineMode,g=n.timelineHoldMix,v=0==n.timelinesRotation.length;v&&t.Utils.setArraySize(n.timelinesRotation,f<<1,null);var b=n.timelinesRotation;n.totalAlpha=0;for(_=0;_<f;_++){var T=p[_],A=t.MixDirection.mixOut,D=void 0,x=0;switch(y[_]){case e.SUBSEQUENT:if(!h&&T instanceof t.DrawOrderTimeline)continue;D=i,x=m;break;case e.FIRST:D=t.MixBlend.setup,x=m;break;case e.HOLD:D=t.MixBlend.setup,x=d;break;default:D=t.MixBlend.setup;var S=g[_];x=d*Math.max(0,1-S.mixTime/S.mixDuration);break}n.totalAlpha+=x,T instanceof t.RotateTimeline?this.applyRotateTimeline(T,a,c,x,D,b,_<<1,v):T instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(T,a,c,D,l):(t.Utils.webkit602BugfixHelper(x,i),h&&T instanceof t.DrawOrderTimeline&&D==t.MixBlend.setup&&(A=t.MixDirection.mixIn),T.apply(a,u,c,o,x,D,A))}}return r.mixDuration>0&&this.queueEvents(n,c),this.events.length=0,n.nextAnimationLast=c,n.nextTrackLast=n.trackTime,s},e.prototype.applyAttachmentTimeline=function(r,a,i,n,s){var o=a.slots[r.slotIndex];if(o.bone.active){var l,h=r.frames;if(i<h[0])n!=t.MixBlend.setup&&n!=t.MixBlend.first||this.setAttachment(a,o,o.data.attachmentName,s);else l=i>=h[h.length-1]?h.length-1:t.Animation.binarySearch(h,i)-1,this.setAttachment(a,o,r.attachmentNames[l],s);o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+e.SETUP)}},e.prototype.setAttachment=function(t,r,a,i){r.attachment=null==a?null:t.getAttachment(r.data.index,a),i&&(r.attachmentState=this.unkeyedState+e.CURRENT)},e.prototype.applyRotateTimeline=function(e,r,a,i,n,s,o,l){if(l&&(s[o]=0),1!=i){var h=e,u=h.frames,c=r.bones[h.boneIndex];if(c.active){var f=0,p=0;if(a<u[0])switch(n){case t.MixBlend.setup:c.rotation=c.data.rotation;default:return;case t.MixBlend.first:f=c.rotation,p=c.data.rotation}else if(f=n==t.MixBlend.setup?c.data.rotation:c.rotation,a>=u[u.length-t.RotateTimeline.ENTRIES])p=c.data.rotation+u[u.length+t.RotateTimeline.PREV_ROTATION];else{var d=t.Animation.binarySearch(u,a,t.RotateTimeline.ENTRIES),m=u[d+t.RotateTimeline.PREV_ROTATION],_=u[d],y=h.getCurvePercent((d>>1)-1,1-(a-_)/(u[d+t.RotateTimeline.PREV_TIME]-_));p=u[d+t.RotateTimeline.ROTATION]-m,p-=360*(16384-(16384.499999999996-p/360|0)),p=m+p*y+c.data.rotation,p-=360*(16384-(16384.499999999996-p/360|0))}var g=0,v=p-f;if(v-=360*(16384-(16384.499999999996-v/360|0)),0==v)g=s[o];else{var b=0,T=0;l?(b=0,T=v):(b=s[o],T=s[o+1]);var A=v>0,D=b>=0;t.MathUtils.signum(T)!=t.MathUtils.signum(v)&&Math.abs(T)<=90&&(Math.abs(b)>180&&(b+=360*t.MathUtils.signum(b)),D=A),g=v+b-b%360,D!=A&&(g+=360*t.MathUtils.signum(b)),s[o]=g}s[o+1]=v,f+=g*i,c.rotation=f-360*(16384-(16384.499999999996-f/360|0))}}else e.apply(r,0,a,null,1,n,t.MixDirection.mixIn)},e.prototype.queueEvents=function(t,e){for(var r=t.animationStart,a=t.animationEnd,i=a-r,n=t.trackLast%i,s=this.events,o=0,l=s.length;o<l;o++){var h=s[o];if(h.time<n)break;h.time>a||this.queue.event(t,h)}var u=!1;for(u=t.loop?0==i||n>t.trackTime%i:e>=a&&t.animationLast<a,u&&this.queue.complete(t);o<l;o++){var c=s[o];c.time<r||this.queue.event(t,s[o])}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);var r=e;while(1){var a=r.mixingFrom;if(null==a)break;this.queue.end(a),r.mixingFrom=null,r.mixingTo=null,r=a}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,r){var a=this.expandToIndex(t);this.tracks[t]=e,null!=a&&(r&&this.queue.interrupt(a),e.mixingFrom=a,a.mixingTo=e,e.mixTime=0,null!=a.mixingFrom&&a.mixDuration>0&&(e.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,r){var a=this.data.skeletonData.findAnimation(e);if(null==a)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,a,r)},e.prototype.setAnimationWith=function(t,e,r){if(null==e)throw new Error("animation cannot be null.");var a=!0,i=this.expandToIndex(t);null!=i&&(-1==i.nextTrackLast?(this.tracks[t]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.disposeNext(i),i=i.mixingFrom,a=!1):this.disposeNext(i));var n=this.trackEntry(t,e,r,i);return this.setCurrent(t,n,a),this.queue.drain(),n},e.prototype.addAnimation=function(t,e,r,a){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,i,r,a)},e.prototype.addAnimationWith=function(t,e,r,a){if(null==e)throw new Error("animation cannot be null.");var i=this.expandToIndex(t);if(null!=i)while(null!=i.next)i=i.next;var n=this.trackEntry(t,e,r,i);if(null==i)this.setCurrent(t,n,!0),this.queue.drain();else if(i.next=n,a<=0){var s=i.animationEnd-i.animationStart;0!=s?(i.loop?a+=s*(1+(i.trackTime/s|0)):a+=Math.max(s,i.trackTime),a-=this.data.getMix(i.animation,e)):a=i.trackTime}return n.delay=a,n},e.prototype.setEmptyAnimation=function(t,r){var a=this.setAnimationWith(t,e.emptyAnimation,!1);return a.mixDuration=r,a.trackEnd=r,a},e.prototype.addEmptyAnimation=function(t,r,a){a<=0&&(a-=r);var i=this.addAnimationWith(t,e.emptyAnimation,!1,a);return i.mixDuration=r,i.trackEnd=r,i},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,a=this.tracks.length;r<a;r++){var i=this.tracks[r];null!=i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(e,r,a,i){var n=this.trackEntryPool.obtain();return n.trackIndex=e,n.animation=r,n.loop=a,n.holdPrevious=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=r.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.interruptAlpha=1,n.mixTime=0,n.mixDuration=null==i?0:this.data.getMix(i.animation,r),n.mixBlend=t.MixBlend.replace,n},e.prototype.disposeNext=function(t){var e=t.next;while(null!=e)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,r=this.tracks.length;e<r;e++){var a=this.tracks[e];if(null!=a){while(null!=a.mixingFrom)a=a.mixingFrom;do{null!=a.mixingFrom&&a.mixBlend==t.MixBlend.add||this.computeHold(a),a=a.mixingTo}while(null!=a)}}},e.prototype.computeHold=function(r){var a=r.mixingTo,i=r.animation.timelines,n=r.animation.timelines.length,s=t.Utils.setArraySize(r.timelineMode,n);r.timelineHoldMix.length=0;var o=t.Utils.setArraySize(r.timelineHoldMix,n),l=this.propertyIDs;if(null!=a&&a.holdPrevious)for(var h=0;h<n;h++)l.add(i[h].getPropertyId()),s[h]=e.HOLD;else t:for(h=0;h<n;h++){var u=i[h],c=u.getPropertyId();if(l.add(c))if(null==a||u instanceof t.AttachmentTimeline||u instanceof t.DrawOrderTimeline||u instanceof t.EventTimeline||!a.animation.hasTimeline(c))s[h]=e.FIRST;else{for(var f=a.mixingTo;null!=f;f=f.mixingTo)if(!f.animation.hasTimeline(c)){if(r.mixDuration>0){s[h]=e.HOLD_MIX,o[h]=f;continue t}break}s[h]=e.HOLD}else s[h]=e.SUBSEQUENT}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD=2,e.HOLD_MIX=3,e.SETUP=1,e.CURRENT=2,e}();t.AnimationState=e;var r=function(){function e(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},e}();t.TrackEntry=r;var a,i=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(a.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(a.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(a.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(a.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(a.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(a.event),this.objects.push(t),this.objects.push(e)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,r=0;r<t.length;r+=2){var i=t[r],n=t[r+1];switch(i){case a.start:null!=n.listener&&n.listener.start&&n.listener.start(n);for(var s=0;s<e.length;s++)e[s].start&&e[s].start(n);break;case a.interrupt:null!=n.listener&&n.listener.interrupt&&n.listener.interrupt(n);for(s=0;s<e.length;s++)e[s].interrupt&&e[s].interrupt(n);break;case a.end:null!=n.listener&&n.listener.end&&n.listener.end(n);for(s=0;s<e.length;s++)e[s].end&&e[s].end(n);case a.dispose:null!=n.listener&&n.listener.dispose&&n.listener.dispose(n);for(s=0;s<e.length;s++)e[s].dispose&&e[s].dispose(n);this.animState.trackEntryPool.free(n);break;case a.complete:null!=n.listener&&n.listener.complete&&n.listener.complete(n);for(s=0;s<e.length;s++)e[s].complete&&e[s].complete(n);break;case a.event:var o=t[2+r++];null!=n.listener&&n.listener.event&&n.listener.event(n,o);for(s=0;s<e.length;s++)e[s].event&&e[s].event(n,o);break}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();t.EventQueue=i,function(t){t[t["start"]=0]="start",t[t["interrupt"]=1]="interrupt",t[t["end"]=2]="end",t[t["dispose"]=3]="dispose",t[t["complete"]=4]="complete",t[t["event"]=5]="event"}(a=t.EventType||(t.EventType={}));var n=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter=n}(A||(A={})),function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,r){var a=this.skeletonData.findAnimation(t);if(null==a)throw new Error("Animation not found: "+t);var i=this.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);this.setMixWith(a,i,r)},t.prototype.setMixWith=function(t,e,r){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var a=t.name+"."+e.name;this.animationToMixTime[a]=r},t.prototype.getMix=function(t,e){var r=t.name+"."+e.name,a=this.animationToMixTime[r];return void 0===a?this.defaultMix:a},t}();t.AnimationStateData=e}(A||(A={})),function(t){var e=function(){function e(t,e){void 0===e&&(e=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=t,this.pathPrefix=e}return e.prototype.downloadText=function(t,e,r){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),this.rawDataUris[t]&&(t=this.rawDataUris[t]),a.open("GET",t,!0),a.onload=function(){200==a.status?e(a.responseText):r(a.status,a.responseText)},a.onerror=function(){r(a.status,a.responseText)},a.send()},e.prototype.downloadBinary=function(t,e,r){var a=new XMLHttpRequest;this.rawDataUris[t]&&(t=this.rawDataUris[t]),a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status?e(new Uint8Array(a.response)):r(a.status,a.responseText)},a.onerror=function(){r(a.status,a.responseText)},a.send()},e.prototype.setRawDataURI=function(t,e){this.rawDataUris[this.pathPrefix+t]=e},e.prototype.loadBinary=function(t,e,r){var a=this;void 0===e&&(e=null),void 0===r&&(r=null),t=this.pathPrefix+t,this.toLoad++,this.downloadBinary(t,(function(r){a.assets[t]=r,e&&e(t,r),a.toLoad--,a.loaded++}),(function(e,i){a.errors[t]="Couldn't load binary "+t+": status "+status+", "+i,r&&r(t,"Couldn't load binary "+t+": status "+status+", "+i),a.toLoad--,a.loaded++}))},e.prototype.loadText=function(t,e,r){var a=this;void 0===e&&(e=null),void 0===r&&(r=null),t=this.pathPrefix+t,this.toLoad++,this.downloadText(t,(function(r){a.assets[t]=r,e&&e(t,r),a.toLoad--,a.loaded++}),(function(e,i){a.errors[t]="Couldn't load text "+t+": status "+status+", "+i,r&&r(t,"Couldn't load text "+t+": status "+status+", "+i),a.toLoad--,a.loaded++}))},e.prototype.loadTexture=function(t,e,r){var a=this;void 0===e&&(e=null),void 0===r&&(r=null),t=this.pathPrefix+t;var i=t;this.toLoad++;var n=new Image;n.crossOrigin="anonymous",n.onload=function(r){var s=a.textureLoader(n);a.assets[i]=s,a.toLoad--,a.loaded++,e&&e(t,n)},n.onerror=function(e){a.errors[t]="Couldn't load image "+t,a.toLoad--,a.loaded++,r&&r(t,"Couldn't load image "+t)},this.rawDataUris[t]&&(t=this.rawDataUris[t]),n.src=t},e.prototype.loadTextureAtlas=function(e,r,a){var i=this;void 0===r&&(r=null),void 0===a&&(a=null);var n=e.lastIndexOf("/")>=0?e.substring(0,e.lastIndexOf("/")):"";e=this.pathPrefix+e,this.toLoad++,this.downloadText(e,(function(s){var o={count:0},l=new Array;try{new t.TextureAtlas(s,(function(e){l.push(""==n?e:n+"/"+e);var r=document.createElement("img");return r.width=16,r.height=16,new t.FakeTexture(r)}))}catch(d){var h=d;return i.errors[e]="Couldn't load texture atlas "+e+": "+h.message,a&&a(e,"Couldn't load texture atlas "+e+": "+h.message),i.toLoad--,void i.loaded++}for(var u=function(h){var u=!1;i.loadTexture(h,(function(h,c){if(o.count++,o.count==l.length)if(u)i.errors[e]="Couldn't load texture atlas page "+h+"} of atlas "+e,a&&a(e,"Couldn't load texture atlas page "+h+" of atlas "+e),i.toLoad--,i.loaded++;else try{var f=new t.TextureAtlas(s,(function(t){return i.get(""==n?t:n+"/"+t)}));i.assets[e]=f,r&&r(e,f),i.toLoad--,i.loaded++}catch(d){var p=d;i.errors[e]="Couldn't load texture atlas "+e+": "+p.message,a&&a(e,"Couldn't load texture atlas "+e+": "+p.message),i.toLoad--,i.loaded++}}),(function(t,r){u=!0,o.count++,o.count==l.length&&(i.errors[e]="Couldn't load texture atlas page "+t+"} of atlas "+e,a&&a(e,"Couldn't load texture atlas page "+t+" of atlas "+e),i.toLoad--,i.loaded++)}))},c=0,f=l;c<f.length;c++){var p=f[c];u(p)}}),(function(t,r){i.errors[e]="Couldn't load texture atlas "+e+": status "+status+", "+r,a&&a(e,"Couldn't load texture atlas "+e+": status "+status+", "+r),i.toLoad--,i.loaded++}))},e.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},e.prototype.remove=function(t){t=this.pathPrefix+t;var e=this.assets[t];e.dispose&&e.dispose(),this.assets[t]=null},e.prototype.removeAll=function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}},e.prototype.isLoadingComplete=function(){return 0==this.toLoad},e.prototype.getToLoad=function(){return this.toLoad},e.prototype.getLoaded=function(){return this.loaded},e.prototype.dispose=function(){this.removeAll()},e.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},e.prototype.getErrors=function(){return this.errors},e}();t.AssetManager=e}(A||(A={})),function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,r,a){var i=this.atlas.findRegion(a);if(null==i)throw new Error("Region not found in atlas: "+a+" (region attachment: "+r+")");i.renderObject=i;var n=new t.RegionAttachment(r);return n.setRegion(i),n},e.prototype.newMeshAttachment=function(e,r,a){var i=this.atlas.findRegion(a);if(null==i)throw new Error("Region not found in atlas: "+a+" (mesh attachment: "+r+")");i.renderObject=i;var n=new t.MeshAttachment(r);return n.region=i,n},e.prototype.newBoundingBoxAttachment=function(e,r){return new t.BoundingBoxAttachment(r)},e.prototype.newPathAttachment=function(e,r){return new t.PathAttachment(r)},e.prototype.newPointAttachment=function(e,r){return new t.PointAttachment(r)},e.prototype.newClippingAttachment=function(e,r){return new t.ClippingAttachment(r)},e}();t.AtlasAttachmentLoader=e}(A||(A={})),function(t){(function(t){t[t["Normal"]=0]="Normal",t[t["Additive"]=1]="Additive",t[t["Multiply"]=2]="Multiply",t[t["Screen"]=3]="Screen"})(t.BlendMode||(t.BlendMode={}))}(A||(A={})),function(t){var e=function(){function e(t,e,r){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}return e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(e,r,a,i,n,s,o){this.ax=e,this.ay=r,this.arotation=a,this.ascaleX=i,this.ascaleY=n,this.ashearX=s,this.ashearY=o,this.appliedValid=!0;var l=this.parent;if(null==l){var h=this.skeleton,u=a+90+o,c=h.scaleX,f=h.scaleY;return this.a=t.MathUtils.cosDeg(a+s)*i*c,this.b=t.MathUtils.cosDeg(u)*n*c,this.c=t.MathUtils.sinDeg(a+s)*i*f,this.d=t.MathUtils.sinDeg(u)*n*f,this.worldX=e*c+h.x,void(this.worldY=r*f+h.y)}var p=l.a,d=l.b,m=l.c,_=l.d;switch(this.worldX=p*e+d*r+l.worldX,this.worldY=m*e+_*r+l.worldY,this.data.transformMode){case t.TransformMode.Normal:u=a+90+o;var y=t.MathUtils.cosDeg(a+s)*i,g=t.MathUtils.cosDeg(u)*n,v=t.MathUtils.sinDeg(a+s)*i,b=t.MathUtils.sinDeg(u)*n;return this.a=p*y+d*v,this.b=p*g+d*b,this.c=m*y+_*v,void(this.d=m*g+_*b);case t.TransformMode.OnlyTranslation:u=a+90+o;this.a=t.MathUtils.cosDeg(a+s)*i,this.b=t.MathUtils.cosDeg(u)*n,this.c=t.MathUtils.sinDeg(a+s)*i,this.d=t.MathUtils.sinDeg(u)*n;break;case t.TransformMode.NoRotationOrReflection:var T=p*p+m*m,A=0;T>1e-4?(T=Math.abs(p*_-d*m)/T,d=m*T,_=p*T,A=Math.atan2(m,p)*t.MathUtils.radDeg):(p=0,m=0,A=90-Math.atan2(_,d)*t.MathUtils.radDeg);var D=a+s-A,x=a+o-A+90;y=t.MathUtils.cosDeg(D)*i,g=t.MathUtils.cosDeg(x)*n,v=t.MathUtils.sinDeg(D)*i,b=t.MathUtils.sinDeg(x)*n;return this.a=p*y-d*v,this.b=p*g-d*b,this.c=m*y+_*v,void(this.d=m*g+_*b);case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var S=t.MathUtils.cosDeg(a),E=t.MathUtils.sinDeg(a),w=(p*S+d*E)/this.skeleton.scaleX,M=(m*S+_*E)/this.skeleton.scaleY;T=Math.sqrt(w*w+M*M);T>1e-5&&(T=1/T),w*=T,M*=T,T=Math.sqrt(w*w+M*M),this.data.transformMode==t.TransformMode.NoScale&&p*_-d*m<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(T=-T);var P=Math.PI/2+Math.atan2(M,w),O=Math.cos(P)*T,I=Math.sin(P)*T;y=t.MathUtils.cosDeg(s)*i,g=t.MathUtils.cosDeg(90+o)*n,v=t.MathUtils.sinDeg(s)*i,b=t.MathUtils.sinDeg(90+o)*n;this.a=w*y+O*v,this.b=w*g+O*b,this.c=M*y+I*v,this.d=M*g+I*b;break}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},e.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent;if(null==e)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*t.MathUtils.radDeg);var r=e.a,a=e.b,i=e.c,n=e.d,s=1/(r*n-a*i),o=this.worldX-e.worldX,l=this.worldY-e.worldY;this.ax=o*n*s-l*a*s,this.ay=l*r*s-o*i*s;var h=s*n,u=s*r,c=s*a,f=s*i,p=h*this.a-c*this.c,d=h*this.b-c*this.d,m=u*this.c-f*this.a,_=u*this.d-f*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(p*p+m*m),this.ascaleX>1e-4){var y=p*_-d*m;this.ascaleY=y/this.ascaleX,this.ashearY=Math.atan2(p*d+m*_,y)*t.MathUtils.radDeg,this.arotation=Math.atan2(m,p)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+_*_),this.ashearY=0,this.arotation=90-Math.atan2(_,d)*t.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.a,r=this.b,a=this.c,i=this.d,n=1/(e*i-r*a),s=t.x-this.worldX,o=t.y-this.worldY;return t.x=s*i*n-o*r*n,t.y=o*e*n-s*a*n,t},e.prototype.localToWorld=function(t){var e=t.x,r=t.y;return t.x=e*this.a+r*this.b+this.worldX,t.y=e*this.c+r*this.d+this.worldY,t},e.prototype.worldToLocalRotation=function(e){var r=t.MathUtils.sinDeg(e),a=t.MathUtils.cosDeg(e);return Math.atan2(this.a*r-this.c*a,this.d*a-this.b*r)*t.MathUtils.radDeg+this.rotation-this.shearX},e.prototype.localToWorldRotation=function(e){e-=this.rotation-this.shearX;var r=t.MathUtils.sinDeg(e),a=t.MathUtils.cosDeg(e);return Math.atan2(a*this.c+r*this.d,a*this.a+r*this.b)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var r=this.a,a=this.b,i=this.c,n=this.d,s=t.MathUtils.cosDeg(e),o=t.MathUtils.sinDeg(e);this.a=s*r-o*i,this.b=s*a-o*n,this.c=o*r+s*i,this.d=o*a+s*n,this.appliedValid=!1},e}();t.Bone=e}(A||(A={})),function(t){var e,r=function(){function r(r,a,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=e.Normal,this.skinRequired=!1,this.color=new t.Color,r<0)throw new Error("index must be >= 0.");if(null==a)throw new Error("name cannot be null.");this.index=r,this.name=a,this.parent=i}return r}();t.BoneData=r,function(t){t[t["Normal"]=0]="Normal",t[t["OnlyTranslation"]=1]="OnlyTranslation",t[t["NoRotationOrReflection"]=2]="NoRotationOrReflection",t[t["NoScale"]=3]="NoScale",t[t["NoScaleOrReflection"]=4]="NoScaleOrReflection"}(e=t.TransformMode||(t.TransformMode={}))}(A||(A={})),function(t){var e=function(){function t(t,e,r){this.name=t,this.order=e,this.skinRequired=r}return t}();t.ConstraintData=e}(A||(A={})),function(t){var e=function(){function t(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}return t}();t.Event=e}(A||(A={})),function(t){var e=function(){function t(t){this.name=t}return t}();t.EventData=e}(A||(A={})),function(t){var e=function(){function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}},e.prototype.apply1=function(e,r,a,i,n,s,o){e.appliedValid||e.updateAppliedTransform();var l=e.parent,h=l.a,u=l.b,c=l.c,f=l.d,p=-e.ashearX-e.arotation,d=0,m=0;switch(e.data.transformMode){case t.TransformMode.OnlyTranslation:d=r-e.worldX,m=a-e.worldY;break;case t.TransformMode.NoRotationOrReflection:p+=Math.atan2(c,h)*t.MathUtils.radDeg;var _=Math.abs(h*f-u*c)/(h*h+c*c);u=-c*_,f=h*_;default:var y=r-l.worldX,g=a-l.worldY,v=h*f-u*c;d=(y*f-g*u)/v-e.ax,m=(g*h-y*c)/v-e.ay}p+=Math.atan2(m,d)*t.MathUtils.radDeg,e.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var b=e.ascaleX,T=e.ascaleY;if(i||n){switch(e.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:d=r-e.worldX,m=a-e.worldY}var A=e.data.length*b,D=Math.sqrt(d*d+m*m);if(i&&D<A||n&&D>A&&A>1e-4){var x=(D/A-1)*o+1;b*=x,s&&(T*=x)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+p*o,b,T,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,r,a,i,n,s,o,l){if(0!=l){e.appliedValid||e.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var h=e.ax,u=e.ay,c=e.ascaleX,f=c,p=e.ascaleY,d=r.ascaleX,m=0,_=0,y=0;c<0?(c=-c,m=180,y=-1):(m=0,y=1),p<0&&(p=-p,y=-y),d<0?(d=-d,_=180):_=0;var g=r.ax,v=0,b=0,T=0,A=e.a,D=e.b,x=e.c,S=e.d,E=Math.abs(c-p)<=1e-4;E?(v=r.ay,b=A*g+D*v+e.worldX,T=x*g+S*v+e.worldY):(v=0,b=A*g+e.worldX,T=x*g+e.worldY);var w=e.parent;A=w.a,D=w.b,x=w.c,S=w.d;var M,P,O=1/(A*S-D*x),I=b-w.worldX,C=T-w.worldY,R=(I*S-C*D)*O-h,F=(C*A-I*x)*O-u,B=Math.sqrt(R*R+F*F),N=r.data.length*d;if(B<1e-4)return this.apply1(e,a,i,!1,s,!1,l),void r.updateWorldTransformWith(g,v,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);I=a-w.worldX,C=i-w.worldY;var k=(I*S-C*D)*O-h,V=(C*A-I*x)*O-u,L=k*k+V*V;if(0!=o){o*=c*(d+1)/2;var j=Math.sqrt(L),U=j-B-N*c+o;if(U>0){var Y=Math.min(1,U/(2*o))-1;Y=(U-o*(1-Y*Y))/j,k-=Y*k,V-=Y*V,L=k*k+V*V}}t:if(E){N*=c;var X=(L-B*B-N*N)/(2*B*N);X<-1?X=-1:X>1&&(X=1,s&&(f*=(Math.sqrt(L)/(B+N)-1)*l+1)),P=Math.acos(X)*n,A=B+N*X,D=N*Math.sin(P),M=Math.atan2(V*A-k*D,k*A+V*D)}else{A=c*N,D=p*N;var W=A*A,G=D*D,H=Math.atan2(V,k);x=G*B*B+W*L-W*G;var q=-2*G*B,z=G-W;if(S=q*q-4*z*x,S>=0){var Z=Math.sqrt(S);q<0&&(Z=-Z),Z=-(q+Z)/2;var K=Z/z,$=x/Z,J=Math.abs(K)<Math.abs($)?K:$;if(J*J<=L){C=Math.sqrt(L-J*J)*n,M=H-Math.atan2(C,J),P=Math.atan2(C/p,(J-B)/c);break t}}var Q=t.MathUtils.PI,tt=B-A,et=tt*tt,rt=0,at=0,it=B+A,nt=it*it,st=0;x=-A*B/(W-G),x>=-1&&x<=1&&(x=Math.acos(x),I=A*Math.cos(x)+B,C=D*Math.sin(x),S=I*I+C*C,S<et&&(Q=x,et=S,tt=I,rt=C),S>nt&&(at=x,nt=S,it=I,st=C)),L<=(et+nt)/2?(M=H-Math.atan2(rt*n,tt),P=Q*n):(M=H-Math.atan2(st*n,it),P=at*n)}var ot=Math.atan2(v,g)*y,lt=e.arotation;M=(M-ot)*t.MathUtils.radDeg+m-lt,M>180?M-=360:M<-180&&(M+=360),e.updateWorldTransformWith(h,u,lt+M*l,f,e.ascaleY,0,0),lt=r.arotation,P=((P+ot)*t.MathUtils.radDeg-r.ashearX)*y+_-lt,P>180?P-=360:P<-180&&(P+=360),r.updateWorldTransformWith(g,v,lt+P*l,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)}else r.updateWorldTransform()},e}();t.IkConstraint=e}(A||(A={})),function(t){var e=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=new Array,r.bendDirection=1,r.compress=!1,r.stretch=!1,r.uniform=!1,r.mix=1,r.softness=0,r}return x(e,t),e}(t.ConstraintData);t.IkConstraintData=e}(A||(A={})),function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var r=0,a=t.bones.length;r<a;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var r=this.target.getAttachment();if(r instanceof t.PathAttachment){var a=this.rotateMix,i=this.translateMix,n=i>0,s=a>0;if(n||s){var o=this.data,l=o.spacingMode==t.SpacingMode.Percent,h=o.rotateMode,u=h==t.RotateMode.Tangent,c=h==t.RotateMode.ChainScale,f=this.bones.length,p=u?f:f+1,d=this.bones,m=t.Utils.setArraySize(this.spaces,p),_=null,y=this.spacing;if(c||!l){c&&(_=t.Utils.setArraySize(this.lengths,f));for(var g=o.spacingMode==t.SpacingMode.Length,v=0,b=p-1;v<b;){var T=d[v],A=T.data.length;if(A<e.epsilon)c&&(_[v]=0),m[++v]=0;else if(l){if(c){var D=A*T.a,x=A*T.c,S=Math.sqrt(D*D+x*x);_[v]=S}m[++v]=y}else{D=A*T.a,x=A*T.c;var E=Math.sqrt(D*D+x*x);c&&(_[v]=E),m[++v]=(g?A+y:y)*E/A}}}else for(v=1;v<p;v++)m[v]=y;var w=this.computeWorldPositions(r,p,u,o.positionMode==t.PositionMode.Percent,l),M=w[0],P=w[1],O=o.offsetRotation,I=!1;if(0==O)I=h==t.RotateMode.Chain;else{I=!1;var C=this.target.bone;O*=C.a*C.d-C.b*C.c>0?t.MathUtils.degRad:-t.MathUtils.degRad}for(v=0,C=3;v<f;v++,C+=3){T=d[v];T.worldX+=(M-T.worldX)*i,T.worldY+=(P-T.worldY)*i;D=w[C],x=w[C+1];var R=D-M,F=x-P;if(c){var B=_[v];if(0!=B){var N=(Math.sqrt(R*R+F*F)/B-1)*a+1;T.a*=N,T.c*=N}}if(M=D,P=x,s){var k=T.a,V=T.b,L=T.c,j=T.d,U=0,Y=0,X=0;if(U=u?w[C-1]:0==m[v+1]?w[C+2]:Math.atan2(F,R),U-=Math.atan2(L,k),I){Y=Math.cos(U),X=Math.sin(U);var W=T.data.length;M+=(W*(Y*k-X*L)-R)*a,P+=(W*(X*k+Y*L)-F)*a}else U+=O;U>t.MathUtils.PI?U-=t.MathUtils.PI2:U<-t.MathUtils.PI&&(U+=t.MathUtils.PI2),U*=a,Y=Math.cos(U),X=Math.sin(U),T.a=Y*k-X*L,T.b=Y*V-X*j,T.c=X*k+Y*L,T.d=X*V+Y*j}T.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(r,a,i,n,s){var o=this.target,l=this.position,h=this.spaces,u=t.Utils.setArraySize(this.positions,3*a+2),c=null,f=r.closed,p=r.worldVerticesLength,d=p/6,m=e.NONE;if(!r.constantSpeed){var _=r.lengths;d-=f?1:2;var y=_[d];if(n&&(l*=y),s)for(var g=1;g<a;g++)h[g]*=y;c=t.Utils.setArraySize(this.world,8);g=0;for(var v=0,b=0;g<a;g++,v+=3){var T=h[g];l+=T;var A=l;if(f)A%=y,A<0&&(A+=y),b=0;else{if(A<0){m!=e.BEFORE&&(m=e.BEFORE,r.computeWorldVertices(o,2,4,c,0,2)),this.addBeforePosition(A,c,0,u,v);continue}if(A>y){m!=e.AFTER&&(m=e.AFTER,r.computeWorldVertices(o,p-6,4,c,0,2)),this.addAfterPosition(A-y,c,0,u,v);continue}}for(;;b++){var D=_[b];if(!(A>D)){if(0==b)A/=D;else{var x=_[b-1];A=(A-x)/(D-x)}break}}b!=m&&(m=b,f&&b==d?(r.computeWorldVertices(o,p-4,4,c,0,2),r.computeWorldVertices(o,0,4,c,4,2)):r.computeWorldVertices(o,6*b+2,8,c,0,2)),this.addCurvePosition(A,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],u,v,i||g>0&&0==T)}return u}f?(p+=2,c=t.Utils.setArraySize(this.world,p),r.computeWorldVertices(o,2,p-4,c,0,2),r.computeWorldVertices(o,0,2,c,p-4,2),c[p-2]=c[0],c[p-1]=c[1]):(d--,p-=4,c=t.Utils.setArraySize(this.world,p),r.computeWorldVertices(o,2,p,c,0,2));for(var S=t.Utils.setArraySize(this.curves,d),E=0,w=c[0],M=c[1],P=0,O=0,I=0,C=0,R=0,F=0,B=0,N=0,k=0,V=0,L=0,j=0,U=0,Y=0,X=(g=0,2);g<d;g++,X+=6)P=c[X],O=c[X+1],I=c[X+2],C=c[X+3],R=c[X+4],F=c[X+5],B=.1875*(w-2*P+I),N=.1875*(M-2*O+C),k=.09375*(3*(P-I)-w+R),V=.09375*(3*(O-C)-M+F),L=2*B+k,j=2*N+V,U=.75*(P-w)+B+.16666667*k,Y=.75*(O-M)+N+.16666667*V,E+=Math.sqrt(U*U+Y*Y),U+=L,Y+=j,L+=k,j+=V,E+=Math.sqrt(U*U+Y*Y),U+=L,Y+=j,E+=Math.sqrt(U*U+Y*Y),U+=L+k,Y+=j+V,E+=Math.sqrt(U*U+Y*Y),S[g]=E,w=R,M=F;if(l*=n?E:E/r.lengths[d-1],s)for(g=1;g<a;g++)h[g]*=E;for(var W=this.segments,G=0,H=(g=0,v=0,b=0,0);g<a;g++,v+=3){T=h[g];l+=T;A=l;if(f)A%=E,A<0&&(A+=E),b=0;else{if(A<0){this.addBeforePosition(A,c,0,u,v);continue}if(A>E){this.addAfterPosition(A-E,c,p-4,u,v);continue}}for(;;b++){var q=S[b];if(!(A>q)){if(0==b)A/=q;else{x=S[b-1];A=(A-x)/(q-x)}break}}if(b!=m){m=b;var z=6*b;for(w=c[z],M=c[z+1],P=c[z+2],O=c[z+3],I=c[z+4],C=c[z+5],R=c[z+6],F=c[z+7],B=.03*(w-2*P+I),N=.03*(M-2*O+C),k=.006*(3*(P-I)-w+R),V=.006*(3*(O-C)-M+F),L=2*B+k,j=2*N+V,U=.3*(P-w)+B+.16666667*k,Y=.3*(O-M)+N+.16666667*V,G=Math.sqrt(U*U+Y*Y),W[0]=G,z=1;z<8;z++)U+=L,Y+=j,L+=k,j+=V,G+=Math.sqrt(U*U+Y*Y),W[z]=G;U+=L,Y+=j,G+=Math.sqrt(U*U+Y*Y),W[8]=G,U+=L+k,Y+=j+V,G+=Math.sqrt(U*U+Y*Y),W[9]=G,H=0}for(A*=G;;H++){var Z=W[H];if(!(A>Z)){if(0==H)A/=Z;else{x=W[H-1];A=H+(A-x)/(Z-x)}break}}this.addCurvePosition(.1*A,w,M,P,O,I,C,R,F,u,v,i||g>0&&0==T)}return u},e.prototype.addBeforePosition=function(t,e,r,a,i){var n=e[r],s=e[r+1],o=e[r+2]-n,l=e[r+3]-s,h=Math.atan2(l,o);a[i]=n+t*Math.cos(h),a[i+1]=s+t*Math.sin(h),a[i+2]=h},e.prototype.addAfterPosition=function(t,e,r,a,i){var n=e[r+2],s=e[r+3],o=n-e[r],l=s-e[r+1],h=Math.atan2(l,o);a[i]=n+t*Math.cos(h),a[i+1]=s+t*Math.sin(h),a[i+2]=h},e.prototype.addCurvePosition=function(t,e,r,a,i,n,s,o,l,h,u,c){if(0==t||isNaN(t))return h[u]=e,h[u+1]=r,void(h[u+2]=Math.atan2(i-r,a-e));var f=t*t,p=f*t,d=1-t,m=d*d,_=m*d,y=d*t,g=3*y,v=d*g,b=g*t,T=e*_+a*v+n*b+o*p,A=r*_+i*v+s*b+l*p;h[u]=T,h[u+1]=A,c&&(h[u+2]=t<.001?Math.atan2(i-r,a-e):Math.atan2(A-(r*m+i*y*2+s*f),T-(e*m+a*y*2+n*f)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}();t.PathConstraint=e}(A||(A={})),function(t){var e=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=new Array,r}return x(e,t),e}(t.ConstraintData);t.PathConstraintData=e,function(t){t[t["Fixed"]=0]="Fixed",t[t["Percent"]=1]="Percent"}(t.PositionMode||(t.PositionMode={})),function(t){t[t["Length"]=0]="Length",t[t["Fixed"]=1]="Fixed",t[t["Percent"]=2]="Percent"}(t.SpacingMode||(t.SpacingMode={})),function(t){t[t["Tangent"]=0]="Tangent",t[t["Chain"]=1]="Chain",t[t["ChainScale"]=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))}(A||(A={})),function(t){var e=function(){function t(t){this.toLoad=new Array,this.assets={},this.clientId=t}return t.prototype.loaded=function(){var t=0;for(var e in this.assets)t++;return t},t}(),r=function(){function t(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return t.prototype.queueAsset=function(t,r,a){var i=this.clientAssets[t];return null!==i&&void 0!==i||(i=new e(t),this.clientAssets[t]=i),null!==r&&(i.textureLoader=r),i.toLoad.push(a),this.queuedAssets[a]!==a&&(this.queuedAssets[a]=a,!0)},t.prototype.loadText=function(t,e){var r=this;if(e=this.pathPrefix+e,this.queueAsset(t,null,e)){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(a.status>=200&&a.status<300?r.rawAssets[e]=a.responseText:r.errors[e]="Couldn't load text "+e+": status "+a.status+", "+a.responseText)},a.open("GET",e,!0),a.send()}},t.prototype.loadJson=function(t,e){var r=this;if(e=this.pathPrefix+e,this.queueAsset(t,null,e)){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(a.status>=200&&a.status<300?r.rawAssets[e]=JSON.parse(a.responseText):r.errors[e]="Couldn't load text "+e+": status "+a.status+", "+a.responseText)},a.open("GET",e,!0),a.send()}},t.prototype.loadTexture=function(t,e,r){var a=this;if(r=this.pathPrefix+r,this.queueAsset(t,e,r)){var i=new Image;i.crossOrigin="anonymous",i.onload=function(t){a.rawAssets[r]=i},i.onerror=function(t){a.errors[r]="Couldn't load image "+r},i.src=r}},t.prototype.get=function(t,e){e=this.pathPrefix+e;var r=this.clientAssets[t];return null===r||void 0===r||r.assets[e]},t.prototype.updateClientAssets=function(t){for(var e=0;e<t.toLoad.length;e++){var r=t.toLoad[e],a=t.assets[r];if(null===a||void 0===a){var i=this.rawAssets[r];if(null===i||void 0===i)continue;i instanceof HTMLImageElement?t.assets[r]=t.textureLoader(i):t.assets[r]=i}}},t.prototype.isLoadingComplete=function(t){var e=this.clientAssets[t];return null===e||void 0===e||(this.updateClientAssets(e),e.toLoad.length==e.loaded())},t.prototype.dispose=function(){},t.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},t.prototype.getErrors=function(){return this.errors},t}();t.SharedAssetManager=r}(A||(A={})),function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var r=0;r<e.bones.length;r++){var a=e.bones[r],i=void 0;if(null==a.parent)i=new t.Bone(a,this,null);else{var n=this.bones[a.parent.index];i=new t.Bone(a,this,n),n.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(r=0;r<e.slots.length;r++){var s=e.slots[r],o=(i=this.bones[s.boneData.index],new t.Slot(s,i));this.slots.push(o),this.drawOrder.push(o)}this.ikConstraints=new Array;for(r=0;r<e.ikConstraints.length;r++){var l=e.ikConstraints[r];this.ikConstraints.push(new t.IkConstraint(l,this))}this.transformConstraints=new Array;for(r=0;r<e.transformConstraints.length;r++){var h=e.transformConstraints[r];this.transformConstraints.push(new t.TransformConstraint(h,this))}this.pathConstraints=new Array;for(r=0;r<e.pathConstraints.length;r++){var u=e.pathConstraints[r];this.pathConstraints.push(new t.PathConstraint(u,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){var t=this._updateCache;t.length=0,this.updateCacheReset.length=0;for(var e=this.bones,r=0,a=e.length;r<a;r++){var i=e[r];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(null!=this.skin){var n=this.skin.bones;for(r=0,a=this.skin.bones.length;r<a;r++){i=this.bones[n[r].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(null!=i)}}var s=this.ikConstraints,o=this.transformConstraints,l=this.pathConstraints,h=s.length,u=o.length,c=l.length,f=h+u+c;t:for(r=0;r<f;r++){for(var p=0;p<h;p++){var d=s[p];if(d.data.order==r){this.sortIkConstraint(d);continue t}}for(p=0;p<u;p++){d=o[p];if(d.data.order==r){this.sortTransformConstraint(d);continue t}}for(p=0;p<c;p++){d=l[p];if(d.data.order==r){this.sortPathConstraint(d);continue t}}}for(r=0,a=e.length;r<a;r++)this.sortBone(e[r])},e.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var r=e.target;this.sortBone(r);var a=e.bones,i=a[0];if(this.sortBone(i),a.length>1){var n=a[a.length-1];this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}this._updateCache.push(e),this.sortReset(i.children),a[a.length-1].sorted=!0}},e.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var r=e.target,a=r.data.index,i=r.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,a,i),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,a,i);for(var n=0,s=this.data.skins.length;n<s;n++)this.sortPathConstraintAttachment(this.data.skins[n],a,i);var o=r.getAttachment();o instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(o,i);var l=e.bones,h=l.length;for(n=0;n<h;n++)this.sortBone(l[n]);this._updateCache.push(e);for(n=0;n<h;n++)this.sortReset(l[n].children);for(n=0;n<h;n++)l[n].sorted=!0}},e.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){this.sortBone(e.target);var r=e.bones,a=r.length;if(e.data.local)for(var i=0;i<a;i++){var n=r[i];this.sortBone(n.parent),this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}else for(i=0;i<a;i++)this.sortBone(r[i]);this._updateCache.push(e);for(var s=0;s<a;s++)this.sortReset(r[s].children);for(s=0;s<a;s++)r[s].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,e,r){var a=t.attachments[e];if(a)for(var i in a)this.sortPathConstraintAttachmentWith(a[i],r)},e.prototype.sortPathConstraintAttachmentWith=function(e,r){if(e instanceof t.PathAttachment){var a=e.bones;if(null==a)this.sortBone(r);else{var i=this.bones,n=0;while(n<a.length)for(var s=a[n++],o=n+s;n<o;n++){var l=a[n];this.sortBone(i[l])}}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,r=t.length;e<r;e++){var a=t[e];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,r=t.length;e<r;e++){var a=t[e];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,a.appliedValid=!0}var i=this._updateCache;for(e=0,r=i.length;e<r;e++)i[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++)t[e].setToSetupPose();var a=this.ikConstraints;for(e=0,r=a.length;e<r;e++){var i=a[e];i.mix=i.data.mix,i.softness=i.data.softness,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch}var n=this.transformConstraints;for(e=0,r=n.length;e<r;e++){i=n[e];var s=i.data;i.rotateMix=s.rotateMix,i.translateMix=s.translateMix,i.scaleMix=s.scaleMix,i.shearMix=s.shearMix}var o=this.pathConstraints;for(e=0,r=o.length;e<r;e++){i=o[e],s=i.data;i.position=s.position,i.spacing=s.spacing,i.rotateMix=s.rotateMix,i.translateMix=s.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var r=0,a=e.length;r<a;r++)e[r].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++){var i=e[r];if(i.data.name==t)return i}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++)if(e[r].data.name==t)return r;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++){var i=e[r];if(i.data.name==t)return i}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++)if(e[r].data.name==t)return r;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,r=0,a=e.length;r<a;r++){var i=e[r],n=i.data.attachmentName;if(null!=n){var s=t.getAttachment(r,n);null!=s&&i.setAttachment(s)}}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var r=this.skin.getAttachment(t,e);if(null!=r)return r}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var r=this.slots,a=0,i=r.length;a<i;a++){var n=r[a];if(n.data.name==t){var s=null;if(null!=e&&(s=this.getAttachment(a,e),null==s))throw new Error("Attachment not found: "+e+", for slot: "+t);return void n.setAttachment(s)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,a=e.length;r<a;r++){var i=e[r];if(i.data.name==t)return i}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,a=e.length;r<a;r++){var i=e[r];if(i.data.name==t)return i}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++){var i=e[r];if(i.data.name==t)return i}return null},e.prototype.getBounds=function(e,r,a){if(void 0===a&&(a=new Array(2)),null==e)throw new Error("offset cannot be null.");if(null==r)throw new Error("size cannot be null.");for(var i=this.drawOrder,n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h=0,u=i.length;h<u;h++){var c=i[h];if(c.bone.active){var f=0,p=null,d=c.getAttachment();if(d instanceof t.RegionAttachment)f=8,p=t.Utils.setArraySize(a,f,0),d.computeWorldVertices(c.bone,p,0,2);else if(d instanceof t.MeshAttachment){var m=d;f=m.worldVerticesLength,p=t.Utils.setArraySize(a,f,0),m.computeWorldVertices(c,0,f,p,0,2)}if(null!=p)for(var _=0,y=p.length;_<y;_+=2){var g=p[_],v=p[_+1];n=Math.min(n,g),s=Math.min(s,v),o=Math.max(o,g),l=Math.max(l,v)}}}e.set(n,s),r.set(o-n,l-s)},e.prototype.update=function(t){this.time+=t},e}();t.Skeleton=e}(A||(A={})),function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(a){var i=this.scale,n=new t.SkeletonData;n.name="";var s=new r(a);n.hash=s.readString(),n.version=s.readString(),n.x=s.readFloat(),n.y=s.readFloat(),n.width=s.readFloat(),n.height=s.readFloat();var o=s.readBoolean();o&&(n.fps=s.readFloat(),n.imagesPath=s.readString(),n.audioPath=s.readString());var l=0;l=s.readInt(!0);for(var h=0;h<l;h++)s.strings.push(s.readString());l=s.readInt(!0);for(h=0;h<l;h++){var u=s.readString(),c=0==h?null:n.bones[s.readInt(!0)],f=new t.BoneData(h,u,c);f.rotation=s.readFloat(),f.x=s.readFloat()*i,f.y=s.readFloat()*i,f.scaleX=s.readFloat(),f.scaleY=s.readFloat(),f.shearX=s.readFloat(),f.shearY=s.readFloat(),f.length=s.readFloat()*i,f.transformMode=e.TransformModeValues[s.readInt(!0)],f.skinRequired=s.readBoolean(),o&&t.Color.rgba8888ToColor(f.color,s.readInt32()),n.bones.push(f)}l=s.readInt(!0);for(h=0;h<l;h++){var p=s.readString(),d=n.bones[s.readInt(!0)];f=new t.SlotData(h,p,d);t.Color.rgba8888ToColor(f.color,s.readInt32());var m=s.readInt32();-1!=m&&t.Color.rgb888ToColor(f.darkColor=new t.Color,m),f.attachmentName=s.readStringRef(),f.blendMode=e.BlendModeValues[s.readInt(!0)],n.slots.push(f)}l=s.readInt(!0);h=0;for(var _=void 0;h<l;h++){f=new t.IkConstraintData(s.readString());f.order=s.readInt(!0),f.skinRequired=s.readBoolean(),_=s.readInt(!0);for(var y=0;y<_;y++)f.bones.push(n.bones[s.readInt(!0)]);f.target=n.bones[s.readInt(!0)],f.mix=s.readFloat(),f.softness=s.readFloat()*i,f.bendDirection=s.readByte(),f.compress=s.readBoolean(),f.stretch=s.readBoolean(),f.uniform=s.readBoolean(),n.ikConstraints.push(f)}l=s.readInt(!0);for(h=0,_=void 0;h<l;h++){f=new t.TransformConstraintData(s.readString());f.order=s.readInt(!0),f.skinRequired=s.readBoolean(),_=s.readInt(!0);for(y=0;y<_;y++)f.bones.push(n.bones[s.readInt(!0)]);f.target=n.bones[s.readInt(!0)],f.local=s.readBoolean(),f.relative=s.readBoolean(),f.offsetRotation=s.readFloat(),f.offsetX=s.readFloat()*i,f.offsetY=s.readFloat()*i,f.offsetScaleX=s.readFloat(),f.offsetScaleY=s.readFloat(),f.offsetShearY=s.readFloat(),f.rotateMix=s.readFloat(),f.translateMix=s.readFloat(),f.scaleMix=s.readFloat(),f.shearMix=s.readFloat(),n.transformConstraints.push(f)}l=s.readInt(!0);for(h=0,_=void 0;h<l;h++){f=new t.PathConstraintData(s.readString());f.order=s.readInt(!0),f.skinRequired=s.readBoolean(),_=s.readInt(!0);for(y=0;y<_;y++)f.bones.push(n.bones[s.readInt(!0)]);f.target=n.slots[s.readInt(!0)],f.positionMode=e.PositionModeValues[s.readInt(!0)],f.spacingMode=e.SpacingModeValues[s.readInt(!0)],f.rotateMode=e.RotateModeValues[s.readInt(!0)],f.offsetRotation=s.readFloat(),f.position=s.readFloat(),f.positionMode==t.PositionMode.Fixed&&(f.position*=i),f.spacing=s.readFloat(),f.spacingMode!=t.SpacingMode.Length&&f.spacingMode!=t.SpacingMode.Fixed||(f.spacing*=i),f.rotateMix=s.readFloat(),f.translateMix=s.readFloat(),n.pathConstraints.push(f)}var g=this.readSkin(s,n,!0,o);null!=g&&(n.defaultSkin=g,n.skins.push(g));h=n.skins.length;for(t.Utils.setArraySize(n.skins,l=h+s.readInt(!0));h<l;h++)n.skins[h]=this.readSkin(s,n,!1,o);l=this.linkedMeshes.length;for(h=0;h<l;h++){var v=this.linkedMeshes[h],b=null==v.skin?n.defaultSkin:n.findSkin(v.skin);if(null==b)throw new Error("Skin not found: "+v.skin);var T=b.getAttachment(v.slotIndex,v.parent);if(null==T)throw new Error("Parent mesh not found: "+v.parent);v.mesh.deformAttachment=v.inheritDeform?T:v.mesh,v.mesh.setParentMesh(T),v.mesh.updateUVs()}this.linkedMeshes.length=0,l=s.readInt(!0);for(h=0;h<l;h++){f=new t.EventData(s.readStringRef());f.intValue=s.readInt(!1),f.floatValue=s.readFloat(),f.stringValue=s.readString(),f.audioPath=s.readString(),null!=f.audioPath&&(f.volume=s.readFloat(),f.balance=s.readFloat()),n.events.push(f)}l=s.readInt(!0);for(h=0;h<l;h++)n.animations.push(this.readAnimation(s,s.readString(),n));return n},e.prototype.readSkin=function(e,r,a,i){var n=null,s=0;if(a){if(s=e.readInt(!0),0==s)return null;n=new t.Skin("default")}else{n=new t.Skin(e.readStringRef()),n.bones.length=e.readInt(!0);for(var o=0,l=n.bones.length;o<l;o++)n.bones[o]=r.bones[e.readInt(!0)];for(o=0,l=e.readInt(!0);o<l;o++)n.constraints.push(r.ikConstraints[e.readInt(!0)]);for(o=0,l=e.readInt(!0);o<l;o++)n.constraints.push(r.transformConstraints[e.readInt(!0)]);for(o=0,l=e.readInt(!0);o<l;o++)n.constraints.push(r.pathConstraints[e.readInt(!0)]);s=e.readInt(!0)}for(o=0;o<s;o++)for(var h=e.readInt(!0),u=0,c=e.readInt(!0);u<c;u++){var f=e.readStringRef(),p=this.readAttachment(e,r,n,h,f,i);null!=p&&n.setAttachment(h,f,p)}return n},e.prototype.readAttachment=function(r,i,n,s,o,l){var h=this.scale,u=r.readStringRef();null==u&&(u=o);var c=r.readByte(),f=e.AttachmentTypeValues[c];switch(f){case t.AttachmentType.Region:var p=r.readStringRef(),d=r.readFloat(),m=r.readFloat(),_=r.readFloat(),y=r.readFloat(),g=r.readFloat(),v=r.readFloat(),b=r.readFloat(),T=r.readInt32();null==p&&(p=u);var A=this.attachmentLoader.newRegionAttachment(n,u,p);return null==A?null:(A.path=p,A.x=m*h,A.y=_*h,A.scaleX=y,A.scaleY=g,A.rotation=d,A.width=v*h,A.height=b*h,t.Color.rgba8888ToColor(A.color,T),A.updateOffset(),A);case t.AttachmentType.BoundingBox:var D=r.readInt(!0),x=this.readVertices(r,D),S=(T=l?r.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(n,u));return null==S?null:(S.worldVerticesLength=D<<1,S.vertices=x.vertices,S.bones=x.bones,l&&t.Color.rgba8888ToColor(S.color,T),S);case t.AttachmentType.Mesh:p=r.readStringRef(),T=r.readInt32(),D=r.readInt(!0);var E=this.readFloatArray(r,D<<1,1),w=this.readShortArray(r),M=(x=this.readVertices(r,D),r.readInt(!0)),P=null;v=0,b=0;l&&(P=this.readShortArray(r),v=r.readFloat(),b=r.readFloat()),null==p&&(p=u);var O=this.attachmentLoader.newMeshAttachment(n,u,p);return null==O?null:(O.path=p,t.Color.rgba8888ToColor(O.color,T),O.bones=x.bones,O.vertices=x.vertices,O.worldVerticesLength=D<<1,O.triangles=w,O.regionUVs=E,O.updateUVs(),O.hullLength=M<<1,l&&(O.edges=P,O.width=v*h,O.height=b*h),O);case t.AttachmentType.LinkedMesh:p=r.readStringRef(),T=r.readInt32();var I=r.readStringRef(),C=r.readStringRef(),R=r.readBoolean();v=0,b=0;l&&(v=r.readFloat(),b=r.readFloat()),null==p&&(p=u);O=this.attachmentLoader.newMeshAttachment(n,u,p);return null==O?null:(O.path=p,t.Color.rgba8888ToColor(O.color,T),l&&(O.width=v*h,O.height=b*h),this.linkedMeshes.push(new a(O,I,s,C,R)),O);case t.AttachmentType.Path:for(var F=r.readBoolean(),B=r.readBoolean(),N=(D=r.readInt(!0),x=this.readVertices(r,D),t.Utils.newArray(D/3,0)),k=0,V=N.length;k<V;k++)N[k]=r.readFloat()*h;T=l?r.readInt32():0,p=this.attachmentLoader.newPathAttachment(n,u);return null==p?null:(p.closed=F,p.constantSpeed=B,p.worldVerticesLength=D<<1,p.vertices=x.vertices,p.bones=x.bones,p.lengths=N,l&&t.Color.rgba8888ToColor(p.color,T),p);case t.AttachmentType.Point:d=r.readFloat(),m=r.readFloat(),_=r.readFloat(),T=l?r.readInt32():0;var L=this.attachmentLoader.newPointAttachment(n,u);return null==L?null:(L.x=m*h,L.y=_*h,L.rotation=d,l&&t.Color.rgba8888ToColor(L.color,T),L);case t.AttachmentType.Clipping:var j=r.readInt(!0),U=(D=r.readInt(!0),x=this.readVertices(r,D),T=l?r.readInt32():0,this.attachmentLoader.newClippingAttachment(n,u));return null==U?null:(U.endSlot=i.slots[j],U.worldVerticesLength=D<<1,U.vertices=x.vertices,U.bones=x.bones,l&&t.Color.rgba8888ToColor(U.color,T),U)}return null},e.prototype.readVertices=function(e,r){var a=r<<1,n=new i,s=this.scale;if(!e.readBoolean())return n.vertices=this.readFloatArray(e,a,s),n;for(var o=new Array,l=new Array,h=0;h<r;h++){var u=e.readInt(!0);l.push(u);for(var c=0;c<u;c++)l.push(e.readInt(!0)),o.push(e.readFloat()*s),o.push(e.readFloat()*s),o.push(e.readFloat())}return n.vertices=t.Utils.toFloatArray(o),n.bones=l,n},e.prototype.readFloatArray=function(t,e,r){var a=new Array(e);if(1==r)for(var i=0;i<e;i++)a[i]=t.readFloat();else for(i=0;i<e;i++)a[i]=t.readFloat()*r;return a},e.prototype.readShortArray=function(t){for(var e=t.readInt(!0),r=new Array(e),a=0;a<e;a++)r[a]=t.readShort();return r},e.prototype.readAnimation=function(r,a,i){for(var n=new Array,s=this.scale,o=0,l=new t.Color,h=new t.Color,u=0,c=r.readInt(!0);u<c;u++)for(var f=r.readInt(!0),p=0,d=r.readInt(!0);p<d;p++){var m=r.readByte(),_=r.readInt(!0);switch(m){case e.SLOT_ATTACHMENT:var y=new t.AttachmentTimeline(_);y.slotIndex=f;for(var g=0;g<_;g++)y.setFrame(g,r.readFloat(),r.readStringRef());n.push(y),o=Math.max(o,y.frames[_-1]);break;case e.SLOT_COLOR:y=new t.ColorTimeline(_);y.slotIndex=f;for(g=0;g<_;g++){var v=r.readFloat();t.Color.rgba8888ToColor(l,r.readInt32()),y.setFrame(g,v,l.r,l.g,l.b,l.a),g<_-1&&this.readCurve(r,g,y)}n.push(y),o=Math.max(o,y.frames[(_-1)*t.ColorTimeline.ENTRIES]);break;case e.SLOT_TWO_COLOR:y=new t.TwoColorTimeline(_);y.slotIndex=f;for(g=0;g<_;g++){v=r.readFloat();t.Color.rgba8888ToColor(l,r.readInt32()),t.Color.rgb888ToColor(h,r.readInt32()),y.setFrame(g,v,l.r,l.g,l.b,l.a,h.r,h.g,h.b),g<_-1&&this.readCurve(r,g,y)}n.push(y),o=Math.max(o,y.frames[(_-1)*t.TwoColorTimeline.ENTRIES]);break}}for(u=0,c=r.readInt(!0);u<c;u++){var b=r.readInt(!0);for(p=0,d=r.readInt(!0);p<d;p++){m=r.readByte(),_=r.readInt(!0);switch(m){case e.BONE_ROTATE:y=new t.RotateTimeline(_);y.boneIndex=b;for(g=0;g<_;g++)y.setFrame(g,r.readFloat(),r.readFloat()),g<_-1&&this.readCurve(r,g,y);n.push(y),o=Math.max(o,y.frames[(_-1)*t.RotateTimeline.ENTRIES]);break;case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:y=void 0;var T=1;m==e.BONE_SCALE?y=new t.ScaleTimeline(_):m==e.BONE_SHEAR?y=new t.ShearTimeline(_):(y=new t.TranslateTimeline(_),T=s),y.boneIndex=b;for(g=0;g<_;g++)y.setFrame(g,r.readFloat(),r.readFloat()*T,r.readFloat()*T),g<_-1&&this.readCurve(r,g,y);n.push(y),o=Math.max(o,y.frames[(_-1)*t.TranslateTimeline.ENTRIES]);break}}}for(u=0,c=r.readInt(!0);u<c;u++){var A=r.readInt(!0);_=r.readInt(!0),y=new t.IkConstraintTimeline(_);y.ikConstraintIndex=A;for(g=0;g<_;g++)y.setFrame(g,r.readFloat(),r.readFloat(),r.readFloat()*s,r.readByte(),r.readBoolean(),r.readBoolean()),g<_-1&&this.readCurve(r,g,y);n.push(y),o=Math.max(o,y.frames[(_-1)*t.IkConstraintTimeline.ENTRIES])}for(u=0,c=r.readInt(!0);u<c;u++){A=r.readInt(!0),_=r.readInt(!0),y=new t.TransformConstraintTimeline(_);y.transformConstraintIndex=A;for(g=0;g<_;g++)y.setFrame(g,r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat()),g<_-1&&this.readCurve(r,g,y);n.push(y),o=Math.max(o,y.frames[(_-1)*t.TransformConstraintTimeline.ENTRIES])}for(u=0,c=r.readInt(!0);u<c;u++){A=r.readInt(!0);var D=i.pathConstraints[A];for(p=0,d=r.readInt(!0);p<d;p++){m=r.readByte(),_=r.readInt(!0);switch(m){case e.PATH_POSITION:case e.PATH_SPACING:y=void 0,T=1;m==e.PATH_SPACING?(y=new t.PathConstraintSpacingTimeline(_),D.spacingMode!=t.SpacingMode.Length&&D.spacingMode!=t.SpacingMode.Fixed||(T=s)):(y=new t.PathConstraintPositionTimeline(_),D.positionMode==t.PositionMode.Fixed&&(T=s)),y.pathConstraintIndex=A;for(g=0;g<_;g++)y.setFrame(g,r.readFloat(),r.readFloat()*T),g<_-1&&this.readCurve(r,g,y);n.push(y),o=Math.max(o,y.frames[(_-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case e.PATH_MIX:y=new t.PathConstraintMixTimeline(_);y.pathConstraintIndex=A;for(g=0;g<_;g++)y.setFrame(g,r.readFloat(),r.readFloat(),r.readFloat()),g<_-1&&this.readCurve(r,g,y);n.push(y),o=Math.max(o,y.frames[(_-1)*t.PathConstraintMixTimeline.ENTRIES]);break}}}for(u=0,c=r.readInt(!0);u<c;u++){var x=i.skins[r.readInt(!0)];for(p=0,d=r.readInt(!0);p<d;p++){f=r.readInt(!0);for(var S=0,E=r.readInt(!0);S<E;S++){var w=x.getAttachment(f,r.readStringRef()),M=null!=w.bones,P=w.vertices,O=M?P.length/3*2:P.length;_=r.readInt(!0),y=new t.DeformTimeline(_);y.slotIndex=f,y.attachment=w;for(g=0;g<_;g++){v=r.readFloat();var I=void 0,C=r.readInt(!0);if(0==C)I=M?t.Utils.newFloatArray(O):P;else{I=t.Utils.newFloatArray(O);var R=r.readInt(!0);if(C+=R,1==s)for(var F=R;F<C;F++)I[F]=r.readFloat();else for(F=R;F<C;F++)I[F]=r.readFloat()*s;if(!M){F=0;for(var B=I.length;F<B;F++)I[F]+=P[F]}}y.setFrame(g,v,I),g<_-1&&this.readCurve(r,g,y)}n.push(y),o=Math.max(o,y.frames[_-1])}}}var N=r.readInt(!0);if(N>0){y=new t.DrawOrderTimeline(N);var k=i.slots.length;for(u=0;u<N;u++){v=r.readFloat();var V=r.readInt(!0),L=t.Utils.newArray(k,0);for(p=k-1;p>=0;p--)L[p]=-1;var j=t.Utils.newArray(k-V,0),U=0,Y=0;for(p=0;p<V;p++){f=r.readInt(!0);while(U!=f)j[Y++]=U++;L[U+r.readInt(!0)]=U++}while(U<k)j[Y++]=U++;for(p=k-1;p>=0;p--)-1==L[p]&&(L[p]=j[--Y]);y.setFrame(u,v,L)}n.push(y),o=Math.max(o,y.frames[N-1])}var X=r.readInt(!0);if(X>0){for(y=new t.EventTimeline(X),u=0;u<X;u++){v=r.readFloat();var W=i.events[r.readInt(!0)],G=new t.Event(v,W);G.intValue=r.readInt(!1),G.floatValue=r.readFloat(),G.stringValue=r.readBoolean()?r.readString():W.stringValue,null!=G.data.audioPath&&(G.volume=r.readFloat(),G.balance=r.readFloat()),y.setFrame(u,G)}n.push(y),o=Math.max(o,y.frames[X-1])}return new t.Animation(a,n,o)},e.prototype.readCurve=function(t,r,a){switch(t.readByte()){case e.CURVE_STEPPED:a.setStepped(r);break;case e.CURVE_BEZIER:this.setCurve(a,r,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat());break}},e.prototype.setCurve=function(t,e,r,a,i,n){t.setCurve(e,r,a,i,n)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],e.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],e.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],e.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],e.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}();t.SkeletonBinary=e;var r=function(){function t(t,e,r,a){void 0===e&&(e=new Array),void 0===r&&(r=0),void 0===a&&(a=new DataView(t.buffer)),this.strings=e,this.index=r,this.buffer=a}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),r=127&e;return 0!=(128&e)&&(e=this.readByte(),r|=(127&e)<<7,0!=(128&e)&&(e=this.readByte(),r|=(127&e)<<14,0!=(128&e)&&(e=this.readByte(),r|=(127&e)<<21,0!=(128&e)&&(e=this.readByte(),r|=(127&e)<<28)))),t?r:r>>>1^-(1&r)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",r=0;r<t;){var a=this.readByte();switch(a>>4){case 12:case 13:e+=String.fromCharCode((31&a)<<6|63&this.readByte()),r+=2;break;case 14:e+=String.fromCharCode((15&a)<<12|(63&this.readByte())<<6|63&this.readByte()),r+=3;break;default:e+=String.fromCharCode(a),r++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}(),a=function(){function t(t,e,r,a,i){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=a,this.inheritDeform=i}return t}(),i=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e}return t}()}(A||(A={})),function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return e.prototype.update=function(e,r){if(null==e)throw new Error("skeleton cannot be null.");var a=this.boundingBoxes,i=this.polygons,n=this.polygonPool,s=e.slots,o=s.length;a.length=0,n.freeAll(i),i.length=0;for(var l=0;l<o;l++){var h=s[l];if(h.bone.active){var u=h.getAttachment();if(u instanceof t.BoundingBoxAttachment){var c=u;a.push(c);var f=n.obtain();f.length!=c.worldVerticesLength&&(f=t.Utils.newFloatArray(c.worldVerticesLength)),i.push(f),c.computeWorldVertices(h,0,c.worldVerticesLength,f,0,2)}}}r?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,i=this.polygons,n=0,s=i.length;n<s;n++)for(var o=i[n],l=o,h=0,u=o.length;h<u;h+=2){var c=l[h],f=l[h+1];t=Math.min(t,c),e=Math.min(e,f),r=Math.max(r,c),a=Math.max(a,f)}this.minX=t,this.minY=e,this.maxX=r,this.maxY=a},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,r,a){var i=this.minX,n=this.minY,s=this.maxX,o=this.maxY;if(t<=i&&r<=i||e<=n&&a<=n||t>=s&&r>=s||e>=o&&a>=o)return!1;var l=(a-e)/(r-t),h=l*(i-t)+e;if(h>n&&h<o)return!0;if(h=l*(s-t)+e,h>n&&h<o)return!0;var u=(n-e)/l+t;return u>i&&u<s||(u=(o-e)/l+t,u>i&&u<s)},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var r=this.polygons,a=0,i=r.length;a<i;a++)if(this.containsPointPolygon(r[a],t,e))return this.boundingBoxes[a];return null},e.prototype.containsPointPolygon=function(t,e,r){for(var a=t,i=t.length,n=i-2,s=!1,o=0;o<i;o+=2){var l=a[o+1],h=a[n+1];if(l<r&&h>=r||h<r&&l>=r){var u=a[o];u+(r-l)/(h-l)*(a[n]-u)<e&&(s=!s)}n=o}return s},e.prototype.intersectsSegment=function(t,e,r,a){for(var i=this.polygons,n=0,s=i.length;n<s;n++)if(this.intersectsSegmentPolygon(i[n],t,e,r,a))return this.boundingBoxes[n];return null},e.prototype.intersectsSegmentPolygon=function(t,e,r,a,i){for(var n=t,s=t.length,o=e-a,l=r-i,h=e*i-r*a,u=n[s-2],c=n[s-1],f=0;f<s;f+=2){var p=n[f],d=n[f+1],m=u*d-c*p,_=u-p,y=c-d,g=o*y-l*_,v=(h*_-o*m)/g;if((v>=u&&v<=p||v>=p&&v<=u)&&(v>=e&&v<=a||v>=a&&v<=e)){var b=(h*y-l*m)/g;if((b>=c&&b<=d||b>=d&&b<=c)&&(b>=r&&b<=i||b>=i&&b<=r))return!0}u=p,c=d}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(A||(A={})),function(t){var e=function(){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(r,a){if(null!=this.clipAttachment)return 0;this.clipAttachment=a;var i=a.worldVerticesLength,n=t.Utils.setArraySize(this.clippingPolygon,i);a.computeWorldVertices(r,0,i,n,0,2);var s=this.clippingPolygon;e.makeClockwise(s);for(var o=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s)),l=0,h=o.length;l<h;l++){var u=o[l];e.makeClockwise(u),u.push(u[0]),u.push(u[1])}return o.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,r,a,i,n,s,o,l){var h=this.clipOutput,u=this.clippedVertices,c=this.clippedTriangles,f=this.clippingPolygons,p=this.clippingPolygons.length,d=l?12:8,m=0;u.length=0,c.length=0;t:for(var _=0;_<i;_+=3){var y=a[_]<<1,g=e[y],v=e[y+1],b=n[y],T=n[y+1];y=a[_+1]<<1;var A=e[y],D=e[y+1],x=n[y],S=n[y+1];y=a[_+2]<<1;for(var E=e[y],w=e[y+1],M=n[y],P=n[y+1],O=0;O<p;O++){var I=u.length;if(!this.clip(g,v,A,D,E,w,f[O],h)){j=t.Utils.setArraySize(u,I+3*d);j[I]=g,j[I+1]=v,j[I+2]=s.r,j[I+3]=s.g,j[I+4]=s.b,j[I+5]=s.a,l?(j[I+6]=b,j[I+7]=T,j[I+8]=o.r,j[I+9]=o.g,j[I+10]=o.b,j[I+11]=o.a,j[I+12]=A,j[I+13]=D,j[I+14]=s.r,j[I+15]=s.g,j[I+16]=s.b,j[I+17]=s.a,j[I+18]=x,j[I+19]=S,j[I+20]=o.r,j[I+21]=o.g,j[I+22]=o.b,j[I+23]=o.a,j[I+24]=E,j[I+25]=w,j[I+26]=s.r,j[I+27]=s.g,j[I+28]=s.b,j[I+29]=s.a,j[I+30]=M,j[I+31]=P,j[I+32]=o.r,j[I+33]=o.g,j[I+34]=o.b,j[I+35]=o.a):(j[I+6]=b,j[I+7]=T,j[I+8]=A,j[I+9]=D,j[I+10]=s.r,j[I+11]=s.g,j[I+12]=s.b,j[I+13]=s.a,j[I+14]=x,j[I+15]=S,j[I+16]=E,j[I+17]=w,j[I+18]=s.r,j[I+19]=s.g,j[I+20]=s.b,j[I+21]=s.a,j[I+22]=M,j[I+23]=P),I=c.length;Z=t.Utils.setArraySize(c,I+3);Z[I]=m,Z[I+1]=m+1,Z[I+2]=m+2,m+=3;continue t}var C=h.length;if(0!=C){for(var R=D-w,F=E-A,B=g-E,N=w-v,k=1/(R*B+F*(v-w)),V=C>>1,L=this.clipOutput,j=t.Utils.setArraySize(u,I+V*d),U=0;U<C;U+=2){var Y=L[U],X=L[U+1];j[I]=Y,j[I+1]=X,j[I+2]=s.r,j[I+3]=s.g,j[I+4]=s.b,j[I+5]=s.a;var W=Y-E,G=X-w,H=(R*W+F*G)*k,q=(N*W+B*G)*k,z=1-H-q;j[I+6]=b*H+x*q+M*z,j[I+7]=T*H+S*q+P*z,l&&(j[I+8]=o.r,j[I+9]=o.g,j[I+10]=o.b,j[I+11]=o.a),I+=d}I=c.length;var Z=t.Utils.setArraySize(c,I+3*(V-2));V--;for(U=1;U<V;U++)Z[I]=m,Z[I+1]=m+U,Z[I+2]=m+U+1,I+=3;m+=V+1}}}},e.prototype.clip=function(t,e,r,a,i,n,s,o){var l=o,h=!1,u=null;s.length%4>=2?(u=o,o=this.scratch):u=this.scratch,u.length=0,u.push(t),u.push(e),u.push(r),u.push(a),u.push(i),u.push(n),u.push(t),u.push(e),o.length=0;for(var c=s,f=s.length-4,p=0;;p+=2){for(var d=c[p],m=c[p+1],_=c[p+2],y=c[p+3],g=d-_,v=m-y,b=u,T=u.length-2,A=o.length,D=0;D<T;D+=2){var x=b[D],S=b[D+1],E=b[D+2],w=b[D+3],M=g*(w-y)-v*(E-_)>0;if(g*(S-y)-v*(x-_)>0){if(M){o.push(E),o.push(w);continue}var P=w-S,O=E-x,I=P*(_-d)-O*(y-m);if(Math.abs(I)>1e-6){var C=(O*(m-S)-P*(d-x))/I;o.push(d+(_-d)*C),o.push(m+(y-m)*C)}else o.push(d),o.push(m)}else if(M){P=w-S,O=E-x,I=P*(_-d)-O*(y-m);if(Math.abs(I)>1e-6){C=(O*(m-S)-P*(d-x))/I;o.push(d+(_-d)*C),o.push(m+(y-m)*C)}else o.push(d),o.push(m);o.push(E),o.push(w)}h=!0}if(A==o.length)return l.length=0,!0;if(o.push(o[0]),o.push(o[1]),p==f)break;var R=o;o=u,o.length=0,u=R}if(l!=o){l.length=0;p=0;for(var F=o.length-2;p<F;p++)l[p]=o[p]}else l.length=l.length-2;return h},e.makeClockwise=function(t){for(var e=t,r=t.length,a=e[r-2]*e[1]-e[0]*e[r-1],i=0,n=0,s=0,o=0,l=0,h=r-3;l<h;l+=2)i=e[l],n=e[l+1],s=e[l+2],o=e[l+3],a+=i*o-s*n;if(!(a<0)){l=0;var u=r-2;for(h=r>>1;l<h;l+=2){var c=e[l],f=e[l+1],p=u-l;e[l]=e[p],e[l+1]=e[p+1],e[p]=c,e[p+1]=f}}},e}();t.SkeletonClipping=e}(A||(A={})),function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++){var i=e[r];if(i.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++){var i=e[r];if(i.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,r=0,a=e.length;r<a;r++){var i=e[r];if(i.name==t)return i}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,r=0,a=e.length;r<a;r++){var i=e[r];if(i.name==t)return i}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,r=0,a=e.length;r<a;r++){var i=e[r];if(i.name==t)return i}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,a=e.length;r<a;r++){var i=e[r];if(i.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,a=e.length;r<a;r++){var i=e[r];if(i.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++){var i=e[r];if(i.name==t)return i}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,r=0,a=e.length;r<a;r++)if(e[r].name==t)return r;return-1},t}();t.SkeletonData=e}(A||(A={})),function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(r){var a=this.scale,i=new t.SkeletonData,n="string"===typeof r?JSON.parse(r):r,s=n.skeleton;if(null!=s&&(i.hash=s.hash,i.version=s.spine,i.x=s.x,i.y=s.y,i.width=s.width,i.height=s.height,i.fps=s.fps,i.imagesPath=s.images),n.bones)for(var o=0;o<n.bones.length;o++){var l=n.bones[o],h=null,u=this.getValue(l,"parent",null);if(null!=u&&(h=i.findBone(u),null==h))throw new Error("Parent bone not found: "+u);var c=new t.BoneData(i.bones.length,l.name,h);c.length=this.getValue(l,"length",0)*a,c.x=this.getValue(l,"x",0)*a,c.y=this.getValue(l,"y",0)*a,c.rotation=this.getValue(l,"rotation",0),c.scaleX=this.getValue(l,"scaleX",1),c.scaleY=this.getValue(l,"scaleY",1),c.shearX=this.getValue(l,"shearX",0),c.shearY=this.getValue(l,"shearY",0),c.transformMode=e.transformModeFromString(this.getValue(l,"transform","normal")),c.skinRequired=this.getValue(l,"skin",!1),i.bones.push(c)}if(n.slots)for(o=0;o<n.slots.length;o++){var f=n.slots[o],p=f.name,d=f.bone,m=i.findBone(d);if(null==m)throw new Error("Slot bone not found: "+d);c=new t.SlotData(i.slots.length,p,m);var _=this.getValue(f,"color",null);null!=_&&c.color.setFromString(_);var y=this.getValue(f,"dark",null);null!=y&&(c.darkColor=new t.Color(1,1,1,1),c.darkColor.setFromString(y)),c.attachmentName=this.getValue(f,"attachment",null),c.blendMode=e.blendModeFromString(this.getValue(f,"blend","normal")),i.slots.push(c)}if(n.ik)for(o=0;o<n.ik.length;o++){var g=n.ik[o];c=new t.IkConstraintData(g.name);c.order=this.getValue(g,"order",0),c.skinRequired=this.getValue(g,"skin",!1);for(var v=0;v<g.bones.length;v++){d=g.bones[v];var b=i.findBone(d);if(null==b)throw new Error("IK bone not found: "+d);c.bones.push(b)}var T=g.target;if(c.target=i.findBone(T),null==c.target)throw new Error("IK target bone not found: "+T);c.mix=this.getValue(g,"mix",1),c.softness=this.getValue(g,"softness",0)*a,c.bendDirection=this.getValue(g,"bendPositive",!0)?1:-1,c.compress=this.getValue(g,"compress",!1),c.stretch=this.getValue(g,"stretch",!1),c.uniform=this.getValue(g,"uniform",!1),i.ikConstraints.push(c)}if(n.transform)for(o=0;o<n.transform.length;o++){g=n.transform[o],c=new t.TransformConstraintData(g.name);c.order=this.getValue(g,"order",0),c.skinRequired=this.getValue(g,"skin",!1);for(v=0;v<g.bones.length;v++){d=g.bones[v],b=i.findBone(d);if(null==b)throw new Error("Transform constraint bone not found: "+d);c.bones.push(b)}T=g.target;if(c.target=i.findBone(T),null==c.target)throw new Error("Transform constraint target bone not found: "+T);c.local=this.getValue(g,"local",!1),c.relative=this.getValue(g,"relative",!1),c.offsetRotation=this.getValue(g,"rotation",0),c.offsetX=this.getValue(g,"x",0)*a,c.offsetY=this.getValue(g,"y",0)*a,c.offsetScaleX=this.getValue(g,"scaleX",0),c.offsetScaleY=this.getValue(g,"scaleY",0),c.offsetShearY=this.getValue(g,"shearY",0),c.rotateMix=this.getValue(g,"rotateMix",1),c.translateMix=this.getValue(g,"translateMix",1),c.scaleMix=this.getValue(g,"scaleMix",1),c.shearMix=this.getValue(g,"shearMix",1),i.transformConstraints.push(c)}if(n.path)for(o=0;o<n.path.length;o++){g=n.path[o],c=new t.PathConstraintData(g.name);c.order=this.getValue(g,"order",0),c.skinRequired=this.getValue(g,"skin",!1);for(v=0;v<g.bones.length;v++){d=g.bones[v],b=i.findBone(d);if(null==b)throw new Error("Transform constraint bone not found: "+d);c.bones.push(b)}T=g.target;if(c.target=i.findSlot(T),null==c.target)throw new Error("Path target slot not found: "+T);c.positionMode=e.positionModeFromString(this.getValue(g,"positionMode","percent")),c.spacingMode=e.spacingModeFromString(this.getValue(g,"spacingMode","length")),c.rotateMode=e.rotateModeFromString(this.getValue(g,"rotateMode","tangent")),c.offsetRotation=this.getValue(g,"rotation",0),c.position=this.getValue(g,"position",0),c.positionMode==t.PositionMode.Fixed&&(c.position*=a),c.spacing=this.getValue(g,"spacing",0),c.spacingMode!=t.SpacingMode.Length&&c.spacingMode!=t.SpacingMode.Fixed||(c.spacing*=a),c.rotateMix=this.getValue(g,"rotateMix",1),c.translateMix=this.getValue(g,"translateMix",1),i.pathConstraints.push(c)}if(n.skins)for(o=0;o<n.skins.length;o++){var A=n.skins[o],D=new t.Skin(A.name);if(A.bones)for(var x=0;x<A.bones.length;x++){b=i.findBone(A.bones[x]);if(null==b)throw new Error("Skin bone not found: "+A.bones[o]);D.bones.push(b)}if(A.ik)for(x=0;x<A.ik.length;x++){var S=i.findIkConstraint(A.ik[x]);if(null==S)throw new Error("Skin IK constraint not found: "+A.ik[o]);D.constraints.push(S)}if(A.transform)for(x=0;x<A.transform.length;x++){S=i.findTransformConstraint(A.transform[x]);if(null==S)throw new Error("Skin transform constraint not found: "+A.transform[o]);D.constraints.push(S)}if(A.path)for(x=0;x<A.path.length;x++){S=i.findPathConstraint(A.path[x]);if(null==S)throw new Error("Skin path constraint not found: "+A.path[o]);D.constraints.push(S)}for(var p in A.attachments){var E=i.findSlot(p);if(null==E)throw new Error("Slot not found: "+p);f=A.attachments[p];for(var w in f){var M=this.readAttachment(f[w],D,E.index,w,i);null!=M&&D.setAttachment(E.index,w,M)}}i.skins.push(D),"default"==D.name&&(i.defaultSkin=D)}o=0;for(var P=this.linkedMeshes.length;o<P;o++){var O=this.linkedMeshes[o];D=null==O.skin?i.defaultSkin:i.findSkin(O.skin);if(null==D)throw new Error("Skin not found: "+O.skin);var I=D.getAttachment(O.slotIndex,O.parent);if(null==I)throw new Error("Parent mesh not found: "+O.parent);O.mesh.deformAttachment=O.inheritDeform?I:O.mesh,O.mesh.setParentMesh(I),O.mesh.updateUVs()}if(this.linkedMeshes.length=0,n.events)for(var C in n.events){var R=n.events[C];c=new t.EventData(C);c.intValue=this.getValue(R,"int",0),c.floatValue=this.getValue(R,"float",0),c.stringValue=this.getValue(R,"string",""),c.audioPath=this.getValue(R,"audio",null),null!=c.audioPath&&(c.volume=this.getValue(R,"volume",1),c.balance=this.getValue(R,"balance",0)),i.events.push(c)}if(n.animations)for(var F in n.animations){var B=n.animations[F];this.readAnimation(B,F,i)}return i},e.prototype.readAttachment=function(e,a,i,n,s){var o=this.scale;n=this.getValue(e,"name",n);var l=this.getValue(e,"type","region");switch(l){case"region":var h=this.getValue(e,"path",n),u=this.attachmentLoader.newRegionAttachment(a,n,h);if(null==u)return null;u.path=h,u.x=this.getValue(e,"x",0)*o,u.y=this.getValue(e,"y",0)*o,u.scaleX=this.getValue(e,"scaleX",1),u.scaleY=this.getValue(e,"scaleY",1),u.rotation=this.getValue(e,"rotation",0),u.width=e.width*o,u.height=e.height*o;var c=this.getValue(e,"color",null);return null!=c&&u.color.setFromString(c),u.updateOffset(),u;case"boundingbox":var f=this.attachmentLoader.newBoundingBoxAttachment(a,n);if(null==f)return null;this.readVertices(e,f,e.vertexCount<<1);c=this.getValue(e,"color",null);return null!=c&&f.color.setFromString(c),f;case"mesh":case"linkedmesh":h=this.getValue(e,"path",n);var p=this.attachmentLoader.newMeshAttachment(a,n,h);if(null==p)return null;p.path=h;c=this.getValue(e,"color",null);null!=c&&p.color.setFromString(c),p.width=this.getValue(e,"width",0)*o,p.height=this.getValue(e,"height",0)*o;var d=this.getValue(e,"parent",null);if(null!=d)return this.linkedMeshes.push(new r(p,this.getValue(e,"skin",null),i,d,this.getValue(e,"deform",!0))),p;var m=e.uvs;return this.readVertices(e,p,m.length),p.triangles=e.triangles,p.regionUVs=m,p.updateUVs(),p.edges=this.getValue(e,"edges",null),p.hullLength=2*this.getValue(e,"hull",0),p;case"path":h=this.attachmentLoader.newPathAttachment(a,n);if(null==h)return null;h.closed=this.getValue(e,"closed",!1),h.constantSpeed=this.getValue(e,"constantSpeed",!0);var _=e.vertexCount;this.readVertices(e,h,_<<1);for(var y=t.Utils.newArray(_/3,0),g=0;g<e.lengths.length;g++)y[g]=e.lengths[g]*o;h.lengths=y;c=this.getValue(e,"color",null);return null!=c&&h.color.setFromString(c),h;case"point":var v=this.attachmentLoader.newPointAttachment(a,n);if(null==v)return null;v.x=this.getValue(e,"x",0)*o,v.y=this.getValue(e,"y",0)*o,v.rotation=this.getValue(e,"rotation",0);c=this.getValue(e,"color",null);return null!=c&&v.color.setFromString(c),v;case"clipping":var b=this.attachmentLoader.newClippingAttachment(a,n);if(null==b)return null;var T=this.getValue(e,"end",null);if(null!=T){var A=s.findSlot(T);if(null==A)throw new Error("Clipping end slot not found: "+T);b.endSlot=A}_=e.vertexCount;this.readVertices(e,b,_<<1);c=this.getValue(e,"color",null);return null!=c&&b.color.setFromString(c),b}return null},e.prototype.readVertices=function(e,r,a){var i=this.scale;r.worldVerticesLength=a;var n=e.vertices;if(a!=n.length){var s=new Array,o=new Array;for(c=0,f=n.length;c<f;){var l=n[c++];o.push(l);for(var h=c+4*l;c<h;c+=4)o.push(n[c]),s.push(n[c+1]*i),s.push(n[c+2]*i),s.push(n[c+3])}r.bones=o,r.vertices=t.Utils.toFloatArray(s)}else{var u=t.Utils.toFloatArray(n);if(1!=i)for(var c=0,f=n.length;c<f;c++)u[c]*=i;r.vertices=u}},e.prototype.readAnimation=function(e,r,a){var i=this.scale,n=new Array,s=0;if(e.slots)for(var o in e.slots){var l=e.slots[o],h=a.findSlotIndex(o);if(-1==h)throw new Error("Slot not found: "+o);for(var u in l){var c=l[u];if("attachment"==u){var f=new t.AttachmentTimeline(c.length);f.slotIndex=h;for(var p=0,d=0;d<c.length;d++){var m=c[d];f.setFrame(p++,this.getValue(m,"time",0),m.name)}n.push(f),s=Math.max(s,f.frames[f.getFrameCount()-1])}else if("color"==u){f=new t.ColorTimeline(c.length);f.slotIndex=h;for(p=0,d=0;d<c.length;d++){m=c[d];var _=new t.Color;_.setFromString(m.color),f.setFrame(p,this.getValue(m,"time",0),_.r,_.g,_.b,_.a),this.readCurve(m,f,p),p++}n.push(f),s=Math.max(s,f.frames[(f.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=u)throw new Error("Invalid timeline type for a slot: "+u+" ("+o+")");f=new t.TwoColorTimeline(c.length);f.slotIndex=h;for(p=0,d=0;d<c.length;d++){m=c[d];var y=new t.Color,g=new t.Color;y.setFromString(m.light),g.setFromString(m.dark),f.setFrame(p,this.getValue(m,"time",0),y.r,y.g,y.b,y.a,g.r,g.g,g.b),this.readCurve(m,f,p),p++}n.push(f),s=Math.max(s,f.frames[(f.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var v in e.bones){var b=e.bones[v],T=a.findBoneIndex(v);if(-1==T)throw new Error("Bone not found: "+v);for(var u in b){c=b[u];if("rotate"===u){f=new t.RotateTimeline(c.length);f.boneIndex=T;for(p=0,d=0;d<c.length;d++){m=c[d];f.setFrame(p,this.getValue(m,"time",0),this.getValue(m,"angle",0)),this.readCurve(m,f,p),p++}n.push(f),s=Math.max(s,f.frames[(f.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==u&&"scale"!==u&&"shear"!==u)throw new Error("Invalid timeline type for a bone: "+u+" ("+v+")");f=null;var A=1,D=0;"scale"===u?(f=new t.ScaleTimeline(c.length),D=1):"shear"===u?f=new t.ShearTimeline(c.length):(f=new t.TranslateTimeline(c.length),A=i),f.boneIndex=T;for(p=0,d=0;d<c.length;d++){m=c[d];var x=this.getValue(m,"x",D),S=this.getValue(m,"y",D);f.setFrame(p,this.getValue(m,"time",0),x*A,S*A),this.readCurve(m,f,p),p++}n.push(f),s=Math.max(s,f.frames[(f.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(e.ik)for(var E in e.ik){var w=e.ik[E],M=a.findIkConstraint(E);f=new t.IkConstraintTimeline(w.length);f.ikConstraintIndex=a.ikConstraints.indexOf(M);for(p=0,d=0;d<w.length;d++){m=w[d];f.setFrame(p,this.getValue(m,"time",0),this.getValue(m,"mix",1),this.getValue(m,"softness",0)*i,this.getValue(m,"bendPositive",!0)?1:-1,this.getValue(m,"compress",!1),this.getValue(m,"stretch",!1)),this.readCurve(m,f,p),p++}n.push(f),s=Math.max(s,f.frames[(f.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var E in e.transform){w=e.transform[E],M=a.findTransformConstraint(E),f=new t.TransformConstraintTimeline(w.length);f.transformConstraintIndex=a.transformConstraints.indexOf(M);for(p=0,d=0;d<w.length;d++){m=w[d];f.setFrame(p,this.getValue(m,"time",0),this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1),this.getValue(m,"scaleMix",1),this.getValue(m,"shearMix",1)),this.readCurve(m,f,p),p++}n.push(f),s=Math.max(s,f.frames[(f.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.path)for(var E in e.path){w=e.path[E];var P=a.findPathConstraintIndex(E);if(-1==P)throw new Error("Path constraint not found: "+E);var O=a.pathConstraints[P];for(var u in w){c=w[u];if("position"===u||"spacing"===u){f=null,A=1;"spacing"===u?(f=new t.PathConstraintSpacingTimeline(c.length),O.spacingMode!=t.SpacingMode.Length&&O.spacingMode!=t.SpacingMode.Fixed||(A=i)):(f=new t.PathConstraintPositionTimeline(c.length),O.positionMode==t.PositionMode.Fixed&&(A=i)),f.pathConstraintIndex=P;for(p=0,d=0;d<c.length;d++){m=c[d];f.setFrame(p,this.getValue(m,"time",0),this.getValue(m,u,0)*A),this.readCurve(m,f,p),p++}n.push(f),s=Math.max(s,f.frames[(f.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===u){f=new t.PathConstraintMixTimeline(c.length);f.pathConstraintIndex=P;for(p=0,d=0;d<c.length;d++){m=c[d];f.setFrame(p,this.getValue(m,"time",0),this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1)),this.readCurve(m,f,p),p++}n.push(f),s=Math.max(s,f.frames[(f.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(e.deform)for(var I in e.deform){var C=e.deform[I],R=a.findSkin(I);if(null==R)throw new Error("Skin not found: "+I);for(var o in C){l=C[o],h=a.findSlotIndex(o);if(-1==h)throw new Error("Slot not found: "+l.name);for(var u in l){c=l[u];var F=R.getAttachment(h,u);if(null==F)throw new Error("Deform attachment not found: "+c.name);var B=null!=F.bones,N=F.vertices,k=B?N.length/3*2:N.length;f=new t.DeformTimeline(c.length);f.slotIndex=h,f.attachment=F;p=0;for(var V=0;V<c.length;V++){m=c[V];var L=void 0,j=this.getValue(m,"vertices",null);if(null==j)L=B?t.Utils.newFloatArray(k):N;else{L=t.Utils.newFloatArray(k);var U=this.getValue(m,"offset",0);if(t.Utils.arrayCopy(j,0,L,U,j.length),1!=i){d=U;for(var Y=d+j.length;d<Y;d++)L[d]*=i}if(!B)for(d=0;d<k;d++)L[d]+=N[d]}f.setFrame(p,this.getValue(m,"time",0),L),this.readCurve(m,f,p),p++}n.push(f),s=Math.max(s,f.frames[f.getFrameCount()-1])}}}var X=e.drawOrder;if(null==X&&(X=e.draworder),null!=X){f=new t.DrawOrderTimeline(X.length);var W=a.slots.length;for(p=0,V=0;V<X.length;V++){var G=X[V],H=null,q=this.getValue(G,"offsets",null);if(null!=q){H=t.Utils.newArray(W,-1);var z=t.Utils.newArray(W-q.length,0),Z=0,K=0;for(d=0;d<q.length;d++){var $=q[d];h=a.findSlotIndex($.slot);if(-1==h)throw new Error("Slot not found: "+$.slot);while(Z!=h)z[K++]=Z++;H[Z+$.offset]=Z++}while(Z<W)z[K++]=Z++;for(d=W-1;d>=0;d--)-1==H[d]&&(H[d]=z[--K])}f.setFrame(p++,this.getValue(G,"time",0),H)}n.push(f),s=Math.max(s,f.frames[f.getFrameCount()-1])}if(e.events){for(f=new t.EventTimeline(e.events.length),p=0,d=0;d<e.events.length;d++){var J=e.events[d],Q=a.findEvent(J.name);if(null==Q)throw new Error("Event not found: "+J.name);var tt=new t.Event(t.Utils.toSinglePrecision(this.getValue(J,"time",0)),Q);tt.intValue=this.getValue(J,"int",Q.intValue),tt.floatValue=this.getValue(J,"float",Q.floatValue),tt.stringValue=this.getValue(J,"string",Q.stringValue),null!=tt.data.audioPath&&(tt.volume=this.getValue(J,"volume",1),tt.balance=this.getValue(J,"balance",0)),f.setFrame(p++,tt)}n.push(f),s=Math.max(s,f.frames[f.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");a.animations.push(new t.Animation(r,n,s))},e.prototype.readCurve=function(t,e,r){if(t.hasOwnProperty("curve"))if("stepped"==t.curve)e.setStepped(r);else{var a=t.curve;e.setCurve(r,a,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},e.prototype.getValue=function(t,e,r){return void 0!==t[e]?t[e]:r},e.blendModeFromString=function(e){if(e=e.toLowerCase(),"normal"==e)return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if(e=e.toLowerCase(),"fixed"==e)return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if(e=e.toLowerCase(),"length"==e)return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if(e=e.toLowerCase(),"tangent"==e)return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if(e=e.toLowerCase(),"normal"==e)return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var r=function(){function t(t,e,r,a,i){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=a,this.inheritDeform=i}return t}()}(A||(A={})),function(t){var e=function(){function t(t,e,r){this.slotIndex=t,this.name=e,this.attachment=r}return t}();t.SkinEntry=e;var r=function(){function r(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return r.prototype.setAttachment=function(t,e,r){if(null==r)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][e]=r},r.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],a=!1,i=0;i<this.bones.length;i++)if(this.bones[i]==r){a=!0;break}a||this.bones.push(r)}for(e=0;e<t.constraints.length;e++){var n=t.constraints[e];for(a=!1,i=0;i<this.constraints.length;i++)if(this.constraints[i]==n){a=!0;break}a||this.constraints.push(n)}var s=t.getAttachments();for(e=0;e<s.length;e++){var o=s[e];this.setAttachment(o.slotIndex,o.name,o.attachment)}},r.prototype.copySkin=function(e){for(var r=0;r<e.bones.length;r++){for(var a=e.bones[r],i=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==a){i=!0;break}i||this.bones.push(a)}for(r=0;r<e.constraints.length;r++){var s=e.constraints[r];for(i=!1,n=0;n<this.constraints.length;n++)if(this.constraints[n]==s){i=!0;break}i||this.constraints.push(s)}var o=e.getAttachments();for(r=0;r<o.length;r++){var l=o[r];null!=l.attachment&&(l.attachment instanceof t.MeshAttachment?(l.attachment=l.attachment.newLinkedMesh(),this.setAttachment(l.slotIndex,l.name,l.attachment)):(l.attachment=l.attachment.copy(),this.setAttachment(l.slotIndex,l.name,l.attachment)))}},r.prototype.getAttachment=function(t,e){var r=this.attachments[t];return r?r[e]:null},r.prototype.removeAttachment=function(t,e){var r=this.attachments[t];r&&(r[e]=null)},r.prototype.getAttachments=function(){for(var t=new Array,r=0;r<this.attachments.length;r++){var a=this.attachments[r];if(a)for(var i in a){var n=a[i];n&&t.push(new e(r,i,n))}}return t},r.prototype.getAttachmentsForSlot=function(t,r){var a=this.attachments[t];if(a)for(var i in a){var n=a[i];n&&r.push(new e(t,i,n))}},r.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},r.prototype.attachAll=function(t,e){for(var r=0,a=0;a<t.slots.length;a++){var i=t.slots[a],n=i.getAttachment();if(n&&r<e.attachments.length){var s=e.attachments[r];for(var o in s){var l=s[o];if(n==l){var h=this.getAttachment(r,o);null!=h&&i.setAttachment(h);break}}}r++}},r}();t.Skin=r}(A||(A={})),function(t){var e=function(){function e(e,r){if(this.deform=new Array,null==e)throw new Error("data cannot be null.");if(null==r)throw new Error("bone cannot be null.");this.data=e,this.bone=r,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose()}return e.prototype.getSkeleton=function(){return this.bone.skeleton},e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(A||(A={})),function(t){var e=function(){function e(e,r,a){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==r)throw new Error("name cannot be null.");if(null==a)throw new Error("boneData cannot be null.");this.index=e,this.name=r,this.boneData=a}return e}();t.SlotData=e}(A||(A={})),function(t){var e,r,a=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return r.MirroredRepeat;case"clamptoedge":return r.ClampToEdge;case"repeat":return r.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=a,function(t){t[t["Nearest"]=9728]="Nearest",t[t["Linear"]=9729]="Linear",t[t["MipMap"]=9987]="MipMap",t[t["MipMapNearestNearest"]=9984]="MipMapNearestNearest",t[t["MipMapLinearNearest"]=9985]="MipMapLinearNearest",t[t["MipMapNearestLinear"]=9986]="MipMapNearestLinear",t[t["MipMapLinearLinear"]=9987]="MipMapLinearLinear"}(e=t.TextureFilter||(t.TextureFilter={})),function(t){t[t["MirroredRepeat"]=33648]="MirroredRepeat",t[t["ClampToEdge"]=33071]="ClampToEdge",t[t["Repeat"]=10497]="Repeat"}(r=t.TextureWrap||(t.TextureWrap={}));var i=function(){function t(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}return t}();t.TextureRegion=i;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x(e,t),e.prototype.setFilters=function(t,e){},e.prototype.setWraps=function(t,e){},e.prototype.dispose=function(){},e}(a);t.FakeTexture=n}(A||(A={})),function(t){var e=function(){function e(t,e){this.pages=new Array,this.regions=new Array,this.load(t,e)}return e.prototype.load=function(e,n){if(null==n)throw new Error("textureLoader cannot be null.");var s=new r(e),o=new Array(4),l=null;while(1){var h=s.readLine();if(null==h)break;if(h=h.trim(),0==h.length)l=null;else if(l){var u=new i;u.name=h,u.page=l;var c=s.readValue();"true"==c.toLocaleLowerCase()?u.degrees=90:"false"==c.toLocaleLowerCase()?u.degrees=0:u.degrees=parseFloat(c),u.rotate=90==u.degrees,s.readTuple(o);var f=parseInt(o[0]),p=parseInt(o[1]);s.readTuple(o);var d=parseInt(o[0]),m=parseInt(o[1]);u.u=f/l.width,u.v=p/l.height,u.rotate?(u.u2=(f+m)/l.width,u.v2=(p+d)/l.height):(u.u2=(f+d)/l.width,u.v2=(p+m)/l.height),u.x=f,u.y=p,u.width=Math.abs(d),u.height=Math.abs(m),4==s.readTuple(o)&&4==s.readTuple(o)&&s.readTuple(o),u.originalWidth=parseInt(o[0]),u.originalHeight=parseInt(o[1]),s.readTuple(o),u.offsetX=parseInt(o[0]),u.offsetY=parseInt(o[1]),u.index=parseInt(s.readValue()),u.texture=l.texture,this.regions.push(u)}else{l=new a,l.name=h,2==s.readTuple(o)&&(l.width=parseInt(o[0]),l.height=parseInt(o[1]),s.readTuple(o)),s.readTuple(o),l.minFilter=t.Texture.filterFromString(o[0]),l.magFilter=t.Texture.filterFromString(o[1]);var _=s.readValue();l.uWrap=t.TextureWrap.ClampToEdge,l.vWrap=t.TextureWrap.ClampToEdge,"x"==_?l.uWrap=t.TextureWrap.Repeat:"y"==_?l.vWrap=t.TextureWrap.Repeat:"xy"==_&&(l.uWrap=l.vWrap=t.TextureWrap.Repeat),l.texture=n(h),l.texture.setFilters(l.minFilter,l.magFilter),l.texture.setWraps(l.uWrap,l.vWrap),l.width=l.texture.getImage().width,l.height=l.texture.getImage().height,this.pages.push(l)}}},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},e}();t.TextureAtlas=e;var r=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),r=e.indexOf(":");if(-1==r)throw new Error("Invalid line: "+e);for(var a=0,i=r+1;a<3;a++){var n=e.indexOf(",",i);if(-1==n)break;t[a]=e.substr(i,n-i).trim(),i=n+1}return t[a]=e.substring(i).trim(),a+1},t}(),a=function(){function t(){}return t}();t.TextureAtlasPage=a;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=i}(A||(A={})),function(t){var e=function(){function e(e,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==r)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var a=0;a<e.bones.length;a++)this.bones.push(r.findBone(e.bones[a].name));this.target=r.findBone(e.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,r=this.translateMix,a=this.scaleMix,i=this.shearMix,n=this.target,s=n.a,o=n.b,l=n.c,h=n.d,u=s*h-o*l>0?t.MathUtils.degRad:-t.MathUtils.degRad,c=this.data.offsetRotation*u,f=this.data.offsetShearY*u,p=this.bones,d=0,m=p.length;d<m;d++){var _=p[d],y=!1;if(0!=e){var g=_.a,v=_.b,b=_.c,T=_.d,A=Math.atan2(l,s)-Math.atan2(b,g)+c;A>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2),A*=e;var D=Math.cos(A),x=Math.sin(A);_.a=D*g-x*b,_.b=D*v-x*T,_.c=x*g+D*b,_.d=x*v+D*T,y=!0}if(0!=r){var S=this.temp;n.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.worldX+=(S.x-_.worldX)*r,_.worldY+=(S.y-_.worldY)*r,y=!0}if(a>0){var E=Math.sqrt(_.a*_.a+_.c*_.c),w=Math.sqrt(s*s+l*l);E>1e-5&&(E=(E+(w-E+this.data.offsetScaleX)*a)/E),_.a*=E,_.c*=E,E=Math.sqrt(_.b*_.b+_.d*_.d),w=Math.sqrt(o*o+h*h),E>1e-5&&(E=(E+(w-E+this.data.offsetScaleY)*a)/E),_.b*=E,_.d*=E,y=!0}if(i>0){v=_.b,T=_.d;var M=Math.atan2(T,v);A=Math.atan2(h,o)-Math.atan2(l,s)-(M-Math.atan2(_.c,_.a));A>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2),A=M+(A+f)*i;E=Math.sqrt(v*v+T*T);_.b=Math.cos(A)*E,_.d=Math.sin(A)*E,y=!0}y&&(_.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,r=this.translateMix,a=this.scaleMix,i=this.shearMix,n=this.target,s=n.a,o=n.b,l=n.c,h=n.d,u=s*h-o*l>0?t.MathUtils.degRad:-t.MathUtils.degRad,c=this.data.offsetRotation*u,f=this.data.offsetShearY*u,p=this.bones,d=0,m=p.length;d<m;d++){var _=p[d],y=!1;if(0!=e){var g=_.a,v=_.b,b=_.c,T=_.d,A=Math.atan2(l,s)+c;A>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2),A*=e;var D=Math.cos(A),x=Math.sin(A);_.a=D*g-x*b,_.b=D*v-x*T,_.c=x*g+D*b,_.d=x*v+D*T,y=!0}if(0!=r){var S=this.temp;n.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.worldX+=S.x*r,_.worldY+=S.y*r,y=!0}if(a>0){var E=(Math.sqrt(s*s+l*l)-1+this.data.offsetScaleX)*a+1;_.a*=E,_.c*=E,E=(Math.sqrt(o*o+h*h)-1+this.data.offsetScaleY)*a+1,_.b*=E,_.d*=E,y=!0}if(i>0){A=Math.atan2(h,o)-Math.atan2(l,s);A>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2);v=_.b,T=_.d;A=Math.atan2(T,v)+(A-t.MathUtils.PI/2+f)*i;E=Math.sqrt(v*v+T*T);_.b=Math.cos(A)*E,_.d=Math.sin(A)*E,y=!0}y&&(_.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,a=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var n=this.bones,s=0,o=n.length;s<o;s++){var l=n[s];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;if(0!=t){var u=i.arotation-h+this.data.offsetRotation;u-=360*(16384-(16384.499999999996-u/360|0)),h+=u*t}var c=l.ax,f=l.ay;0!=e&&(c+=(i.ax-c+this.data.offsetX)*e,f+=(i.ay-f+this.data.offsetY)*e);var p=l.ascaleX,d=l.ascaleY;0!=r&&(p>1e-5&&(p=(p+(i.ascaleX-p+this.data.offsetScaleX)*r)/p),d>1e-5&&(d=(d+(i.ascaleY-d+this.data.offsetScaleY)*r)/d));var m=l.ashearY;if(0!=a){u=i.ashearY-m+this.data.offsetShearY;u-=360*(16384-(16384.499999999996-u/360|0)),l.shearY+=u*a}l.updateWorldTransformWith(c,f,h,p,d,l.ashearX,m)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,a=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var n=this.bones,s=0,o=n.length;s<o;s++){var l=n[s];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;0!=t&&(h+=(i.arotation+this.data.offsetRotation)*t);var u=l.ax,c=l.ay;0!=e&&(u+=(i.ax+this.data.offsetX)*e,c+=(i.ay+this.data.offsetY)*e);var f=l.ascaleX,p=l.ascaleY;0!=r&&(f>1e-5&&(f*=(i.ascaleX-1+this.data.offsetScaleX)*r+1),p>1e-5&&(p*=(i.ascaleY-1+this.data.offsetScaleY)*r+1));var d=l.ashearY;0!=a&&(d+=(i.ashearY+this.data.offsetShearY)*a),l.updateWorldTransformWith(u,c,h,f,p,l.ashearX,d)}},e}();t.TransformConstraint=e}(A||(A={})),function(t){var e=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=new Array,r.rotateMix=0,r.translateMix=0,r.scaleMix=0,r.shearMix=0,r.offsetRotation=0,r.offsetX=0,r.offsetY=0,r.offsetScaleX=0,r.offsetScaleY=0,r.offsetShearY=0,r.relative=!1,r.local=!1,r}return x(e,t),e}(t.ConstraintData);t.TransformConstraintData=e}(A||(A={})),function(t){var e=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return e.prototype.triangulate=function(t){var r=t,a=t.length>>1,i=this.indicesArray;i.length=0;for(var n=0;n<a;n++)i[n]=n;var s=this.isConcaveArray;s.length=0;n=0;for(var o=a;n<o;++n)s[n]=e.isConcave(n,a,r,i);var l=this.triangles;l.length=0;while(a>3){var h=a-1,u=(n=0,1);while(1){t:if(!s[n]){for(var c=i[h]<<1,f=i[n]<<1,p=i[u]<<1,d=r[c],m=r[c+1],_=r[f],y=r[f+1],g=r[p],v=r[p+1],b=(u+1)%a;b!=h;b=(b+1)%a)if(s[b]){var T=i[b]<<1,A=r[T],D=r[T+1];if(e.positiveArea(g,v,d,m,A,D)&&e.positiveArea(d,m,_,y,A,D)&&e.positiveArea(_,y,g,v,A,D))break t}break}if(0==u){do{if(!s[n])break;n--}while(n>0);break}h=n,n=u,u=(u+1)%a}l.push(i[(a+n-1)%a]),l.push(i[n]),l.push(i[(n+1)%a]),i.splice(n,1),s.splice(n,1),a--;var x=(a+n-1)%a,S=n==a?0:n;s[x]=e.isConcave(x,a,r,i),s[S]=e.isConcave(S,a,r,i)}return 3==a&&(l.push(i[2]),l.push(i[0]),l.push(i[1])),l},e.prototype.decompose=function(t,r){var a=t,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;var n=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(n),n.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var o=this.polygonPool.obtain();o.length=0;for(var l=-1,h=0,u=0,c=r.length;u<c;u+=3){var f=r[u]<<1,p=r[u+1]<<1,d=r[u+2]<<1,m=a[f],_=a[f+1],y=a[p],g=a[p+1],v=a[d],b=a[d+1],T=!1;if(l==f){var A=o.length-4,D=e.winding(o[A],o[A+1],o[A+2],o[A+3],v,b),x=e.winding(v,b,o[0],o[1],o[2],o[3]);D==h&&x==h&&(o.push(v),o.push(b),s.push(d),T=!0)}T||(o.length>0?(i.push(o),n.push(s)):(this.polygonPool.free(o),this.polygonIndicesPool.free(s)),o=this.polygonPool.obtain(),o.length=0,o.push(m),o.push(_),o.push(y),o.push(g),o.push(v),o.push(b),s=this.polygonIndicesPool.obtain(),s.length=0,s.push(f),s.push(p),s.push(d),h=e.winding(m,_,y,g,v,b),l=f)}o.length>0&&(i.push(o),n.push(s));for(u=0,c=i.length;u<c;u++)if(s=n[u],0!=s.length){var S=s[0],E=s[s.length-1];o=i[u];A=o.length-4;for(var w=o[A],M=o[A+1],P=o[A+2],O=o[A+3],I=o[0],C=o[1],R=o[2],F=o[3],B=e.winding(w,M,P,O,I,C),N=0;N<c;N++)if(N!=u){var k=n[N];if(3==k.length){var V=k[0],L=k[1],j=k[2],U=i[N];v=U[U.length-2],b=U[U.length-1];if(V==S&&L==E){D=e.winding(w,M,P,O,v,b),x=e.winding(v,b,I,C,R,F);D==B&&x==B&&(U.length=0,k.length=0,o.push(v),o.push(b),s.push(j),w=P,M=O,P=v,O=b,N=0)}}}}for(u=i.length-1;u>=0;u--)o=i[u],0==o.length&&(i.splice(u,1),this.polygonPool.free(o),s=n[u],n.splice(u,1),this.polygonIndicesPool.free(s));return i},e.isConcave=function(t,e,r,a){var i=a[(e+t-1)%e]<<1,n=a[t]<<1,s=a[(t+1)%e]<<1;return!this.positiveArea(r[i],r[i+1],r[n],r[n+1],r[s],r[s+1])},e.positiveArea=function(t,e,r,a,i,n){return t*(n-a)+r*(e-n)+i*(a-e)>=0},e.winding=function(t,e,r,a,i,n){var s=r-t,o=a-e;return i*o-n*s+s*e-t*o>=0?1:-1},e}();t.Triangulator=e}(A||(A={})),function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return void 0!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var r=function(){function t(t,e,r,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===a&&(a=0),this.r=t,this.g=e,this.b=r,this.a=a}return t.prototype.set=function(t,e,r,a){return this.r=t,this.g=e,this.b=r,this.a=a,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,r,a){return this.r+=t,this.g+=e,this.b+=r,this.a+=a,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=r;var a=function(){function t(){}return t.clamp=function(t,e,r){return t<e?e:t>r?r:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,r){return t.randomTriangularWith(e,r,.5*(e+r))},t.randomTriangularWith=function(t,e,r){var a=Math.random(),i=e-t;return a<=(r-t)/i?t+Math.sqrt(a*i*(r-t)):e-Math.sqrt((1-a)*i*(e-r))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();t.MathUtils=a;var i=function(){function t(){}return t.prototype.apply=function(t,e,r){return t+(e-t)*this.applyInternal(r)},t}();t.Interpolation=i;var n=function(t){function e(e){var r=t.call(this)||this;return r.power=2,r.power=e,r}return x(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(i);t.Pow=n;var s=function(t){function e(e){return t.call(this,e)||this}return x(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(n);t.PowOut=s;var o=function(){function t(){}return t.arrayCopy=function(t,e,r,a,i){for(var n=e,s=a;n<e+i;n++,s++)r[s]=t[n]},t.setArraySize=function(t,e,r){void 0===r&&(r=0);var a=t.length;if(a==e)return t;if(t.length=e,a<e)for(var i=a;i<e;i++)t[i]=r;return t},t.ensureArrayCapacity=function(e,r,a){return void 0===a&&(a=0),e.length>=r?e:t.setArraySize(e,r,a)},t.newArray=function(t,e){for(var r=new Array(t),a=0;a<t;a++)r[a]=e;return r},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var r=new Array(e),a=0;a<r.length;a++)r[a]=0;return r},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var r=new Array(e),a=0;a<r.length;a++)r[a]=0;return r},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,r){void 0===r&&(r=!0);for(var a=0;a<t.length;a++)if(t[a]==e)return!0;return!1},t.SUPPORTS_TYPED_ARRAYS="undefined"!==typeof Float32Array,t}();t.Utils=o;var l=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var r=t.bones[e];console.log(r.data.name+", "+r.a+", "+r.b+", "+r.c+", "+r.d+", "+r.worldX+", "+r.worldY)}},t}();t.DebugUtils=l;var h=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=h;var u=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=u;var c=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=c;var f=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=f}(A||(A={})),function(){Math.fround||(Math.fround=function(t){return function(e){return t[0]=e,t[0]}}(new Float32Array(1)))}(),function(t){var e=function(){function t(t){if(null==t)throw new Error("name cannot be null.");this.name=t}return t}();t.Attachment=e;var r=function(e){function r(t){var a=e.call(this,t)||this;return a.id=(65535&r.nextID++)<<11,a.worldVerticesLength=0,a.deformAttachment=a,a}return x(r,e),r.prototype.computeWorldVertices=function(t,e,r,a,i,n){r=i+(r>>1)*n;var s=t.bone.skeleton,o=t.deform,l=this.vertices,h=this.bones;if(null!=h){for(var u=0,c=0,f=0;f<e;f+=2){var p=h[u];u+=p+1,c+=p}var d=s.bones;if(0==o.length)for(M=i,x=3*c;M<r;M+=n){var m=0,_=0;p=h[u++];for(p+=u;u<p;u++,x+=3){b=d[h[u]],P=l[x],O=l[x+1];var y=l[x+2];m+=(P*b.a+O*b.b+b.worldX)*y,_+=(P*b.c+O*b.d+b.worldY)*y}a[M]=m,a[M+1]=_}else for(var g=o,v=(M=i,x=3*c,c<<1);M<r;M+=n){m=0,_=0,p=h[u++];for(p+=u;u<p;u++,x+=3,v+=2){b=d[h[u]],P=l[x]+g[v],O=l[x+1]+g[v+1],y=l[x+2];m+=(P*b.a+O*b.b+b.worldX)*y,_+=(P*b.c+O*b.d+b.worldY)*y}a[M]=m,a[M+1]=_}}else{o.length>0&&(l=o);for(var b=t.bone,T=b.worldX,A=b.worldY,D=b.a,x=b.b,S=b.c,E=b.d,w=e,M=i;M<r;w+=2,M+=n){var P=l[w],O=l[w+1];a[M]=P*D+O*x+T,a[M+1]=P*S+O*E+A}}},r.prototype.copyTo=function(e){null!=this.bones?(e.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,null!=this.vertices?(e.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},r.nextID=0,r}(e);t.VertexAttachment=r}(A||(A={})),function(t){(function(t){t[t["Region"]=0]="Region",t[t["BoundingBox"]=1]="BoundingBox",t[t["Mesh"]=2]="Mesh",t[t["LinkedMesh"]=3]="LinkedMesh",t[t["Path"]=4]="Path",t[t["Point"]=5]="Point",t[t["Clipping"]=6]="Clipping"})(t.AttachmentType||(t.AttachmentType={}))}(A||(A={})),function(t){var e=function(e){function r(r){var a=e.call(this,r)||this;return a.color=new t.Color(1,1,1,1),a}return x(r,e),r.prototype.copy=function(){var t=new r(name);return this.copyTo(t),t.color.setFromColor(this.color),t},r}(t.VertexAttachment);t.BoundingBoxAttachment=e}(A||(A={})),function(t){var e=function(e){function r(r){var a=e.call(this,r)||this;return a.color=new t.Color(.2275,.2275,.8078,1),a}return x(r,e),r.prototype.copy=function(){var t=new r(name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},r}(t.VertexAttachment);t.ClippingAttachment=e}(A||(A={})),function(t){var e=function(e){function r(r){var a=e.call(this,r)||this;return a.color=new t.Color(1,1,1,1),a.tempColor=new t.Color(0,0,0,0),a}return x(r,e),r.prototype.updateUVs=function(){var e=this.regionUVs;null!=this.uvs&&this.uvs.length==e.length||(this.uvs=t.Utils.newFloatArray(e.length));var r=this.uvs,a=this.uvs.length,i=this.region.u,n=this.region.v,s=0,o=0;if(this.region instanceof t.TextureAtlasRegion){var l=this.region,h=l.texture.getImage().width,u=l.texture.getImage().height;switch(l.degrees){case 90:i-=(l.originalHeight-l.offsetY-l.height)/h,n-=(l.originalWidth-l.offsetX-l.width)/u,s=l.originalHeight/h,o=l.originalWidth/u;for(var c=0;c<a;c+=2)r[c]=i+e[c+1]*s,r[c+1]=n+(1-e[c])*o;return;case 180:i-=(l.originalWidth-l.offsetX-l.width)/h,n-=l.offsetY/u,s=l.originalWidth/h,o=l.originalHeight/u;for(c=0;c<a;c+=2)r[c]=i+(1-e[c])*s,r[c+1]=n+(1-e[c+1])*o;return;case 270:i-=l.offsetY/h,n-=l.offsetX/u,s=l.originalHeight/h,o=l.originalWidth/u;for(c=0;c<a;c+=2)r[c]=i+(1-e[c+1])*s,r[c+1]=n+e[c]*o;return}i-=l.offsetX/h,n-=(l.originalHeight-l.offsetY-l.height)/u,s=l.originalWidth/h,o=l.originalHeight/u}else null==this.region?(i=n=0,s=o=1):(s=this.region.u2-i,o=this.region.v2-n);for(c=0;c<a;c+=2)r[c]=i+e[c]*s,r[c+1]=n+e[c+1]*o},r.prototype.getParentMesh=function(){return this.parentMesh},r.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},r.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var e=new r(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,null!=this.edges&&(e.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},r.prototype.newLinkedMesh=function(){var t=new r(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t.updateUVs(),t},r}(t.VertexAttachment);t.MeshAttachment=e}(A||(A={})),function(t){var e=function(e){function r(r){var a=e.call(this,r)||this;return a.closed=!1,a.constantSpeed=!1,a.color=new t.Color(1,1,1,1),a}return x(r,e),r.prototype.copy=function(){var e=new r(name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},r}(t.VertexAttachment);t.PathAttachment=e}(A||(A={})),function(t){var e=function(e){function r(r){var a=e.call(this,r)||this;return a.color=new t.Color(.38,.94,0,1),a}return x(r,e),r.prototype.computeWorldPosition=function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e},r.prototype.computeWorldRotation=function(e){var r=t.MathUtils.cosDeg(this.rotation),a=t.MathUtils.sinDeg(this.rotation),i=r*e.a+a*e.b,n=r*e.c+a*e.d;return Math.atan2(n,i)*t.MathUtils.radDeg},r.prototype.copy=function(){var t=new r(name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},r}(t.VertexAttachment);t.PointAttachment=e}(A||(A={})),function(t){var e=function(e){function r(r){var a=e.call(this,r)||this;return a.x=0,a.y=0,a.scaleX=1,a.scaleY=1,a.rotation=0,a.width=0,a.height=0,a.color=new t.Color(1,1,1,1),a.offset=t.Utils.newFloatArray(8),a.uvs=t.Utils.newFloatArray(8),a.tempColor=new t.Color(1,1,1,1),a}return x(r,e),r.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*t,i=-this.height/2*this.scaleY+this.region.offsetY*e,n=a+this.region.width*t,s=i+this.region.height*e,o=this.rotation*Math.PI/180,l=Math.cos(o),h=Math.sin(o),u=a*l+this.x,c=a*h,f=i*l+this.y,p=i*h,d=n*l+this.x,m=n*h,_=s*l+this.y,y=s*h,g=this.offset;g[r.OX1]=u-p,g[r.OY1]=f+c,g[r.OX2]=u-y,g[r.OY2]=_+c,g[r.OX3]=d-y,g[r.OY3]=_+m,g[r.OX4]=d-p,g[r.OY4]=f+m},r.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},r.prototype.computeWorldVertices=function(t,e,a,i){var n=this.offset,s=t.worldX,o=t.worldY,l=t.a,h=t.b,u=t.c,c=t.d,f=0,p=0;f=n[r.OX1],p=n[r.OY1],e[a]=f*l+p*h+s,e[a+1]=f*u+p*c+o,a+=i,f=n[r.OX2],p=n[r.OY2],e[a]=f*l+p*h+s,e[a+1]=f*u+p*c+o,a+=i,f=n[r.OX3],p=n[r.OY3],e[a]=f*l+p*h+s,e[a+1]=f*u+p*c+o,a+=i,f=n[r.OX4],p=n[r.OY4],e[a]=f*l+p*h+s,e[a+1]=f*u+p*c+o},r.prototype.copy=function(){var e=new r(name);return e.region=this.region,e.rendererObject=this.rendererObject,e.path=this.path,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,t.Utils.arrayCopy(this.uvs,0,e.uvs,0,8),t.Utils.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e},r.OX1=0,r.OY1=1,r.OX2=2,r.OY2=3,r.OX3=4,r.OY3=5,r.OX4=6,r.OY4=7,r.X1=0,r.Y1=1,r.C1R=2,r.C1G=3,r.C1B=4,r.C1A=5,r.U1=6,r.V1=7,r.X2=8,r.Y2=9,r.C2R=10,r.C2G=11,r.C2B=12,r.C2A=13,r.U2=14,r.V2=15,r.X3=16,r.Y3=17,r.C3R=18,r.C3G=19,r.C3B=20,r.C3A=21,r.U3=22,r.V3=23,r.X4=24,r.Y4=25,r.C4R=26,r.C4G=27,r.C4B=28,r.C4A=29,r.U4=30,r.V4=31,r}(t.Attachment);t.RegionAttachment=e}(A||(A={})),function(t){var e=function(){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return e.prototype.begin=function(t){},e.prototype.transform=function(e,r,a,i){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();t.JitterEffect=e}(A||(A={})),function(t){var e=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(r,a,i,n){var s=this.angle*t.MathUtils.degreesToRadians,o=r.x-this.worldX,l=r.y-this.worldY,h=Math.sqrt(o*o+l*l);if(h<this.radius){var u=e.interpolation.apply(0,s,(this.radius-h)/this.radius),c=Math.cos(u),f=Math.sin(u);r.x=c*o-f*l+this.worldX,r.y=f*o+c*l+this.worldY}},e.prototype.end=function(){},e.interpolation=new t.PowOut(2),e}();t.SwirlEffect=e}(A||(A={})),function(t){(function(e){var r=function(t){function r(r){return void 0===r&&(r=""),t.call(this,(function(t){return new e.ThreeJsTexture(t)}),r)||this}return x(r,t),r}(t.AssetManager);e.AssetManager=r})(t.threejs||(t.threejs={}))}(A||(A={})),function(t){(function(t){var e=function(e){function r(a,i){void 0===a&&(a=10920),void 0===i&&(i=function(t){});var n=e.call(this)||this;if(n.verticesLength=0,n.indicesLength=0,a>10920)throw new Error("Can't have more than 10920 triangles per batch: "+a);var o=n.vertices=new Float32Array(a*r.VERTEX_SIZE),l=n.indices=new Uint16Array(3*a),h=new s["BufferGeometry"],u=n.vertexBuffer=new s["InterleavedBuffer"](o,r.VERTEX_SIZE);return u.usage=WebGLRenderingContext.DYNAMIC_DRAW,h.setAttribute("position",new s["InterleavedBufferAttribute"](u,3,0,!1)),h.setAttribute("color",new s["InterleavedBufferAttribute"](u,4,3,!1)),h.setAttribute("uv",new s["InterleavedBufferAttribute"](u,2,7,!1)),h.setIndex(new s["BufferAttribute"](l,1)),h.getIndex().usage=WebGLRenderingContext.DYNAMIC_DRAW,h.drawRange.start=0,h.drawRange.count=0,n.geometry=h,n.material=new t.SkeletonMeshMaterial(i),n}return x(r,e),r.prototype.dispose=function(){if(this.geometry.dispose(),this.material instanceof s["Material"])this.material.dispose();else if(this.material)for(var t=0;t<this.material.length;t++){var e=this.material[t];e instanceof s["Material"]&&e.dispose()}},r.prototype.clear=function(){var t=this.geometry;t.drawRange.start=0,t.drawRange.count=0,this.material.uniforms.map.value=null},r.prototype.begin=function(){this.verticesLength=0,this.indicesLength=0},r.prototype.canBatch=function(t,e){return!(this.indicesLength+e>=this.indices.byteLength/2)&&!(this.verticesLength+t>=this.vertices.byteLength/2)},r.prototype.batch=function(t,e,a,i,n){void 0===n&&(n=0);for(var s=this.verticesLength/r.VERTEX_SIZE,o=this.vertices,l=this.verticesLength,h=0;h<e;)o[l++]=t[h++],o[l++]=t[h++],o[l++]=n,o[l++]=t[h++],o[l++]=t[h++],o[l++]=t[h++],o[l++]=t[h++],o[l++]=t[h++],o[l++]=t[h++];this.verticesLength=l;var u=this.indices;for(l=this.indicesLength,h=0;h<i;l++,h++)u[l]=a[h]+s;this.indicesLength+=i},r.prototype.end=function(){this.vertexBuffer.needsUpdate=this.verticesLength>0,this.vertexBuffer.updateRange.offset=0,this.vertexBuffer.updateRange.count=this.verticesLength;var t=this.geometry;t.getIndex().needsUpdate=this.indicesLength>0,t.getIndex().updateRange.offset=0,t.getIndex().updateRange.count=this.indicesLength,t.drawRange.start=0,t.drawRange.count=this.indicesLength},r.VERTEX_SIZE=9,r}(s["Mesh"]);t.MeshBatcher=e})(t.threejs||(t.threejs={}))}(A||(A={})),function(t){(function(e){var r=function(t){function e(e){var r=this,a="\n\t\t\t\tattribute vec4 color;\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tvarying vec4 vColor;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tvColor = color;\n\t\t\t\t\tgl_Position = projectionMatrix*modelViewMatrix*vec4(position,1.0);\n\t\t\t\t}\n\t\t\t",i="\n\t\t\t\tuniform sampler2D map;\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tvarying vec4 vColor;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(map, vUv)*vColor;\n\t\t\t\t}\n\t\t\t",n={uniforms:{map:{type:"t",value:null}},vertexShader:a,fragmentShader:i,side:s["DoubleSide"],transparent:!0,alphaTest:.5};return e(n),r=t.call(this,n)||this,r}return x(e,t),e}(s["ShaderMaterial"]);e.SkeletonMeshMaterial=r;var a=function(r){function a(e,a){void 0===a&&(a=function(t){});var i=r.call(this)||this;i.tempPos=new t.Vector2,i.tempUv=new t.Vector2,i.tempLight=new t.Color,i.tempDark=new t.Color,i.zOffset=.1,i.batches=new Array,i.nextBatchIndex=0,i.clipper=new t.SkeletonClipping,i.vertices=t.Utils.newFloatArray(1024),i.tempColor=new t.Color,i.materialCustomizer=a,i.skeleton=new t.Skeleton(e);var n=new t.AnimationStateData(e);return i.state=new t.AnimationState(n),i}return x(a,r),a.prototype.update=function(t){var e=this.state,r=this.skeleton;e.update(t),e.apply(r),r.updateWorldTransform(),this.updateGeometry()},a.prototype.dispose=function(){for(var t=0;t<this.batches.length;t++)this.batches[t].dispose()},a.prototype.clearBatches=function(){for(var t=0;t<this.batches.length;t++)this.batches[t].clear(),this.batches[t].visible=!1;this.nextBatchIndex=0},a.prototype.nextBatch=function(){if(this.batches.length==this.nextBatchIndex){var t=new e.MeshBatcher(10920,this.materialCustomizer);this.add(t),this.batches.push(t)}var r=this.batches[this.nextBatchIndex++];return r.visible=!0,r},a.prototype.updateGeometry=function(){this.clearBatches();var e=this.tempPos,r=this.tempUv,i=this.tempLight,n=this.tempDark,s=this.clipper,o=this.vertices,l=null,h=null,u=this.skeleton.drawOrder,c=this.nextBatch();c.begin();for(var f=0,p=this.zOffset,d=0,m=u.length;d<m;d++){var _=s.isClipping()?2:a.VERTEX_SIZE,y=u[d];if(y.bone.active){var g=y.getAttachment(),v=null,b=null,T=0;if(g instanceof t.RegionAttachment){var A=g;v=A.color,o=this.vertices,T=4*_,A.computeWorldVertices(y.bone,o,0,_),l=a.QUAD_TRIANGLES,h=A.uvs,b=A.region.renderObject.texture}else{if(!(g instanceof t.MeshAttachment)){if(g instanceof t.ClippingAttachment){var D=g;s.clipStart(y,D);continue}continue}var x=g;v=x.color,o=this.vertices,T=(x.worldVerticesLength>>1)*_,T>o.length&&(o=this.vertices=t.Utils.newFloatArray(T)),x.computeWorldVertices(y,0,x.worldVerticesLength,o,0,_),l=x.triangles,h=x.uvs,b=x.region.renderObject.texture}if(null!=b){var S=y.bone.skeleton,E=S.color,w=y.color,M=E.a*w.a*v.a,P=this.tempColor;P.set(E.r*w.r*v.r,E.g*w.g*v.g,E.b*w.b*v.b,M);var O=void 0,I=void 0,C=void 0,R=void 0;if(s.isClipping()){s.clipTriangles(o,T,l,l.length,h,P,null,!1);var F=s.clippedVertices,B=s.clippedTriangles;if(null!=this.vertexEffect)for(var N=this.vertexEffect,k=F,V=0,L=F.length;V<L;V+=_)e.x=k[V],e.y=k[V+1],i.setFromColor(P),n.set(0,0,0,0),r.x=k[V+6],r.y=k[V+7],N.transform(e,r,i,n),k[V]=e.x,k[V+1]=e.y,k[V+2]=i.r,k[V+3]=i.g,k[V+4]=i.b,k[V+5]=i.a,k[V+6]=r.x,k[V+7]=r.y;O=F,I=F.length,C=B,R=B.length}else{k=o;if(null!=this.vertexEffect){N=this.vertexEffect,V=0;for(var j=0,U=T;V<U;V+=_,j+=2)e.x=k[V],e.y=k[V+1],i.setFromColor(P),n.set(0,0,0,0),r.x=h[j],r.y=h[j+1],N.transform(e,r,i,n),k[V]=e.x,k[V+1]=e.y,k[V+2]=i.r,k[V+3]=i.g,k[V+4]=i.b,k[V+5]=i.a,k[V+6]=r.x,k[V+7]=r.y}else{V=2,j=0;for(var Y=T;V<Y;V+=_,j+=2)k[V]=P.r,k[V+1]=P.g,k[V+2]=P.b,k[V+3]=P.a,k[V+4]=h[j],k[V+5]=h[j+1]}O=o,I=T,C=l,R=l.length}if(0==I||0==R)continue;c.canBatch(I,R)||(c.end(),c=this.nextBatch(),c.begin());var X=c.material;null==X.uniforms.map.value&&(X.uniforms.map.value=b.texture),X.uniforms.map.value!=b.texture&&(c.end(),c=this.nextBatch(),c.begin(),X=c.material,X.uniforms.map.value=b.texture),X.needsUpdate=!0,c.batch(O,I,C,R,f),f+=p}s.clipEndWithSlot(y)}}s.clipEnd(),c.end()},a.QUAD_TRIANGLES=[0,1,2,2,3,0],a.VERTEX_SIZE=8,a}(s["Object3D"]);e.SkeletonMesh=a})(t.threejs||(t.threejs={}))}(A||(A={})),function(t){(function(e){var r=function(e){function r(t){var r=e.call(this,t)||this;return r.texture=new s["Texture"](t),r.texture.flipY=!1,r.texture.needsUpdate=!0,r}return x(r,e),r.prototype.setFilters=function(t,e){this.texture.minFilter=r.toThreeJsTextureFilter(t),this.texture.magFilter=r.toThreeJsTextureFilter(e)},r.prototype.setWraps=function(t,e){this.texture.wrapS=r.toThreeJsTextureWrap(t),this.texture.wrapT=r.toThreeJsTextureWrap(e)},r.prototype.dispose=function(){this.texture.dispose()},r.toThreeJsTextureFilter=function(e){if(e===t.TextureFilter.Linear)return s["LinearFilter"];if(e===t.TextureFilter.MipMap)return s["LinearMipMapLinearFilter"];if(e===t.TextureFilter.MipMapLinearNearest)return s["LinearMipMapNearestFilter"];if(e===t.TextureFilter.MipMapNearestLinear)return s["NearestMipMapLinearFilter"];if(e===t.TextureFilter.MipMapNearestNearest)return s["NearestMipMapNearestFilter"];if(e===t.TextureFilter.Nearest)return s["NearestFilter"];throw new Error("Unknown texture filter: "+e)},r.toThreeJsTextureWrap=function(e){if(e===t.TextureWrap.ClampToEdge)return s["ClampToEdgeWrapping"];if(e===t.TextureWrap.MirroredRepeat)return s["MirroredRepeatWrapping"];if(e===t.TextureWrap.Repeat)return s["RepeatWrapping"];throw new Error("Unknown texture wrap: "+e)},r}(t.Texture);e.ThreeJsTexture=r})(t.threejs||(t.threejs={}))}(A||(A={}));var S=A,E=S,w={name:"VglSpine",mixins:[D],props:{materialCustomizer:{type:Function,default:function(t){t.depthTest=!1}},skel:{type:Object,required:!0},skelScale:{type:Number,default:1},atlas:{type:String,required:!0},texture:{required:!0},animationTrack:{type:Number,default:0},animation:{type:String,required:!0},loop:{type:Boolean,default:!0},skin:{type:String,default:"default"}},data:function(){return{tick:Date.now()/1e3,destroyed:!1}},computed:{inst:function(){return new E.threejs.SkeletonMesh(this.getSpineData(this.skel,this.atlas,this.texture),this.materialCustomizer)}},watch:{inst:function(t,e){t!=e&&(this.setSkin(),this.setAnimation())}},methods:{getSpineData:function(t,e,r){var a=new E.TextureAtlas(e,(function(t){return"function"===typeof r?new E.threejs.ThreeJsTexture(r(t)):new E.threejs.ThreeJsTexture(r)})),i=new E.SkeletonJson(new E.AtlasAttachmentLoader(a));return i.scale=this.skelScale,i.readSkeletonData(t)},update:function(){if(!this.destroyed){var t=Date.now()/1e3,e=t-this.tick;this.tick=t,this.inst.update(e),this.vglObject3d.emit(),requestAnimationFrame(this._update)}},setAnimation:function(){this.inst.state.setAnimation(this.animationTrack,this.animation,this.loop)},setSkin:function(){this.inst.skeleton.setSkinByName(this.skin)}},mounted:function(){this.destroyed=!1,this.inst&&(this.setSkin(),this.setAnimation(),this.$watch("skin",this.setSkin),this.$watch("loop",this.setAnimation),this.$watch("animation",this.setAnimation),this.$watch("animationTrack",this.setAnimation),this._update=this.update.bind(this),requestAnimationFrame(this._update))},unmounted:function(){this.destroyed=!0,cancelAnimationFrame(this._update)}},M=r("3b69"),P=M["a"],O={name:"VglDragonBones",mixins:[D],props:{skel:{type:Object,required:!0},atlas:{type:Object,required:!0},texture:{required:!0},armatureName:{type:String,required:!0},dragonbonesName:{type:String},animation:{type:String,required:!0}},data:function(){return{destroyed:!1}},computed:{inst:function(){var t=P.ThreeFactory.factory,e="function"===typeof this.texture?new s["Texture"](this.texture()):new s["Texture"](this.texture);e.needsUpdate=!0,t.parseDragonBonesData(this.skel),t.parseTextureAtlasData(this.atlas,e);var r=t.buildArmatureDisplay(this.armatureName,this.dragonbonesName);return r}},watch:{inst:function(t,e){t!=e&&this.setAnimation()}},methods:{setAnimation:function(){this.inst.animation.play(this.animation)},update:function(){this.destroyed||(P.ThreeFactory.factory.dragonBones.advanceTime(-1),this.vglObject3d.emit(),requestAnimationFrame(this._update))}},mounted:function(){this.destroyed=!1,this.inst&&(this.setAnimation(),this.$watch("animation",this.setAnimation),this._update=this.update.bind(this),requestAnimationFrame(this._update))},unmounted:function(){this.destroyed=!0,cancelAnimationFrame(this._update)}},I=w,C=O,R={VglSpine:I,VglDragonbones:C};e["default"]=R},fb2c:function(t,e,r){var a=r("74e8");a("Uint32",(function(t){return function(e,r,a){return t(this,e,r,a)}}))},fc6a:function(t,e,r){var a=r("44ad"),i=r("1d80");t.exports=function(t){return a(i(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,r){var a=r("4930");t.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})}));